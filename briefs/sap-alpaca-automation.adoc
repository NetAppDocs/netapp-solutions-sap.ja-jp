---
sidebar: sidebar 
permalink: briefs/sap-alpaca-automation.html 
keywords: sb-4293, sap, alpaca, provisioning, lifecycle, management, automation, landscape 
summary: 本ドキュメントでは、NetApp®Snapshot™およびFlexClone®テクノロジをAlpaca自動化ワークフローに統合する方法について説明します。 
---
= SB-4293：AlpacaとNetApp SnapCenterによるSAPシステムのコピー、更新、クローニングのワークフローの自動化
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


[role="lead"]
本ドキュメントでは、NetApp®Snapshot™およびFlexClone®テクノロジをAlpaca自動化ワークフローに統合する方法について説明します。



== 解決策の概要

SAPのシステムとソリューションの運用は非常に複雑です。ただし、SAPを使用している企業では、システムとサービスがビジネスプロセスの中心となります。SAPシステム管理者は、システムのコピーや更新などの日常的な運用タスクを自動化することで、より多くのシステムをより少ない労力で管理し、再現可能な結果を生み出し、人為的ミスを減らすことができます。

本ドキュメントでは、NetApp®Snapshot™およびFlexClone®テクノロジをAlpaca自動化ワークフローに統合する方法について説明します。

ランドスケープをプロアクティブに自動化—Cloud and Anywhere（Alpaca）スイートは、SAPランドスケープ全体にわたる詳細な監視と監視を可能にする包括的な管理インターフェイスです。Alpacaは、SAPインフラの運用を合理化、迅速化し、最適な可用性と透明性を確保します。インフラを含む環境全体を管理するための包括的なツールを提供し、サービスの中断、ジョブの停止、輻輳などの異常をプロアクティブに通知します。このスイートは、マルチクラウドシナリオを含め、オンプレミス、ハイブリッド、オールクラウドの各環境でシームレスに動作し、あらゆるインフラへの適応性を確保するように設計されています。このモジュールベースのフレームワークは、SAPの標準的な管理タスクと通常の管理タスク、および停止時のフェイルオーバーなどの複雑なシナリオを自動化します。 管理者/専門家、オペレーター、マネージャーは、高度な制御と自動化をこれらの専門家に提供します。

image:sap-alpaca-image1.png["Alpacaプラットフォームの図"]

このドキュメントでは、Snapshotベースのバックアップのオーケストレーション、リストアの実行、FlexCloneボリュームの作成を行うツールであるNetApp SnapCenter®とAlpacaをどのように統合するかについて説明します。この統合により、SAP管理者は、SAPシステムの日常的な運用タスクを大幅に高速化できます。NetAppのSnapshot、FlexClone、SnapRestore®テクノロジは、ポインタベースのストレージテクノロジであるため、バックアップ、リストア、クローニングの処理を高速化します。このアプローチは高速であり、（既存データではなく）新規データや変更されたデータだけをストレージメディアに書き込む必要があるため、クローン処理中のストレージオーバーヘッドも削減されます。これは、オンプレミスのNetAppストレージシステムであっても、大手クラウドプロバイダ3社のいずれかにあるNetAppストレージソリューションであっても当てはまります。



=== 対象者

このドキュメントは、SAPシステムのコピーを手動で実行したことがあり、Alpacaを使用してこの作業を自動化したいSAPシステム管理者を対象としています。NetApp SnapCenterによってオーケストレーションされたNetAppのSnapshotテクノロジとFlexCloneテクノロジをAlpacaのワークフローと組み合わせることで、SAPシステムのコピーを完全に自動化する時間を短縮できます。



=== SAPシステムのクローニング、コピー、更新のシナリオ

SAPシステムのコピーは、SAPシステムのクローニング、SAPシステムのコピー、SAPシステムの更新という3つのプロセスの同義語としてよく使用されます。ワークフローとユースケースが異なるため、これらの処理を区別することが重要です。

* * SAPシステムのクローン*。SAPシステムクローンは、ソースSAPシステムの同一のクローンです。SAPシステムクローンは、一般に論理的な破損に対処したり、ディザスタリカバリのシナリオをテストしたりするのに使用されます。システムのクローニング処理では、ホスト名、インスタンス番号、およびSecure Identifier（SID；セキュア識別子）は同じままです。そのため、ターゲットシステムに適切なネットワークフェンシングを確立して、本番環境と通信しないようにすることが重要です。


image:sap-alpaca-image2.png["SAPシステムのクローンを示す図"]

* * SAPシステムのコピー*。SAPシステムのコピーは、ソースSAPシステムのデータを使用して新しいターゲットSAPシステムをセットアップすることです。たとえば、本番システムのデータを含む追加のテストシステムを新しいターゲットシステムにすることができます。ホスト名、インスタンス番号、SIDは、ソースシステムとターゲットシステムで異なります。 新しいシステムはソースシステムから分離されていません。


image:sap-alpaca-image3.png["SAPシステムのコピーを示す画像"]

* * SAPシステムの更新*。SAPシステムの更新とは、既存のターゲットSAPシステムをソースSAPシステムのデータで更新することです。ターゲットシステムは通常、サンドボックスシステムなどのSAPトランスポート環境の一部であり、本番システムのデータで更新されます。ソース・システムとターゲット・システムでは、ホスト名、インスタンス番号、およびSIDが異なります。


image:sap-alpaca-image4.png["SAPシステムの更新を示す図"]

これらは3つの異なるユースケースですが、データ管理プロセスは変わりません。3つのユースケースでは、同じデータ管理テクノロジ、NetApp SnapshotとFlexCloneを使用しています。



=== 解決策テクノロジ

ソリューション全体は、次の主要コンポーネントで構成されています。

* SnapCenterエージェントとSnapCenterデータベースプラグインがインストールされたSAPソースシステム
* SnapCenterエージェントとSnapCenterデータベースプラグインがインストールされたSAPターゲットシステム
* SAPソースシステムとSAPターゲットシステムが構成されたAlpacaシステム
* NetApp SnapCenter Server
* NetAppストレージシステム：
+
** オンプレミスの物理ハードウェア：AFF-A、AFF-C、ASA-A、ASA-C、FASシリーズ
** オンプレミスのSoftware-Defined Storage：ONTAP®Select
** NetAppクラウドストレージ：
+
*** Cloud Volumes ONTAP for AWS、Google Cloud、Azure
*** Azure NetApp Files
*** NetApp ONTAP 対応の Amazon FSX






次の図は、Alpacaサーバ、NetApp SnapCenterサーバ、NetAppストレージシステム、SAPソースシステム、SAPターゲットシステムを示しており、すべてがどのように統合されているかを示しています。その目的は、SnapCenter REST APIを使用して統合を可能な限り柔軟にし、既存のコンポーネント内ですでに行われている設定作業を最大限に再利用できるようにすることです。

image:sap-alpaca-image5.png["Alpacaサーバ、NetApp SnapCenterサーバ、NetAppストレージシステム、SAPソースシステム、SAPターゲットシステム、およびすべてがどのように統合されているかを示す図"]



=== ユースケースの概要

テストやトレーニングを目的として、ソースシステムのデータをターゲットシステムで利用できるようにする必要があるシナリオはいくつかあります。これらのテストシステムとトレーニングシステムは、ソースシステムのデータで定期的に更新して、テストとトレーニングが最新のデータセットで確実に実行されるようにする必要があります。このようなシステム更新処理は、インフラ、データベース、アプリケーションの各レイヤでの複数のタスクで構成され、自動化のレベルによっては数日かかることがあります。

運用を高速化し、タスクを自動化し、インフラ、データベース、アプリケーションレベルでの人為的ミスを排除するために、Alpaca Workflowsを使用できます。この統合では、ソースシステムからターゲットシステムにバックアップをリストアするのに時間がかかり、リソースを大量に消費しますが、その代わりにNetAppのSnapshotテクノロジとFlexCloneテクノロジを使用します。データベースのスピンアップに必要なすべてのタスクが、数時間ではなく数分で完了します。クローニングプロセスに要する時間はデータベースのサイズに左右されないため、非常に大規模なシステムでも数分で作成できます。Alpacaは、SAPの後処理側だけでなく、オペレーティングシステムやデータベースのレベルでもタスクを自動化することで、実行時間をさらに短縮します。

次の図は、自動化を使用すると運用効率が向上する可能性があることを示しています。

image:sap-alpaca-image6.png["自動化を使用すると運用効率が向上する可能性があることを示す画像"]



=== テクノロジコンポーネントの統合

AlpacaワークフローへのSnapCenterの実際の統合は、シェルスクリプトを使用してNetApp SnapCenter REST APIにアクセスすることで構成されています。このREST APIベースの統合では、SAPソースシステムのSnapshotコピーが作成され、FlexCloneボリュームが作成されてSAPターゲットシステムにマウントされます。ストレージ管理者やSAP管理者は、SnapCenterによってトリガーされ、SnapCenterエージェントによって実行されるスクリプトを開発して、日常的な運用タスクを自動化する方法を知っています。シェルスクリプトを介してSnapCenterタスクをトリガーするこの疎結合アーキテクチャにより、Alpacaをエンドツーエンドの自動化のワークフローエンジンとして使用することで、既存の自動化手順を再利用して目的の結果を迅速に達成することができます。



== まとめ

AlpacaとNetAppのデータ管理テクノロジを組み合わせることで、SAPシステム管理に関連する最も複雑で時間のかかるタスクに必要な時間と労力を大幅に削減できる強力なソリューションを提供します。また、この組み合わせは、人為的ミスがシステム間で引き起こす構成のずれを回避するのにも役立ちます。

システムの更新、コピー、クローン、ディザスタリカバリのテストは非常に機密性の高い手順であるため、このようなソリューションを実装することで貴重な管理時間を節約できます。また、基幹業務担当者がSAPシステム管理者に持つ信頼を強化することもできます。トラブルシューティングにかかる時間をどれだけ節約できるか、テストやその他の目的でシステムをコピーするのがどれだけ簡単かがわかります。これは、ソースシステムとターゲットシステムの運用場所（オンプレミス、パブリッククラウド、ハイブリッドクラウド、ハイブリッドマルチクラウド）に関係なく当てはまります。



== 追加情報の参照先

このドキュメントに記載されている情報の詳細については、次のドキュメントおよびWebサイトを参照してください。

* link:https://pcg.io/de/sap/alpaca/["アルパカ"]
* link:https://docs.netapp.com/us-en/netapp-solutions-sap/lifecycle/sc-copy-clone-introduction.html["SnapCenter を使用して SAP HANA システムのコピーおよびクローン処理を自動化"]
* link:https://docs.netapp.com/us-en/snapcenter/sc-automation/reference_supported_rest_apis.html["SnapCenter ServerとプラグインでサポートされるREST API"]




== バージョン履歴

[cols="25,25,50"]
|===
| バージョン | 日付 | 概要を更新します 


| バージョン0.1 | 04.2024 | 第1稿。 


| バージョン0.2 | 06.2024 | HTML形式に変換 
|===