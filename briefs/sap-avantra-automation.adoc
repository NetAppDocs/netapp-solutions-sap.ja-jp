---
sidebar: sidebar 
permalink: briefs/sap-avantra-automation.html 
keywords: sb-4294, sap, avantra, provisioning, lifecycle, management, automation, landscape 
summary: このドキュメントでは、AvantraとNetApp SnapCenter®プラットフォームの統合方法について説明します。 
---
= SB-4294：AvantraとNetApp SnapCenterによるSAPシステムのコピー、更新、クローニングのワークフローの自動化
:allow-uri-read: 


[role="lead"]
このドキュメントでは、AvantraとNetApp SnapCenter®プラットフォームの統合方法について説明します。



== 解決策の概要

SAPシステムとソリューションの運用は非常に複雑です。ただし、SAPを使用している企業では、これらのシステムとサービスがビジネスプロセスの中心となります。SAPシステム管理者は、システムのコピーや更新などの日常的な運用タスクを自動化することで、より多くのシステムをより少ない労力で管理し、再現可能な結果を生み出し、人為的ミスを減らすことができます。

このドキュメントでは、NetApp®Snapshot™およびFlexClone®テクノロジをAvantra自動化ワークフローに統合する方法について説明します。Avantraは、IT運用とサービスの自動管理に重点を置いたIT管理プラットフォームです。ITインフラを監視、自動化、管理するためのソリューションを提供し、ITシステムの効率と信頼性を向上させます。Avantraを使用すると、企業はIT環境をプロアクティブに監視し、問題を早期に検出し、トラブルシューティングやシステムパフォーマンスの最適化のための自動アクションを実行できます。通常、このプラットフォームは他のIT管理ツールと統合されており、クラウド、オンプレミス、ハイブリッドインフラなどのさまざまな環境に導入できます。

このドキュメントでは、AvantraとNetApp SnapCenter®プラットフォームの統合方法について説明します。NetApp SnapCenterは、Snapshotベースのバックアップのオーケストレーション、リストアの実行、およびFlexCloneボリュームの作成を行うためのツールです。この統合により、SAP管理者はNetAppの手法を使用して、SAPシステムの日常的な運用タスクを大幅にスピードアップできます。Snapshot、FlexClone、NetApp SnapRestore®ソフトウェアはポインタベースのNetAppストレージテクノロジであるため、バックアップ、リストア、クローニングの処理を高速化できます。このアプローチは速いです。また、オンプレミスのNetAppストレージシステムであるか、大手クラウドプロバイダ3社のいずれかにあるNetAppストレージソリューションであるかに関係なく、新規データや変更されたデータのみがストレージメディアに書き込まれるため、クローン処理時のストレージオーバーヘッドも削減されます。



=== 対象者

このドキュメントは、以前にSAPシステムのコピーを手動で実行したことがあり、Avantraを使用してこの作業を自動化したいSAPシステム管理者を対象としています。NetApp SnapCenterによってオーケストレーションされたNetApp SnapshotとFlexCloneテクノロジをAvantraのワークフローと組み合わせる目的は、SAPシステムのコピーを完全に自動化することで高速化することです。



=== SAPシステムのクローニング、コピー、更新のシナリオ

SAPシステムのコピーという用語は、多くの場合、SAPシステムのクローニング、SAPシステムのコピー、SAPシステムの更新の3つのプロセスを総称して使用されます。ワークフローとユースケースが異なるため、処理を区別することが重要です。

* * SAPシステムのクローン*。SAPシステムクローンは、ソースSAPシステムの同一のクローンです。SAPシステムクローンは、一般に論理的な破損に対処したり、ディザスタリカバリのシナリオをテストしたりするのに使用されます。システムのクローニング処理では、ホスト名、インスタンス番号、およびSecure Identifier（SID；セキュア識別子）は同じままです。そのため、本番環境と通信できないように、ターゲットシステムの適切なネットワークフェンシングを設定することが重要です。


image:sap-avantra-image1.png["SAPシステムのクローンを示す図"]

* * SAPシステムのコピー*。SAPシステムのコピーは、ソースSAPシステムのデータを使用して新しいターゲットSAPシステムをセットアップすることです。たとえば、本番システムのデータを含む追加のテストシステムをターゲットシステムにすることができます。ホスト名、インスタンス番号、SIDは、ソースシステムとターゲットシステムで異なります。 新しいシステムはソースシステムから分離されていません。


image:sap-avantra-image2.png["SAPシステムのコピーを示す画像"]

* * SAPシステムの更新。*SAPシステムの更新とは、既存のターゲットSAPシステムをソースSAPシステムのデータで更新することです。ターゲットシステムは通常、サンドボックスシステムなどのSAPトランスポート環境の一部であり、本番システムのデータで更新されます。ホスト名、インスタンス番号、SIDはソースシステムとターゲットシステムで異なります。


image:sap-avantra-image3.png["SAPシステムの更新を示す図"]

3つのユースケースがありますが、データ管理プロセスは変わりません。3つのユースケースでは、基盤となるデータ管理テクノロジであるNetApp SnapshotとFlexCloneが活用されています。



=== 解決策テクノロジ

ソリューション全体は、次の主要コンポーネントで構成されています。

* SnapCenterエージェントとSnapCenterデータベースプラグインがインストールされたSAPソースシステム
* SnapCenterエージェントとSnapCenterデータベースプラグインがインストールされたSAPターゲットシステム
* SAPソースシステムとSAPターゲットシステムが構成されたAvantraシステム
* NetApp SnapCenter Server
* NetAppストレージシステム：
+
** オンプレミスの物理ハードウェア：NetApp AFF Aシリーズ、AFF Cシリーズ、ASA Aシリーズ、ASA Cシリーズ、またはFASシリーズ
** オンプレミスのSoftware-Defined Storage：NetApp ONTAP®Select
** NetAppクラウドストレージ：
+
*** NetApp Cloud Volumes ONTAP®をAWS、Google Cloud、Azureに導入
*** Azure NetApp Files
*** Amazon FSx for NetApp ONTAP（AWS）






次の図は、Avantraサーバ、NetApp SnapCenterサーバ、NetAppストレージシステム、SAPソースシステムとSAPターゲットシステム、およびすべての統合方法を示しています。その目的は、既存のコンポーネント内ですでに行われている設定作業を最大限に再利用できるように、SnapCenter REST APIを使用して統合を可能な限り柔軟にすることでした。

image:sap-avantra-image4.png["Avantraサーバ、NetApp SnapCenterサーバ、NetAppストレージシステム、SAPソースシステム、SAPターゲットシステム、およびすべてのシステムがどのように統合されているかを示す図"]



=== ユースケースの概要

テストやトレーニングを目的として、ソースシステムのデータをターゲットシステムで利用できるようにする必要があるシナリオはいくつかあります。これらのテストシステムとトレーニングシステムは、ソースシステムのデータで定期的に更新して、テストとトレーニングが最新のデータセットで確実に実行されるようにする必要があります。このようなシステム更新処理は、インフラ、データベース、アプリケーションの各レイヤでの複数のタスクで構成され、自動化のレベルによっては数日かかることがあります。

時間を短縮し、運用タスクを自動化し、インフラストラクチャ、データベース、アプリケーションレベルで人的エラーを排除するために、Avantraワークフローを使用できます。この統合では、ソースシステムからターゲットシステムにバックアップをリストアする（時間がかかり、リソース消費量も多い）代わりに、NetApp SnapshotとFlexCloneテクノロジを使用します。データベースのスピンアップに必要なすべてのタスクが、数時間ではなく数分で完了します。クローニングプロセスに要する時間はデータベースのサイズに左右されないため、非常に大規模なシステムでも数分で作成できます。Avantraは、SAPの後処理側だけでなく、オペレーティングシステムおよびデータベースレベルでもタスクを自動化することで、実行時間をさらに短縮します。

次の図は、自動化を使用すると運用効率が向上する可能性があることを示しています。

image:sap-avantra-image5.png["自動化を使用すると運用効率が向上する可能性があることを示す画像"]



=== さまざまなテクノロジコンポーネントの統合

AvantraワークフローでのSnapCenterの実際の統合は、JavaScriptを使用してNetApp SnapCenter REST APIにアクセスすることで構成されています。このREST APIベースの統合では、SAPソースシステムのSnapshotコピーが作成され、FlexCloneボリュームが作成されてSAPターゲットシステムにマウントされます。

ストレージ管理者やSAP管理者は、SnapCenterによってトリガーされ、SnapCenterエージェントによって実行されるスクリプトを開発して、毎日繰り返される運用タスクを自動化するための時間とノウハウを投入してきました。JavaScriptを使用してSnapCenterタスクをトリガーするこの疎結合アーキテクチャを使用すると、既存の自動化手順を再利用して、エンドツーエンドの自動化のワークフローエンジンとしてAvantraを使用して、目的の結果を迅速に達成できます。



== まとめ

AvantraとNetAppのデータ管理テクノロジーを組み合わせることで、SAPシステム管理に関連する最も複雑で時間のかかるタスクに必要な時間と労力を大幅に削減できる強力なソリューションを提供します。また、この組み合わせは、人為的ミスがシステム間で引き起こす構成のずれを回避するのにも役立ちます。

システムの更新、コピー、クローン、ディザスタリカバリのテストは非常に機密性の高い手順であるため、このようなソリューションを実装することで貴重な管理時間を節約できます。また、基幹業務のスタッフがSAPシステム管理者に持つ信頼を強化することもできます。トラブルシューティングにかかる時間をどれだけ節約できるか、テストやその他の目的でシステムをコピーするのがどれだけ簡単かを確認できます。このソリューションには、ソースシステムとターゲットシステムがオンプレミス、パブリッククラウド、ハイブリッドマルチクラウド環境、ハイブリッドマルチクラウド環境のどこで運用されているかに関係なく、これらのメリットがあります。



== 追加情報の参照先

このドキュメントに記載されている情報の詳細については、以下のドキュメントや Web サイトを参照してください。

* link:https://www.avantra.com/["アバントラ"]
* link:https://docs.netapp.com/us-en/netapp-solutions-sap/lifecycle/sc-copy-clone-introduction.html["SnapCenter を使用して SAP HANA システムのコピーおよびクローン処理を自動化"]
* link:https://docs.netapp.com/us-en/snapcenter/sc-automation/reference_supported_rest_apis.html["SnapCenter ServerとプラグインでサポートされるREST API"]




== バージョン履歴

[cols="25,25,50"]
|===
| バージョン | 日付 | 概要を更新します 


| バージョン0.1 | 03.2024 | 第1稿。 


| バージョン0.2 | 03.2024 | NetAppの同僚からのフィードバックの統合。 


| バージョン0.3 | 04.2024 | 要求された変更を統合してNetAppブランディングに準拠 


| バージョン0.4 | 06.2024 | HTML形式に変換 
|===