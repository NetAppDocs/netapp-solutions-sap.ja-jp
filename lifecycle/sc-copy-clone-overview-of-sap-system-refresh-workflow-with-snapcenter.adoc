---
sidebar: sidebar 
permalink: lifecycle/sc-copy-clone-overview-of-sap-system-refresh-workflow-with-snapcenter.html 
keywords: overview, sap system refresh, workflow 
summary: SnapCenter には、既存のSnapshotバックアップからデータセットのクローンを管理するためのワークフローが用意されています。このクローンデータセットはFlexCloneボリュームで、ソースシステムからHANAデータボリュームを迅速にプロビジョニングしてターゲットシステムに接続するために使用できます。したがって、QA、テスト、サンドボックス、またはトレーニングシステムのシステム更新処理を実行する場合に最適です。 
---
= SnapCenter を使用したSAPシステムの更新ワークフローの概要
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


[role="lead"]
SnapCenter には、既存のSnapshotバックアップからデータセットのクローンを管理するためのワークフローが用意されています。このクローンデータセットはFlexCloneボリュームで、ソースシステムからHANAデータボリュームを迅速にプロビジョニングしてターゲットシステムに接続するために使用できます。したがって、QA、テスト、サンドボックス、またはトレーニングシステムのシステム更新処理を実行する場合に最適です。

SnapCenter クローニングワークフローは、ストレージレイヤで必要なすべての処理を処理します。また、スクリプトを使用して拡張し、ホスト固有の処理とHANAデータベース固有の処理を実行することもできます。このドキュメントでは、スクリプトを使用して、ターゲットホストでマウントおよびアンマウントの処理を実行するほか、HANAデータベースのリカバリとシャットダウンの処理を実行します。SnapCenter ワークフローにスクリプトを使用してさらに自動化を進めることで、必要なHANAデータベースの処理はすべて処理されますが、SAPの後処理の手順については説明しません。SAPの後処理は、手動またはサードパーティのツールを使用して実行する必要があります。


NOTE: スクリプトを使用して自動化されたすべての手順を手動で実行することもできます。ただし、ターゲットホストでのマウント処理については、FlexCloneボリュームのストレージシステムのジャンクションパスを把握しておく必要があります。ジャンクションパスはSnapCenter 内では表示されないため、ジャンクションパスをストレージシステムで直接検索するか、ターゲットホストにSnapCenter 環境変数を提供する単純なスクリプトを使用する必要があります。詳細については、を参照してください link:sc-copy-clone-automation-example-scripts.html["「自動化スクリプトの例」"]

SnapCenter を使用したSAPシステムの更新ワークフローは、次の図に示す5つの主要な手順で構成されています。

. ターゲットシステムの初期インストールと準備を1回だけ行います。
. SnapCenter クローンの作成ワークフローを次に示します。
. SAPの後処理（手動または他社製ツールを使用）
. システムはテスト/ QAシステムとして使用できます。
. 新しいシステムの更新が要求されると、SnapCenter クローンの削除ワークフローを使用してFlexCloneボリュームが削除され、ステップ2で更新が再開されます。


image:sc-copy-clone-image7.png["エラー：グラフィックイメージがありません"]

ほとんどの場合、テスト/ QA用のターゲットシステムは2週間以上使用され、1~2週間後にはFlexCloneによる容量削減は維持されなくなりました。ソースシステムのSnapshotバックアップをFlexCloneボリュームから解放して、SnapCenter の保持管理によって削除できるようにすることが重要です。そのため、FlexCloneボリュームはただちに、または数日後にスプリットすることを推奨します。クローンスプリット処理ではクローンボリュームの使用はブロックされないため、HANAデータベースの使用中にいつでも実行できます。


NOTE: FlexCloneボリュームをスプリットすると、SnapCenter はターゲットシステムに作成されたすべてのバックアップを削除します。

クローンスプリットを含む更新処理は、次の手順で構成されます（次の図）。

. ターゲットシステムの1回限りの初期インストールと準備を行います。
. SnapCenter クローンの作成ワークフロー
. SnapCenter クローンスプリットのワークフロー
. SAPの後処理（手動または他社製ツールを使用）
. システムをテスト/ QAシステムとして使用できるようになりました。
. 新しいシステムの更新が要求されると、シャットダウンとアンマウントの追加手順でSnapCenter クローン作成ワークフローが使用されます。



NOTE: 以前にスプリットされていた古いデータボリュームは、ストレージシステムで手動で削除する必要があります。

次の図は、クローンスプリットを使用したSnapCenter でのSAPシステムの更新ワークフローの概要を示しています。

image:sc-copy-clone-image8.png["エラー：グラフィックイメージがありません"]

を参照してください link:sc-copy-clone-sap-hana-system-refresh-with-snapcenter.html["「SnapCenter でSAP HANAシステムを更新」"] に、両方のシステム更新ワークフローの詳しい手順概要 を示します。
