---
sidebar: sidebar 
permalink: lifecycle/lama-ansible-use-cases-for-system-refresh,-copy,-and-cloning.html 
keywords: data refresh, QA, text, sandbox, training, use case 
summary: テストやトレーニングの目的で、ソースシステムのデータをターゲットシステムで使用できるようにする必要があるシナリオは複数あります。テストおよびトレーニング用のシステムは、ソースシステムのデータで定期的に更新し、現在のデータセットでテストとトレーニングが実行されていることを確認する必要があります。このシステム更新処理は、インフラ、データベース、アプリケーションの各レイヤ上で実行される複数のタスクで構成されます。自動化のレベルによっては、数日かかる場合があります。 
---
= システムの更新、コピー、クローニングのユースケース
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


[role="lead"]
テストやトレーニングの目的で、ソースシステムのデータをターゲットシステムで使用できるようにする必要があるシナリオは複数あります。テストおよびトレーニング用のシステムは、ソースシステムのデータで定期的に更新し、現在のデータセットでテストとトレーニングが実行されていることを確認する必要があります。

このシステム更新処理は、インフラ、データベース、アプリケーションの各レイヤ上で実行される複数のタスクで構成されます。自動化のレベルによっては、数日かかる場合があります。

image:lama-ansible-image2.png["この図は、主な開発環境から、一時的なプロジェクト分割、修理システム、トレーニングシステム、およびsanboxシステムまでの環境ワークフローを示しています。ここには、システム更新、システムコピー、およびシステムクローンがこれらのさまざまな目的にどのように使用されているかが表示されます。"]

SAP LaMaとネットアップのクローニングワークフローを使って、インフラレイヤとデータベースレイヤで必要なタスクを高速化し、自動化できます。SAP LaMaは、バックアップをソースシステムからターゲットシステムにリストアする代わりに、NetApp SnapshotコピーとNetApp FlexCloneテクノロジを使用して、起動したHANAデータベースまでの必要なタスクを、次の図に示すように数時間ではなく数分で実行します。クローニングプロセスに要する時間はデータベースのサイズに左右されないため、非常に大規模なシステムでも数分で作成できます。また、オペレーティングシステムとデータベースレイヤ、およびSAPの後処理側でタスクを自動化することにより、ランタイムをさらに削減できます。

image:lama-ansible-image3.png["この図は、NetApp Snapshotコピーを使用する場合と使用しない場合のクローニングプロセスの比較、およびNetApp FlexCloneテクノロジの比較を示しています。これにより、処理速度が大幅に向上します。"]



== 論理的破損に対処する

論理的破損は、ソフトウェアエラー、人為的エラー、破壊行為などが原因で発生する可能性があります。残念ながら、論理的破損は、標準的な高可用性ソリューションやディザスタリカバリソリューションでは対処できないことがよくあります。その結果、論理的な破損が発生したレイヤ、アプリケーション、ファイルシステム、またはストレージによっては、ダウンタイムを最小限に抑え、データ損失要件を許容できる範囲で満たすことができない場合があります。

最悪のケースは、SAPアプリケーションが論理的に破損した場合です。SAP アプリケーションは多くの場合、異なるアプリケーションが相互に通信してデータを交換する環境で動作します。このため、論理的な破損が発生した SAP システムはリストアとリカバリを実行しないことを推奨します。破損が発生する前の時点にシステムをリストアすると、データが失われます。また、 SAP ランドスケープは同期されず、さらにポストプロセスが必要になります。

SAPシステムをリストアする代わりに、別の修復システムで問題を分析して、システム内の論理エラーを修正する方法を推奨します。ルート原因分析には、ビジネスプロセスやアプリケーション所有者の関与が必要です。このシナリオでは、論理的破損が発生する前に格納されたデータに基づいて、修復システム（本番用システムのクローン）を作成します。リペアシステム内では、必要なデータをエクスポートし、本番システムにインポートできます。このアプローチでは、本番用システムを停止する必要はなく、最良のシナリオでは、データの損失だけでなく、ごくわずかなデータの損失も発生します。

リペアシステムを設定する際には、柔軟性とスピードが不可欠です。ネットアップのストレージベースのSnapshotバックアップでは、複数の整合性のあるデータベースイメージを使用し、NetApp FlexCloneテクノロジを使用して本番用システムのクローンを作成できます。ファイルベースのバックアップからリダイレクトされたリストアを使用して修復システムを設定する場合、FlexCloneボリュームは数時間ではなく数秒で作成できます。

image:lama-ansible-image4.png["この図は、FlexCloneテクノロジを使用してクローニングシステムから修復システムを作成する、ステップバイステップのプロセスを示しています。"]



== ディザスタリカバリのテスト

効果的なディザスタリカバリ戦略を策定するには、必要なワークフローをテストする必要がテストでは、戦略が機能するかどうか、および内部ドキュメントで十分かどうかを検証します。また、管理者は必要な手順をトレーニングできます。

SnapMirrorを使用したストレージレプリケーションでは、RTOとRPOをリスクにさらすことなく、ディザスタリカバリのテストを実行できます。ディザスタリカバリテストは、データレプリケーションを中断することなく実行できます。非同期SnapMirrorと同期SnapMirrorのディザスタリカバリテストでは、ディザスタリカバリターゲットでSnapshotバックアップとFlexCloneボリュームを使用します。

SAP LaMaは、テスト手順 全体のオーケストレーションに使用でき、ネットワークの遮断やホストのメンテナンスなどにも対応します。

image:lama-ansible-image5.png["この図は、プライマリデータセンター、ローカルDRデータセンター、およびリモートDRデータセンターのネットアップストレージシステムの関係を示しています。同期SnapMirror関係と非同期SnapMirror関係の両方で接続されます。"]
