---
sidebar: sidebar 
permalink: backup/hana-sc-generic-sc-backup-solution.html 
keywords: SAP HANA, SnapCenter, backup and recovery, Azure NetApp Files, FSx for NetApp ONTAP 
summary:  
---
= SAP HANA のSnapCenterバックアップとリカバリについて学ぶ
:allow-uri-read: 


[role="lead"]
SnapCenter は、ストレージベースのスナップショット コピー、自動保持管理、 NetApp ONTAP、 Azure NetApp Files、FSx for NetApp ONTAPとの統合を使用して、SAP HANA データベースの包括的なバックアップおよびリカバリ機能を提供します。このソリューションは、アプリケーション整合性のあるデータベース バックアップ、非データ ボリュームの保護、ブロック整合性チェック、 SnapVaultまたは ANF バックアップを使用したセカンダリ ストレージへのレプリケーションをサポートします。

SnapCenter Backup 解決策 for SAP HANA には、次の領域があります。

* バックアップ処理、スケジュール設定、保持の管理
* ストレージベースのSnapshotコピーを使用したSAP HANAデータのバックアップ
* ストレージベースのスナップショットコピーを使用した非データボリュームのバックアップ（例：/hana/shared）
* データベースブロックの整合性チェック操作
+
** ファイルベースのバックアップを使用する
** SAP HANA hdbpersdiagツールを使用する


* スナップショットバックアップのセカンダリバックアップ場所へのレプリケーション
+
** SnapVault/ SnapMirrorの使用
** Azure NetApp Files ANFバックアップの使用


* 不要な SAP HANA バックアップカタログの削除
+
** HANAデータのバックアップ（スナップショットおよびファイルベース）
** HANAログバックアップ用


* リストア処理とリカバリ処理
+
** リストアとリカバリの自動化
** 単一テナントの復元操作




データベース データのバックアップは、SAP HANA 用のSnapCenterプラグインと組み合わせてSnapCenterによって実行されます。プラグインは、SAP HANA 内部データベース スナップショットをトリガーし、ストレージ システム上に作成されるスナップショットが、SAP HANA データベースのアプリケーション整合性のあるイメージに基づくものとなるようにします。

SnapCenter、 SnapVaultまたはSnapMirror^.^ 機能を使用して、一貫性のあるデータベース イメージをセカンダリ バックアップまたは災害復旧の場所に複製できます。通常、プライマリ ストレージとセカンダリ ストレージのバックアップには異なる保持ポリシーが定義されます。SnapCenter はプライマリ ストレージでの保持を処理し、 ONTAP はセカンダリ バックアップ ストレージでの保持を処理します。

SnapCenter では、SAP HANA関連のすべてのリソースを完全にバックアップするために、ストレージベースのSnapshotコピーにSAP HANAプラグインを使用して、データ以外のすべてのボリュームをバックアップすることもできます。非データボリュームをデータベースデータバックアップとは別にスケジュール設定して、個別の保持ポリシーや保護ポリシーを有効にすることができます。

SAP では、ストレージベースのスナップショット バックアップと永続レイヤーの週次整合性チェックを組み合わせることを推奨しています。ファイルベースのバックアップを実行するか、SAP hdbpersdiag ツールを実行することにより、 SnapCenter内からブロック整合性チェックを実行できます。

構成された保持ポリシーに基づいて、 SnapCenter はプライマリ ストレージのデータ ファイル バックアップ、ログ ファイル バックアップ、および SAP HANA バックアップ カタログのハウスキーピングを管理します。

SnapCenter はプライマリストレージでの保持を処理し、 ONTAP はセカンダリバックアップの保持を管理します。

次の図は、SnapCenter のバックアップおよび保持の管理処理の概要を示しています。

SAP HANA データベースのストレージベースの Snapshot バックアップを実行する場合、 SnapCenter は次のタスクを実行します。

* バックアップ操作:
+
** 内部の HANA データベース スナップショットをトリガーして、永続化レイヤーでアプリケーションの一貫性のあるイメージを取得します。
** データボリュームのストレージベースのスナップショットバックアップを作成します
** 内部 HANA データベース スナップショットを閉じ、バックアップ操作を確認または中止します。この手順では、バックアップを HANA バックアップ カタログに登録します。


* 保持管理:
+
** 定義された保持期間に基づいてストレージスナップショットバックアップを削除します
** ストレージ層のスナップショットを削除します
** SAP HANAバックアップカタログのエントリを削除します
** 最も古いデータ バックアップよりも古いすべてのログ バックアップを削除します。ログバックアップはファイルシステムとSAP HANAバックアップカタログから削除されます。




image:hana-sc-generic-image-006.png["幅=601、高さ=285"]

SnapVault/ SnapMirrorまたは ANF バックアップを使用してセカンダリ バックアップが設定されている場合、プライマリ ボリュームで作成されたスナップショットはセカンダリ バックアップ ストレージに複製されます。SnapCenter は、セカンダリ バックアップの可用性に応じて、HANA バックアップ カタログとログ バックアップの保持を管理します。

image:hana-sc-generic-image-007.png["幅=601、高さ=278"]
