---
sidebar: sidebar 
permalink: backup/anf-cba-cloud-backup-for-applications-for-sap-hana-on-anf.html 
keywords: sap hana releases, configurations, operations 
summary: SAP HANAのファイルベースのバックアップは、データベースブロックの整合性チェックに使用され、オンデマンドまたはスケジュールされたバックアップ処理として実行することもできます。ポリシーベースの保持管理は、ファイルシステムレベルおよびHANAバックアップカタログ内で実行されます。 
---
= 『Cloud Backup for Applications for SAP HANA on ANF』を参照してください
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


link:anf-cba-cloud-backup-for-applications-architecture.html["以前：Cloud Backup for Applicationsのアーキテクチャ"]



== 解決策の概要

Cloud Backup for Applicationでは、次のコンポーネントに対してSnapshotベースのバックアップ処理がサポートされます。

. * SAP HANAシステム*データボリューム。
. * SAP HANAデータベースのデータボリューム以外のボリューム*。たとえば、などです `/hana/shared` ボリュームやSAPアプリケーションサーバのデータ
. *特定のHANAシステムに属していないグローバル非データボリューム*。たとえば、SAP転送ディレクトリなどです `/usr/sap/trans`。


これらのコンポーネントのバックアップ処理には、次のものがあります。

* スケジュールバックアップまたはオンデマンドバックアップ
* オプションのプリスクリプトとポストスクリプト
* ポリシーベースの保持管理
+
** （ANFボリュームレベルのSnapshot用）
** SAP HANAバックアップカタログ内（HANAデータボリュームのバックアップ用）




SAP HANAのファイルベースのバックアップは、データベースブロックの整合性チェックに使用され、オンデマンドまたはスケジュールされたバックアップ処理として実行することもできます。ポリシーベースの保持管理は、ファイルシステムレベルおよびHANAバックアップカタログ内で実行されます。

HANAデータベースのログバックアップの保持管理は、定義されたHANAデータベースデータバックアップの保持（Snapshotベースまたはファイルベース）に基づいて実行されます。

CBAでは、すべてのSnapshotベースバックアップのリストア処理がサポートされます。ファイルベースのバックアップは、ネイティブのHANAツールを使用してのみリストアできます。

image:anf-cba-image6.png["この図は、HANAシステムのマルチテナントデータベースコンテナとグローバルな非データボリュームのバックアップとリストアを示しています。"]



== 解決策 の運用

Snapshotデータのバックアップは、Cloud Backup for Applicationsで実行されます。そのためには、ストレージレイヤで作成されるSnapshotコピーが、整合性のあるSAP HANAデータベースのイメージに基づいて作成されるように、SAP HANAデータベースのバックアップセーブポイントがトリガーされます。を参照してください https://help.sap.com/docs/SAP_HANA_PLATFORM/6b94445c94ae495c83a19646e7c3fd56/b41a2823576f4726be649bc98e61d62c.html?q=sap%20hana%20snapshot%20backup["SAPアドミニストレーションガイド"^] を参照してください。

SAP HANA関連のすべてのリソースを完全にバックアップできるように、Cloud Backup for Applicationsでは、ストレージベースのSnapshotコピーを使用してデータボリューム以外のすべてのボリュームをバックアップすることもできます。非データボリュームをデータベースデータバックアップとは別にスケジュール設定して、個別の保持ポリシーや保護ポリシーを有効にすることができます。

SAP では、ブロックの整合性チェックを実行するために、ストレージベースの Snapshot バックアップと週次ファイルベースのバックアップを組み合わせることを推奨しています。ブロック整合性チェックは、CBA内から実行できます。ブロック整合性チェック（ファイルベース）バックアップは、バックアップを別の格納場所にオフロードする目的でも使用されます。

Cloud Backup for Applicationsは、設定可能な保持ポリシーに基づいて、データバックアップ、ログバックアップ、SAP HANAバックアップカタログの削除を管理します。

次の図は、バックアップ解決策をまとめたものです。

image:anf-cba-image7.png["この図は、バックアップ解決策 をまとめたものです。"]

データ以外のボリュームのストレージベースのSnapshotバックアップを実行すると、Cloud Backup for Applicationsは次のタスクを実行します。

. データボリューム以外のストレージ Snapshot コピーを作成します。
. 定義した保持ポリシーに基づいてストレージ Snapshot コピーを削除します。


SAP HANAデータベースのストレージベースのSnapshotバックアップを実行すると、Cloud Backup for Applicationsは次のタスクを実行します。

. SAP HANA のバックアップセーブポイントを作成して、永続性レイヤに整合性のあるイメージを作成します。
. データボリュームのストレージ Snapshot コピーを作成します。
. SAP HANA バックアップカタログにストレージの Snapshot バックアップを登録します。
. SAP HANA のバックアップセーブポイントを解放します。
. 定義した保持ポリシーに基づいてストレージ Snapshot コピーを削除します。
. 定義された保持ポリシーに基づいて、 SAP HANA のバックアップカタログのエントリを削除します。
. データバックアップが手動または保持ポリシーに基づいて削除されるたびに、Cloud Backup for Applicationsは最も古いデータバックアップよりも古いログバックアップをすべて削除します。ログバックアップは、ファイルシステムと SAP HANA のバックアップカタログから削除されます。




== サポートされている SAP HANA リリースと構成

Cloud Backup for Applicationsでは、単一テナントまたは複数テナントのHANA MDCシステムがサポートされ、次の構成オプションが用意されています。

* SAP HANA 2.0 SPS4 以降
* SAP HANAシングルホストシステム
* SAP HANAマルチホストシステム（を参照） link:anf-cba-backup-operations-with-hana-system-replication.html#backup-operations-with-hana-multiple-host-systems["『Backup operations with HANA multiple-host systems』"]
* の説明に従って、HANA System Replication（HSR）を使用して設定されたSAP HANAシステム link:anf-cba-backup-operations-with-hana-system-replication.html["『Backup Operations with HANA System Replication』"]


link:anf-cba-cloud-backup-for-applications-concepts-and-best-practices.html["次の記事：Cloud Backup for Applicationsの概念とベストプラクティス"]
