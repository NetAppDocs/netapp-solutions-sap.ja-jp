<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="b89b4b47543b3482418589214b77fa25" category="summary">SAP HANA ホストは、冗長 10GbE 以上のネットワークインフラを使用して、ストレージコントローラに接続されます。</block>
  <block id="2d242bb36ec91b32005f9296ff03a912" category="doc">アーキテクチャ</block>
  <block id="afcaa068bd76451ec818e7c845c867f4" category="paragraph">FAS システム製品ファミリーのさまざまなモデルをストレージレイヤで混在させることができるため、拡張が必要になったり、パフォーマンスや容量のニーズが異なる場合があります。ストレージシステムに接続できる SAP HANA ホストの最大数は、 SAP HANA のパフォーマンス要件と、使用されているネットアップコントローラのモデルによって定義されます。必要なディスクシェルフの数は、 SAP HANA システムの容量とパフォーマンスの要件によってのみ決まります。次の図は、 8 台の SAP HANA ホストをストレージハイアベイラビリティ（ HA ）ペアに接続した構成例を示しています。</block>
  <block id="1e90382cf8f5501614307f142be99675" category="paragraph">アーキテクチャは、次の 2 つの側面で拡張できます。</block>
  <block id="ab0b299aa5582f36321ac715a26741f5" category="list-text">既存のストレージに SAP HANA ホストやストレージ容量を追加で接続することで、ストレージコントローラが現在の SAP 主要パフォーマンス指標（ KPI ）を満たす十分なパフォーマンスを提供する場合</block>
  <block id="a8cc6b546c8a58e173b13fdbe03083d7" category="list-text">追加の SAP HANA ホスト用にストレージ容量を追加したストレージシステムを追加する</block>
  <block id="0c8c8eb56a169d6a4275a52f8c66c079" category="paragraph">次の図は、追加の SAP HANA ホストをストレージコントローラに接続した場合の構成例を示しています。この例では、 SAP HANA ホスト 16 台分の容量とパフォーマンスの両方の要件を満たすために、さらにディスクシェルフが必要です。合計スループット要件に応じて、ストレージコントローラへの 10GbE （以上）接続を追加する必要があります。</block>
  <block id="cdb7ac32da38343cc4a6b2f3f23caa92" category="paragraph">導入した FAS システムとは関係なく、任意の認定済みストレージコントローラを追加して、希望するノード密度に合わせて SAP HANA 環境を拡張することもできます（次の図を参照）。</block>
  <block id="9268ea89b7553eda23a9690606daf736" category="section-title">SAP HANA のバックアップ</block>
  <block id="38dd23c567963490bfc29e59a1f28717" category="paragraph">すべてのネットアップストレージコントローラに搭載された ONTAP ソフトウェアは、動作中にパフォーマンスに影響を与えることなく SAP HANA データベースをバックアップするための組み込みメカニズムを提供します。ストレージベースの NetApp Snapshot バックアップは、 SAP HANA の単一コンテナ、および単一テナントまたは複数テナントを使用する SAP HANA マルチテナントデータベースコンテナ（ MDC ）システムで使用可能な、完全にサポートされた統合バックアップ解決策です。</block>
  <block id="9955fcf90f7a4d24fcdd226f2bad9404" category="paragraph">ストレージベースの Snapshot バックアップは、 NetApp SnapCenter Plug-in for SAP HANA を使用して実装されます。これにより、 SAP HANA データベースに標準で搭載されているインターフェイスを使用して、整合性のあるストレージベースの Snapshot バックアップを作成できます。SnapCenter は、各 Snapshot バックアップを SAP HANA バックアップカタログに登録します。したがって、 SnapCenter で作成されたバックアップは、リストア処理とリカバリ処理用に直接選択できる SAP HANA Studio と Cockpit 内に表示されます。</block>
  <block id="a998ce5555ab7229162baef2b7ee1c9a" category="paragraph">NetApp SnapMirror テクノロジを使用すると、一方のストレージシステムで作成された Snapshot コピーを、 SnapCenter で制御されるセカンダリバックアップストレージシステムにレプリケートできます。その後、プライマリストレージ上のバックアップセットごと、およびセカンダリストレージシステム上のバックアップセットごとに、異なるバックアップ保持ポリシーを定義できます。SnapCenter Plug-in for SAP HANA は、不要なバックアップカタログの削除を含め、 Snapshot コピーベースのデータバックアップとログバックアップの保持を自動的に管理します。また、 SnapCenter Plug-in for SAP HANA では、ファイルベースのバックアップを実行することで、 SAP HANA データベースのブロック整合性チェックを実行できます。</block>
  <block id="020d9d4fc21927a10cbfdf929f1e5d5a" category="paragraph">次の図に示すように、 NFS マウントを使用して、データベースログをセカンダリストレージに直接バックアップできます。</block>
  <block id="6a8f36af9b25dbdaa27206e8556f144d" category="paragraph">ストレージベースの Snapshot バックアップは、従来のファイルベースのバックアップに比べて大きなメリットをもたらします。たとえば、次のような利点があります。</block>
  <block id="cd3237725900192ea60a708828192eed" category="list-text">高速バックアップ（数分）</block>
  <block id="dd3af9880bd4d720f57bfb3f08113c40" category="list-text">ストレージレイヤでのリストア時間（数分）が大幅に短縮され、バックアップの頻度が向上するため、 Recovery Time Objective （ RTO ；目標復旧時間）が短縮されます</block>
  <block id="f458c876961fbe066dc1f94b4d8f0606" category="list-text">バックアップとリカバリの処理中、 SAP HANA データベースのホスト、ネットワーク、またはストレージのパフォーマンスが低下することはありません</block>
  <block id="ca34922c96391967c8028dc44cd98e22" category="list-text">ブロックの変更に基づいて、スペース効率と帯域幅効率に優れたセカンダリストレージへのレプリケーションを実行します</block>
  <block id="c67ddee39e41dfe63b7c798d76514143" category="inline-link">TR-4614 ：『 SAP HANA Backup and Recovery with SnapCenter 』</block>
  <block id="dd44a87fdee6157429ed3ab3b6e9ead4" category="section-title">SAP HANA ディザスタリカバリ</block>
  <block id="208d812de76aa602471fe71c37e930c8" category="paragraph">SAP HANA ディザスタリカバリは、 SAP HANA システムレプリケーションを使用してデータベースレイヤで実行するか、ストレージレプリケーションテクノロジを使用してストレージレイヤで実行できます。次のセクションでは、ストレージレプリケーションに基づくディザスタリカバリソリューションの概要について説明します。</block>
  <block id="1ff29e7b597f9f2f9d2a5edf1b79532b" category="inline-link">TR-4646 ：『 SAP HANA Disaster Recovery with Storage Replication 』</block>
  <block id="524130dbe5da3e0bed566e873780d92c" category="section-title">SnapMirror に基づくストレージレプリケーション</block>
  <block id="0f905789004d93140f2472f04587e3e9" category="paragraph">次の図に、同期 SnapMirror レプリケーションを使用してローカルのディザスタリカバリデータセンターにデータをレプリケートする 3 サイトのディザスタリカバリ解決策と、非同期 SnapMirror を使用してリモートのディザスタリカバリデータセンターにデータをレプリケートする様子を示します。</block>
  <block id="8f5ac6f44493cd58abff6c1e0220cb5b" category="paragraph">同期 SnapMirror を使用したデータレプリケーションでは、 RPO がゼロになります。プライマリとローカルのディザスタリカバリデータセンター間の距離は約 100km です。</block>
  <block id="4e1cb33198a7d562f17cd0f57cfdb9c6" category="paragraph">プライマリとローカルの両方のディザスタリカバリサイトで障害が発生した場合の保護は、非同期 SnapMirror を使用して、第 3 のリモートディザスタリカバリデータセンターにデータをレプリケートすることで実現されます。RPO は、レプリケーションの更新頻度と転送速度によって異なります。理論的には距離は無制限ですが、転送が必要なデータ量とデータセンター間の接続によって制限は異なります。通常の RPO の値は、 30 分から数時間です。</block>
  <block id="d9bfc3ce5a49e5308dfdbda6295cc6a3" category="paragraph">どちらのレプリケーション方法の RTO も、主に、 HANA データベースをディザスタリカバリサイトで開始してデータをメモリにロードするのに必要な時間に左右されます。1000Mbps のスループットでデータが読み取られることを前提とし、 1TB のデータをロードするには約 18 分かかります。</block>
  <block id="b9052158da7f0b5b55d6e0ec9555e353" category="paragraph">通常の運用中は、ディザスタリカバリサイトのサーバを開発 / テストシステムとして使用できます。災害が発生した場合は、開発 / テストシステムをシャットダウンし、ディザスタリカバリ本番用サーバとして起動する必要があります。</block>
  <block id="d32d8a0b4465128d05cbe3a72ff9a229" category="paragraph">どちらのレプリケーション方法でも、 RPO と RTO に影響を与えることなくディザスタリカバリのワークフローテストを実行できます。FlexClone ボリュームはストレージ上に作成され、ディザスタリカバリテスト用サーバに接続されます。</block>
  <block id="3fd58c2ba10df8da6e80791e2dae3f96" category="paragraph">同期レプリケーションで StrictSync モードが提供されます。何らかの理由でセカンダリストレージへの書き込みが完了しないと、アプリケーション I/O が失敗し、プライマリストレージシステムとセカンダリストレージシステムが同一になります。プライマリへのアプリケーション I/O は、 SnapMirror 関係のステータスが InSync に戻るまで再開されません。プライマリストレージで障害が発生した場合は、フェイルオーバー後にセカンダリストレージでアプリケーション I/O を再開できます。データ損失は発生しません。StrictSync モードでは、 RPO は常にゼロです。</block>
  <block id="2cb03e71b30b5ad997f5080619a60d31" category="section-title">MetroCluster に基づくストレージレプリケーション</block>
  <block id="8a29e11272dc9f6e89fdfd8d07e0a808" category="paragraph">次の図は、解決策の概要を示しています。各サイトのストレージクラスタがローカルで高可用性を実現し、本番環境のワークロードに使用されます。各サイトのデータはもう一方のサイトに同期的にレプリケートされ、災害のフェイルオーバーが発生した場合に使用できます。</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="summary"></block>
  <block id="650e7293e887dfe8d6a1e7be568f91f1" category="doc">履歴を更新します</block>
  <block id="98c7616ec2b7c09dbf1a2e93da9c710f" category="paragraph">この解決策の初版以降には、次の技術的な変更が加えられています。</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">バージョン</block>
  <block id="44749712dbec183e983dcd78a7736c41" category="cell">日付</block>
  <block id="d46591db8118f77057750203ede1b2ca" category="cell">概要を更新します</block>
  <block id="3798985ee5e15c84c4263815d5a4d0b7" category="cell">バージョン 1.0 以降</block>
  <block id="be0c84ff5b19b7be3f3c3bcf63481301" category="cell">2015年10月</block>
  <block id="e9bacaae9e45a23fffabf2e649f09b75" category="cell">初期バージョン</block>
  <block id="e988e5fd54b0b79f1d8fa9ce06ad58d5" category="cell">バージョン 1.1 以降</block>
  <block id="bc407ceaf8eb27d5253807a9ebda0414" category="cell">2016年3月</block>
  <block id="54db89e9b4e49265f32e0495cda7d5e4" category="cell">容量のサイジングを更新しました</block>
  <block id="304f30474edd152dc34aef7dbb123607" category="cell">バージョン 2.0 以降</block>
  <block id="d97683d280d36a8f907f655c8ae74044" category="cell">2017年2月</block>
  <block id="053aaab3b6a6f68ce7ea49ba7b9f8fee" category="cell">新しいネットアップストレージシステムとディスクシェルフ ONTAP 9 の新機能 SLES12 SP1 および RHEL 7.2 の新しい SAP HANA リリース</block>
  <block id="27328ef4198621c47c9eed9d679e106e" category="cell">2017年7月</block>
  <block id="486ac802b593e5c6576c88cd6ce4d040" category="cell">マイナーアップデート</block>
  <block id="46b9839969e4bc429da9cc245c756450" category="cell">バージョン 3.0 以降</block>
  <block id="a0412a4f0a7daea31c561a20fad808b8" category="cell">2018年9月</block>
  <block id="4b94bef311266eb7014c7ca918108710" category="cell">新しいネットアップストレージシステム新しい OS リリース（ SLES12 SP3 および RHEL 7.4 ）では、 SAP HANA 2.0 SPS3 のマイナーアップデートが追加されています</block>
  <block id="1934d1f00863288384225e6e467701f9" category="cell">バージョン 3.1 以降</block>
  <block id="aafb48343bbcbc586f011c8f87a52d7f" category="cell">2019年11月</block>
  <block id="c7c8844211522f47505bf90db2c5f40e" category="cell">新しいネットアップストレージシステムと NVMe シェルフ新しい OS リリース（ SLES12 SP4 、 SLES 15 、および RHEL 7.6 ）では、マイナーアップデートが追加されています</block>
  <block id="5258b9f7a7bafc6f48ad56c4cdae8810" category="cell">バージョン 3.2 以降</block>
  <block id="a00f05a660c5d5d561663fe44e44cdf5" category="cell">2020年4月</block>
  <block id="62b07fbc56cb53e44a6f5cbdadaa6212" category="cell">新しい AFF ASA シリーズストレージシステムでは、 SAP HANA 2.0 SPS4 以降に複数のデータパーティション機能が導入されています</block>
  <block id="e9d6df059c684606e3b274b55bf5e7fe" category="cell">バージョン 3.3 以降</block>
  <block id="0c32ac23d148fcf8f103092f860ea484" category="cell">2020 年 6 月</block>
  <block id="2a68b73f24c9113c1b9b27be5840d301" category="cell">追加情報オプションの機能に関するマイナーアップデート</block>
  <block id="c6bdef625cb67c9d4ef94200ba60efb0" category="doc">インフラのセットアップと設定</block>
  <block id="d39f50075dc9ec7266b5156c1d0ce319" category="summary">次のセクションでは、 SAP HANA インフラのセットアップと構成のガイドラインについて説明します。</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="doc">概要</block>
  <block id="e7f4f805e4b2edf4e5d40f8db1e51fd5" category="list-text">SAP HANA シングルおよびマルチホスト</block>
  <block id="0bad0fb3efdfa0349f059e6510652363" category="list-text">SAP HANA マルチパーティションを使用する SAP HANA シングルホスト</block>
  <block id="5ab9c3d59a0ecc9e30a1f938039d0ecf" category="summary">NFS バージョン 4 以降では、ユーザ認証が必要です。この認証は、 Lightweight Directory Access Protocol （ LDAP ）サーバやローカルユーザアカウントなどの中央ユーザ管理ツールを使用して実行できます。</block>
  <block id="e3a77a70624c57f3f0e2fc7075e4f75f" category="doc">NFSv4 用の SAP HANA インストールの準備</block>
  <block id="7f5e79baae33aa1aca5c990882a844cb" category="paragraph">NFS バージョン 4 以降では、ユーザ認証が必要です。この認証は、 Lightweight Directory Access Protocol （ LDAP ）サーバやローカルユーザアカウントなどの中央ユーザ管理ツールを使用して実行できます。次のセクションでは、ローカルユーザアカウントを設定する方法について説明します。</block>
  <block id="cbec60dce8dfbeca522952f14d38d3b1" category="section-title">SAP HANA ホスト</block>
  <block id="6f99ed415d7b5330cfe770dc1088f66b" category="paragraph">存在しない場合は、 SAP HANA ホストに「 sapsys 」グループを作成する必要があります。ストレージコントローラ上の既存のグループ ID と競合しない一意のグループ ID を選択する必要があります。</block>
  <block id="8f35838ad2fe64a0c17ff23449515d26" category="paragraph">マルチホスト SAP HANA システムの場合、ユーザ ID とグループ ID はすべての SAP HANA ホストで同じである必要があります。グループとユーザは、移行元システムから他のすべての SAP HANA ホストに「 /etc/group 」および「 /etc/passwd 」の該当する行をコピーすることによって、他の SAP HANA ホスト上に作成されます。</block>
  <block id="2fa0eba92353ea7e1816fcc916b31030" category="admonition">NFSv4 ドメインは、すべての Linux サーバ（ /etc/idmapd.conf ）と SVM で同じ値に設定する必要があります。Linux ホストの /etc/idmapd.conf ファイル内の domain パラメータ「 Domain=&lt;domain-name&gt; 」を設定します。</block>
  <block id="c16fea4c59b7f6d7ce28e4f656eb58f6" category="paragraph">NFS IDMAPD サービスを有効にして開始します。</block>
  <block id="8e70a1707d21dc1444e77d404e6ac2f0" category="admonition">最新の Linux カーネルでは、この手順は必要ありません。警告メッセージは無視してかまいません。</block>
  <block id="22f78a96796d22d06c6c67652a374ffa" category="section-title">ストレージコントローラ</block>
  <block id="33414af712ec9cf5beb615810511c047" category="paragraph">ユーザ ID とグループ ID は、 SAP HANA ホストとストレージコントローラで同じである必要があります。グループとユーザは、ストレージクラスタで次のコマンドを入力することで作成されます。</block>
  <block id="2cb27363dc868bf23cc2ef137b8ee00a" category="paragraph">また、 SVM の UNIX ユーザルートのグループ ID を 0 に設定します。</block>
  <block id="2ad2e055e24d21da5d30dba91f44d731" category="summary">このセクションでは、シングルホストシステムとマルチホストシステムに SAP HANA をインストールするために必要な準備について説明します。</block>
  <block id="919364909c7165636bc8715422a691ec" category="doc">SAP HANA ソフトウェアのインストール</block>
  <block id="3e1a84486a34f2de53acbb9a76a7dacc" category="section-title">シングルホストシステムへのインストール</block>
  <block id="9ffcf0639aa6ab06ceced36736b5807d" category="paragraph">SAP HANA ソフトウェアのインストールでは、シングルホストシステムについて行う追加の準備作業はありません。</block>
  <block id="e4fd411b2330f50a5f169247fb9817ac" category="section-title">マルチホストシステムへのインストール</block>
  <block id="877357acf24fb0c198118a9551671417" category="paragraph">インストールを開始する前に 'global.ini` ファイルを作成して 'SAP ストレージ・コネクタの使用を有効にしますSAP ストレージコネクタは、インストールプロセス中にワーカーホストで必要なファイルシステムをマウントします。global.ini` ファイルは '/hana/shared ファイル・システムなど ' すべてのホストからアクセス可能なファイル・システムで使用できる必要があります</block>
  <block id="dba154e032a79db94e79189eb47b028f" category="paragraph">マルチホストシステムに SAP HANA ソフトウェアをインストールする前に、次の手順を実行する必要があります。</block>
  <block id="c0c2d256d9ee9ad617ad43119e6ad751" category="list-text">データ LUN およびログ LUN の次のマウント・オプションを global.ini` ファイルに追加します</block>
  <block id="d00f7ccbbb090c63d2eb2e3a5ddbd0db" category="list-text">「データとログファイルシステム」の「 relatime 」と「 inode64 」です</block>
  <block id="3daf48572816497403ca0d7b3ca79c5c" category="list-text">データパーティションとログパーティションの WWID を追加します。WWID は '/etc/multipath.conf' ファイルに設定されているエイリアス名と一致している必要があります</block>
  <block id="c5e7e01683b04809035115f6c4c7e4aa" category="paragraph">次の出力は、システム ID （ SID ）が SS3 の 2+1 マルチホストセットアップの例を示しています。</block>
  <block id="e698d9fadd050973bab2f9f855248cca" category="admonition">使用する OS のバージョンによっては、 SAP HANA データベースをインストールする前に Python 2.7 をインストールする必要があります。</block>
  <block id="9659639598149d1609e9fcde405a759f" category="list-text">選択したすべてのコンポーネントが、すべてのワーカーホストとスタンバイホストにインストールされていることを確認します。</block>
  <block id="6f9f0e834814d7ad77b7ef8666f24988" category="summary">次のセクションでは、 SAP HANA 用のストレージシステムのサイジングに必要なパフォーマンスと容量に関する考慮事項の概要を説明します。</block>
  <block id="894445e8ea6df545bfbc4247797a2162" category="doc">ストレージのサイジング</block>
  <block id="dcf9ba0966947285c275da7a2e4983af" category="admonition">適切なサイズのストレージ環境を構築するために、ネットアップまたはネットアップパートナーの営業担当者にお問い合わせください。</block>
  <block id="1261ba8eeb83d9d138ff9e9a37214a7e" category="section-title">パフォーマンスに関する考慮事項</block>
  <block id="0133d1c5c524f1c132eeaabe81e24a26" category="paragraph">SAP では、データベースホストのメモリサイズや SAP HANA データベースを使用するアプリケーションに関係なく、すべての本番用 SAP HANA 環境に有効な静的なストレージ KPI のセットが定義されています。これらの KPI は、シングルホスト環境、マルチホスト環境、 Business Suite on HANA 環境、 Business Warehouse on HANA 環境、 S/4HANA 環境、および BW/4HANA 環境で有効です。したがって、現在のパフォーマンスサイジングアプローチは、ストレージシステムに接続されているアクティブな SAP HANA ホストの数にのみ依存します。</block>
  <block id="66e21be29915de7ccd15e3f2259dfb2d" category="admonition">ストレージパフォーマンス KPI は、本番用 SAP HANA システムにのみ必須ですが、すべての HANA システムに実装できます。</block>
  <block id="367a819110d98ed167caa72fba8c3476" category="paragraph">SAP は、ストレージシステムのパフォーマンスを検証するためのパフォーマンステストツールを提供し、ストレージに接続されたアクティブな SAP HANA ホストに対応します。</block>
  <block id="209deb211357a5417a81e757fa385d98" category="paragraph">ネットアップは、特定のストレージモデルに接続できる SAP HANA ホストの最大数をテストして事前に定義しました。さらに、本番環境ベースの SAP HANA システムに必要なストレージ KPI を実現しています。</block>
  <block id="c7e4c0767ab9722c4f237d635d610c0c" category="admonition">認定 FAS 製品ファミリーのストレージコントローラは、他のディスクタイプやディスクバックエンドソリューションと組み合わせて SAP HANA にも使用できます。ただし、ネットアップがサポートし、 SAP HANA TDI パフォーマンス KPI を達成する必要があります。たとえば、 NetApp Storage Encryption （ NSE ）や NetApp FlexArray テクノロジなどです。</block>
  <block id="15d11459079dc48f1e85bea1313c9726" category="paragraph">本ドキュメントでは、 SAS HDD およびソリッドステートドライブ（ SSD ）のディスクサイジングについて説明します。</block>
  <block id="4f99803ea06af8f6d9a1da5b19e96b61" category="section-title">HDD</block>
  <block id="409693e484428f0ddd3c7f9edad94110" category="paragraph">SAP のストレージパフォーマンス KPI を実現するには、 SAP HANA ノードごとに 10 本以上のデータディスク（ 10k rpm SAS ）が必要です。</block>
  <block id="2b23f51631667ab0603ece64b7f523a3" category="admonition">この計算は、ストレージコントローラ、ディスクシェルフ、およびデータベースの容量要件に左右されません。ディスクシェルフを追加しても、ストレージコントローラでサポートできる SAP HANA ホストの最大数は増加しません。</block>
  <block id="9d8806ed6779e6a16f204fad2d0cdfc1" category="section-title">ソリッドステートドライブ</block>
  <block id="0712272d8957e85acded217a85370070" category="paragraph">SSD の場合は、データディスクの数は、ストレージコントローラから SSD シェルフへの SAS 接続スループットによって決まります。</block>
  <block id="d7e101f5680bb6cef55b45b6400c7696" category="paragraph">単一のディスクシェルフで実行できる SAP HANA ホストの最大数と、 SAP HANA ホストごとに必要な SSD の最小数は、 SAP パフォーマンステストツールを実行して決定されています。このテストでは、ホストの実際のストレージ容量要件は考慮しません。また、実際に必要なストレージ構成を判断するために必要な容量も計算する必要があります。</block>
  <block id="17034526fac893b51c72109e731e3150" category="list-text">SSD を 24 本搭載した 12Gb SAS ディスクシェルフ（ DS224C ）は、ディスクシェルフが 12Gb に接続される場合、最大 14 台の SAP HANA ホストをサポートします。</block>
  <block id="5a3f83272b733d11b72f90c6434634bc" category="list-text">SSD を 24 本搭載した 6Gb SAS ディスクシェルフ（ DS2246 ）は、最大 4 台の SAP HANA ホストをサポートします。</block>
  <block id="4218dd2a9cf8d2a4ac0bf4b4418b6a8a" category="paragraph">SSD と SAP HANA ホストは、両方のストレージコントローラ間で均等に分散する必要があります。</block>
  <block id="53186c8561352a2df976925dcabf62f0" category="paragraph">次の表に、ディスクシェルフごとにサポートされる SAP HANA ホストの数を示します。</block>
  <block id="6bb313266cb9beb41de9d6c9e38c1940" category="cell">24 本の SSD をフル搭載した 6Gb SAS シェルフ（ DS2246</block>
  <block id="511314f062f8b637138c0e7691d63b28" category="cell">12Gb SAS シェルフ（ DS224C ）には 24 本の SSD がフル搭載されています</block>
  <block id="aa2d00c9db46d97d9e46eaaf81d65e1d" category="cell">ディスクシェルフあたりの SAP HANA ホストの最大数</block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="cell">4.</block>
  <block id="aab3238922bcc25a6f606eb525ffdc56" category="cell">14</block>
  <block id="67daefa02c71a745373981700ce5c943" category="admonition">この計算は、使用しているストレージコントローラには依存しません。ディスクシェルフを追加しても、ストレージコントローラでサポートできる SAP HANA ホストの最大数は増加しません。</block>
  <block id="a341ad540524c27a40ee6f8e4c1de2e4" category="section-title">混在ワークロード</block>
  <block id="53fc113bc08b6e6a4382d93d7b1beccf" category="paragraph">SAP HANA とその他のアプリケーションワークロードを、同じストレージコントローラ上または同じストレージアグリゲート内で実行することはできません。ただし、ネットアップのベストプラクティスとして、 SAP HANA ワークロードを他のすべてのアプリケーションワークロードから分離することを推奨します。</block>
  <block id="e96e66eb5ca678b012ed829901a8e778" category="paragraph">SAP HANA ワークロードとその他のアプリケーションワークロードを、同じストレージコントローラまたは同じアグリゲートに導入することもできます。その場合は、混在ワークロード環境内で SAP HANA に対して適切なパフォーマンスが確保されていることを確認する必要があります。また、 Quality of Service （ QoS ；サービス品質）パラメータを使用して、他のアプリケーションの影響を制御し、 SAP HANA アプリケーションのスループットを保証することも推奨します。</block>
  <block id="1d8d1934499ced39732f5c5099083c6b" category="paragraph">SAP パフォーマンステストツールを使用して、すでに他のワークロードに使用されている既存のストレージコントローラで追加の SAP HANA ホストを実行できるかどうかを確認する必要があります。SAP アプリケーションサーバは、 SAP HANA データベースと同じストレージコントローラやアグリゲートに安全に配置できます。</block>
  <block id="8025837196ec3641307b0ebcb276143c" category="section-title">容量に関する考慮事項</block>
  <block id="244d98fed97800c3bc8073163dc1e3b2" category="inline-link">SAP HANA のストレージ要件</block>
  <block id="bbce32f30700e8b905762b8cfd022bc5" category="admonition">複数の SAP HANA システムで構成される SAP 環境全体の容量サイジングは、ネットアップの SAP HANA ストレージサイジングツールを使用して決定する必要があります。ストレージのサイジングプロセスを検証し、適切なサイズのストレージ環境を構築するには、ネットアップまたはネットアップパートナーの営業担当者にお問い合わせください。</block>
  <block id="46fcaad64094e886321a215ecd47a4b6" category="section-title">パフォーマンステストツールの設定</block>
  <block id="e69e9d3f5ed6c444c36582f4128ffd41" category="paragraph">SAP HANA 1.0 SPS10 以降、 I/O 動作を調整し、使用中のファイルシステムとストレージシステムのデータベースを最適化するためのパラメータが導入されています。これらのパラメータは、 SAP パフォーマンステストツールでストレージのパフォーマンスをテストするときにも設定する必要があります。</block>
  <block id="9a648a6755f45956100ee3fff99676a5" category="paragraph">ネットアップは、最適な値を定義するため、パフォーマンステストを実施しました。次の表に、 SAP パフォーマンステストツールの構成ファイルで設定する必要があるパラメータを示します。</block>
  <block id="83f499a540b1323009c200d6f8cc9396" category="cell">パラメータ</block>
  <block id="689202409e48743b914713f96d93947c" category="cell">価値</block>
  <block id="a26ec55747d14548cbbfb785ba7235ca" category="cell">max_parallel _io_requests と入力します</block>
  <block id="76dc611d6ebaafc66cc0879c71b5db5c" category="cell">128</block>
  <block id="6ed7c95da7b1657525ed8f429f52b06a" category="cell">async _read_submit</block>
  <block id="ed2b5c0139cec8ad2873829dc1117d50" category="cell">オン</block>
  <block id="67e2efa65376a7aacd40ff40da1bddae" category="cell">async ： write_submit_active</block>
  <block id="ac5e272fb590151aef3dd14286c416e0" category="cell">async_write_submit_bblocks</block>
  <block id="a181a603769c1f98ad927e7367c7aa51" category="cell">すべて</block>
  <block id="149b8cb3de2ef5293654161397dd957b" category="inline-link">SAP ノート 1943937</block>
  <block id="cfc4a41d38a7e9272bd9608bb24765a7" category="inline-link">SAP ノート 2493172</block>
  <block id="21d0c248148c59a01600a5188cec24a7" category="paragraph">SAP テストツールの設定の詳細については、を参照してください<block ref="ec90a615c6d378fa60ba8e7f2e7592b2" category="inline-link-rx"></block> HWCCT （ SAP HANA 1.0 ）および<block ref="2912abb2c0271a2912b6a4a94888e0ec" category="inline-link-rx"></block> HCMT/HCOT 用（ SAP HANA 2.0 ）。</block>
  <block id="f3ff9b33ed05e0cef1b1ae8cf470ea13" category="paragraph">次の例は、 HCMT/HCOT 実行プランに変数を設定する方法を示しています。</block>
  <block id="deab23bd3b868c986b7cb29f6fd4acc0" category="paragraph">これらの変数はテスト構成に使用する必要があります。これは通常、 SAP が HCMT/HCOT ツールを使用して提供する事前定義された実行計画の場合です。次に、 4k ログの書き込みテストの例を示します。</block>
  <block id="9d9e7f5a6c25f736c782389b8599b38d" category="section-title">ストレージサイジングプロセスの概要</block>
  <block id="b1dce9c1c938edf81a622f42fe8fc806" category="paragraph">各ストレージモデルの HANA ホストあたりのディスク数と SAP HANA ホストの密度は、 SAP パフォーマンステストツールで決定されています。</block>
  <block id="a2a4e680f0b23836f4575f338d8b238e" category="paragraph">サイジングプロセスでは、本番用および非本番用の SAP HANA ホストの数、各ホストの RAM サイズ、ストレージベースの Snapshot コピーのバックアップ保持期間などの詳細が必要です。SAP HANA ホストの数によって、必要なストレージコントローラとディスクの数が決まります。</block>
  <block id="4e22e31bf06b566da1fafaaf1f973f9d" category="paragraph">RAM のサイズ、各 SAP HANA ホストでのディスク上の正味データサイズ、および Snapshot コピーのバックアップ保持期間は、容量サイジングの際に入力として使用されます。</block>
  <block id="99be89615802a61d60cb75b091a02b81" category="paragraph">次の図に、サイジングプロセスの概要を示します。</block>
  <block id="535db3cbff51345ddc48fb6dbd091125" category="summary">ホストをセットアップする前に、ネットアップサポートサイトから NetApp SAN Host Utilities をダウンロードし、 HANA サーバにインストールしておく必要があります。ホスト・ユーティリティのマニュアルには、使用する FCP HBA に応じてインストールする必要がある追加ソフトウェアの情報が記載されています。</block>
  <block id="94b743cff45da9c23b8a3bc300657f21" category="doc">ホストのセットアップ</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">ネットアップサポート</block>
  <block id="aec61b9198189c2192a934e97fa0ba6c" category="paragraph">ホストをセットアップする前に、 NetApp SAN Host Utilities をからダウンロードしておく必要があります<block ref="1a36b59ecae7684863b79a0f690b6840" category="inline-link-rx"></block> HANA サーバにインストールします。ホスト・ユーティリティのマニュアルには、使用する FCP HBA に応じてインストールする必要がある追加ソフトウェアの情報が記載されています。</block>
  <block id="ac2b4035dacf66e6bdd5bede88e20260" category="inline-link">『 Linux Host Utilities 7.1 Installation and Setup Guide 』</block>
  <block id="451ad01703fad985ae3358eaf6f2bd14" category="paragraph">また、使用している Linux バージョンに固有のマルチパス構成に関する情報も記載されています。このドキュメントでは、 SLES 12 SP1 以降および RHEL 7 で必要な設定手順について説明します。2 以降。を参照してください<block ref="c4b23c8c60f3faad406f8d46d87ba646" category="inline-link-rx"></block>。</block>
  <block id="41df23532b1b2095e93dfed170e3e95a" category="section-title">マルチパスを設定します</block>
  <block id="29c8d00954b1d81fd235004ad72cdc15" category="admonition">SAP HANA マルチホスト構成のすべてのワーカーホストとスタンバイホストで、手順 1~6 を実行する必要があります。</block>
  <block id="face2730fdfb3061ad0f284515f9695d" category="paragraph">マルチパスを設定するには、次の手順を実行します。</block>
  <block id="d49e35527dee3aa4c0935558a3ccd40e" category="list-text">各サーバで Linux の「 re scan-scsi-bus.sh -a' 」コマンドを実行して、新しい LUN を検出します。</block>
  <block id="b0a7dea9169ca74da0133eed343854ee" category="list-text">/etc/multipath.conf ファイルを編集し 'WWID とエイリアス名を追加します</block>
  <block id="649b8d1047ff4dbb68eac12144e5c1d5" category="admonition">出力例は '2+1 マルチホスト・システムの 4 つの LUN のエイリアス名を含む /etc/multipath.conf ファイルの内容を示しています使用可能な multipath.conf ファイルがない場合、「 multipath-T 」 /etc/multipath.conf を実行して作成できます。</block>
  <block id="9dc341408c35ffb21d021f873916b3be" category="list-text">「 multipath -r 」コマンドを実行して、デバイスマップをリロードします。</block>
  <block id="349df7a76ee939fd3552195d183e56a3" category="list-text">すべての LUN 、エイリアス名、およびアクティブパスとスタンバイパスを一覧表示するには、「マルチパス -ll 」コマンドを実行して構成を確認します。</block>
  <block id="3c440be39ee7b8ee32df76222e620417" category="admonition">次の出力例は、 2 つのデータ LUN と 2 つのログ LUN を持つ 2+1 マルチホスト HANA システムの出力を示しています。</block>
  <block id="f54213342718e90a288d6625eb733968" category="section-title">LVM ボリュームグループと論理ボリュームを作成</block>
  <block id="baf6ddaa837973f5c39837c3746535f5" category="list-text">すべての LUN を物理ボリュームとして初期化します。</block>
  <block id="e4eae96188ebd77284f0fc28c5c7413d" category="list-text">各データパーティションとログパーティションのボリュームグループを作成します。</block>
  <block id="fa0e9e0367bdf43a5c4d9ceba40a46db" category="list-text">データパーティションとログパーティションごとに論理ボリュームを作成します。ボリュームグループごとに使用されている LUN の数（この例では 2 つ）と同じストライプサイズを使用し、データの場合は 256K 、ログの場合は 64k を使用します。SAP では、ボリュームグループごとに 1 つの論理ボリュームのみがサポートされます。</block>
  <block id="a087a05338313c4f0b57c0d12c8ab31f" category="list-text">その他すべてのホストで、物理ボリューム、ボリュームグループ、およびボリュームグループをスキャンします。</block>
  <block id="58ccaa44e6f56ff65128a0b109099e56" category="admonition">これらのコマンドでボリュームが見つからない場合は、再起動する必要があります。</block>
  <block id="2fd29cd445709da647beada7d8568a19" category="paragraph">論理ボリュームをマウントするには、論理ボリュームをアクティブ化する必要があります。ボリュームをアクティブ化するには、次のコマンドを実行します。</block>
  <block id="e496d06cb94c67ede4a84c45f23a2df0" category="section-title">ファイルシステムの作成</block>
  <block id="39cf4ec35983fa721c6b420b210c0675" category="admonition">複数ホストのコマンド例には、 2+1 のマルチホスト HANA システムが示されています。</block>
  <block id="da177ee5af51709ede3e62f55d81fee9" category="section-title">マウントポイントを作成する</block>
  <block id="fd9e946778d15df799e35ae9bfac94dc" category="paragraph">必要なマウントポイントディレクトリを作成するには、次のいずれかの操作を行います。</block>
  <block id="dc20c000dc7df08f0d52c68147bd32cc" category="admonition">以下のコマンド例は、 2+1 のマルチホスト HANA システムを示しています。</block>
  <block id="89c617c4ed9cac275e572a67b1c52b29" category="section-title">ファイルシステムをマウント</block>
  <block id="f698665f2a88873767fbe21e3908ef17" category="admonition">データ LUN とログ LUN の XFS ファイルシステムは 'relatim' および inode64' マウントオプションを使用してマウントする必要があります</block>
  <block id="54720e6c9a787dee1a825e4ea3505728" category="admonition">すべてのデータファイルシステムとログファイルシステムは、 SAP HANA ストレージコネクタを使用してマウントされます。</block>
  <block id="5a3bf297b3cbbda0eaa792a3fc9aa696" category="paragraph">ファイルシステムをマウントするには、各ホストで「 mount – a 」コマンドを実行します。</block>
  <block id="3a8315c9f707101d2111acb24fbc9655" category="summary">以下は、 SAP HANA ソフトウェアのインストール要件です。</block>
  <block id="0c68d8a40313113ebbe5ac4a1f3d0dba" category="section-title">シングルホストシステムにインストールします</block>
  <block id="00cf3f3ec718b396e5e81b9c3fb6cf84" category="section-title">マルチホストシステムにをインストールします</block>
  <block id="bb69fd52b05309d22618c8df73c8950e" category="admonition">以下のインストール手順は、 SAP HANA 1.0 SPS12 以降に基づいています。</block>
  <block id="89a99a898a74d4f2ff80a5aa417e1639" category="paragraph">インストールを開始する前に 'global.ini` ファイルを作成して 'SAP ストレージ・コネクタの使用を有効にしますSAP ストレージコネクタは、インストールプロセス中にワーカーホストで必要なファイルシステムをマウントします。global.ini` ファイルは '/hana/shared-SID' ファイル・システムなど ' すべてのホストからアクセス可能なファイル・システムで使用できる必要があります</block>
  <block id="0e0c950ebceebc20ac07965f3d63f754" category="paragraph">LVM を使用した場合は、必要な設定が異なります。次の例は、 SID が FC5 の 2+1 マルチホストセットアップを示しています。</block>
  <block id="912023f4eba0bf223e908e20d22ff92f" category="paragraph">以降のセクションでは、 SAP HANA インフラのセットアップと構成のガイドラインについて説明し、 SAP HANA システムのセットアップに必要なすべての手順について説明します。ここでは、次の設定例を使用します。</block>
  <block id="4bb047f8c530785002e490ef17fa725e" category="doc">追加情報の参照先</block>
  <block id="345245c83d2b2c4c2a5eb9f2887da627" category="paragraph">このドキュメントに記載されている情報の詳細については、以下のドキュメントや Web サイトを参照してください。</block>
  <block id="06ad3435fb38e020aa7a36d8924c9f5c" category="inline-link"><block ref="06ad3435fb38e020aa7a36d8924c9f5c" category="inline-link-rx"></block></block>
  <block id="6137d44b5191549a06e7bea8ffd942d3" category="inline-link"><block ref="6137d44b5191549a06e7bea8ffd942d3" category="inline-link-rx"></block></block>
  <block id="3a8abeead42ccd286a7d0cbd4af82313" category="cell">2014年4月</block>
  <block id="862ad23f517c987dec375a134fc0d5c0" category="cell">初版</block>
  <block id="4d07a3bdc1f6c260f91eff5a8c4732c0" category="cell">2014年8月</block>
  <block id="4b0b2617da1a441d88f736d71d3ac092" category="cell">ディスクサイジングの選択を更新し、 SSD 構成を追加しました Red Hat Enterprise Linux OS 構成を追加 SAP HANA ストレージコネクタ情報を追加しました VMware 構成に関する情報を追加しました</block>
  <block id="76bc3a375f8e5795348c2e28143619d9" category="cell">2014年11月</block>
  <block id="db4466d6123c2bcdc9153e35eed5d67a" category="cell">ストレージのサイジングに関するセクションを更新しました</block>
  <block id="bde49e4082500b233767ac0393f52c97" category="cell">2015年1月</block>
  <block id="18b29171bb9db10940df132fe30b02ef" category="cell">ストレージコネクタの API セクションが更新され、アグリゲートとボリュームの構成が更新されました</block>
  <block id="e9d3c4f3be58e8eb9a2fe5ef80b5dbcd" category="cell">2015年3月</block>
  <block id="adceb3eeeca6d2e6e13cc707f1047b4d" category="cell">SAP HANA SPS9 向けの新しい StorageGRID の実装に関するセクション、コンピューティングノードのセットアップと HANA のインストールのセクションを追加しました</block>
  <block id="6c37787225b6b2fa9a3a2d7f9c7b9b1f" category="cell">clustered ONTAP では、 SAP HANA および HWVAL &gt; SPS10 の I/O パラメータを追加し、 sysctl パラメータを更新しました</block>
  <block id="357a6db4d8952d53bdb6f4eb953edf16" category="cell">容量のサイジングを更新し、 /hana/shared のマウントオプションを更新した sysctl パラメータを更新</block>
  <block id="5d431191212b0f13c81937d63ee45577" category="cell">バージョン 4.0 以降</block>
  <block id="3d4f06d9a20e1dd80d32a7be99445018" category="cell">新しいネットアップストレージシステムとディスクシェルフ 40GbE に対応した ONTAP 9 の新機能新しい OS リリース（ SUSE Linux Enterprise Server12 SP1 と Red Hat Enterprise Linux 7.2 ）新しい SAP HANA リリース</block>
  <block id="4880361a9deda058baa93a9609f49c06" category="cell">新しいネットアップストレージシステム新しい OS リリース（ SUSE Linux Enterprise Server 12 SP3 および Red Hat Enterprise Linux 7.4 ）では、 SAP HANA 2.0 SPS3 のマイナーな変更が追加されています</block>
  <block id="bbfb6d5a145f45ac380d5c56707a3b3f" category="cell">2019 年 9 月</block>
  <block id="b48c54ef40f55cf60865e423133eea27" category="cell">新しい OS リリース（ SUSE Linux Enterprise Server 12 SP4 、 SUSE Linux Enterprise Server 15 、および Red Hat Enterprise Linux 7.6 ）では、 MAX Data ボリュームサイズが若干変更されています</block>
  <block id="42aef0714dca75b922449334f8354e29" category="cell">2019年12月</block>
  <block id="be4ee54ca2edc105b3af0d346b4fab97" category="cell">新しいネットアップストレージシステム新しい OS リリース SUSE Linux Enterprise Server 15 SP1</block>
  <block id="342aa26fa2cc7e365c1b819a4e86b6f1" category="cell">2020年3月</block>
  <block id="d41615a4f21c04431fed0afc578baede" category="cell">NFSv3 で nConnect がサポートされるようになりました。新しい OS リリースである Red Hat Enterprise Linux 8 がサポートされます</block>
  <block id="0fa56213ed5deea97598ccd1f1d3db87" category="cell">2020年5月</block>
  <block id="1ab89c4e611ba31faab0f6bdb2081951" category="cell">SAP HANA 2.0 SPS4 以降に複数のデータパーティション機能が導入されています</block>
  <block id="a5667679a016ee66ef9bc45c1a173b3b" category="cell">2020年12月</block>
  <block id="cdd33367f29c689bcb60e79e248c660e" category="cell">ONTAP 9.8 以降で NConnect for NFSv4.1 がサポートされるようになりました。新しいオペレーティングシステムがリリースされました</block>
  <block id="8aa90565fb34d8b0aeab74ab74ffdf4a" category="cell">2021年2月</block>
  <block id="6ed1463e8ca682ff7a3d60ed388dcefe" category="cell">ホストのネットワーク設定の変更やその他の軽微な変更</block>
  <block id="caedd77305f36805e5e9f71196bad9dc" category="summary">各 SAP HANA サーバには、最低 8Gbps の帯域幅の冗長 FCP SAN 接続が必要です。ストレージコントローラに接続された各 SAP HANA ホストでは、 8Gbps 以上の帯域幅をストレージコントローラで設定する必要があります。</block>
  <block id="ac20a17ff8274dc0492aecef51b17cc3" category="doc">SAN ファブリックのセットアップ</block>
  <block id="b180b819c4be4e05edc4c7fb2025b37a" category="paragraph">次の図は、 4 台の SAP HANA ホストを 2 台のストレージコントローラに接続した場合の例を示しています。各 SAP HANA ホストには、冗長ファブリックに接続された 2 つの FCP ポートがあります。ストレージレイヤでは、各 SAP HANA ホストに必要なスループットを提供するために、 4 つの FCP ポートが構成されます。</block>
  <block id="3537fc965bfc8258734281e905f0339b" category="paragraph">スイッチレイヤのゾーニングに加えて、ストレージシステム上の各 LUN を、この LUN に接続するホストにマッピングする必要があります。スイッチ上のゾーニングはシンプルにします。つまり、すべてのホスト HBA がすべてのコントローラ HBA を認識できるゾーンセットを 1 つ定義します。</block>
  <block id="030c69314a5026a51c56546f16b3d52c" category="cell">2015年2月</block>
  <block id="d236c4295d03153cf4b58756ba35a16b" category="cell">SAP HANA および HWVAL SPS 10 以降の I/O パラメータが含まれています</block>
  <block id="ca67bdac3e5296c9aca14c7757a45a43" category="cell">2016年2月</block>
  <block id="8511699ac8ab74e8202ea00e8605032a" category="cell">ネットアップの新しいストレージシステムとディスクシェルフ ONTAP 9 の新機能 SLES12 SP1 および Red Hat Enterprise Linux 7.2 新しい SAP HANA リリース</block>
  <block id="86c976bd97e98538a78594cffd1f4347" category="cell">新しいネットアップストレージシステム新しい OS リリース（ SLES12 SP3 および Red Hat Enterprise Linux 7.4 ）では、 SAP HANA 2.0 SPS3 のマイナーアップデートが追加されています</block>
  <block id="b2741985b04e7a670dd01c660734116f" category="cell">新しい OS リリースマイナーアップデート</block>
  <block id="0eb0e7ad4cb166bbccd693c2caa1bacd" category="cell">新しいネットアップストレージシステムをサポートする Linux LVM （ SLES15SP2 、 RHEL 8 ）</block>
  <block id="9a4bface9098ff4cd4b35cca641c0042" category="cell">2021年4月</block>
  <block id="f389acb9c3b9da7fd00873307beefaf2" category="cell">VMware vSphere 固有の情報を追加しました</block>
  <block id="825584759100661fac8be910e01502e6" category="summary">ストレージコントローラと SAP HANA データベースホストの間で時刻を同期する必要があります。</block>
  <block id="be8226fe0c6443f6cad5815ef0b97b33" category="doc">時刻の同期</block>
  <block id="f63d5e470adeffe7633a6b7dd6a766f0" category="paragraph">ストレージコントローラと SAP HANA データベースホストの間で時刻を同期する必要があります。すべてのストレージコントローラとすべての SAP HANA ホストに、同じタイムサーバを設定する必要があります。</block>
  <block id="283788d4b8f40899acef933a8b3cb2e7" category="paragraph">次のセクションでは、 SAP HANA 用のストレージシステムのサイジングに必要なパフォーマンスと容量に関する考慮事項の概要を説明します。</block>
  <block id="d80e2fc4ceca3d26a3277e9ab88fda68" category="admonition">ストレージのサイジングプロセスをサポートし、適切なサイズのストレージ環境を構築するには、ネットアップまたはネットアップパートナーの営業担当者にお問い合わせください。</block>
  <block id="42bd6e1e54cc980bd9322b30521321ca" category="paragraph">SAP では、ストレージの主要パフォーマンス指標（ KPI ）の静的なセットが定義されています。これらの KPI は、データベースホストのメモリサイズや SAP HANA データベースを使用するアプリケーションに関係なく、すべての SAP HANA 本番環境に対して有効です。これらの KPI は、シングルホスト環境、マルチホスト環境、 Business Suite on HANA 環境、 Business Warehouse on HANA 環境、 S/4HANA 環境、および BW/4HANA 環境で有効です。したがって、現在のパフォーマンスサイジングアプローチは、ストレージシステムに接続されているアクティブな SAP HANA ホストの数にのみ依存します。</block>
  <block id="c2c1b5b14996ab9aba9a186353eb6741" category="admonition">ストレージパフォーマンス KPI は、本番用 SAP HANA システムにのみ必須ですが、すべての HANA システムに実装できます。</block>
  <block id="8e1e38affc84c007b3fadf2fe3f94c0d" category="paragraph">SAP はパフォーマンステストツールを提供します。このツールは、ストレージに接続されたアクティブな SAP HANA ホストのストレージシステムパフォーマンスを検証するために使用する必要があります。</block>
  <block id="6149b256ad8746f06c3f529454afe3e0" category="paragraph">ネットアップは、特定のストレージモデルに接続できる SAP HANA ホストの最大数をテストして事前に定義しました。さらに、本番環境ベースの SAP HANA システムに必要なストレージ KPI を実現しています。</block>
  <block id="64b8a436222beafffe6cdd183786a7e7" category="paragraph">ディスクシェルフで実行できる SAP HANA ホストの最大数と、 SAP HANA ホストごとに必要な SSD の最小数は、 SAP パフォーマンステストツールを実行して決定されています。このテストでは、ホストの実際のストレージ容量要件は考慮しません。また、必要な実際のストレージ構成を決定するために、容量要件を計算する必要があります。</block>
  <block id="a052dc95cd52f99e2150cc7afb3c9c46" category="section-title">SAS ディスクシェルフ</block>
  <block id="b3ccef22c64fb18c4586c819217d0f8d" category="paragraph">12Gb SAS ディスクシェルフ（ DS224C ）では、次のような固定ディスクシェルフ構成を使用してパフォーマンスのサイジングを行います。</block>
  <block id="627d56f1e06c43902409b38517d071d8" category="list-text">12 本の SSD を備えたハーフ搭載のディスクシェルフです</block>
  <block id="caf4121cd1e84773f66f61f25a118b4f" category="list-text">24 本の SSD を搭載したフル搭載のディスクシェルフです</block>
  <block id="f5bae058eb14b2365a397455cac09daa" category="paragraph">どちらの構成もアドバンストドライブパーティショニング（ ADPv2 ）を使用します。ハーフ搭載のディスクシェルフは、最大 9 台の SAP HANA ホストをサポートします。フル搭載のシェルフは、 1 台のディスクシェルフで最大 14 台のホストをサポートします。SAP HANA ホストは、両方のストレージコントローラ間で均等に分散する必要があります。</block>
  <block id="801801c4a151eb328734c55f97c13ff3" category="admonition">DS224C ディスクシェルフは、 SAP HANA ホストの数をサポートするため、 12Gb SAS を使用して接続する必要があります。</block>
  <block id="5115380b0209eebdde0a83a569c67ac9" category="paragraph">6Gb SAS ディスクシェルフ（ DS2246 ）は、最大 4 台の SAP HANA ホストをサポートします。SSD と SAP HANA ホストは、両方のストレージコントローラ間で均等に分散する必要があります。次の図は、ディスクシェルフあたりでサポートされる SAP HANA ホストの数を示しています。</block>
  <block id="043c223ee43975d6131cc23521e57f4d" category="cell">24 本の SSD をフル搭載した 6Gb SAS シェルフ（ DS2246</block>
  <block id="2b0c391c7894ff251721538dc649534b" category="cell">12Gb SAS シェルフ（ DS224C ）には、 12 本の SSD と ADPv2 をハーフ搭載しています</block>
  <block id="7565d12fd6dd164a9dc8caa5e983cd6d" category="cell">12Gb SAS シェルフ（ DS224C ）では、 24 本の SSD と ADPv2 をフル搭載しています</block>
  <block id="45c48cce2e2d7fbdea1afc51c7c6ad26" category="cell">9.</block>
  <block id="2b496b69f4c7aea7a8d59474a9bf6c8a" category="admonition">この計算は、使用しているストレージコントローラには依存しません。ディスクシェルフを追加しても、ストレージコントローラでサポートできる SAP HANA ホストの最大数は増加しません。</block>
  <block id="58913e61815b0d5b4ebf09a2dbba07e5" category="section-title">NS224 NVMe シェルフ</block>
  <block id="8bcf6b78575503f1caaf3d70970f3855" category="admonition">ディスクシェルフを追加しても、ストレージコントローラでサポートできる SAP HANA ホストの最大数は増加しません。</block>
  <block id="e2725d07d4b4cbeaff651e403b9ed0c2" category="paragraph">SAP HANA ワークロードとその他のアプリケーションワークロードを、同じストレージコントローラまたは同じアグリゲートに導入することもできます。その場合は、混在ワークロード環境内で SAP HANA に対して適切なパフォーマンスが確保されていることを確認する必要があります。また、 Quality of Service （ QoS ；サービス品質）パラメータを使用して、 SAP HANA アプリケーションに対する他のアプリケーションの影響を制御し、 SAP HANA アプリケーションのスループットを保証することも推奨します。</block>
  <block id="39d8b74e0095310309063c02410f6a20" category="paragraph">SAP HCMT テストツールを使用して、他のワークロードにすでに使用されている既存のストレージコントローラで、追加の SAP HANA ホストを実行できるかどうかを確認する必要があります。SAP アプリケーションサーバは、 SAP HANA データベースと同じストレージコントローラやアグリゲートに安全に配置できます。</block>
  <block id="fe49f707e4996a28b6c7f34609ee9475" category="paragraph">SAP HANA 1.0 SPS10 以降、 I/O 動作を調整し、使用中のファイルシステムとストレージシステムのデータベースを最適化するためのパラメータが導入されています。SAP のテストツールでストレージのパフォーマンスをテストするときは、 SAP のパフォーマンステストツールにもこれらのパラメータを設定する必要があります。</block>
  <block id="b86abe7931a3894ff977168fbdb8b7b6" category="paragraph">ネットアップは、最適な値を定義するため、パフォーマンステストを実施しました。次の表に、 SAP テストツールの構成ファイルで設定する必要があるパラメータを示します。</block>
  <block id="0e614553d2a8cc9424587a1d3acd9d09" category="paragraph">SAP テストツールの設定の詳細については、を参照してください<block ref="ec90a615c6d378fa60ba8e7f2e7592b2" category="inline-link-rx"></block> HWCCT （ SAP HANA 1.0 ）および<block ref="2912abb2c0271a2912b6a4a94888e0ec" category="inline-link-rx"></block> HCMT/HCOT 用（ SAP HANA 2.0 ）。</block>
  <block id="410dd60427299621482167417a192d6f" category="paragraph">各ストレージモデルの HANA ホストあたりのディスク数と SAP HANA ホストの密度は、 SAP HANA テストツールを使用して決定されています。</block>
  <block id="365912103e9bce0d6c05c8ee64c9b43f" category="summary">SAP HANA 2.0 SPS4 以降では、追加のデータボリュームパーティションを設定できます。これにより、 SAP HANA テナントデータベースのデータボリュームに 2 つ以上のボリュームを構成することができます。</block>
  <block id="69a593c87ff666bb67c1207a32a24a79" category="doc">データボリュームのパーティションを追加しています</block>
  <block id="35697e7b3429f60c725ef9d7b697ea1e" category="admonition">データボリュームに 2 つ以上の個別のボリュームを使用すると、 SAP HANA のシングルホストシステムとマルチホストシステムを使用できます。データボリュームのパーティションはいつでも追加できますが、追加するには SAP HANA データベースの再起動が必要になる場合があります。</block>
  <block id="19ddc7e98eb6fa40c4ac62a77090bff2" category="section-title">追加のデータボリュームパーティションの有効化</block>
  <block id="b4dbae4c26b3a936fe51ac6f503e18f7" category="list-text">追加のデータボリュームパーティションを有効にするには、 SYSTEMDB 構成の SAP HANA Studio または Cockpit を使用して、 global.ini` 内に次のエントリを追加します。</block>
  <block id="6646190eb7b9d6c7a29ea115116c1c5e" category="admonition">パラメータを global.ini` ファイルに手動で追加するには ' データベースを再起動する必要があります</block>
  <block id="7935ac3c59536eb9c8a1b5f13e7f5716" category="section-title">シングルホスト SAP HANA システムのボリューム構成</block>
  <block id="2583a9b74a1a2d8e89634e09b78f590d" category="paragraph">複数のパーティションを持つシングルホスト SAP HANA システムのボリュームレイアウトは、 1 つのデータボリュームパーティションを含むシステムのレイアウトに似ていますが、追加のデータボリュームは、ログボリュームとその他のデータボリュームとして別のアグリゲートに格納されます。次の表は、 2 つのデータボリュームパーティションを持つ SAP HANA シングルホストシステムの構成例を示しています。</block>
  <block id="94ef64dabfa4b51295dd875fa15a44de" category="cell">コントローラ A のアグリゲート 1</block>
  <block id="0da1566401e5a0582b6d811560cc8438" category="cell">コントローラ A のアグリゲート 2</block>
  <block id="747929c967a801a630de61c08e522b6b" category="cell">コントローラ B のアグリゲート 1</block>
  <block id="1d2c38f49539ebccd4cc3327d455942e" category="cell">コントローラ b のアグリゲート 2</block>
  <block id="a983282d84f231230a21d6e897fa5096" category="cell">データボリューム： SID_data_mnt00001</block>
  <block id="3458d911e12a02c2c22c30c147e60dc7" category="cell">共有ボリューム： SID_shared</block>
  <block id="d1ce9ffb9c761d5074baf3a5457e1bed" category="cell">データボリューム： SID_data2_mnt00001</block>
  <block id="2849faa7f343c897c5059440d947d834" category="cell">ログボリューム： SID_log_mnt00001</block>
  <block id="1a7f6076f09280d452350c186d20b52c" category="paragraph">次の表に、 2 つのデータボリュームパーティションを持つシングルホストシステムのマウントポイント構成の例を示します。</block>
  <block id="a75d0e69bd02dcf9fa585e045bc16d84" category="cell">ジャンクションパス</block>
  <block id="e73cda510e8bb947f7e61089e5581494" category="cell">ディレクトリ</block>
  <block id="bf64a2d18066494ae65ae74fb4aae57d" category="cell">HANA ホストのマウントポイント</block>
  <block id="bd8e6b40602529d6e57fdd885a48d151" category="cell">SID_data_mnt00001</block>
  <block id="37ce74088416f28dc9bb04355c2e5a28" category="cell">–</block>
  <block id="28645b4c3119792ae6fa1d7c40f5f3a8" category="cell">/hana/data/SID/mnt00001</block>
  <block id="25df05fd17104ffc9b29c882613281c6" category="cell">SID_data2_mnt00001</block>
  <block id="bb3dd4d1045ea603128872d169f40096" category="cell">/hana/data2/SID/mnt00001</block>
  <block id="b0344f7eade7f841bc1eb24d9175cad3" category="cell">SID_log_mnt00001</block>
  <block id="6adac4774bcd36fdc536601e6bdf18f5" category="cell">/hana/log/sid/mnt00001</block>
  <block id="07fe7fc9aa3cd33458708758a4a5854e" category="cell">SID_shared</block>
  <block id="c1ce059dbe7a4bf70cbd08a0fede6581" category="cell">usr - SAP 共有</block>
  <block id="96a082d267455fedce449479e429850b" category="cell">/usr/sap/SID/hana/shared に格納されています</block>
  <block id="afd44e74cb54a923d1cd4fe5065b370a" category="paragraph">新しいデータボリュームを作成し、 ONTAP System Manager または ONTAP クラスタのコマンドラインインターフェイスを使用してネームスペースにマウントします。</block>
  <block id="b7244e6e0957d367c131dd41458b8619" category="section-title">マルチホスト SAP HANA システムのボリューム構成</block>
  <block id="0d93df55c1f3029fd5c21ba9e75aa25e" category="paragraph">複数のパーティションを持つマルチホスト SAP HANA システムのボリュームレイアウトは、 1 つのデータボリュームパーティションを含むシステムのレイアウトに似ていますが、追加のデータボリュームは、ログボリュームとその他のデータボリュームとして別のアグリゲートに格納されます。次の表は、 2 つのデータボリュームパーティションを持つ SAP HANA マルチホストシステムの構成例を示しています。</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">目的</block>
  <block id="15572572230ee081e530fd30f1a16139" category="cell">コントローラ B のアグリゲート 2</block>
  <block id="c50bebb751ab31a7b0e508e4dfdba06e" category="cell">ノード 1 のデータボリュームとログボリューム</block>
  <block id="d6b8eb7e3d6ddf4af2ac24f74f1ddee8" category="cell">data2 ボリューム： SID_data2_mnt00001</block>
  <block id="5585cc8b94529d9c0f345077289daeb3" category="cell">ノード 2 のデータボリュームとログボリューム</block>
  <block id="7efb64be9f62e8f3406e303538204110" category="cell">ログボリューム： SID_log_mnt00002</block>
  <block id="79c44c08a641df91246f70b5f4721b31" category="cell">data2 ボリューム： SID_data2_mnt00002</block>
  <block id="f26af5ab0fdf7a3063e0701448193969" category="cell">データボリューム： SID_data_mnt00002</block>
  <block id="b62802686db75d9aaba27ff8baea5457" category="cell">ノード 3 のデータボリュームとログボリューム</block>
  <block id="93b4e1912193293e4191e8d10ca4086e" category="cell">データボリューム： SID_data_mnt00003</block>
  <block id="8d4ffa81992169c71fc47a58aa110819" category="cell">data2 ボリューム： SID_data2_mnt00003</block>
  <block id="3051e617efdca60e945d64ca6067b3a2" category="cell">ログボリューム： SID_log_mnt00003</block>
  <block id="66bb8e08981a9eb2e93115ca07d2d372" category="cell">ノード 4 のデータボリュームとログボリューム</block>
  <block id="e841538cca9e2cf1fae81ffe21df7466" category="cell">data2 ボリューム： SID_data2_mnt00004</block>
  <block id="3ed5556fee96de062d644851208dd660" category="cell">ログボリューム： SID_log_mnt00004</block>
  <block id="03a60a69cee7408b407e8ed18de961e5" category="cell">データボリューム： SID_data_mnt00004</block>
  <block id="7ad8ef5e9493431c100fe1929275d46f" category="cell">すべてのホストの共有ボリューム</block>
  <block id="693ff1bb9789154e19ce882511f832d6" category="cell">SAP HANA ホストのマウントポイント</block>
  <block id="3b0649c72650c313a357338dcdfb64ec" category="cell">注</block>
  <block id="3834b3356eaa1553006c5471596d35c1" category="cell">すべてのホストにマウントされています</block>
  <block id="aed47d1036974391b87115f518c5ad9d" category="cell">SID_data_mnt00002</block>
  <block id="014e151088a15dadd29fbd3ddd2eece8" category="cell">/hana/data/sid/mnt00002</block>
  <block id="33536390a7276b2c74b95566e3d0d297" category="cell">SID_data2_mnt00002</block>
  <block id="ab22798507bc37ab18a91947cfbe50e6" category="cell">/hana/data2/SID/mnt00002</block>
  <block id="8eaf7e9b1604430bac4e6dfd5939d3b3" category="cell">SID_log_mnt00002</block>
  <block id="36fb6deade219e3cfdee0d1e5382afa8" category="cell">/hana/log/sid/mnt00002</block>
  <block id="2289ec88b37b878c492747449a18a549" category="cell">SID_data_mnt00003</block>
  <block id="fef79e4721fe570e8a193320c7d270ce" category="cell">/hana/data/sid/mnt00003</block>
  <block id="bbff3274b9791230c96c20a7db005976" category="cell">SID_data2_mnt00003</block>
  <block id="ca0cf1c880cd5ab76a6c51562746eb04" category="cell">/hana/data2/SID/mnt00003</block>
  <block id="4439e6ea1822110931ae0b346803a4ac" category="cell">SID_log_mnt00003</block>
  <block id="380d4f0ad324c2dfd6c1ca68fd7bafbf" category="cell">/hana/log/sid/mnt00003</block>
  <block id="e8305dfe00f0309c92a6206d66e79543" category="cell">SID_data_mnt00004</block>
  <block id="a4f33e779d1944af098aa7eb8e8b7af4" category="cell">/hana/data/sid/mnt00004</block>
  <block id="218ad8a689f58dc4e5ba92853698500b" category="cell">SID_data2_mnt00004</block>
  <block id="08dc2448980b987da62e9d1e4ca018c9" category="cell">/hana/data2/SID/mnt00004</block>
  <block id="772d9b9673f172efa79c1a7882b6d979" category="cell">SID_log_mnt00004</block>
  <block id="69c78d157fba71e316ca5acf4eb8cb75" category="cell">/hana/log/sid/mnt00004</block>
  <block id="9e81e7b963c71363e2fb3eefcfecfc0e" category="cell">共有</block>
  <block id="9c7f13d493df94d57a532cd79c0ffa64" category="cell">/hana/shared-SID を指定します</block>
  <block id="f4c8435e4cbde93f00e4d1d5f25bedb2" category="cell">usr-sap-host1</block>
  <block id="e049803e41fabe0f53c4ead4b0f14350" category="cell">/usr/sap/SID</block>
  <block id="8d653d19a4cbb5862c5b1fc62193bed3" category="cell">ホスト 1 にマウントされています</block>
  <block id="2c1dcadb291b7285e8a1001552fcc6d1" category="cell">usr-sap-host2</block>
  <block id="33a6785666ac3aaa1c087db254ded2cb" category="cell">ホスト 2 にマウントされています</block>
  <block id="340e8bd3e6491f3fe8bd43fca2c60e95" category="cell">usr-sap-host3</block>
  <block id="2a7bf7921d279ab9a00111b11d3ae899" category="cell">ホスト 3 にマウント</block>
  <block id="123a9fde0665e6f3dee96c9c40722de3" category="cell">usr-sap-host4</block>
  <block id="6e3dcff90b7ca24cdf923aff68ce5b00" category="cell">ホスト 4 にマウント</block>
  <block id="907d47ee5162569b082834e89adfec7c" category="cell">usr-sap-host5</block>
  <block id="fc0236f60f516ce4f48a70a9736de333" category="cell">ホスト 5 にマウント</block>
  <block id="13d80777c8fd43e555c1f5b1b72d7ef0" category="section-title">ホストの設定</block>
  <block id="b688483cd0a2e330c81c99abb3e612b1" category="inline-link-macro">「ホストのセットアップ」</block>
  <block id="560dda3ab3afa61eb803bc19cb5acc84" category="list-text">追加のマウントポイントを作成します。</block>
  <block id="ae184ec9bdba806be5988da85e799c3a" category="list-text">シングルホストシステムの場合は、マウントポイントを作成し、データベースホストに権限を設定します。</block>
  <block id="3a4afc3d4465684d9924e5bca29c53fe" category="list-text">マルチホストシステムの場合は、マウントポイントを作成し、すべてのワーカーホストとスタンバイホストに権限を設定します。以下のコマンド例は、 2+1 のマルチホスト HANA システムを示しています。</block>
  <block id="fc99a71532d5fc19420f3089b094e40c" category="list-text">1 つ目のワーカーホスト：</block>
  <block id="74ce80ef80982f26e052c73c94a02637" category="list-text">2 つ目のワーカーホスト：</block>
  <block id="411d2b952bb67be5147ad7888b44819f" category="list-text">スタンバイホスト：</block>
  <block id="fffa779fc8dbbf30d23e4f7dba0bce07" category="list-text">すべてのホスト上の /etc/fstab 構成ファイルに追加のファイル・システムを追加しますNFSv4.1 を使用するシングルホストシステムの例を次に示します。</block>
  <block id="38f49054cf8e175dd49c721b8e9b5584" category="admonition">ボリュームごとに異なる TCP セッションを使用するために、各データボリュームへの接続には異なる SVM 仮想インターフェイスを使用します。nConnect マウントオプションが OS で使用可能な場合は、そのオプションを使用することもできます。</block>
  <block id="1aa3240e835a1ccee1c1455ab8240cfa" category="list-text">ファイルシステムをマウントするには、「 mount – a 」コマンドを実行します。</block>
  <block id="f24c14c86fe4885372ee7537f12b5831" category="section-title">データボリュームパーティションを追加しています</block>
  <block id="140aa7f2a42d2786e74cffaa9b3cae98" category="paragraph">テナントデータベースに対して次の SQL ステートメントを実行し、テナントデータベースにデータボリュームパーティションを追加します。追加のボリュームへのパスを使用：</block>
  <block id="8517d48ff677af656392e116dabd2ac9" category="summary">各 SAP HANA サーバには、最低 8Gbps の帯域幅の冗長 FCP SAN 接続が必要です。ストレージコントローラに接続された各 SAP HANA ホストでは、少なくとも 8Gbps の帯域幅をストレージコントローラで設定する必要があります。</block>
  <block id="e368e008d79a3b2079d973871fd38c35" category="summary">ここでは、ネットアップストレージシステムの構成について説明します。プライマリのインストールとセットアップは、対応する ONTAP のセットアップガイドおよび設定ガイドに従って実行する必要があります。</block>
  <block id="331f03787d9544cd97e5b3a31e2b31bc" category="doc">ストレージコントローラのセットアップ</block>
  <block id="fd18465573ec21a6218982055981f6b1" category="section-title">ストレージ効率</block>
  <block id="cc9ff39c9f631978557ae00fd8f5865d" category="paragraph">SSD 構成の SAP HANA では、インライン重複排除、ボリューム間インライン重複排除、インライン圧縮、インラインコンパクションがサポートされています。</block>
  <block id="ed6036f9cee51fdd7e2a091bbae50c50" category="paragraph">HDD ベースの構成で Storage Efficiency 機能を有効にすることはできません。</block>
  <block id="a662d487b875a4e232a16649f36fb399" category="section-title">サービス品質</block>
  <block id="7686322155849443f06959615c011bf4" category="paragraph">QoS を使用すると、特定の SAP HANA システムやその他のアプリケーションの共有使用コントローラにおけるストレージスループットを制限できます。1 つのユースケースとして、開発システムとテストシステムのスループットを制限し、混在環境で本番システムに影響を与えないようにすることが挙げられます。</block>
  <block id="6c86cfdf44739a850a7a1248b66cb537" category="paragraph">サイジングプロセスでは、非本番システムのパフォーマンス要件を決定する必要があります。開発 / テスト用のシステムは、通常、 SAP で定義されている本番用システム KPI の 20~50% の範囲で、パフォーマンス値を低くしてサイジングすることができます。</block>
  <block id="6ab5df7290e481b70e28b2b6f494b241" category="paragraph">ONTAP 9 以降では、ストレージボリュームレベルで QoS が設定され、スループット（ MBps ）と I/O 量（ IOPS ）に最大値が使用されます。</block>
  <block id="652c99b312d2d799385f153fd324ef46" category="paragraph">ストレージシステムのパフォーマンスに最大の影響があるのは、大きい書き込み I/O です。そのため、 QoS スループットの制限値として、データボリュームとログボリュームの対応する書き込み SAP HANA ストレージパフォーマンス KPI 値の割合を設定する必要があります。</block>
  <block id="2e985af49c448d15c7b99987586e6b15" category="section-title">NetApp FabricPool</block>
  <block id="06ef1046368829b825e8266554a89dcb" category="paragraph">SAP HANA システムのアクティブなプライマリファイルシステムには、 NetApp FabricPool テクノロジを使用しないでください。これには ' データとログ領域のファイル・システムと '/hana/shared-file システムが含まれますそのため、特に SAP HANA システムの起動時に、予測不可能なパフォーマンスが発生します。</block>
  <block id="7bb98c896519df010b68c8bdb336edc7" category="paragraph">「 snapshot-only 」階層化ポリシーを使用することも、 SnapVault または SnapMirror デスティネーションなどのバックアップターゲットで一般的に FabricPool を使用することもできます。</block>
  <block id="b76091ebd2ebee3eceba1434b0e25665" category="admonition">FabricPool を使用してプライマリストレージで Snapshot コピーを階層化するか、バックアップターゲットで FabricPool を使用すると、データベースまたはシステムクローンの作成や修復などのその他のタスクのリストアとリカバリに必要な時間が変わります。この点を考慮して、ライフサイクル全体の管理戦略を計画し、この機能を使用している間も SLA が満たされていることを確認してください。</block>
  <block id="46727fb1b4c25171c126d53a75e860d4" category="paragraph">FabricPool は、ログバックアップを別のストレージ階層に移動する場合に適しています。バックアップの移動は、 SAP HANA データベースのリカバリに要する時間に影響します。したがって、「 tiering-minimum-cooling-days 」オプションには、リカバリに必要なログバックアップをローカルの高速ストレージ階層に定期的に配置する値を設定する必要があります。</block>
  <block id="6e8775bd755a8835ce86806d669677ea" category="section-title">ストレージ構成</block>
  <block id="6e2e713144257635582dbbf70df45c90" category="paragraph">以下に、必要なストレージ構成手順の概要を示します。各手順の詳細については、以降のセクションで説明します。このセクションでは、ストレージハードウェアがセットアップされており、 ONTAP ソフトウェアがすでにインストールされていることを前提としています。また、ストレージポート（ 10GbE 以上）とネットワークの間の接続がすでに確立されている必要があります。</block>
  <block id="1a6713a2ed51f26877113c77d1ed10d7" category="inline-link-macro">ディスクシェルフの接続</block>
  <block id="9b58b6eeca17fb4fe9e5352e926cdcfa" category="inline-link-macro">アグリゲートの構成：</block>
  <block id="b198e02504c91a496ce6aa963575c839" category="inline-link-macro">Storage Virtual Machine の設定。</block>
  <block id="345bb6af01988bbf21faec0cf43efa4c" category="inline-link-macro">論理インターフェイスの構成</block>
  <block id="6e12a7f11b9c2161720afb5f8de85d45" category="inline-link-macro">SAP HANA シングルホストシステムのボリューム構成</block>
  <block id="2d96346a98280eefa1ce52a6dc646347" category="inline-link-macro">SAP HANA マルチホストシステムのボリューム構成。</block>
  <block id="5f8947cce1567cd7d0eddcfc20683ac3" category="inline-link-macro">ボリュームのオプション</block>
  <block id="8011b09d28d54ea23274d28560d4fd1e" category="inline-link-macro">NFSv3 用の NFS 設定</block>
  <block id="a0212bd1cf31c1a185f0f29d94897927" category="inline-link-macro">NFSv4 の NFS 設定</block>
  <block id="00e211cc0d199a4dc3e5894015258add" category="inline-link-macro">ボリュームをネームスペースにマウントし、エクスポートポリシーを設定</block>
  <block id="a2c22f5fc8f18d8d87dd5a34087a8c8e" category="section-title">ディスクシェルフの接続</block>
  <block id="d999c97b7b1008a316e18c6626bbd3f9" category="paragraph">HDD を使用すると、次の図に示すように、 1 つの SAS スタックに最大 2 台の DS2246 ディスクシェルフまたは 4 台の DS224C ディスクシェルフを接続することで、 SAP HANA ホストに必要なパフォーマンスを実現できます。各シェルフ内のディスクは、 HA ペアの両方のコントローラに均等に分散する必要があります。</block>
  <block id="be1f49d12074a6591e9316baeac9bd63" category="paragraph">SSD を使用する場合は、次の図に示すように、 1 つの SAS スタックに最大 1 台のディスクシェルフを接続して、 SAP HANA ホストに必要なパフォーマンスを実現できます。各シェルフ内のディスクは、 HA ペアの両方のコントローラに均等に分散する必要があります。ディスクシェルフ DS224C では、クワッドパスの SAS ケーブルも使用できますが、必須ではありません。</block>
  <block id="10ae1f9130fbbe975a644b0f325c6b31" category="section-title">アグリゲートの構成</block>
  <block id="6d83330b28ca1a77d72839b80db66f91" category="paragraph">一般に、使用するディスクシェルフやドライブテクノロジ（ SSD または HDD ）に関係なく、コントローラごとに 2 つのアグリゲートを設定する必要があります。FAS2000 シリーズ・システムには、 1 つのデータ・アグリゲートで十分です。</block>
  <block id="1033ef32c4f49ab33d841963d284959e" category="section-title">HDD を使用したアグリゲート構成</block>
  <block id="f86ec3e0c9a63d44ac0e2e4b954909f2" category="paragraph">次の図は、 8 台の SAP HANA ホストの構成を示しています。4 台の SAP HANA ホストが各ストレージコントローラに接続されています。各ストレージコントローラに 1 つずつ、合計 2 つのアグリゲートが構成されています。各アグリゲートには、 4 × 10 = 40 のデータディスク（ HDD ）が構成されます。</block>
  <block id="d6cced120b68f4aa019b47531e1ca2a2" category="section-title">SDD 専用システムで構成を集約する</block>
  <block id="6133edaaabe85a9df71198b718da08cd" category="paragraph">一般に、使用するディスクシェルフやディスクテクノロジ（ SSD または HDD ）に関係なく、コントローラごとに 2 つのアグリゲートを構成する必要があります。FAS2000 シリーズ・システムには、 1 つのデータ・アグリゲートで十分です。</block>
  <block id="db04b8526d641576c657ab1ab39cc830" category="paragraph">次の図は、 ADPv2 を使用した、 12Gb の SAS シェルフで稼働する、 12 台の SAP HANA ホストの構成を示しています。6 台の SAP HANA ホストが各ストレージコントローラに接続されています。各ストレージコントローラに 2 つずつ、合計 4 つのアグリゲートが構成されています。各アグリゲートには、 9 つのデータパーティションと 2 つのパリティディスクパーティションを含む 11 本のディスクが構成されます。各コントローラで、 2 つのスペアパーティションを使用できます。</block>
  <block id="4e777d3b2a8b458c7f1f8e99e8ee985b" category="section-title">Storage Virtual Machine の設定</block>
  <block id="f138253c8e7297962c645362420d9aa2" category="paragraph">SAP HANA データベースを使用する複数の SAP ランドスケープでは、単一の SVM を使用できます。SVM は、社内の複数のチームによって管理される場合に備え、必要に応じて各 SAP ランドスケープに割り当てることもできます。</block>
  <block id="ea2e61216b6ebab627ba8bbb11a9ed06" category="paragraph">QoS プロファイルが自動的に作成されて新しい SVM の作成時に割り当てられた場合は、自動的に作成されたプロファイルを SVM から削除して、 SAP HANA に必要なパフォーマンスを提供します。</block>
  <block id="d1a14b5b7465c90ccf63dce24060e194" category="section-title">論理インターフェイスの構成</block>
  <block id="a7546acf86ebe6ec3fca7a6d1722c1c3" category="paragraph">SAP HANA 本番システムでは、 SAP HANA ホストからデータボリュームとログボリュームをマウントするために別々の LIF を使用する必要があります。したがって、少なくとも 2 つの LIF が必要です。</block>
  <block id="11b3a97ddf63560e6780cfe906220e5c" category="paragraph">異なる SAP HANA ホストのデータボリュームマウントとログボリュームマウントは、同じ LIF を使用するか、マウントごとに個別の LIF を使用することで、物理ストレージネットワークポートを共有できます。</block>
  <block id="9c5c8b7c01b0aefdbe9a08c959df1a52" category="paragraph">物理インターフェイスごとのデータボリュームマウントとログボリュームマウントの最大数を次の表に示します。</block>
  <block id="bb065ebf8bee13d3c6ea634c4584fc80" category="cell">イーサネットポート速度</block>
  <block id="0cc5c79089d6ca0752529568758efc4c" category="cell">10GbE</block>
  <block id="dec94f7ee4a8bd795f860764b38b4bfe" category="cell">25GbE</block>
  <block id="d577a779ffdacd409ec756e191be8c6b" category="cell">40GbE</block>
  <block id="797c6d8f4bdab58ccf0409871daa900d" category="cell">100 Gee</block>
  <block id="29350e56cf985cc1c3055886a585be16" category="cell">物理ポートあたりのログボリュームマウントまたはデータボリュームマウントの最大数</block>
  <block id="c20ad4d76fe97759aa27a0c99bff6710" category="cell">12.</block>
  <block id="4f405e1a75e4b7b8ec6f50946f0734fc" category="admonition">異なる SAP HANA ホスト間で 1 つの LIF を共有するには、データボリュームまたはログボリュームを別の LIF に再マウントすることが必要になる場合があります。この変更により、ボリュームが別のストレージコントローラに移動された場合のパフォーマンス低下を回避できます。</block>
  <block id="ea4399c89609128e15e361a718a71f5a" category="paragraph">開発 / テスト用システムでは、物理ネットワークインターフェイス上で使用できるデータおよびボリュームのマウントや LIF を増やすことができます。</block>
  <block id="93dc7819b20008ad7611ec3405b515ef" category="paragraph">本番システム ' 開発システム ' およびテスト・システムでは '/hana/shared ファイル・システムは ' データ・ボリュームまたはログ・ボリュームと同じ LIF を使用できます</block>
  <block id="6fb40a9890e4f86fa48bd658ab16833b" category="paragraph">次の図は、 4 つのシングルホスト SAP HANA システムのボリューム構成を示しています。各 SAP HANA システムのデータボリュームとログボリュームは、異なるストレージコントローラに分散されます。たとえば、ボリューム「 ID1_data_mnt00001 」がコントローラ A で設定され、ボリューム「 ID1_log_mnt00001 」がコントローラ B で設定されているとします</block>
  <block id="7ba23b870b3412fc76e2335500441f60" category="admonition">HA ペアのうち、 1 台のストレージコントローラのみを SAP HANA システムに使用する場合は、データボリュームとログボリュームを同じストレージコントローラに保存することもできます。</block>
  <block id="39d162ac72e2fe9f7198155ac712dbc1" category="admonition">データボリュームとログボリュームが同じコントローラに格納されている場合は、サーバからストレージへのアクセスに、 2 つの異なる LIF を使用して実行する必要があります。 1 つはデータボリュームにアクセスする LIF で、もう 1 つはログボリュームにアクセスする LIF です。</block>
  <block id="073ab5784fc6b184fe0dffe3c4a47dd9" category="paragraph">各 SAP HANA DB ホストには、データボリューム、ログボリューム、「 /hana/shared 」のボリュームが構成されています。次の表は、シングルホスト SAP HANA システムの構成例を示しています。</block>
  <block id="bec4d7ba62d8818495dd8047fe16febc" category="cell">システム SID1 のデータ、ログ、および共有ボリューム</block>
  <block id="3ff612b88bbeb6483579591b4b16a8c2" category="cell">データボリューム： SID1_data_mnt00001</block>
  <block id="f32db5be1eba03edf6b74cb2c307a926" category="cell">共有ボリューム： SID1_shared</block>
  <block id="e27dc2a68e5af6cb931b3784bf308897" category="cell">ログボリューム： SID1_log_mnt00001</block>
  <block id="bbe315bb9712be033b109b8cc20809c7" category="cell">システム SID2 のデータボリューム、ログボリューム、および共有ボリューム</block>
  <block id="3b8347a425c00d6aaef68430847885d8" category="cell">ログボリューム： SID2_log_mnt00001</block>
  <block id="d655f9e8f5e3c0ab2d138ad9ceb5b0a4" category="cell">データボリューム： SID2_data_mnt00001</block>
  <block id="383766abb3257650122592338d6ddfe8" category="cell">共有ボリューム： SID2_shared</block>
  <block id="a8c9456b945dda42b7cb811cdeeeb569" category="cell">システム SID3 のデータ、ログ、および共有ボリューム</block>
  <block id="7f2a7203636ecb8154977fbc4165ad52" category="cell">共有ボリューム： SID3_shared</block>
  <block id="75bc4903743cacb7ec299172f9a7a923" category="cell">データボリューム： SID3_data_mnt00001</block>
  <block id="ac9f0ccc380a2cf30aca6416dca9dc26" category="cell">ログボリューム： SID3_log_mnt00001</block>
  <block id="e415aa3c6982d40c43978fa59557a7af" category="cell">システム SID4 のデータボリューム、ログボリューム、および共有ボリューム</block>
  <block id="5572f58fe3ff25e3eb168eea2fc37e6b" category="cell">ログボリューム： SID4_log_mnt00001</block>
  <block id="5e45398818752a3a8c885762ddfc9916" category="cell">共有ボリューム： SID4_shared</block>
  <block id="5541ec8e99b4baa58cb2afaed5fc63bf" category="cell">データボリューム： SID4_data_mnt00001</block>
  <block id="57d26add59c4bcc2f219b2d2e8666bd7" category="paragraph">次の表に、シングルホストシステムのマウントポイント構成例を示します。「 idadm 」ユーザのホーム・ディレクトリを中央ストレージに配置するには、「 /usr/sap/SID 」ファイル・システムを「 S ID_SHARED 」ボリュームからマウントする必要があります。</block>
  <block id="2b20636173a684fa0d66246f2351348f" category="cell">ジャンクションパス</block>
  <block id="139518e6703ff17871be2e881429d302" category="section-title">SAP HANA マルチホストシステムのボリューム構成</block>
  <block id="f7122248eb9bb754dcbae085218e1595" category="paragraph">次の図は、 4+1 の SAP HANA システムのボリューム構成を示しています。各 SAP HANA ホストのデータボリュームとログボリュームは、異なるストレージコントローラに分散されます。たとえば、ボリューム「 ID1_data1_mnt00001 」がコントローラ A に設定され、ボリューム「 ID1_log1_mnt00001 」がコントローラ B に設定されているとします</block>
  <block id="85c5636d02be1f0b907841ad58213447" category="admonition">HA ペアのうち、 1 台のストレージコントローラのみを SAP HANA システムに使用する場合は、データボリュームとログボリュームを同じストレージコントローラに保存することもできます。</block>
  <block id="d75f982c7fa083a511e12080e3a4cfd5" category="admonition">データボリュームとログボリュームが同じコントローラに格納されている場合は、サーバからストレージへのアクセスに、 2 つの異なる LIF を使用して実行する必要があります。 1 つはデータボリュームにアクセスするため、もう 1 つはログボリュームにアクセスするためです。</block>
  <block id="3aaed26996523c93d5f3f1362bf3a698" category="paragraph">各 SAP HANA ホストには、 1 個のデータボリュームと 1 個のログボリュームが作成されます。「 /hana/shared 」ボリュームは、 SAP HANA システムのすべてのホストで使用されます。次の表に、 4 つのアクティブホストを持つ、マルチホスト SAP HANA システムの構成例を示します。</block>
  <block id="e1b0e513c8bb3fb181664dfb11823d82" category="paragraph">次の表に、アクティブな SAP HANA ホストが 4 台あるマルチホストシステムの構成とマウントポイントを示します。各ホストの 'idadm' ユーザのホーム・ディレクトリを中央ストレージに配置するために '/usr/sap/SID' ファイル・システムは 'S ID_SHARED' ボリュームからマウントされます</block>
  <block id="8afc05cfcca59bdc514fcb80e6c0d949" category="cell">/hana/shareed/</block>
  <block id="66cbf41a87a685e6ad37ed18e6f61f06" category="section-title">ボリュームのオプション</block>
  <block id="6e52e9b5049ecde797509957559efadd" category="paragraph">すべての SVM について、次の表に示すボリュームオプションを確認して設定する必要があります。一部のコマンドについては、 ONTAP で advanced 権限モードに切り替える必要があります。</block>
  <block id="004bf6c9a40003140292e97330236c53" category="cell">アクション</block>
  <block id="ee97be03cb04119af45014d815621ce1" category="cell">コマンドを実行します</block>
  <block id="59dafe6ffe356573f4a59e43b8c2a12d" category="cell">Snapshot ディレクトリの可視化を無効にします</block>
  <block id="bfcee32efb1a622a6e587e6e46aabb35" category="cell">vol modify -vserver &lt;vserver-name&gt; -volume &lt;volname&gt; -snapdir-access false</block>
  <block id="d9802677b2dd550f4d0177de99399b0d" category="cell">Snapshot コピーの自動作成を無効にする</block>
  <block id="bba4f772e426d2e1201535827315e250" category="cell">vol modify – vserver &lt;vserver-name&gt; -volume &lt;volname&gt; -snapshot-policy none と指定します</block>
  <block id="85314edd158f5145de1023ea7992a73d" category="cell">SID_shared ボリュームを除くアクセス時間の更新を無効にします</block>
  <block id="d06aa9b498f490322d6b75ab763868c4" category="paragraph">advanced 権限レベルの vol modify -vserver &lt;vserver-name&gt; -volume &lt;volname&gt; -atime-update false set admin を設定します</block>
  <block id="69b5be9d0ad62cad1fe29832746d89fc" category="paragraph">次の表に示す NFS オプションは、すべてのストレージコントローラで検証および設定する必要があります。</block>
  <block id="7b0c54ca1e88f6ef7461709ba20843e4" category="paragraph">ここに示す一部のコマンドについては、 ONTAP で advanced 権限モードに切り替える必要があります。</block>
  <block id="d696a6a2b32bd5b7e510d3c088fce207" category="cell">NFSv3 を有効にします</block>
  <block id="d9a7640ac46e3f8cf9816a8ab8caaabb" category="cell">nfs modify -vserver &lt;vserver -name&gt; v3.0 enabled</block>
  <block id="88a84b59bbf7c31014bc6e5332d54d69" category="paragraph">advanced 権限レベルの nfs modify -vserver &lt;vserver_name&gt; -tcp-max-xfer-size 1048576 set admin を設定します</block>
  <block id="4b3b3fba259d5ac2ca622fa9160b1fb5" category="section-title">NFSv4 の NFS 設定</block>
  <block id="c8542833574cfec9920af77661a766e0" category="paragraph">次の表に示す NFS オプションは、すべての SVM で検証および設定する必要があります。</block>
  <block id="214d7b06b7a82576ad3cc8dda3a23b58" category="paragraph">一部のコマンドについては、 ONTAP で advanced 権限モードに切り替える必要があります。</block>
  <block id="70f982c83fe296db3a8fc01d6800eeb5" category="cell">NFSv4 を有効にします</block>
  <block id="b4a26338e6b2855edb75ec84606be72f" category="cell">nfs modify -vserver &lt;vserver-name&gt; -v4.1 enabled と入力します</block>
  <block id="ddf50f4def54fc42e1e3c48d60dc6360" category="cell">NFSv4 のアクセス制御リスト（ ACL ）を無効にする</block>
  <block id="77fd2d8c2c348207e3e8aa8833c161c4" category="cell">nfs modify -vserver &lt;vserver_name&gt;-v4.1-acl disabled</block>
  <block id="75a14711dc56291ed980640b0097eeda" category="cell">NFSv4 ドメイン ID を設定する</block>
  <block id="33f975af5bcb6d72979c2b52e31d0a40" category="cell">nfs modify -vserver &lt;vserver_name&gt;-v4-id-domain &lt;domain-name&gt;</block>
  <block id="098bb5f97d963ff34a01a7b3ceb37e49" category="cell">NFSv4 の読み取り委譲を無効にする</block>
  <block id="a7a4297edce035892ff20e78720f0828" category="cell">nfs modify -vserver &lt;vserver_name&gt;-v4.1-read-delegation disabled</block>
  <block id="67b5b0ca237f222e8fc13c6b113fed2f" category="cell">NFSv4 の書き込み委譲を無効にする</block>
  <block id="7654c857db3169792d3c5833ad28cd37" category="cell">nfs modify -vserver &lt;vserver_name&gt;-v4.1-write-delegation disabled</block>
  <block id="ffea0284d7bfb3aad7e0d7a07765b424" category="cell">NFSv4 数値 ID を無効にする</block>
  <block id="96adb5308418a0e6a16e78f391a5725d" category="cell">nfs modify -vserver &lt;vserver_name&gt;-v4-numeric-ids disabled</block>
  <block id="4a762e476d9eda379d2de2de4266fb64" category="inline-link-macro">NFSv4 用の SAP HANA インストールの準備</block>
  <block id="58c8eee50f8f52237271f796e3c1123f" category="cell">nameserver.ini 内のセクション</block>
  <block id="3ad6e9988864aeae2ef386345946dc6d" category="cell">フェイルオーバー</block>
  <block id="af175fe1a76f8f5124de60f5d01ca78b" category="cell">normal_retries</block>
  <block id="19d4f3d1b35d2e82f1cec6bde8a752c8" category="cell">distributed_watchdog</block>
  <block id="2a81c8748d4d99f78d015104c26e9e58" category="cell">Deactivate_retries</block>
  <block id="6512bd43d9caa6e02c990b0a82652dca" category="cell">11.</block>
  <block id="e83d9d66a13e5beb6fcd73e9458bd812" category="cell">TAKEOVER_retries を指定します</block>
  <block id="8b59115254ff7312d8a47a3558d2ef5a" category="section-title">ボリュームをネームスペースにマウントし、エクスポートポリシーを設定</block>
  <block id="118d2a12d0ab217e6a53a464692c141a" category="paragraph">ボリュームを作成するときは、ボリュームをネームスペースにマウントする必要があります。このドキュメントでは、ジャンクションパス名がボリューム名と同じであると想定しています。デフォルトでは、ボリュームはデフォルトポリシーを使用してエクスポートされます。エクスポートポリシーは必要に応じて適用できます。</block>
  <block id="5a8b82a0bfb2e7625d351720d4376bdf" category="summary">ストレージコネクタは、フェイルオーバー機能を備えたマルチホスト環境でのみ必要です。マルチホスト構成では、 SAP HANA に高可用性機能が提供されるため、 SAP HANA データベースホストはスタンバイホストにフェイルオーバーできます。この場合、障害が発生したホストの LUN には、スタンバイホストからアクセスして使用されます。</block>
  <block id="cfb64066e9063f57ad27ccf9e4e06e87" category="doc">SAP HANA Storage Connector API</block>
  <block id="143f136fe7528a58d8f5256ccaa89109" category="paragraph">ストレージコネクタは、フェイルオーバー機能を備えたマルチホスト環境でのみ必要です。マルチホスト構成では、 SAP HANA に高可用性機能が提供されるため、 SAP HANA データベースホストはスタンバイホストにフェイルオーバーできます。この場合、障害が発生したホストの LUN には、スタンバイホストからアクセスして使用されます。ストレージコネクタは、一度に 1 つのデータベースホストだけがストレージパーティションにアクティブにアクセスできるようにするために使用されます。</block>
  <block id="89814b29e88510280af62ae60925b251" category="inline-link">SAP ノート 1900823</block>
  <block id="e078b828a6bb770866173121ebdf49eb" category="paragraph">ネットアップストレージを使用した SAP HANA マルチホスト構成では、 SAP が提供する標準のストレージコネクタが使用されます。『 SAP HANA Fibre Channel Storage Connector Admin Guide 』は、への添付ファイルとして提供されています<block ref="fb03c315acf5bdf850546480c01e7306" category="inline-link-rx"></block>。</block>
  <block id="42adc1bfcd3235fac4ff951f70ecd835" category="paragraph">ストレージコントローラと SAP HANA データベースホストの間で時刻を同期する必要があります。そのためには、すべてのストレージコントローラとすべての SAP HANA ホストに同じタイムサーバを設定します。</block>
  <block id="e91f856fa9e93a1406d354f1fb9df553" category="summary">このセクションで説明するすべての手順は、物理サーバ上の SAP HANA 環境と、 VMware vSphere 上で実行される SAP HANA 環境の両方で有効です。</block>
  <block id="ec222a30e1c5681ed56787b00bda2116" category="section-title">SUSE Linux Enterprise Server の構成パラメータ</block>
  <block id="8740018c375cf2d0f4d463d0bbd4d8d4" category="paragraph">各 SAP HANA ホストでは、 SAP HANA によって生成されるワークロードに合わせて、追加のカーネルパラメータと構成パラメータを調整する必要があります。</block>
  <block id="efcd9df071a570f7c5ed3559b172bce3" category="section-title">SUSE Linux Enterprise Server 12 および 15</block>
  <block id="ebb8355d8accfb697b6808ce518c8666" category="paragraph">SUSE Linux Enterprise Server （ SLES ） 12 SP1 以降、カーネルパラメータは /etc/sysctl.d`d ディレクトリ内の構成ファイルで設定する必要があります。たとえば '91-NetApp-/hana.conf という名前の構成ファイルを作成する必要があります</block>
  <block id="68d9ac2d7e973e347e878b223355bf31" category="inline-link">SAP ノート 3024346</block>
  <block id="82740b25df395d68a79118ebc5c4da80" category="section-title">Red Hat Enterprise Linux 7.2 以降の構成パラメータ</block>
  <block id="c2e770dd6d768668395e4b8d3b9291d1" category="paragraph">Red Hat Enterprise Linux 7.2 以降では、 /etc/sysctl.d` ディレクトリにある構成ファイルでカーネルパラメータを設定する必要があります。たとえば '91-NetApp-/hana.conf という名前の構成ファイルを作成する必要があります</block>
  <block id="4142bd640477d1c4292c7fcbb3bb1f57" category="section-title">/hana/shared ボリュームにサブディレクトリを作成します</block>
  <block id="67435e0588f5cb039a7fb0f4578e90a7" category="admonition">以下の例は、 SID=NF2 の SAP HANA データベースを示しています。</block>
  <block id="73534bc746cc8b23b1e96428d64fb98d" category="paragraph">必要なサブディレクトリを作成するには、次のいずれかの操作を行います。</block>
  <block id="4dedcda7bf51022c092ff39d3a6d5686" category="list-text">マルチ・ホスト・システムの場合は '/hana/shared-volume をマウントし ' 各ホストの 'hared' サブディレクトリと 'usr-sap' サブディレクトリを作成します</block>
  <block id="d434026f127f46b1327fb139872c6f31" category="list-text">マルチホストシステムの場合は、マウントポイントを作成し、すべてのワーカーホストとスタンバイホストに権限を設定します。</block>
  <block id="456f14e4dccd61c74e863ee833a9ca13" category="paragraph">以下のコマンド例は、 2+1 のマルチホスト HANA システムを示しています。</block>
  <block id="436b2f88b88434a5965be45b319737cd" category="paragraph">NFS のバージョンと ONTAP のリリースに応じて、異なるマウントオプションを使用する必要があります。次のファイルシステムをホストにマウントする必要があります。</block>
  <block id="2f44a4485ee99d4db07e6c780160d663" category="list-text">「 /hana/data/sid/mnt0000* 」と入力します</block>
  <block id="cbc27a44a01f5f9f44192601795600d7" category="list-text">「 /hana/log/sid/mnt0000* 」と入力します</block>
  <block id="e7152fc8e9f9294e574fc844aa9126ef" category="list-text">「 /hana/shared 」</block>
  <block id="8b82ac8f276252de930b321606714ed5" category="list-text">/usr/sap/SID</block>
  <block id="a73f318e7c68296dbc2c1fc7dc495dc8" category="paragraph">次の表に、シングルホスト SAP HANA データベースとマルチホスト SAP HANA データベースのファイルシステムごとに使用する必要がある NFS のバージョンを示します。</block>
  <block id="3b18b13f059019d19211f8a9f36f7e4e" category="cell">ファイルシステム</block>
  <block id="c5a3e92c7aeb0572333d41454f2c2695" category="cell">SAP HANA シングルホスト</block>
  <block id="6cfacba9e34e52124b1a2bcc7c4645a3" category="cell">SAP HANA マルチホスト</block>
  <block id="9fdd313c432a6ee693f5c8f5cc8fdf3c" category="cell">/hana/data/sid/mnt0000*</block>
  <block id="a3fc88f53929bc60dc3ca6c7a4b19b35" category="cell">NFSv3 または NFSv4</block>
  <block id="08e90903fe145a9dcc2fb967259a1755" category="cell">NFSv4</block>
  <block id="8f6fb4f6458a23be27986bb84613b874" category="cell">/hana/log/sid/mnt0000*</block>
  <block id="b61595b5b7b716bd6b8bd21e4fa4a3bf" category="cell">/hana/shared にアクセスします</block>
  <block id="1f34f4f6ae42ad0e5ccc8d8a4399150c" category="paragraph">次の表に、 NFS の各バージョンと ONTAP のリリースのマウントオプションを示します。共通パラメータは、 NFS と ONTAP のバージョンには依存しません。</block>
  <block id="b79b53eefbb492c96c4e5c552596db5a" category="admonition">SAP LaMa では、 /usr/sap/SID ディレクトリをローカルにする必要があります。したがって、 SAP LaMa を使用している場合は、 /usr/sap/SID の NFS ボリュームをマウントしないでください。</block>
  <block id="cd5a202e71fd003517be23ed41f89f8d" category="paragraph">NFSv3 では、ソフトウェアまたはサーバに障害が発生した場合に NFS ロックのクリーンアップ処理が行われないようにするため、 NFS ロックをオフにする必要があります。</block>
  <block id="93827363c57822e58dfbd5f05b9beac8" category="paragraph">ONTAP 9 では、 NFS 転送サイズを最大 1MB に設定できます。具体的には、 40GbE 以上でのストレージシステムへの接続では、スループットの期待値を達成するために転送サイズを 1MB に設定する必要があります。</block>
  <block id="6f5e55da455474f8c585cb463a2d639e" category="cell">共通パラメータ</block>
  <block id="5b12ee0369243579651edca43ff65c85" category="cell">NFSv3</block>
  <block id="0614a261ce2e53d5987e97a60496a434" category="cell">ONTAP 9 での NFS 転送サイズ</block>
  <block id="54b941646e65c3622af659cd9d965169" category="cell">ONTAP 8 での NFS 転送サイズ</block>
  <block id="1017e4c4798ba77b88c85f3b8c6fdf03" category="cell">rw 、 bg 、 hard 、 timeo = 600 、 noatime 、</block>
  <block id="7d7894f31c9b83146d2bc22185ed5db0" category="cell">rsize=65536 、 wsize=65536 、</block>
  <block id="ae2c578e6abfee06e6c468fd4e7cb392" category="paragraph">/etc/fstab 構成ファイルを使用してシステムのブート中にファイル・システムをマウントするには ' 次の手順を実行します</block>
  <block id="f731bd3074578aba0a3c1b5ab0ca78ee" category="list-text">必要なファイル・システムを /etc/fstab 構成ファイルに追加します</block>
  <block id="aff8bbab4f16423ec5907aed644aead6" category="list-text">Run `ount – a を実行して、すべてのホストのファイルシステムをマウントします。</block>
  <block id="2555851d01cabd281a371497bed0a9a9" category="list-text">必要なファイル・システムを ' すべてのホスト上の /etc/fstab 構成ファイルに追加します</block>
  <block id="019dc6de8e76037cb2c701eebcc7885a" category="summary">このドキュメントに記載されている情報の詳細については、以下のドキュメントや Web サイトを参照してください。</block>
  <block id="e34a4f0f85c6affc800c8d9647e17923" category="summary">このセクションでは、シングルホストシステムとマルチホストシステムに SAP HANA ソフトウェアをインストールするためのシステムの構成方法について説明します。</block>
  <block id="22b91f6553e0cbb7685f9eb877cf188d" category="section-title">シングルホストシステムにインストールします</block>
  <block id="8e74883ab7ca2d81b61cfaad2ddf19d2" category="section-title">マルチホストシステムにをインストールします</block>
  <block id="2c5a7a5ceaf9ad774a81a7201b4dd250" category="paragraph">マルチホストシステムに SAP HANA をインストールするには、次の手順を実行します。</block>
  <block id="ae2868fd55605b6107ba93c6890a3b53" category="summary">SAP HANA 1.0 SPS10 以降、 IO 動作を調整し、使用中のファイルシステムとストレージシステムのデータベースを最適化するためのパラメータが導入されています。</block>
  <block id="1bd81531313378d0d4283de4cbbc35d1" category="doc">SAP HANA 向けの I/O スタック構成</block>
  <block id="67844e82ab322c50575db48293bd0359" category="paragraph">SAP HANA 1.0 SPS10 以降、 I/O 動作を調整し、使用中のファイルシステムとストレージシステムのデータベースを最適化するためのパラメータが導入されています。</block>
  <block id="26ab8f65129b11e214b8281e8c3aaa83" category="paragraph">ネットアップは、最適な値を定義するため、パフォーマンステストを実施しました。次の表に、パフォーマンステストから推定した最適な値を示します。</block>
  <block id="1274865f8edcaa13006383f553d00582" category="inline-link">2267798 ： Configuration of the SAP HANA Database During Installation Using hdbparam 』で説明されています</block>
  <block id="8fc6942b9d902fde53ed01fa7625aae8" category="paragraph">バージョン SPS12 までの SAP HANA 1.0 では、これらのパラメータは、 SAP HANA データベースのインストール時に設定できます。これは、 SAP ノートで説明されています<block ref="2b0fd22ead842cf1665d70f8909d17e2" category="inline-link-rx"></block>。</block>
  <block id="4e0f8b3ee102e5b52cc383fd8b0d90f9" category="paragraph">また、パラメータは、 SAP HANA データベースのインストール後に「 hdbparam 」フレームワークを使用して設定することもできます。</block>
  <block id="ec8a4b40a7d633a3cf77ecd95d9d5df1" category="inline-link">2399079 ： HANA で hdbparam の除去 2</block>
  <block id="834a8b3050b2226b4812fb49026571b3" category="paragraph">SAP HANA 2.0 以降 'hdbparam' は廃止され ' パラメータは global.ini` に移動されましたパラメータは、 SQL コマンドまたは SAP HANA Studio を使用して設定できます。詳細については、 SAP ノートを参照してください<block ref="6af86c07e5a30516e9705c5fc7252793" category="inline-link-rx"></block>。次のテキストに示すように、 global.ini 内でパラメータを設定することもできます。</block>
  <block id="31835039a339b5b0f4d95c207e26b5e3" category="paragraph">SAP HANA 2.0 SPS5 以降、「 setParameter.py 」スクリプトを使用して、正しいパラメータを設定できます。</block>
  <block id="482a7b20dc0168fcd798c01f92ff4f90" category="summary">また、使用している Linux バージョンに固有のマルチパス構成に関する情報も記載されています。</block>
  <block id="f1b2831b8f22303f2f43d48d0f147f3a" category="paragraph">ホストをセットアップする前に、 NetApp SAN Host Utilities をからダウンロードしておく必要があります<block ref="1a36b59ecae7684863b79a0f690b6840" category="inline-link-rx"></block> HANA サーバにインストールします。Host Utility のマニュアルには、使用する FCP HBA に応じてインストールする必要がある追加ソフトウェアに関する情報が記載されています。</block>
  <block id="e077bd74583341fa1e17ee8fc0b5c0b4" category="paragraph">また、使用している Linux バージョンに固有のマルチパス構成に関する情報も記載されています。このドキュメントでは、 SLES 15 および Red Hat Enterprise Linux 7.6 以降で必要な設定手順について説明します。を参照してください<block ref="c4b23c8c60f3faad406f8d46d87ba646" category="inline-link-rx"></block>。</block>
  <block id="4d8b576322bf7d5677701855a54e6977" category="admonition">SAP HANA マルチホスト構成のすべてのワーカーホストとスタンバイホストで、手順 1~6 を実行する必要があります。</block>
  <block id="f0e0bdbc42c37dae577b18eb8dbd1386" category="list-text">「 lun lun lun show 」コマンドを実行し、必要なすべての LUN が表示されることを確認します。次に、 2 つのデータ LUN と 2 つのログ LUN を持つ 2+1 マルチホスト HANA システムの「 lun lun show 」コマンドの出力例を示します。出力には、 LUN および LUN 「 S 3data_mnt00001 」やデバイスファイル「 /dev/sdag 」などの対応するデバイスファイルが表示されます。各 LUN には、ホストからストレージコントローラへの FC パスが 8 つあります。</block>
  <block id="c9b9bdcff428106a20521627c72baa32" category="admonition">データとログ LUN の XFS ファイルシステムは 'relatim' および inode64' マウントオプションを使用してマウントする必要があります</block>
  <block id="ff3f1e894014f4c26eac8cab49b8a0f4" category="doc">VMware vSphere を使用した SAP HANA</block>
  <block id="e6bbcb3e4d889de6d1cf73dee0f9eac9" category="inline-link-macro">NFS を使用した NetApp AFF システムでの SAP HANA</block>
  <block id="5363a1e8e1763bb11c4b91b2868d5584" category="paragraph">SAP HANA での vSphere の使用の詳細については、次のリンクを参照してください。</block>
  <block id="f02780ddcfc1bddf0683bf8de02155d5" category="inline-link">SAP HANA on VMware vSphere - 仮想化 - コミュニティ Wiki</block>
  <block id="ab1b1647c4e88f4d70b589d5781012ca" category="inline-link">2161991 - VMware vSphere 設定ガイドライン - SAP One Support Launchpad （ログインが必要）</block>
  <block id="77735103527f028107b29d19df178798" category="list-text"><block ref="77735103527f028107b29d19df178798" category="inline-link-rx"></block></block>
  <block id="37139cc09cc8bc80e9ca73af4d3c785b" category="paragraph">また 'hdbparam フレームワークを使用して SAP HANA データベースのインストール後にパラメータを設定することもできます</block>
  <block id="ae8838acb9cb389ab57ac7e29427fe50" category="paragraph">SAP HANA 2.0 以降 'hdbparam' は廃止され ' パラメータは global.ini` に移動されましたパラメータは、 SQL コマンドまたは SAP HANA Studio を使用して設定できます。詳細については、 SAP ノートを参照してください<block ref="6af86c07e5a30516e9705c5fc7252793" category="inline-link-rx"></block>。パラメータは、次のように global.ini 内で設定することもできます。</block>
  <block id="57011fe1859f006c6ec7d602edb7a5a4" category="paragraph">SAP HANA 2.0 SPS5 以降では、「 setParameter.py 」スクリプトを使用して正しいパラメータを設定できます。</block>
  <block id="fef2c24f71a084e813005b395f827515" category="paragraph">SSD 構成の SAP HANA では、インライン重複排除、ボリューム間インライン重複排除、インライン圧縮、インラインコンパクションがサポートされています。</block>
  <block id="8bc14f0cb78851f59e85c1d447c2c99f" category="section-title">Quality of Service の略</block>
  <block id="37464f39e18200cea48c4d9c6761a91b" category="paragraph">サイジングプロセスでは、非本番システムのパフォーマンス要件を決定する必要があります。開発 / テスト用のシステムは、通常、 SAP で定義されている本番用システム KPI の 20~50% の範囲で、パフォーマンス値を低くしてサイジングすることができます。</block>
  <block id="67a6bbb8d3e29659ce53d34fa70d088f" category="paragraph">「スナップショットのみ」の階層化ポリシーを使用することも、 NetApp SnapVault や SnapMirror デスティネーションなどのバックアップターゲットで FabricPool を一般的に使用することもできます。</block>
  <block id="cbafb452655573815d095edb344c9594" category="admonition">FabricPool を使用してプライマリストレージで Snapshot コピーを階層化するか、バックアップターゲットで FabricPool を使用すると、データベースまたはシステムクローンの作成や修復などのその他のタスクのリストアとリカバリに必要な時間が変わります。この点を考慮して、ライフサイクル全体の管理戦略を計画し、この機能を使用している間も SLA が満たされていることを確認してください。</block>
  <block id="390af04511c942a81559a2b17fca6eb5" category="list-text">「」の説明に従って、正しいディスクシェルフ構成を確認します。<block ref="039cb3f1d3f19b24b2d3e1a57595e88d" category="inline-xref-macro-rx"></block>. 」</block>
  <block id="e138f99dc0c2e735649f097e067d3c91" category="list-text">の説明に従って、必要なアグリゲートを作成および構成します。<block ref="19f0aba2b822910f53ba3966ee7c8d59" category="inline-xref-macro-rx"></block>. 」</block>
  <block id="71f431043ca74922b294e83922284844" category="list-text">の説明に従って、 Storage Virtual Machine （ SVM ）を作成します。<block ref="9943aaa2798622d6311d148886b936da" category="inline-xref-macro-rx"></block>. 」</block>
  <block id="6daaa42b583f68f6a1719fe98bb43ec6" category="list-text">の説明に従って LIF を作成します。<block ref="023ebc077eb941ef66f2a9b14dc7710e" category="inline-xref-macro-rx"></block>. 」</block>
  <block id="4871e71c94c222ec35408f3579ea5aef" category="list-text">の説明に従って、必要なボリュームオプションを設定します。<block ref="8045d57af453a5d82abf825155790be5" category="inline-xref-macro-rx"></block>. 」</block>
  <block id="50382f37b1d5817b19a1416d66a869ab" category="list-text">の説明に従って、 NFSv3 に必要なオプションを設定します。<block ref="12f4a1429ee236ba2b69187511d66e29" category="inline-xref-macro-rx"></block>「 NFSv4 の場合は、」の説明に従ってまたはを参照してください。<block ref="446c862a0c96e5df798af38fe615a410" category="inline-xref-macro-rx"></block>. 」</block>
  <block id="77e8c1a1e836e9cc2d6f7071ed8ff48b" category="list-text">の説明に従って、ボリュームをネームスペースにマウントし、エクスポートポリシーを設定します。<block ref="11ce1c973ef514d254ac6cb22131e75f" category="inline-xref-macro-rx"></block>. 」</block>
  <block id="625393be624ef9b6c1788fc2acdc4a1f" category="section-title">SAS ディスクシェルフ</block>
  <block id="9b62b24b8d9ba375e94ccacca94fc52d" category="paragraph">次の図に示すように、 1 つの SAS スタックに最大 1 台のディスクシェルフを接続して、 SAP HANA ホストに必要なパフォーマンスを実現できます。各シェルフ内のディスクは、 HA ペアの両方のコントローラに均等に分散する必要があります。ADPv2 は、 ONTAP 9 および DS224C ディスクシェルフで使用されます。</block>
  <block id="03ec21b0d762028e928e8b7603d1b5a0" category="admonition">ディスクシェルフ DS224C では、クワッドパスの SAS ケーブルも使用できますが、必須ではありません。</block>
  <block id="bdf2df4b25ef7731104da665fef6a0bc" category="section-title">NVMe （ 100GbE ）ディスクシェルフ</block>
  <block id="f1c8039bfd9034e917c3ee25c37b6e80" category="paragraph">次の図は、 ADPv2 を使用した、 12Gb の SAS シェルフで稼働する、 12 台の SAP HANA ホストの構成を示しています。6 台の SAP HANA ホストが各ストレージコントローラに接続されています。各ストレージコントローラに 2 つずつ、合計 4 つのアグリゲートが構成されています。各アグリゲートには、 9 つのデータパーティションと 2 つのパリティディスクパーティションを含む 11 本のディスクが構成されます。各コントローラで、 2 つのスペアパーティションを使用できます。</block>
  <block id="99897c39b8224cf5a25fe9c6f599b3a7" category="section-title">SVM の設定</block>
  <block id="b37f183111116179ae8b8190b10de385" category="paragraph">SAP HANA データベースを使用する複数の SAP ランドスケープでは、単一の SVM を使用できます。SVM は、社内の複数のチームによって管理される場合に備え、必要に応じて各 SAP ランドスケープに割り当てることもできます。</block>
  <block id="8740ae6e0d37fe62c3e22cc10d6808f0" category="paragraph">新しい SVM の作成時に自動的に作成されて割り当てられた QoS プロファイルがある場合は、自動的に作成されたこのプロファイルを SVM から削除して、 SAP HANA に必要なパフォーマンスを有効にします。</block>
  <block id="cb001cd493365720d42ec425b1721062" category="section-title">LIF の設定</block>
  <block id="0b2bb5856cc4dea0b040a3b21fd8dd64" category="paragraph">SAP HANA 本番システムでは、 SAP HANA ホストからデータボリュームとログボリュームをマウントするときに別々の LIF を使用する必要があります。したがって、少なくとも 2 つの LIF が必要です。</block>
  <block id="960aa85c03f033763848fa3aa9fe340a" category="paragraph">異なる SAP HANA ホストのデータボリュームマウントとログボリュームマウントは、同じ LIF を使用するか、マウントごとに個別の LIF を使用することで、物理ストレージネットワークポートを共有できます。</block>
  <block id="5722c99f4a5680ae1ee34f95cc81e80c" category="paragraph">物理インターフェイスごとのデータボリュームマウントとログボリュームマウントの最大数を次の表に示します。</block>
  <block id="36913193033e347ca8ec536cf018744d" category="admonition">データボリュームとログボリュームが同じコントローラに格納されている場合は、サーバからストレージへのアクセスに、 2 つの異なる LIF を使用して実行する必要があります。 1 つはデータボリュームにアクセスする LIF 、もう 1 つはログボリュームにアクセスする LIF です。</block>
  <block id="34a9cf7a71d5de61eb0516df58caeb4d" category="paragraph">各 SAP HANA ホストには、データボリューム、ログボリューム、「 /hana/shared 」のボリュームが構成されています。次の表は、シングルホスト SAP HANA システムの構成例を示しています。</block>
  <block id="7a2dcccea93b2a3993b37840c369bf46" category="cell">/usr/sap/SID /hana/shareed/</block>
  <block id="08ddf4f39e81c4a0e663d6db2274b8d0" category="cell">アグリゲート 1 ：コントローラ A</block>
  <block id="4991d6ed5c177c09528f1b08e62e870b" category="cell">コントローラ A のアグリゲート 2</block>
  <block id="70ea877d22047c4d7b3160f2dfbb602e" category="cell">コントローラ B のアグリゲート 1</block>
  <block id="b01794ad3843a1780c443788733b44ac" category="cell">コントローラ B のアグリゲート 2</block>
  <block id="edf427eb9e76414a3f84589e9f2ecf37" category="paragraph">次の表に、アクティブな SAP HANA ホストが 4 台あるマルチホストシステムの構成とマウントポイントを示します。各ホストの 'idadm' ユーザのホーム・ディレクトリを中央ストレージに配置するために '/usr/sap/SID' ファイル・システムは 'S ID_SHARED' ボリュームからマウントされます</block>
  <block id="6c973aa519b6f8499c2dc9a71251b4f7" category="cell">SID_shared ボリュームを除くアクセス時間の更新を無効にします</block>
  <block id="8ec2236fd6ed4715167a8899b66d149b" category="paragraph">次の表に示す NFS オプションは、すべてのストレージコントローラで検証および設定する必要があります。この表に示す一部のコマンドについては、 advanced 権限モードに切り替える必要があります。</block>
  <block id="5c87e78153c1f2e2e2b534049bdc60f9" category="paragraph">この表の一部のコマンドについては、 advanced 権限モードに切り替える必要があります。</block>
  <block id="b78ad1fd79e9fc7773f87edda4742199" category="cell">nfs modify -vserver &lt;vserver-name&gt; -v4.1 enabled と入力します</block>
  <block id="c480c17814d28d6a9b00fd06a87dee2a" category="inline-link-macro">「 NFSv4 用の SAP HANA インストールの準備」</block>
  <block id="f337a835d86e0c289439e035a0e76f48" category="cell">容量のサイジングを更新し '/hana/shared のマウント・オプションを更新し 'sysctl パラメータを更新</block>
  <block id="bc879b28cd3f4053f1a4fb6a09b4059b" category="cell">新しいネットアップストレージシステムとディスクシェルフ 40GbE に対応した ONTAP 9 の新機能新しい OS リリース（ SUSE Linux Enterprise Server 12 SP1 および Red Hat Enterprise Linux 7.2 ）新しい SAP HANA リリース</block>
  <block id="fec3e19d5453902e6d2d2f07b445096e" category="cell">新しいネットアップストレージシステムは 100GbE をサポート新しい OS リリース（ SUSE Linux Enterprise Server 12 SP3 および Red Hat Enterprise Linux 7.4 ）では、 SAP HANA 2.0 SPS3 のマイナーな変更が追加されています</block>
  <block id="e10986a4d8d7c27e4a9031d551cb15f3" category="cell">2019年10月</block>
  <block id="42cb7cd8194fc37a66ecbcf38853bc47" category="cell">新しいネットアップストレージシステムと NVMe シェルフ新しい OS リリース（ SUSE Linux Enterprise Server 12 SP4 、 SUSE Linux Enterprise Server 15 、および Red Hat Enterprise Linux 7.6 ） MAX Data ボリュームサイズが変更になりました</block>
  <block id="4a93378c0090bfbf8b8bc50a06815950" category="cell">NFSv3 での nConnect のサポート新しい OS リリースは Red Hat Enterprise Linux 8 です</block>
  <block id="10ac19f67b5c625d18963e0639db41ec" category="cell">バージョン 3.4 以降</block>
  <block id="1f8f179d086bf23bb88de92da36a278f" category="cell">SAP HANA 2.0 SPS4 で複数のデータボリュームパーティションがサポートされます</block>
  <block id="27cf29d3ba2e543cc0a860ffea48422c" category="cell">バージョン 3.5 以降</block>
  <block id="017a3133a467238fee42563e68a614f9" category="paragraph">AFF システム製品ファミリーのさまざまなモデルをストレージレイヤで混在させることができるため、拡張が必要になったり、パフォーマンスや容量のニーズが異なる場合があります。ストレージシステムに接続できる SAP HANA ホストの最大数は、 SAP HANA のパフォーマンス要件と、使用されているネットアップコントローラのモデルによって定義されます。必要なディスクシェルフの数は、 SAP HANA システムの容量とパフォーマンスの要件によってのみ決まります。</block>
  <block id="06cf62788076915ae55f580212c2bf1e" category="paragraph">次の図は、 8 台の SAP HANA ホストをストレージ HA ペアに接続した構成例を示しています。</block>
  <block id="2900e6adf5856ac968de15d89cb194b9" category="paragraph">このアーキテクチャは、次の 2 つの側面で拡張できます。</block>
  <block id="d4a057bb51f816211a65deedffe4b054" category="list-text">既存のストレージに SAP HANA ホストとストレージ容量を追加で接続することで、ストレージコントローラが現在の SAP HANA KPI を満たす十分なパフォーマンスを提供する場合</block>
  <block id="8ca9a95d490a682ea8d4488876c744a4" category="paragraph">次の図は、追加の SAP HANA ホストをストレージコントローラに接続した場合の構成例を示しています。この例では、 16 台の SAP HANA ホストの容量とパフォーマンスの要件を満たすために、さらにディスクシェルフが必要です。合計スループット要件に応じて、ストレージコントローラへの FC 接続を追加する必要があります。</block>
  <block id="3ad7f7aed9ec06eff738c0dcda85c37c" category="summary">SAP HANA 2.0 SPS4 以降では、追加のデータボリュームパーティションを構成できます。これにより、 SAP HANA テナントデータベースのデータボリュームに複数のボリュームを構成し、単一ボリュームのサイズやパフォーマンスの制限を超えて拡張できます。</block>
  <block id="0b3d2dc69d0ecef48ed4d97711abe783" category="admonition">データボリュームに 2 つ以上の個別のボリュームを使用すると、 SAP HANA シングルホストシステムと SAP HANA マルチホストシステムを使用できます。データボリュームのパーティションはいつでも追加できます。</block>
  <block id="13a679c566e6214fe896e24a695761e4" category="paragraph">追加のデータボリュームパーティションを有効にするには、 SYSTEMDB 構成で SAP HANA Studio または Cockpit を使用して、 global.ini` 内に次のエントリを追加します。</block>
  <block id="9d32fa1f9d8d59813a1ef11682a4f5bf" category="section-title">シングルホスト SAP HANA システムのボリューム構成</block>
  <block id="517b7c43e6e06ed83a71808ad5423407" category="paragraph">複数のパーティションを持つシングルホスト SAP HANA システムのボリュームレイアウトは、 1 つのデータボリュームパーティションを含むシステムのレイアウトに似ていますが、追加のデータボリュームは、ログボリュームとして別のアグリゲートに格納され、残りのデータボリュームは他のデータボリュームに格納されます。次の表は、 2 つのデータボリュームパーティションを持つ SAP HANA シングルホストシステムの構成例を示しています。</block>
  <block id="6cc4be8865a78ca53ed1eaf173bd28a3" category="cell">コントローラ b のアグリゲート 2</block>
  <block id="4facf56b8e32b968748dc3f301c82b59" category="paragraph">新しいデータボリュームを作成し、 NetApp ONTAP システムマネージャまたは ONTAP CLI を使用してネームスペースにマウントできます。</block>
  <block id="1d63ad99e78bdad7469de07c7f318451" category="section-title">マルチホスト SAP HANA システムのボリューム構成</block>
  <block id="2f9bf27ae27db05dcf966a759ab139d7" category="paragraph">ボリュームのレイアウトは、 1 つのデータボリュームパーティションを含むマルチホスト SAP HANA システムのレイアウトに似ていますが、追加のデータボリュームはログボリュームとして別のアグリゲートに格納され、残りのデータボリュームはもう 1 つのデータボリュームに格納されます。次の表は、 2 つのデータボリュームパーティションを持つ SAP HANA マルチホストシステムの構成例を示しています。</block>
  <block id="2b59fb89728efdb7c494694c3a85a129" category="paragraph">新しいデータボリュームを作成し、 ONTAP System Manager または ONTAP CLI を使用してネームスペースにマウントできます。</block>
  <block id="baeebc68f3b64a7c3291f0ca7f4df4f4" category="inline-link-macro">ホストのセットアップ、</block>
  <block id="5b44880dacc6b2708bb197731958315d" category="list-text">追加のマウントポイントを作成します。</block>
  <block id="b6a2046ad9f2856608b23df9628204f9" category="list-text">シングルホストシステムの場合は、マウントポイントを作成し、データベースホストに権限を設定します。</block>
  <block id="16761c2a0fb024c597b40911ae9db317" category="paragraph">以下のコマンド例は、 2+1 のマルチホスト HANA システムを示しています。</block>
  <block id="83ae0722b3e48679da7a55d190be5e44" category="list-text">すべてのホスト上の /etc/fstab 構成ファイルに追加のファイル・システムを追加します</block>
  <block id="474fcd58a82b43abb0995925c1918bb9" category="paragraph">NFSv4.1 を使用するシングルホストシステムの場合は、次の例を参照してください。</block>
  <block id="d3bc1dd8c6c3cc7ddb77b7e695a19878" category="list-text">「 mount – a 」コマンドを実行して、ファイルシステムをマウントします。</block>
  <block id="356dd722b5b14363393c40db43145fba" category="paragraph">テナントデータベースに対して次の SQL ステートメントを実行し、テナントデータベースにデータボリュームパーティションを追加します。追加のボリュームへのパスを使用します。</block>
  <block id="523ed46a1b80ff97206086ca1cf66c74" category="paragraph">SAP では、ストレージ KPI の静的なセットが定義されています。これらの KPI は、データベースホストのメモリサイズや SAP HANA データベースを使用するアプリケーションに関係なく、すべての SAP HANA 本番環境に対して有効です。これらの KPI は、シングルホスト環境、マルチホスト環境、 Business Suite on HANA 環境、 Business Warehouse on HANA 環境、 S/4HANA 環境、および BW/4HANA 環境で有効です。したがって、現在のパフォーマンスサイジングアプローチは、ストレージシステムに接続されているアクティブな SAP HANA ホストの数にのみ依存します。</block>
  <block id="9f9af9fdd084ad8eda305ac55f4cfd99" category="paragraph">SAP は、ストレージに接続されたアクティブな SAP HANA ホストのストレージシステムのパフォーマンスを検証するために使用する必要があるパフォーマンステストツールを提供します。</block>
  <block id="3f54db3fa7dd353cd2bf6e94f663b8ea" category="paragraph">ネットアップは、特定のストレージモデルに接続できる SAP HANA ホストの最大数をテストし、事前に定義しました。本番環境ベースの SAP HANA システムに必要なストレージ KPI を SAP から実行できます。</block>
  <block id="372b4c73d2b83a38a4fb94c562f53c6d" category="paragraph">12Gb Serial-Attached SCSI （ SAS ）ディスクシェルフ（ DS224C ）では、次の固定ディスクシェルフ構成を使用してパフォーマンスのサイジングを行います。</block>
  <block id="27cd945eb6d2a58787f658282dc8c114" category="admonition">どちらの構成もアドバンストディスクパーティショニング（ ADPv2 ）を使用します。ハーフ搭載のディスクシェルフは最大 9 台の SAP HANA ホストをサポートし、フル搭載のシェルフは 1 台のディスクシェルフで最大 14 台のホストをサポートします。SAP HANA ホストは、両方のストレージコントローラ間で均等に分散する必要があります。AFF A700s システムの同じ環境の内蔵ディスク。DS224C ディスクシェルフは、 SAP HANA ホストの数をサポートするため、 12Gb SAS を使用して接続する必要があります。</block>
  <block id="7168b6fab3d1fdb1f905b5d9064d3a24" category="paragraph">6Gb SAS ディスクシェルフ（ DS2246 ）は、最大 4 台の SAP HANA ホストをサポートします。SSD と SAP HANA ホストは、両方のストレージコントローラ間で均等に分散する必要があります。</block>
  <block id="f1ae15f6fd143c9e1276af68c06658c7" category="cell">12Gb SAS シェルフ（ DS224C ）には、 12 本の SSD と ADPv2 が搭載されています</block>
  <block id="fac3c55a3cdc98c6d08b96c048885f29" category="section-title">パフォーマンステストツールの設定</block>
  <block id="918724fe4fec0578cd9e798f8152194e" category="paragraph">SAP HANA 1.0 SPS10 以降、 I/O 動作を調整し、使用中のファイルシステムとストレージシステムのデータベースを最適化するためのパラメータが導入されています。SAP のパフォーマンステストツールでストレージのパフォーマンスをテストする場合は、 SAP のパフォーマンステストツールにもこれらのパラメータを設定する必要があります。</block>
  <block id="c2cbcc154a82de8081d9414e0f5a0e72" category="paragraph">さまざまな SAP テストツールの設定の詳細については、を参照してください<block ref="ec90a615c6d378fa60ba8e7f2e7592b2" category="inline-link-rx"></block> HWCCT （ SAP HANA 1.0 ）および<block ref="2912abb2c0271a2912b6a4a94888e0ec" category="inline-link-rx"></block> HCMT/HCOT 用（ SAP HANA 2.0 ）。</block>
  <block id="819c1f9958e8bb33d727e63084453a6d" category="paragraph">各ストレージモデルの HANA ホストあたりのディスク数と SAP HANA ホストの密度は、パフォーマンステストツールで決定されています。</block>
  <block id="f0c841de9af65f567936371d382c94ec" category="paragraph">サイジングプロセスでは、本番用および非本番用の SAP HANA ホストの数、各ホストの RAM サイズ、ストレージベースの Snapshot コピーのバックアップ保持期間などの詳細が必要です。SAP HANA ホストの数によって、必要なストレージコントローラとディスクの数が決まります。</block>
  <block id="e41020e64935329a6db54f4c483b9113" category="summary">このセクションで説明するホストのセットアップ手順は、すべて物理サーバ上の SAP HANA 環境と、 VMware vSphere 上で実行される SAP HANA 環境の両方で有効です。</block>
  <block id="179a425489e8da15ef704b42e37645c8" category="section-title">Red Hat Enterprise Linux 7.2 以降の構成パラメータ</block>
  <block id="e19cf298e039e5acff1dbe7e98090d84" category="paragraph">SAP HANA で生成されるワークロードに合わせて、各 SAP HANA ホストで追加のカーネルパラメータと構成パラメータを調整する必要があります。</block>
  <block id="5491b828c5fede318e582fdb0621d64f" category="paragraph">Red Hat Enterprise Linux 7.2 以降では、 /etc/sysctl.d` ディレクトリにある構成ファイルでカーネルパラメータを設定する必要があります。たとえば、「 91-NetApp-/hana.conf 」という名前の構成ファイルを作成する必要があります。</block>
  <block id="b57aa9745ef1f47f50b9a81013b110fc" category="admonition">次の例は、 SID=NF2 の SAP HANA データベースを示しています。</block>
  <block id="efa2100424814ed736c66e231fca168e" category="paragraph">次の表に、シングルホストデータベースとマルチホスト SAP HANA データベースの異なるファイルシステムに使用する必要がある NFS のバージョンを示します。</block>
  <block id="2f47d7fd74fc1974289ac9986bf3aadc" category="admonition">SAP LaMa では、 /usr/sap/SID ディレクトリをローカルにする必要があります。したがって、 SAP LaMa を使用している場合は、 /usr/sap/SID の NFS ボリュームをマウントしないでください。</block>
  <block id="2d10c7ea8ceb7d4d67cf331de62acb84" category="paragraph">NFSv3 では、ソフトウェアまたはサーバに障害が発生した場合に NFS ロックのクリーンアップ処理が行われないようにするため、 NFS ロックをオフにする必要があります。</block>
  <block id="d8ad267f2c46ff97a15a2d97678f0e5d" category="cell">rw 、 bg 、 hard 、 timeo = 600 、 noatime</block>
  <block id="9fdcbaccc733453d8e7687d8e14a4e06" category="cell">rsize=65536 、 wsize=65536 です</block>
  <block id="a6b3bab4792cb8cb5eda6f38e11a69e7" category="admonition">NFSv3 の読み取りパフォーマンスを向上させるには、「 nConnect=n 」マウントオプションを使用することを推奨します。このオプションは、 SUSE Linux Enterprise Server 12 SP4 以降および RedHat Enterprise Linux （ RHEL ） 8.3 以降で使用できます。</block>
  <block id="af4ba9ef9ab9bd07d7c649c6d51dfa19" category="summary">SAP HANA 1.0 SPS10 以降、 I/O 動作を調整し、使用中のファイルシステムとストレージシステムのデータベースを最適化するためのパラメータが導入されています。</block>
  <block id="044185db5eecc41b1eff832a2449939e" category="doc">SAP HANA の I/O スタック構成</block>
  <block id="9b9a22cabf9c193636cd9f07c91af320" category="paragraph">ネットアップは、最適な値を定義するため、パフォーマンステストを実施しました。次の表に、パフォーマンステストから推定した最適な値を示します。</block>
  <block id="5a47372463f3478c00e62fe8d0fab323" category="inline-link">2267798 – Configuration of the SAP HANA Database During Installation Using hdbparam 』で説明されています</block>
  <block id="c310dbb2184ad240ae5b0efe2fa7161c" category="paragraph">S12 までの SAP HANA 1.0 では、 SAP ノートに記載されているように、 SAP HANA データベースのインストール時にこれらのパラメータを設定できます<block ref="c391dcebb4d33a6a0f840983455654bf" category="inline-link-rx"></block>。</block>
  <block id="cae4446a780e78b5b18c423d76e75bb3" category="paragraph">SAP HANA 2.0 以降 'hdbparam' は廃止され ' パラメータは global.ini` ファイルに移動されますパラメータは、 SQL コマンドまたは SAP HANA Studio を使用して設定できます。詳細については、 SAP ノートを参照してください<block ref="6af86c07e5a30516e9705c5fc7252793" category="inline-link-rx"></block>。パラメータは 'global.ini` ファイル内で設定することもできます</block>
  <block id="35e29c7133f7345ff12b812a10716c82" category="paragraph">SAP HANA 2.0 SPS5 以降では、「 setParameter.py 」スクリプトを使用して正しいパラメータを設定します。</block>
  <block id="c7d5014cd251a0d4b223b8a8c9d0d690" category="paragraph">SAP HANA ホストは、冗長 FCP インフラとマルチパスソフトウェアを使用してストレージコントローラに接続されます。スイッチまたはホストバスアダプタ（ HBA ）で障害が発生した場合に、耐障害性に優れた SAP HANA ホスト / ストレージ接続を実現するには、冗長 FCP スイッチインフラが必要です。すべての HANA ホストがストレージコントローラ上の必要な LUN にアクセスできるように、スイッチで適切なゾーニングを設定する必要があります。</block>
  <block id="10de0f7913b47a7c113fc4c77c57b582" category="paragraph">次の図に示すように、導入した AFF システムとは関係なく、認定済みのストレージコントローラを追加することで、 SAP HANA 環境を拡張して希望するノード密度に合わせることもできます。</block>
  <block id="6e885a25dfabc924cf867ada3aeb785e" category="paragraph">すべてのネットアップストレージコントローラに搭載された ONTAP ソフトウェアは、動作中にパフォーマンスに影響を与えることなく SAP HANA データベースをバックアップするための組み込みメカニズムを提供します。ストレージベースの NetApp Snapshot バックアップは、 SAP HANA の単一コンテナ、および単一のテナントや複数のテナントを使用する SAP HANA MDC システムで使用可能な、完全にサポートされた統合バックアップ解決策です。</block>
  <block id="c2934ecf3d665eb48045a5c0a76aaa32" category="paragraph">ストレージベースの Snapshot バックアップは、 NetApp SnapCenter Plug-in for SAP HANA を使用して実装されます。これにより、 SAP HANA データベースに標準で搭載されているインターフェイスを使用して、整合性のあるストレージベースの Snapshot バックアップを作成できます。SnapCenter は、各 Snapshot バックアップを SAP HANA バックアップカタログに登録します。そのため、 SnapCenter で作成されたバックアップは、リストア処理とリカバリ処理用に直接選択できる SAP HANA Studio または Cockpit 内に表示できます。</block>
  <block id="c821c77589b970937599a027069b75fa" category="paragraph">NetApp SnapMirror テクノロジを使用すると、 1 つのストレージシステムで作成された Snapshot コピーを、 SnapCenter で制御されるセカンダリバックアップストレージシステムにレプリケートできます。その後、プライマリストレージ上のバックアップセットごと、およびセカンダリストレージシステム上のバックアップセットごとに、異なるバックアップ保持ポリシーを定義できます。SnapCenter Plug-in for SAP HANA は、不要なバックアップカタログの削除を含め、 Snapshot コピーベースのデータバックアップとログバックアップの保持を自動的に管理します。また、 SnapCenter Plug-in for SAP HANA では、ファイルベースのバックアップを実行することで、 SAP HANA データベースのブロック整合性チェックを実行できます。</block>
  <block id="e2f0b48a9d9947c9b7911e4ac2346676" category="paragraph">ストレージベースの Snapshot バックアップは、従来のファイルベースのバックアップに比べて大きなメリットをもたらします。これには次のような利点がありますが、これらに限定されるわけではありません。</block>
  <block id="d953c3b1d4ebbca797ea1cbd2db09e48" category="list-text">ストレージレイヤでのリストア時間（数分）が大幅に短縮され、バックアップの頻度も高まり、 RTO が短縮されます</block>
  <block id="1901dda5acbabe5dc59a8bf332104608" category="paragraph">SAP HANA ディザスタリカバリは、 SAP HANA システムレプリケーションを使用してデータベースレイヤで実行するか、ストレージレプリケーションテクノロジを使用してストレージレイヤで実行できます。次のセクションでは、ストレージレプリケーションに基づくディザスタリカバリソリューションの概要について説明します。</block>
  <block id="4d7265e8ab9e98481c57ad3467a13264" category="paragraph">次の図は、同期 SnapMirror レプリケーションを使用してローカル DR データセンターに 3 サイトのディザスタリカバリ解決策を作成し、非同期 SnapMirror を使用してリモート DR データセンターにデータをレプリケートする方法を示しています。</block>
  <block id="ccb93370e2c5ea05681c87d10716cb76" category="paragraph">同期 SnapMirror を使用したデータレプリケーションでは、 RPO がゼロになります。プライマリデータセンターとローカル DR データセンター間の距離は約 100km です。</block>
  <block id="fb05024902b454ea7eaf93ee5c249633" category="paragraph">非同期 SnapMirror を使用して、プライマリとローカルの両方の DR サイトで障害が発生した場合のデータ保護を実行します。RPO は、レプリケーションの更新頻度と転送速度によって異なります。理論的には距離は無制限ですが、転送が必要なデータ量とデータセンター間の接続によって制限は異なります。通常の RPO の値は、 30 分から数時間です。</block>
  <block id="38a27392aa0b0ea2c83916c20bd81d8f" category="paragraph">どちらのレプリケーション方法の RTO も、主に DR サイトで HANA データベースを起動してメモリにロードするのに必要な時間に左右されます。1000Mbps のスループットでデータが読み取られることを前提とし、 1TB のデータをロードするには約 18 分かかります。</block>
  <block id="d58470687869446fe4f35300048a7a2a" category="paragraph">DR サイトのサーバは、通常運用時に開発 / テストシステムとして使用できます。災害が発生した場合は、開発 / テスト用システムをシャットダウンし、 DR 本番用サーバとして起動する必要があります。</block>
  <block id="494407c34ad1fbd6885e474888931b49" category="paragraph">どちらのレプリケーション方法でも、 RPO と RTO に影響を与えることなく DR ワークフローテストを実行できます。FlexClone ボリュームはストレージ上に作成され、 DR テストサーバに接続されます。</block>
  <block id="66ea2532c88937e1b2fec44c9c66cdc2" category="paragraph">同期レプリケーションで StrictSync モードが提供されます。何らかの理由でセカンダリストレージへの書き込みが完了しないと、アプリケーション I/O が失敗し、プライマリストレージシステムとセカンダリストレージシステムが同一になります。プライマリへのアプリケーション I/O は、 SnapMirror 関係のステータスが InSync に戻るまで再開されません。プライマリストレージで障害が発生した場合は、フェイルオーバー後にデータ損失なしでアプリケーション I/O をセカンダリストレージで再開できます。StrictSync モードでは、 RPO は常にゼロです。</block>
  <block id="4812f5d5dcef7b57ffc92a05d9b87dab" category="section-title">NetApp MetroCluster に基づくストレージレプリケーション</block>
  <block id="f831142d32986e69abb23ade52461f9f" category="paragraph">次の図は、解決策の概要を示しています。各サイトのストレージクラスタがローカルで高可用性を実現し、本番環境のワークロードに使用されます。各サイトのデータはもう一方のサイトに同期的にレプリケートされ、災害のフェイルオーバー時に使用できます。</block>
  <block id="c51b24aaab462fd7294e78e8c4e9e241" category="summary">このセクションでは、 SAP HANA ホスト専用のストレージネットワークセットアップについて説明します。</block>
  <block id="4d9de89d8dc9bb9db25b8c5a5aa836cc" category="doc">ネットワークセットアップ</block>
  <block id="7853be0a719416aa35b3da38940c0ce2" category="paragraph">ネットワークを設定する際は、次のガイドラインに従ってください。</block>
  <block id="5aa2ed1209919c655eae0cb94df9bae3" category="list-text">SAP HANA ホストを 10GbE 以上のネットワークでストレージコントローラに接続するには、専用のストレージネットワークを使用する必要があります。</block>
  <block id="4404b42b626eaf177ab6e6e9125dfe97" category="list-text">ストレージコントローラと SAP HANA ホストには同じ接続速度を使用します。これができない場合は、ストレージコントローラと SAP HANA ホスト間のネットワークコンポーネントが異なる速度に対応できることを確認してください。たとえば、ストレージとホストの間で NFS レベルで速度のネゴシエーションを行うための十分なバッファスペースを確保する必要があります。ネットワークコンポーネントは通常スイッチですが、背面など、ブレードシャーシ内の他のコンポーネントも考慮する必要があります。</block>
  <block id="a32bac621f038e27eb9c7bba7b82a094" category="list-text">ストレージネットワークスイッチおよびホストレイヤで、ストレージトラフィックに使用されるすべての物理ポートでフロー制御を無効にします。</block>
  <block id="9f9c9a0f31b06a64351ba948107beb87" category="list-text">各 SAP HANA ホストには、 10Gb 以上の帯域幅を持つ冗長ネットワーク接続が必要です。</block>
  <block id="83b25287cb23c57a7801df3c84079ee0" category="list-text">SAP HANA ホストとストレージコントローラ間のすべてのネットワークコンポーネントで、最大転送単位（ MTU ）サイズが 9 、 000 のジャンボフレームを有効にする必要があります。</block>
  <block id="8e07acfd1437feec339a101261f3d33e" category="list-text">VMware のセットアップでは、実行中の各仮想マシンに、専用の VMXNET3 ネットワークアダプタを割り当てる必要があります。詳細については、「はじめに」に記載されている関連文書を参照してください。</block>
  <block id="ba1e4c91d87d340db9164d860b5fae70" category="list-text">相互の干渉を避けるため、ログとデータ領域には別々のネットワーク /IO パスを使用してください。</block>
  <block id="faee62bb79701f4ef71263923314ff62" category="paragraph">次の図は、 4 台の SAP HANA ホストを 10GbE ネットワークを使用してストレージコントローラ HA ペアに接続した場合の例を示しています。各 SAP HANA ホストには、冗長ファブリックへのアクティブ / パッシブ接続があります。</block>
  <block id="1efc1e7690d351bfed1ced8c36c4ee03" category="paragraph">ストレージレイヤでは、 MTU サイズが 9 、 000 のブロードキャストドメインが設定され、必要なすべての物理インターフェイスがこのブロードキャストドメインに追加されます。このアプローチでは、これらの物理インターフェイスが自動的に同じフェイルオーバーグループに割り当てられます。これらの物理インターフェイスに割り当てられているすべての論理インターフェイス（ LIF ）が、このフェイルオーバーグループに追加されます。</block>
  <block id="283bdd66e3d6ab214e33d303e668536e" category="section-title">VMware 固有のネットワークセットアップ</block>
  <block id="970db5841ccfee51a6e5d4efea5c84f3" category="paragraph">この解決策では、パフォーマンスを重視するデータベースのデータボリュームやログボリュームなど、 SAP HANA インスタンスのすべてのデータが NFS 経由で提供されるため、適切なネットワーク設計と構成が不可欠です。専用のストレージネットワークは、 SAP HANA ノード間の通信トラフィックとユーザアクセストラフィックから NFS トラフィックを分離するために使用されます。各 SAP HANA ノードには、 10Gb 以上の帯域幅を持つ冗長専用ネットワーク接続が必要です。より高い帯域幅もサポートされています。このネットワークは、 VMware vSphere でホストされているゲストオペレーティングシステムまで、ストレージレイヤからネットワークスイッチングおよびコンピューティング経由でエンドツーエンドで拡張する必要があります。物理スイッチングインフラストラクチャに加えて、ハイパーバイザーレイヤでネットワークトラフィックのパフォーマンスと管理性を十分に確保するために、 VMware Distributed Switch （ vDS ）が使用されます。</block>
  <block id="60777d420c292249b3947e8807f44971" category="paragraph">前の図に示すように、各 SAP HANA ノードは、 VMware Distributed Switch 上の専用のポートグループを使用します。このポートグループを使用すると、 ESX ホストのサービス品質（ QoS ）の向上と物理 Network Interface Card （ NIC ；ネットワークインターフェイスカード）の専用割り当てが可能になります。NIC の障害時に HA 機能を維持したまま専用の物理 NIC を使用するには、専用の物理 NIC をアクティブアップリンクとして設定します。SAP HANA ポートグループのチーミングとフェイルオーバーの設定では、追加の NIC がスタンバイアップリンクとして設定されます。また、物理スイッチと仮想スイッチでジャンボフレーム（ MTU 9 、 000 ）をエンドツーエンドで有効にする必要があります。また、サーバ、スイッチ、およびストレージシステムのストレージトラフィックに使用されるすべてのイーサネットポートでフロー制御を無効にします。次の図に、このような構成の例を示します。</block>
  <block id="0e4dfad25f5529b5f21a75404c509772" category="admonition">NFS トラフィックに使用されるインターフェイスでは、 LRO （ Large Receive Offload ）をオフにする必要があります。その他のネットワーク構成のガイドラインについては、それぞれの VMware ベストプラクティスガイドで SAP HANA を参照してください。</block>
  <block id="7db55fece99cd60241eaadd5b0b310da" category="summary">次のセクションでは、 SAP HANA 用のストレージシステムのサイジングに関するパフォーマンスと容量に関する考慮事項の概要を説明します。</block>
  <block id="83814b9c4a7b826717cc464aa8fb78ac" category="admonition">ストレージのサイジングプロセスをサポートし、適切なサイズのストレージ環境を構築するには、ネットアップまたはネットアップパートナーの営業担当者にお問い合わせください。</block>
  <block id="9b5082bba6ed43c3e4659d132b4df7f3" category="paragraph">SAP では、ストレージ KPI の静的なセットが定義されています。これらの KPI は、データベースホストのメモリサイズや SAP HANA データベースを使用するアプリケーションに関係なく、すべての SAP HANA 本番環境に対して有効です。これらの KPI は、シングルホスト環境、マルチホスト環境、 Business Suite on HANA 環境、 Business Warehouse on HANA 環境、 S/4HANA 環境、および BW/4HANA 環境で有効です。したがって、現在のパフォーマンスサイジングアプローチは、ストレージシステムに接続されているアクティブな SAP HANA ホストの数にのみ依存します。</block>
  <block id="f2de3e3b437bebbf070dca38090a29ca" category="admonition">ストレージパフォーマンス KPI は、本番用 SAP HANA システムにのみ必要です。</block>
  <block id="e4dda14ad0a8b54fc49903f1eeb3764e" category="paragraph">SAP はパフォーマンステストツールを提供します。このツールは、ストレージに接続されたアクティブな SAP HANA ホストのストレージパフォーマンスを検証するために使用する必要があります。</block>
  <block id="5e2e10cba29f5251b72e245ca5e627be" category="admonition">認定 FAS 製品ファミリーのストレージコントローラは、ネットアップがサポートし、 SAP HANA TDI パフォーマンス KPI を達成していれば、他のディスクタイプやディスクバックエンドソリューションと SAP HANA の両方に使用することもできます。たとえば、 NetApp Storage Encryption （ NSE ）や NetApp FlexArray テクノロジなどです。</block>
  <block id="99724050fbff82fec44c60c3ee4f7aee" category="paragraph">本ドキュメントでは、 SAS ハードディスクドライブおよびソリッドステートドライブのディスクサイジングについて説明します。</block>
  <block id="4506c934d7af90d5123a60cf609a388b" category="section-title">ハードディスクドライブ</block>
  <block id="c89d32b6013ce9723a96c107be1c4d48" category="admonition">この計算は、使用するストレージコントローラとディスクシェルフには依存しません。</block>
  <block id="e21e8a6bac2619ab0247181c81f6fd10" category="paragraph">ソリッドステートドライブ（ SSD ）の場合、データディスクの数は、ストレージコントローラから SSD シェルフへの SAS 接続スループットによって決まります。</block>
  <block id="b3e9f6494455275ea6b6edb7295ebd0e" category="paragraph">ディスクシェルフで実行できる SAP HANA ホストの最大数と、 SAP HANA ホストごとに必要な SSD の最小数は、 SAP パフォーマンステストツールを実行して決定されています。</block>
  <block id="2befc3957b70e50f23dacfb3bcf86c2c" category="list-text">SSD を 24 本搭載した 12Gb SAS ディスクシェルフ（ DS224C ）は、ディスクシェルフが 12Gb に接続される場合、最大 14 台の SAP HANA ホストをサポートします。</block>
  <block id="03de450915ad58bd89ba02bcc1724c69" category="cell">24 本の SSD をフル搭載した 6Gb SAS シェルフ（ DS2246</block>
  <block id="c1fe2a19a34d1ba0d03c9b34ed6d6dc0" category="cell">12Gb SAS シェルフ（ DS224C ）には 24 本の SSD がフル搭載されています</block>
  <block id="f703381fdb02047b96e8a08ccd787c3d" category="paragraph">SAP HANA ワークロードとその他のアプリケーションワークロードを、同じストレージコントローラまたは同じアグリゲートに導入することもできます。その場合は、混在ワークロード環境内の SAP HANA に対して十分なパフォーマンスが常に確保されていることを確認する必要があります。また、 Quality of Service （ QoS ；サービス品質）パラメータを使用して、 SAP HANA アプリケーションに対する他のアプリケーションの影響を制御することも推奨します。</block>
  <block id="4af2232eb1cbb56b9ad9f27dd1436328" category="paragraph">SAP HCMT テストツールを使用して、他のワークロードにすでに使用されているストレージコントローラで追加の SAP HANA ホストを実行できるかどうかを確認する必要があります。ただし、 SAP アプリケーションサーバは、 SAP HANA データベースと同じストレージコントローラおよびアグリゲートに安全に配置できます。</block>
  <block id="b0f9650ddfbaa04c69d0afbc401f6dce" category="paragraph">SAP HANA 1.0 SPS10 以降、 I/O 動作を調整し、使用中のファイルシステムとストレージシステムのデータベースを最適化するためのパラメータが導入されています。SAP のテストツールを使用してストレージパフォーマンスをテストする場合は、 SAP のパフォーマンステストツール（ fsperf ）にもこれらのパラメータを設定する必要があります。</block>
  <block id="3555c6a1af2c71b84c5e56f0d1e1bf9a" category="paragraph">ネットアップは、最適な値を定義するためにパフォーマンステストを実施しました。次の表に、 SAP テストツールの構成ファイルで設定する必要があるパラメータを示します。</block>
  <block id="4ee612e0e9020cc8630b9f3c2a731f47" category="paragraph">各ストレージモデルの HANA ホストあたりのディスク数と SAP HANA ホストの密度は、 SAP HANA テストツールで決定されています。</block>
  <block id="c047f42ac7558995af3a7e8b7e1c8c65" category="paragraph">サイジングプロセスでは、本番用および非本番用の SAP HANA ホストの数、各ホストの RAM サイズ、ストレージベースの Snapshot コピーのバックアップ保持期間などの詳細が必要です。SAP HANA ホストの数によって、必要なストレージコントローラとディスクの数が決まります。</block>
  <block id="72512f57a9671c8fd7e4e6c720f19f86" category="paragraph">RAM のサイズ、各 SAP HANA ホストのディスク上の正味データサイズ、および Snapshot コピーのバックアップ保持期間は、容量サイジングの際に入力として使用されます。</block>
  <block id="888a97817eb269434426d56de56528fa" category="summary">デフォルトでは、 SAP HANA サービスごとに使用されるデータボリュームは 1 つだけです。ファイルシステムの最大ファイルサイズの制限のため、データボリュームの最大サイズを制限することを推奨します。</block>
  <block id="c7c8b48fd23d939958d032aa4f897d35" category="doc">SAP HANA データボリュームのサイズ</block>
  <block id="2313d7e75b1293ec19e67b10399a5b36" category="paragraph">これを自動的に行うには ' global.ini` の [persistence] セクションで次のパラメータを設定します</block>
  <block id="bcd4783f16a6a90aaaeb9703e35b2183" category="inline-link">SAP ノート 240005 の質問 15 を参照してください</block>
  <block id="02fb0663b2b25ed3058835e1a2db5762" category="paragraph">これにより、 8 、 000GB の上限に達すると、新しいデータボリュームが作成されます。<block ref="0d7b59f229b453865b91c5e952a7b217" category="inline-link-rx"></block> 詳細については ' を参照してください</block>
  <block id="0db6b81db5bd35e1eef1e83e154c3cb5" category="doc">TR-4436 ：『 SAP HANA on NetApp AFF Systems with Fibre Channel Protocol 』</block>
  <block id="0b79795d3efc95b9976c7c5b933afce2" category="section-title">はじめに</block>
  <block id="e4509a748ae3ce7cb528662f2f9f7e10" category="paragraph">認定は、次のモデルで有効です。</block>
  <block id="130c9ce9d2909449cb229a98c66f9d29" category="inline-link">認定およびサポートされている SAP HANA ハードウェアディレクトリ</block>
  <block id="171ad4663cdfb492651e0357292fbe82" category="paragraph">本ドキュメントでは、 Fibre Channel Protocol （ FCP ；ファイバチャネルプロトコル）を使用した AFF 構成について説明します。</block>
  <block id="a08e3f55ac1bf243274ee454a477749b" category="admonition">このホワイトペーパーで説明している構成は、 SAP HANA に必要な SAP HANA KPI と、 SAP HANA に最適なパフォーマンスを達成するために必要です。ここに記載されていない設定または機能を変更すると、原因のパフォーマンスが低下したり、予期しない動作が発生したりする可能性があります。変更は、ネットアップのサポートから助言された場合にのみ実施</block>
  <block id="9ba59bf1b64e9d129b41dbb49f3c385f" category="paragraph">NFS システムと NetApp FAS システムを使用する AFF システムの構成ガイドは、次のリンクから入手できます。</block>
  <block id="6e309be8793679276c5f6a7bdd2bfdfa" category="inline-link">FCP を使用した NetApp FAS システムでの SAP HANA</block>
  <block id="794aa68d1e6abb7bdd6b9ecf4a1125fd" category="inline-link">NFS を使用した NetApp FAS システムでの SAP HANA</block>
  <block id="5f6e041a9634120ceb1ee084f6acde8a" category="inline-link">SAP Note 2235581 – SAP HANA Supported Operating Systems 』</block>
  <block id="10fba2fd8d2b0860517a92eefbfce26b" category="paragraph">SAP HANA マルチホスト環境では、 SAP HANA ホストのフェイルオーバー時にフェンシングを提供するために、標準の SAP HANA ストレージコネクタが使用されます。オペレーティングシステムの構成ガイドラインと、 HANA 固有の Linux カーネルの依存関係については、必ず該当する SAP ノートを参照してください。詳細については、を参照してください<block ref="362348e4aadbc3b1dc4fa3ddcce8fb65" category="inline-link-rx"></block>。</block>
  <block id="c28f239d8c4b11cfe19d1dcf078100b9" category="section-title">SAP HANA テーラードデータセンター統合</block>
  <block id="e13ebe7bf91deecb41098f3561e752bf" category="paragraph">NetApp AFF ストレージシステムは、 NFS （ NAS ）プロトコルと FC （ SAN ）プロトコルの両方を使用した SAP HANA TDI プログラムで認定されています。これらは、シングルホスト構成とマルチホスト構成のどちらでも、 SAP Business Suite on HANA 、 S/4HANA 、 BW/4HANA 、 SAP Business Warehouse on HANA など、最新の SAP HANA シナリオに導入できます。SAP HANA との使用が認定されているサーバは、ネットアップ認定のストレージソリューションと組み合わせることができます。次の図に、アーキテクチャの概要を示します。</block>
  <block id="14a31d6554fa48b10cc86d1aaf656a07" category="inline-link">『 SAP HANA Tailored Data Center Integration Frequently Asked Questions 』</block>
  <block id="9282f2106e2ecc166cf241e78c58163e" category="list-text"><block ref="9282f2106e2ecc166cf241e78c58163e" category="inline-link-rx"></block></block>
  <block id="0efd230d120bc177f0918dac852f2cf2" category="list-text">SAP HANA 向け SAP 認定エンタープライズストレージハードウェア</block>
  <block id="3710f13cc62644ea40b0af38f0b1198e" category="paragraph"><block ref="3710f13cc62644ea40b0af38f0b1198e" category="inline-link-rx"></block></block>
  <block id="c54847a2046020d06d345fd8b61fc169" category="list-text">ネットアップドキュメントセンター</block>
  <block id="1f97b7a68d0268791593f9152a2471f4" category="list-text">SAP HANA ソフトウェアソリューション</block>
  <block id="02e9c064fb16f4d7c921173e0ea3e1d4" category="summary">SAP HANA ホストは、冗長 10GbE 以上のネットワークインフラを使用して、ストレージコントローラに接続されます。SAP HANA ホストとストレージコントローラ間のデータ通信は、 NFS プロトコルに基づいています。スイッチまたはネットワークインターフェイスカード（ NIC ）の障害に備え、耐障害性に優れた SAP HANA ホスト / ストレージ接続を実現するには、冗長スイッチングインフラが必要です。</block>
  <block id="9ebc0606dc606ba3c824288cbcec4b6a" category="paragraph">スイッチは、ポートチャネルを使用して個々のポートのパフォーマンスを集約し、ホストレベルでは単一の論理エンティティとして認識される場合があります。</block>
  <block id="ec7778649625767bca80e5172b3215f8" category="paragraph">次の図は、 8 台の SAP HANA ホストをストレージハイアベイラビリティ（ HA ）ペアに接続した構成例を示しています。</block>
  <block id="f000fef8626763ce732cc75182f80de1" category="list-text">既存のストレージに SAP HANA ホストとストレージ容量を追加で接続することで、ストレージコントローラが現在の SAP HANA の主要パフォーマンス指標（ KPI ）を満たす十分なパフォーマンスを提供する場合。</block>
  <block id="af0b30d5f97bb5800d0d429f5f501e85" category="paragraph">次の図は、追加の SAP HANA ホストをストレージコントローラに接続した場合の構成例を示しています。この例では、 SAP HANA ホスト 16 台分の容量とパフォーマンスの要件を満たすために、さらにディスクシェルフが必要です。合計スループット要件に応じて、 10GbE 以上の接続をストレージコントローラに追加する必要があります。</block>
  <block id="014f96dd954f0cad52c8dd1e4a0f6c0c" category="paragraph">次の図に示すように、導入した AFF システムとは関係なく、任意の認定済みストレージコントローラを追加して希望のノード密度に合わせて SAP HANA 環境を拡張することもできます。</block>
  <block id="403661a7cc1e3bdbdbb3bc83a0e07b79" category="paragraph">すべてのネットアップストレージコントローラに搭載された ONTAP ソフトウェアは、動作中にパフォーマンスに影響を与えることなく SAP HANA データベースをバックアップするための組み込みメカニズムを提供します。ストレージベースの NetApp Snapshot バックアップは、 SAP HANA の単一コンテナ、および単一テナントまたは複数テナントを使用する SAP HANA マルチテナントデータベースコンテナ（ MDC ）システムで使用可能な、完全にサポートされた統合バックアップ解決策です。</block>
  <block id="d27691a65309de7a848f265e2a85db07" category="paragraph">NetApp SnapMirror テクノロジを使用すると、一方のストレージシステムで作成された Snapshot コピーを、 SnapCenter で制御されるセカンダリバックアップストレージシステムにレプリケートできます。その後、プライマリストレージ上のバックアップセットごと、およびセカンダリストレージシステム上のバックアップセットごとに、異なるバックアップ保持ポリシーを定義できます。SnapCenter Plug-in for SAP HANA は、不要なバックアップカタログの削除を含め、 Snapshot コピーベースのデータバックアップとログバックアップの保持を自動的に管理します。また、 SnapCenter Plug-in for SAP HANA では、ファイルベースのバックアップを実行することで、 SAP HANA データベースのブロック整合性チェックを実行できます。</block>
  <block id="37a72a4ef96da2b1b4de8dfd6a6578e1" category="paragraph">ストレージベースの Snapshot バックアップは、従来のファイルベースのバックアップに比べて大きなメリットをもたらします。たとえば、次のような利点があります。</block>
  <block id="a87b95aa164115fe66d032fbca70ca68" category="paragraph">SAP HANA ディザスタリカバリ（ DR ）は、 SAP HANA システムレプリケーションを使用してデータベースレイヤで実行するか、ストレージレプリケーションテクノロジを使用してストレージレイヤで実行できます。次のセクションでは、ストレージレプリケーションに基づくディザスタリカバリソリューションの概要について説明します。</block>
  <block id="d8c167d8f4fbaa19b28b96b8f9830293" category="paragraph">DR サイトのサーバは、通常運用時に開発 / テストシステムとして使用できます。災害が発生した場合は、開発 / テスト用システムをシャットダウンし、 DR 本番用サーバとして起動する必要があります。</block>
  <block id="8290e539e87b39f4743f2a941a37d00d" category="doc">TR-4435 ：『 SAP HANA on NetApp AFF Systems with NFS-Configuration Guide 』</block>
  <block id="af01ac16ca42b9b924b834a3199131e9" category="paragraph">この認定は、次のモデルで有効です。</block>
  <block id="793f62e70c31f71a93161db091bea2c0" category="paragraph">FCP を使用する NetApp AFF システム、および NFS または FCP を使用する FAS システムの構成ガイドは、次のリンクから入手できます。</block>
  <block id="d3eeeac9b8ca9512c68dfff9f3b301a2" category="inline-link">『 SAP HANA on NetApp AFF Systems with Fibre Channel Protocol 』を参照してください</block>
  <block id="36fafbaf89be825de435f50a73ce793c" category="paragraph">次の表に、 SAP HANA データベースの構成に応じた、 NFS バージョン、 NFS ロック、および必要な分離実装についてサポートされる組み合わせを示します。</block>
  <block id="4a74ba49b2778c7cf6b73600b7dfe758" category="paragraph">SAP HANA シングルホストシステム、またはホストの自動フェイルオーバーを使用しない複数のホストでは、 NFSv3 と NFSv4 がサポートされます。</block>
  <block id="8456bce54ecacb824d3f0f3333eec164" category="paragraph">ホストの自動フェイルオーバーを有効にした SAP HANA マルチホストシステムでは、サーバ固有の STONITH （ SAP HANA HA/DR プロバイダ）実装の代わりに NFSv4 ロックを使用した場合に、ネットアップは NFSv4 のみをサポートします。</block>
  <block id="86083f3ea21c2385b4f013aae3c57858" category="cell">SAP HANA のサポート</block>
  <block id="b09bc640e0761651dfc89ddfb932bca4" category="cell">NFS バージョン</block>
  <block id="4dc6f2785947994abb17dafc579b385c" category="cell">NFS ロック</block>
  <block id="112546829b39fc0ca5f6864abb9eb36b" category="cell">SAP HANA の HA/DR プロバイダ</block>
  <block id="11b07481dbca2b152fe454ec6b2bda1b" category="cell">SAP HANA シングルホスト、ホストの自動フェイルオーバーを使用しない複数のホスト</block>
  <block id="d15305d7a4e34e02489c74a5ef542f36" category="cell">オフ</block>
  <block id="274b68192b056e268f128ff63bfcd4a4" category="cell">該当なし</block>
  <block id="521c36a31c2762741cf0f8890cbe05e3" category="cell">オン</block>
  <block id="17f561d1407ffe04f736722475cbc0d4" category="cell">ホストの自動フェイルオーバーを使用する SAP HANA マルチホスト</block>
  <block id="fbe7f3b8db20ca64d74a09b5069fe001" category="cell">サーバ固有の STONITH の実装は必須です</block>
  <block id="6fd5e95dc0bce8329da87e1152677b48" category="cell">必要ありません</block>
  <block id="c522b313eec5744e458e23dab3741128" category="admonition">サーバ固有の STONITH 実装については、このガイドでは説明していません。そのような実装については、サーバのベンダーにお問い合わせください。</block>
  <block id="8543c5790a0b5260e2446fad651e5ade" category="paragraph">このドキュメントでは、物理サーバ上および VMware vSphere を使用する仮想サーバ上で実行される SAP HANA の構成に関する推奨事項について説明します。</block>
  <block id="e0f43a4c6e28079f6afdc78865b7782e" category="admonition">オペレーティングシステムの構成ガイドラインと、 HANA 固有の Linux カーネルの依存関係については、該当する SAP ノートを参照してください。詳細については、『 SAP note 2235581 ： SAP HANA Supported Operating Systems 』を参照してください。</block>
  <block id="5d75848b6169b06c4cd7d6a8c2ec2337" category="paragraph">NetApp AFF ストレージコントローラは、 NFS （ NAS ）プロトコルと FC （ SAN ）プロトコルの両方を使用した SAP HANA TDI プログラムで認定されています。これらは、シングルホスト構成とマルチホスト構成のどちらでも、 SAP Business Suite on HANA 、 S/4HANA 、 BW/4HANA 、 SAP Business Warehouse on HANA など、最新の SAP HANA シナリオに導入できます。SAP HANA との使用が認定されているサーバは、ネットアップ認定のストレージソリューションと組み合わせることができます。次の図に、 SAP HANA TDI のアーキテクチャの概要を示します。</block>
  <block id="4769b140b92a70ffdab406be16d30122" category="paragraph">ストレージを仮想マシン（ VM ）に接続する方法はいくつかあります。推奨される方法は、ストレージボリュームと NFS をゲストオペレーティングシステムから直接接続することです。このオプションを使用しても、ホストとストレージの構成が物理ホストと VM で同じになることはありません。</block>
  <block id="f7fbf8be79b2dbbf7cca7d63ea2aaa3e" category="paragraph">このドキュメントでは、ゲスト OS から NFS への直接マウントを使用する場合の推奨セットアップについて説明します。</block>
  <block id="088c8c258db90c09658a39d2839f52b0" category="doc">TR-4384 ：『 SAP HANA on NetApp FAS Systems with Fibre Channel Protocol Configuration Guide 』</block>
  <block id="42eb56ae1e83db3afce70f056a668205" category="inline-link">認定およびサポートされている SAP HANA ハードウェアディレクトリ</block>
  <block id="b448d121930edfc4a956027d7533c403" category="paragraph">本ドキュメントでは、 Fibre Channel Protocol （ FCP ；ファイバチャネルプロトコル）を使用した FAS 構成について説明します。</block>
  <block id="bd06b22fab5b6b92f9bf2b53d26f4805" category="admonition">このホワイトペーパーで説明している構成は、 SAP HANA に必要な SAP HANA KPI と、 SAP HANA に最適なパフォーマンスを達成するために必要です。ここに記載されていない設定を変更したり、機能を使用したりすると、パフォーマンスが低下したり、予期しない動作が発生したりする可能性があります。変更を実施するのは、ネットアップのサポートから助言さ</block>
  <block id="b33f6954e7bec0569d3be6ef5cea4d1d" category="paragraph">NFS システムと NetApp AFF システムを使用する FAS システムの構成ガイドは、次のリンクから入手できます。</block>
  <block id="1800d8919a8de7dbf0bdd4d4ef0a94f4" category="paragraph">SAP HANA マルチホスト環境では、 SAP HANA ホストのフェイルオーバー時にフェンシングを提供するために、標準の SAP HANA ストレージコネクタが使用されます。オペレーティングシステムの構成ガイドラインと、 HANA 固有の Linux カーネルの依存関係については、該当する SAP ノートを参照してください。詳細については、を参照してください<block ref="362348e4aadbc3b1dc4fa3ddcce8fb65" category="inline-link-rx"></block>。</block>
  <block id="324c1541e14a4687bde362da7f340662" category="paragraph">NetApp FAS ストレージコントローラは、 NFS （ NAS ）プロトコルとファイバチャネル（ SAN ）プロトコルを使用した、 SAP HANA の TDI プログラムで認定されています。これらは、シングルホスト構成またはマルチホスト構成の SAP Business Suite on HANA 、 S/4HANA 、 BW/4HANA 、 SAP Business Warehouse on HANA など、任意の SAP HANA シナリオに導入できます。SAP HANA での使用が認定されているサーバは、認定ストレージの解決策と組み合わせることができます。アーキテクチャの概要については、次の図を参照してください。</block>
  <block id="3823dde38e881edb5563cdd3b64099ba" category="summary">SAP HANA のソフトウェアインストールの要件は次のとおりです。</block>
  <block id="d62e297e0f46d31deba4b84efdfafc32" category="paragraph">SAP HANA ソフトウェアのインストールでは、シングルホストシステムについて行う追加の準備作業はありません。</block>
  <block id="07f50886cb51dc3f90123d42cf009896" category="summary">SAP HANA ホストは、冗長 FCP インフラとマルチパスソフトウェアを使用してストレージコントローラに接続されます。</block>
  <block id="adff62b08f2c542a637f6a31fbda8673" category="paragraph">SAP HANA ホストは、冗長 FCP インフラとマルチパスソフトウェアを使用してストレージコントローラに接続されます。スイッチまたはホストバスアダプタ（ HBA ）で障害が発生した場合に、耐障害性に優れた SAP HANA ホスト / ストレージ接続を実現するには、冗長 FCP スイッチインフラが必要です。すべての HANA ホストがストレージコントローラ上の必要な LUN にアクセスできるように、スイッチで適切なゾーニングを設定する必要があります。</block>
  <block id="bae63c2771206a25f50da057ce067a9c" category="paragraph">ストレージレイヤでは、 FAS 製品ファミリーのさまざまなモデルを使用できます。ストレージに接続される SAP HANA ホストの最大数は、 SAP HANA のパフォーマンス要件によって定義されます。必要なディスクシェルフの数は、 SAP HANA システムの容量とパフォーマンスの要件によって決まります。</block>
  <block id="6afb369a6dbb704834887d425d781975" category="list-text">ストレージコントローラが新しい負荷の下で十分なパフォーマンスを提供し、主要なパフォーマンス指標（ KPI ）を満たすことができると仮定して、 SAP HANA ホストとディスク容量をストレージに追加で接続する。</block>
  <block id="03f9c73bd24a38ac275bf81d436e85a9" category="list-text">追加の SAP HANA ホスト用にストレージシステムとディスク容量を追加する</block>
  <block id="dd7ae5d97763211b9ba0c4fb173c8ba0" category="paragraph">導入した FAS システムストレージモデルに関係なく、次の図に示すように、ストレージコントローラを追加することで SAP HANA 環境を拡張することもできます。</block>
  <block id="b29e296e3fc82d9667053e3613da9983" category="paragraph">NetApp ONTAP ソフトウェアには、 SAP HANA データベースをバックアップするための組み込みメカニズムが用意されています。ストレージベースの Snapshot バックアップは、 SAP HANA のシングルコンテナシステムや SAP HANA MDC のシングルテナントシステムで使用可能な、完全にサポートされた統合バックアップ解決策です。</block>
  <block id="850e88ceda74d905d2efd5ea7c4b192d" category="paragraph">ストレージベースの Snapshot バックアップは、 NetApp SnapCenter Plug-in for SAP HANA を使用して実装されます。このプラグインは、 SAP HANA データベースのインターフェイスを使用して、一貫したストレージベースの Snapshot バックアップを実現します。SnapCenter を使用すると、 Snapshot バックアップが SAP HANA バックアップカタログに登録され、 SAP HANA Studio 内で参照したり、リストアやリカバリ処理用に選択できるようになります。</block>
  <block id="bbfb7e54dd17cf679279af8ea2a15ae3" category="paragraph">NetApp SnapVault ソフトウェアを使用すると、プライマリストレージに作成された Snapshot コピーを、 SnapCenter で制御されるセカンダリバックアップストレージにレプリケートできます。プライマリストレージ上のバックアップとセカンダリストレージ上のバックアップには、異なるバックアップ保持ポリシーを定義できます。SnapCenter Plug-in for SAP HANA Database は、 Snapshot コピーベースのデータバックアップとログバックアップの保持について、不要なバックアップカタログの削除も含めて管理します。SnapCenter Plug-in for SAP HANA Database は、ファイルベースのバックアップを実行することで、 SAP HANA データベースのブロック整合性チェックの実行も可能にします。</block>
  <block id="467d52bc18a84a9e401464296b95f32a" category="paragraph">ストレージベースの Snapshot バックアップは、ファイルベースのバックアップに比べて大きなメリットをもたらします。たとえば、次のような利点があります。</block>
  <block id="7be39960baf9da92a5fd16aff336d896" category="list-text">高速バックアップ（数分）</block>
  <block id="e48202a443acc7da9527083f2193be67" category="list-text">ストレージレイヤでの高速リストア（数分）</block>
  <block id="0fc3856f751e6cb653d303821aef3541" category="list-text">バックアップ中、 SAP HANA データベースホスト、ネットワーク、またはストレージのパフォーマンスが影響を受けることはありません</block>
  <block id="3228fe22c23747656168738709bc6bd1" category="paragraph">SAP HANA ディザスタリカバリは、 SAP システムレプリケーションを使用してデータベースレイヤで実行するか、ストレージレプリケーションテクノロジを使用してストレージレイヤで実行できます。次のセクションでは、ストレージレプリケーションに基づくディザスタリカバリソリューションの概要について説明します。</block>
  <block id="ad3b35bfc8ee4f5dee91390584d5b8cd" category="paragraph">次の図は、同期 SnapMirror レプリケーションを使用してローカル DR データセンターにデータをレプリケートし、非同期 SnapMirror を使用してリモート DR データセンターにデータをレプリケートする、 3 サイトのディザスタリカバリ解決策を示しています。</block>
  <block id="c3a14b2b8a8f3abd4f577b36ff5a89d7" category="paragraph">次の図は、解決策の概要を示しています。各サイトのストレージクラスタは、ローカルで高可用性を実現し、本番環境のワークロードに使用されます。各サイトのデータはもう一方のサイトに同期的にレプリケートされ、災害のフェイルオーバー時に使用できます。</block>
  <block id="96affa74630cd326f32e3a646b2bf9ad" category="admonition">NFSv4 ドメインは、すべての Linux サーバと SVM で同じ値に設定する必要があります。Linux ホストの場合は ' ファイル /etc/idmapd.conf にドメイン・パラメータ「ドメイン・ドメイン = &lt;domain_name&gt;` 」を設定します</block>
  <block id="90c5b46276106ab7121fe824091fdfde" category="paragraph">NFS idmapd サービスを有効にして開始します。</block>
  <block id="82d9f02aa4638adac22e7bc4604d9e25" category="admonition">最新の Linux カーネルでは、この手順は必要ありません。警告メッセージは無視してかまいません。</block>
  <block id="fe772f1f05ae8cbd39b88886e4d0fcf5" category="summary">ネットワークを設定する際は、次のガイドラインに従ってください。</block>
  <block id="716afef9353a2aa423b9fbffb89b8377" category="paragraph">ストレージレイヤでは、各 SAP HANA ホストに 10Gb のスループットを提供する、 4 つのアクティブ接続が構成されます。また、各ストレージコントローラにスペアインターフェイスが 1 つ設定されます。</block>
  <block id="620672771873ad77b081be6daf96e1b2" category="paragraph">一般に、サーバ（ボンド）とストレージシステム（ Link Aggregation Control Protocol （ LACP ）、 ifgroups など）で HA インターフェイスグループを使用することもできます。HA インターフェイスグループを使用して、グループ内のすべてのインターフェイス間で負荷が均等に分散されていることを確認します。負荷分散は、ネットワークスイッチインフラの機能によって異なります。</block>
  <block id="eabdde73a31467e22fe277441a349672" category="admonition">SAP HANA ホストの数と使用されている接続速度に応じて、アクティブな物理ポートの数を変える必要があります。</block>
  <block id="f462972ec98ad35d3b6e515013a43ef9" category="paragraph">この解決策では、パフォーマンス重視のデータボリュームやデータベースのログボリュームなど、 SAP HANA インスタンスのデータはすべて NFS 経由で提供されるため、適切なネットワーク設計と構成が不可欠です。専用のストレージネットワークは、 SAP HANA ノード間の通信トラフィックとユーザアクセストラフィックから NFS トラフィックを分離するために使用されます。各 SAP HANA ノードには、 10Gb 以上の帯域幅を持つ冗長専用ネットワーク接続が必要です。より高い帯域幅もサポートされています。このネットワークは、 VMware vSphere でホストされているゲストオペレーティングシステムまで、ストレージレイヤからネットワークスイッチングおよびコンピューティング経由でエンドツーエンドで拡張する必要があります。物理スイッチングインフラストラクチャに加えて、ハイパーバイザーレイヤでネットワークトラフィックのパフォーマンスと管理性を十分に確保するために、 VMware Distributed Switch （ vDS ）が使用されます。</block>
  <block id="df3398ff3a0d523a63128a7ec386096f" category="paragraph">次の図に、ネットワークの概要を示します。</block>
  <block id="25c6d04f8538068cb7dacb7934148082" category="paragraph">各 SAP HANA ノードは、 VMware Distributed Switch 上で専用のポートグループを使用します。このポートグループを使用すると、 ESX ホストのサービス品質（ QoS ）の向上と物理 Network Interface Card （ NIC ；ネットワークインターフェイスカード）の専用割り当てが可能になります。NIC の障害が発生した場合に HA 機能を維持しながら専用の物理 NIC を使用するには、専用の物理 NIC をアクティブアップリンクとして構成します。SAP HANA ポートグループのチーミングとフェイルオーバーの設定では、追加の NIC がスタンバイアップリンクとして設定されます。また、物理スイッチと仮想スイッチでジャンボフレーム（ MTU 9 、 000 ）をエンドツーエンドで有効にする必要があります。また、サーバ、スイッチ、およびストレージシステムのストレージトラフィックに使用されるすべてのイーサネットポートでフロー制御を無効にします。次の図に、このような構成の例を示します。</block>
  <block id="fe7a2cce203f9009f4435ee3db743d2f" category="summary">デフォルトでは、 SAP HANA サービスごとに使用されるデータボリュームは 1 つだけです。ファイルシステムの最大ファイルサイズ制限のため、データボリュームの最大サイズを制限することを推奨します。</block>
  <block id="a28520e00868027d025d2aaa3bdcc208" category="paragraph">これにより、 8 、 000GB の上限に達すると新しいデータボリュームが作成されます。<block ref="0d7b59f229b453865b91c5e952a7b217" category="inline-link-rx"></block> 詳細については ' を参照してください</block>
  <block id="ae36d6b58fffa77bdfe0d08c2e56cf30" category="summary">SAP HANA 2.0 SPS4 以降では、追加のデータボリュームパーティションを構成できます。この機能を使用すると、 SAP HANA テナントデータベースのデータボリュームに複数の LUN を設定し、単一 LUN のサイズやパフォーマンスの制限を超えて拡張することができます。</block>
  <block id="347050b0ee6af8facb503abbf8ce92c2" category="doc">SAP HANA シングルホストシステムのデータボリュームパーティションを追加します</block>
  <block id="b843f6375afb3db0cfb7caa278c6cde4" category="admonition">SAP HANA KPI を達成するために複数のパーティションを使用する必要はありません。単一の LUN にパーティションが 1 つあると、必要な KPI が満たされます。</block>
  <block id="ac2de546fdfde82672b56ccdf9ca6d81" category="admonition">データボリュームに複数の個別の LUN を使用することは、 SAP HANA シングルホストシステムでのみ可能です。SAP HANA マルチホストシステムに必要な SAP ストレージコネクタは、データボリュームに対して 1 つのデバイスのみをサポートします。</block>
  <block id="58c9cbe15952cf82eac3f861da23b041" category="paragraph">データボリュームのパーティションはいつでも追加できますが、 SAP HANA データベースの再起動が必要になる場合があります。</block>
  <block id="c18741487d69f1af9206f4577e19dbc1" category="paragraph">追加のデータボリュームパーティションを有効にするには、次の手順を実行します。</block>
  <block id="b35b93682ba2c90dfcdb9d223fe9a37f" category="list-text">global.ini` ファイルに次のエントリを追加します</block>
  <block id="f6a6e9954258aa0392a80c08caf1ff27" category="list-text">データベースを再起動して機能を有効にしてください。SAP HANA Studio でパラメータを global.ini` ファイルに追加する際に Systemdb 設定を使用すると、データベースが再起動されなくなります。</block>
  <block id="1696d347b6aa4302eae1d97bae40de76" category="section-title">ボリュームと LUN の構成</block>
  <block id="5ffce73a813932a4b86f329f6b66a796" category="paragraph">ボリュームと LUN のレイアウトは、 1 つのデータボリュームパーティションを持つ単一のホストのレイアウトと似ていますが、追加のデータボリュームと LUN が、ログボリュームとして別のアグリゲートに格納され、他のデータボリュームも同様です。次の表は、 2 つのデータボリュームパーティションを持つ SAP HANA シングルホストシステムの構成例を示しています。</block>
  <block id="c9ed70b94b01f7131a326f6bae3eff65" category="paragraph">次の表は、 2 つのデータボリュームパーティションを含むシングルホストシステムのマウントポイント構成の例を示しています。</block>
  <block id="b26e74ed6e2892c7e2bb95e414d460c6" category="cell">LUN</block>
  <block id="649c9030e92d8cd4b009650fea137825" category="cell">/etc/fstab エントリを使用してマウントされます</block>
  <block id="72097bd4370b0b19d48c67e981158544" category="paragraph">ONTAP システムマネージャまたは ONTAP CLI を使用して、新しいデータ LUN を作成します。</block>
  <block id="8c74ac3f77233a64ddd5171869c51c2a" category="paragraph">ホストを設定するには、次の手順を実行します。</block>
  <block id="d9fec5dcb66d8fefe671f1719e1ee97d" category="list-text">セクション 0 の説明に従って、追加の LUN のマルチパスを設定します。</block>
  <block id="a81a698c2f4b08044a08db7d32e1af81" category="list-text">HANA システムに属する追加の LUN ごとに XFS ファイルシステムを作成します。</block>
  <block id="f255815987a5727cdc75e965673dc603" category="list-text">追加のファイル・システム /s を '/etc/fstab 構成ファイルに追加します</block>
  <block id="ab129d4dcc57fb1586e0730518f15ee9" category="admonition">データ LUN の XFS ファイル・システムは 'relatim' および inode64' マウント・オプションを使用してマウントする必要がありますログ LUN の XFS ファイルシステムは 'relatim'inode64'nobarrier マウント・オプションを使用してマウントする必要があります</block>
  <block id="88717870e2f46492c2e9147aafeac98f" category="list-text">マウントポイントを作成し、データベースホストに権限を設定します。</block>
  <block id="beb45bc6e1a41c7a0a9e399cd74843b5" category="section-title">データボリュームパーティションを追加しています</block>
  <block id="07a78873f27afab791279f5d19e3f88c" category="paragraph">データボリュームパーティションをテナントデータベースに追加するには、次の手順を実行します。</block>
  <block id="9b76b6c583544a2f5372da2ae89b54d5" category="list-text">テナントデータベースに対して次の SQL ステートメントを実行します。追加する LUN のパスはそれぞれ異なります。</block>
  <block id="3ba2c0f2dd07fd36730e20b6bcba3d0a" category="paragraph">この認定は現在、次のモデルでのみ有効です。</block>
  <block id="ae9c01e101eba86b0e6ff092df062fae" category="inline-link">認定およびサポートされている SAP HANA ハードウェアディレクトリ</block>
  <block id="134a6ecca2c7d98e325ad00ee461d25a" category="admonition">このホワイトペーパーで説明している構成は、 SAP HANA に必要な SAP HANA KPI と、 SAP HANA に最適なパフォーマンスを達成するために必要です。ここに記載されていない設定または機能を変更すると、原因のパフォーマンスが低下したり、予期しない動作が発生したりする可能性があります。変更は、ネットアップのサポートから指示された場合にのみ実施</block>
  <block id="c79fca4f33a4c23e62509e315c7a3415" category="paragraph">FCP を使用する NetApp FAS システム、および NFS または FC を使用する AFF システムの構成ガイドは、次のリンクから入手できます。</block>
  <block id="90a239e164a24bfe58142290491d6a2c" category="paragraph">SAP HANA シングルホストシステム、またはホストの自動フェイルオーバーを使用しない複数のホストでは、 NFSv3 と NFSv4 がサポートされます。</block>
  <block id="97e382ecf7e6f1064476764cbcc5b429" category="cell">NFS バージョン</block>
  <block id="63bed36f11f7ad7653116b5a06c528d7" category="cell">NFS ロック</block>
  <block id="1aa0b40b5a76a1d683cb73122ad91018" category="cell">SAP HANA の HA/DR プロバイダ</block>
  <block id="1d753a89bf8a361dbe3f6356d640806b" category="cell">ホストの自動フェイルオーバーを使用する SAP HANA マルチホスト</block>
  <block id="6b576fbe1d4469d95e2d87dc73f75226" category="inline-link">SAP ノート 2235581 ：『 SAP HANA Supported Operating Systems 』</block>
  <block id="9321b95e47f982056a8fbe2dbfe57bc0" category="admonition">オペレーティングシステムの構成ガイドラインと、 HANA 固有の Linux カーネルの依存関係については、必ず該当する SAP ノートを参照してください。詳細については、を参照してください<block ref="731cf6347f8c9e1ff069ebd907984a5f" category="inline-link-rx"></block>。</block>
  <block id="fdb63fa26dfca812f4f453ca18a829c7" category="section-title">SAP HANA テーラードデータセンター統合</block>
  <block id="c2798d82f6c464fd30d247919005bc5b" category="paragraph">NetApp FAS ストレージコントローラは、 NFS （ NAS ）プロトコルと FC （ SAN ）プロトコルの両方を使用した SAP HANA TDI プログラムで認定されています。これらは、シングルホスト構成とマルチホスト構成のどちらでも、 SAP Business Suite on HANA 、 S/4HANA 、 BW/4HANA 、 SAP Business Warehouse on HANA など、最新の SAP HANA シナリオに導入できます。SAP HANA との使用が認定されているサーバは、ネットアップ認定のストレージソリューションと組み合わせることができます。アーキテクチャの概要については、次の図を参照してください。</block>
  <block id="cd67947f6f1984974a5e507afaa2222d" category="paragraph">ストレージを仮想マシン（ VM ）に接続する方法はいくつかあります。推奨される方法は、ストレージボリュームと NFS をゲストオペレーティングシステムから直接接続することです。このオプションを使用しても、ホストやストレージの構成が物理ホストや VM で同じになることはありません。</block>
  <block id="a3bc23f60d8778684d75db7b4d688fae" category="summary">ここでは、ネットアップストレージシステムの構成について説明します。プライマリのインストールとセットアップは、対応する Data ONTAP のセットアップガイドおよび設定ガイドに従って実行する必要があります。</block>
  <block id="dc8101343408623d860369896b9691df" category="paragraph">FabricPool や SnapMirror デスティネーションなどのバックアップターゲットで、 Snapshot のみの階層化ポリシーと SnapVault を併用できます。</block>
  <block id="0b70acc9e842036e1675b7fd08e43ff6" category="admonition">FabricPool を使用してプライマリストレージで Snapshot コピーを階層化するか、バックアップターゲットで FabricPool を使用すると、データベースまたはシステムクローンの作成や修復などのその他のタスクのリストアとリカバリに必要な時間が変わります。この点を考慮して、全体的なライフサイクル管理戦略を計画し、この機能を使用している間も SLA が満たされていることを確認してください。</block>
  <block id="2ac3f8b0b798078f242ae9b0249081bc" category="paragraph">FabricPool は、ログバックアップを別のストレージ階層に移動する場合に適しています。バックアップの移動は、 SAP HANA データベースのリカバリに要する時間に影響します。したがって 'tiering-minimum-cooling-days オプションは ' ローカルの高速ストレージ階層にログ・バックアップを配置する値に設定する必要がありますこの値は ' リカバリに日常的に必要なログ・バックアップがローカルの高速ストレージ階層に配置されます</block>
  <block id="d25223f4065ca21361aff2e7cdc61203" category="section-title">ストレージを設定する</block>
  <block id="c2cd71459709a9b877c06b5e5f772f9d" category="paragraph">以下に、必要なストレージ構成手順の概要を示します。各手順の詳細については、以降のセクションで説明します。このセクションでは、ストレージハードウェアがセットアップされており、 ONTAP ソフトウェアがすでにインストールされていることを前提としています。また、ストレージ FCP ポートと SAN ファブリックの接続がすでに確立されている必要があります。</block>
  <block id="2630ee9d2d6404a0be197b5cefef0514" category="section-title">SAS ベースのディスクシェルフ</block>
  <block id="9edbcb82e27829dd83ad8ddf87b121c5" category="paragraph">新しい SVM の作成時に自動的に作成されて割り当てられた QoS プロファイルがある場合は、この自動作成されたプロファイルを SVM から削除して、 SAP HANA に必要なパフォーマンスを確保します。</block>
  <block id="3dc0bb550ffeb410b2cbe908abda2020" category="section-title">SAP HANA シングルホストシステムのボリュームと LUN の構成</block>
  <block id="2cd30dd459c96f8423572cfd0315dd72" category="paragraph">次の図は、 4 つのシングルホスト SAP HANA システムのボリューム構成を示しています。各 SAP HANA システムのデータボリュームとログボリュームは、異なるストレージコントローラに分散されます。たとえば、ボリューム「 ID1_data_mnt00001 」がコントローラ A で設定され、ボリューム「 ID1_log_mnt00001 」がコントローラ B で設定されているとします各ボリューム内で 1 つの LUN が構成されます。</block>
  <block id="a2ab47e506561509501f3015dfd353bb" category="admonition">HA ペアのうち、 1 台のストレージコントローラのみを SAP HANA システムに使用する場合は、データボリュームとログボリュームを同じストレージコントローラに保存することもできます。</block>
  <block id="4a6aff734b6925db0b295309b406bb09" category="paragraph">各 SAP HANA ホストには、データボリューム、ログボリューム、「 /hana/shared 」のボリュームが構成されています。次の表は、 4 台の SAP HANA シングルホストシステムを使用した構成例を示しています。</block>
  <block id="bf2694976353bf0fd87866d930f0f42d" category="paragraph">次の表に、シングルホストシステムのマウントポイント構成例を示します。</block>
  <block id="aaef8ff6bbc08e9efaddebd078c4777c" category="cell">SID1_data_mnt00001</block>
  <block id="6ae93bb41469fd4a9d5c05c492392242" category="cell">/hana/data SID1/mnt00001 のように指定します</block>
  <block id="eedd0dd4abbe982364bb7aa4dc29237b" category="cell">SID1_log_mnt00001</block>
  <block id="867844c1d35f4b67a56a71e776d4a8ad" category="cell">/hana/log/s1/mnt00001</block>
  <block id="ab07e4bbf6e507a26a731683320de6e3" category="cell">SID1_shared</block>
  <block id="d8ee68f6803fad6b40fde1bf30891d5c" category="cell">/hana/shareed/SID1</block>
  <block id="f26f6073b7776e8f86f6bf13d02a97ca" category="admonition">ここで説明する構成では ' ユーザ SID1adm のデフォルトのホーム・ディレクトリが格納されている /usr/sap/SID1 ディレクトリがローカル・ディスク上にありますディスク・ベースのレプリケーションを使用した災害復旧セットアップでは、すべてのファイル・システムが中央ストレージ上にあるように、 /usr/sap/SID1 ディレクトリの「 ID1_shared 」ボリューム内に追加の LUN を作成することを推奨します。</block>
  <block id="8d4e658f528a31efe4237fe11774716f" category="section-title">Linux LVM を使用した SAP HANA シングルホストシステムのボリュームと LUN の構成</block>
  <block id="4f2eb711021dab33e5ff7c3395979045" category="paragraph">Linux LVM を使用すると、パフォーマンスを向上させ、 LUN サイズの制限に対処できます。LVM ボリュームグループの各 LUN は、別のアグリゲートおよび別のコントローラに格納する必要があります。次の表に、ボリュームグループごとに 2 つの LUN を使用する例を示します。</block>
  <block id="bf2b73e5a1069f54823f3690829c44f7" category="admonition">SAP HANA KPI を実現するために、複数の LUN で LVM を使用する必要はありません。1 つの LUN セットアップで必要な KPI を達成します。</block>
  <block id="50c8a736d0d7665eb46c9696d32e54b3" category="cell">LVM ベースのシステムのデータ、ログ、および共有ボリューム</block>
  <block id="e419668a145069bd5df27d1d94e5bf5a" category="cell">共有ボリューム： SID1_shared log2 ボリューム： SID1_log2_mnt00001</block>
  <block id="c5a46bab63449b2e1afaed056128e704" category="cell">data2 ボリューム： SID1_data2_mnt00001</block>
  <block id="f077106d32b9bc50fe9eeac1cd3d7c18" category="paragraph">次の表に示すように、 SAP HANA ホストで、ボリュームグループと論理ボリュームを作成してマウントする必要があります。</block>
  <block id="20c772a627871f53550c990cac40e436" category="cell">論理ボリューム / LUN</block>
  <block id="4dbf191e4ed6b7c6ecc5f37903313222" category="cell">LV ： SID1_data_mnt0000_vol</block>
  <block id="45cf28b4bb0bed9fa061ae20911813ad" category="cell">LV ： SID1_log_mnt00001-vol</block>
  <block id="0a0eb6344c43262455dfef7dd783c9a2" category="cell">LUN ： SID1_shared</block>
  <block id="b25b558581b55b9f2fe2ef166b8c7153" category="section-title">SAP HANA マルチホストシステムのボリュームと LUN の構成</block>
  <block id="6b7ff1a28666a16440c8c6ea6637d7a5" category="paragraph">次の図は、 4+1 のマルチホスト SAP HANA システムのボリューム構成を示しています。各 SAP HANA ホストのデータボリュームとログボリュームは、異なるストレージコントローラに分散されます。たとえば、ボリューム「 `S ID_data_mnt00001 」はコントローラ A に設定され、ボリューム「 S ID_LOG_mnt00001 」はコントローラ B に設定されています各ボリュームに 1 つの LUN を設定します。</block>
  <block id="159562ba9c8d36ce5afba352e4de35a9" category="paragraph">「 /hana/shared 」ボリュームは、すべての HANA ホストからアクセスできる必要があり、 NFS を使用してエクスポートされます。「 /hana/shared 」ファイルシステムには特定のパフォーマンス KPI がありませんが、 10Gb のイーサネット接続を使用することを推奨します。</block>
  <block id="11862afda87479323583a609effa0913" category="admonition">HA ペアのうち、 1 台のストレージコントローラのみを SAP HANA システムに使用する場合は、データボリュームとログボリュームを同じストレージコントローラに保存することもできます。</block>
  <block id="453b8497395d5bbd79a0c8e798f0c9cc" category="admonition">NetApp ASA AFF システムでは、 NFS をプロトコルとしてサポートしていません。「 /hana/shared 」ファイルシステムには、追加の AFF または FAS システムを使用することを推奨します。</block>
  <block id="f4674e3b297184ff65e01cfe3e66e78c" category="paragraph">各 SAP HANA ホストには、 1 個のデータボリュームと 1 個のログボリュームが作成されます。「 /hana/shared 」ボリュームは、 SAP HANA システムのすべてのホストで使用されます。次の表に、 4+1 のマルチホスト SAP HANA システムの構成例を示します。</block>
  <block id="8bb34960315f3235a2496b26df78d447" category="paragraph">次の表に、アクティブな SAP HANA ホストが 4 台あるマルチホストシステムの構成とマウントポイントを示します。</block>
  <block id="18eff1c18c750a16e21791332618bb66" category="cell">LUN またはボリューム</block>
  <block id="0afec29b8027d3f045fedf178d620337" category="cell">LUN ： SID_data_mnt00001</block>
  <block id="0295216fc17b8b84178853eef4b264c9" category="cell">ストレージコネクタを使用してマウント</block>
  <block id="3598df8aff573874a41c3383272e1be8" category="cell">LUN ： SID_log_mnt00001</block>
  <block id="ffeef75de08f2bf3ae65edc9f2fefdd3" category="cell">LUN ： SID_data_mnt00002</block>
  <block id="5a9c6a41898da03d863b855e51215c74" category="cell">LUN ： SID_log_mnt00002</block>
  <block id="f4ea076d315fa65da2bc595e9aa84d32" category="cell">LUN ： SID_data_mnt00003</block>
  <block id="0a3a86cff137cfa7fef2f6b7347b6a19" category="cell">LUN ： SID_log_mnt00003</block>
  <block id="f946b7889ddc57388b641916a63b4fe2" category="cell">LUN ： SID_data_mnt00004</block>
  <block id="11b774b700c0644e1f4311df2fcb05be" category="cell">LUN ： SID_log_mnt00004</block>
  <block id="b7db253f6e3bac8aad3ab6a0941fb70d" category="cell">ボリューム： SID_shared</block>
  <block id="7e81644459f05c7fe5ef716463a0b0fd" category="cell">NFS と /etc/fstab のエントリを使用して、すべてのホストにマウントされます</block>
  <block id="3e7047d2bf94461f14196805112df4f5" category="admonition">上記の構成では、ユーザ SIDadm のデフォルトのホームディレクトリが格納されている /usr/sap/SID のディレクトリは、各 HANA ホストのローカルディスクにあります。ディスク・ベースのレプリケーションを使用した災害復旧の設定では、各データベース・ホストが中央ストレージ上のすべてのファイル・システムを持つように、 /usr/sap/SID ファイル・システムの「 S ID_shared 」ボリュームに 4 つのサブディレクトリを追加作成することを推奨します。</block>
  <block id="c054b3fc8b39c77b600c774805522378" category="section-title">Linux LVM を使用した SAP HANA マルチホストシステムのボリュームと LUN の構成</block>
  <block id="fb98d6eb62d89d96b064be4fe17f583e" category="paragraph">Linux LVM を使用すると、パフォーマンスを向上させ、 LUN サイズの制限に対処できます。LVM ボリュームグループの各 LUN は、別のアグリゲートおよび別のコントローラに格納する必要があります。</block>
  <block id="3ba3509b7579ef045ff4c77476c7cf11" category="admonition">SAP HANA KPI を実現するために LVM を使用して複数の LUN を組み合わせる必要はありません。1 つの LUN セットアップで必要な KPI を達成します。</block>
  <block id="f7be036cddf21af55fc52689e1f3055b" category="paragraph">次の表に、 2+1 の SAP HANA マルチホストシステムのボリュームグループあたり 2 つの LUN の例を示します。</block>
  <block id="4d9935e6cd83034a64b5ac62866a0738" category="cell">ログ 2 ボリューム： SID_log2_mnt00001</block>
  <block id="ce92b52ec6796984f134f3d663d31dd9" category="cell">ログ 2 ボリューム： SID_log2_mnt00002</block>
  <block id="120bb07a74c62db6e646c3e4c6894343" category="cell">論理ボリューム（ LV ）またはボリューム</block>
  <block id="e0aca5a9c63604d53aca20804da97330" category="cell">lv ： SID_data_mnt00001-vol</block>
  <block id="e865dd471095d94a2e4b63c8a0f33860" category="cell">lv ： SID_log_mnt00001-vol</block>
  <block id="711212cf75d514aac51d33222c3265b1" category="cell">LV ： SID_data_mnt00002 -vol</block>
  <block id="57d1d1afeed57e5be9d3694589233736" category="cell">lv ： SID_log_mnt00002 -vol</block>
  <block id="941ad2feba868268ee283fe1886c4440" category="paragraph">次の表に示すボリュームオプションは、すべての SVM で検証および設定する必要があります。</block>
  <block id="b9c48200eb9eba714e3c88803e97b4ce" category="section-title">LUN 、ボリュームを作成し、 LUN をイニシエータグループにマッピングします</block>
  <block id="a86be254d15f1254d56b97c8755a5b77" category="admonition">「 anlun 」ツールは NetApp Host Utilities の一部であり、各 SAP HANA ホストにインストールする必要があります。詳細については、「 host_setup 」セクションを参照してください。</block>
  <block id="8c4751bd2d7d17062a8b536388ba69bc" category="section-title">CLI を使用して LUN 、ボリュームを作成し、 igroup に LUN をマッピングします</block>
  <block id="c48caf1c739d7975abd91d926cd56982" category="list-text">必要なボリュームをすべて作成します。</block>
  <block id="8e5c1549db5f0e31853b6809f7049388" category="list-text">すべての LUN を作成します。</block>
  <block id="d595b9142c1fd0d3ea19c8cd10165661" category="list-text">システム FC5 に属するすべてのサーバのイニシエータグループを作成します。</block>
  <block id="f987b1e962233a1893b72bf1d65f3a21" category="list-text">作成したイニシエータグループにすべての LUN をマッピングします。</block>
  <block id="47c97f5b5374f82578ea21329859f8cb" category="summary">ストレージコネクタは、フェイルオーバー機能を備えたマルチホスト環境でのみ必要です。</block>
  <block id="7a22a81622f7d339ee9037f01614a95e" category="paragraph">ネットアップストレージを使用した SAP HANA マルチホスト構成では、 SAP が提供する標準のストレージコネクタが使用されます。『 SAP HANA FC Storage Connector Admin Guide 』は、への添付ファイルとして提供されています<block ref="fb03c315acf5bdf850546480c01e7306" category="inline-link-rx"></block>。</block>
  <block id="0d3eab0b9e96ff06837e191b39218d16" category="paragraph">HDD 構成で Storage Efficiency 機能を有効にすることはできません。</block>
  <block id="0df676e828d9cc9486e1b8e0aaf1b692" category="paragraph">「 snapshot-only 」階層化ポリシーを使用することも、一般的に SnapVault または SnapMirror デスティネーションなどのバックアップターゲットで FabricPool を使用することもできます。</block>
  <block id="5a5237a6a98f8795e5ef541300be3602" category="admonition">FabricPool を使用してプライマリストレージで Snapshot コピーを階層化するか、バックアップターゲットで FabricPool を使用すると、データベースまたはシステムクローンの作成や修復などのその他のタスクのリストアとリカバリに必要な時間が変わります。この点を考慮して、全体的なライフサイクル管理戦略を計画し、この機能を使用している間も SLA が満たされていることを確認してください。</block>
  <block id="562283819997e7573d7ef1bcd25f02e9" category="paragraph">以下に、必要なストレージ構成手順の概要を示します。各手順の詳細については、以降のセクションで説明します。これらの手順を開始する前に、ストレージハードウェアのセットアップ、 ONTAP ソフトウェアのインストール、およびストレージ FCP ポートと SAN ファブリックの接続を完了してください。</block>
  <block id="b7483c1a479d4fef5cff97bd81ff277b" category="paragraph">SSD を使用する場合は、次の図に示すように、 1 つの SAS スタックに最大 1 台のディスクシェルフを接続して、 SAP HANA ホストに必要なパフォーマンスを実現できます。各シェルフ内のディスクは、 HA ペアの両方のコントローラに均等に分散する必要があります。ディスクシェルフ DS224C では、クワッドパスの SAS ケーブルも使用できますが、必須ではありません。</block>
  <block id="fbd0736dc070b8c1ab4ca37b6ff6a1c2" category="paragraph">一般に、使用するディスクシェルフやディスクテクノロジ（ SSD または HDD ）に関係なく、コントローラごとに 2 つのアグリゲートを設定する必要があります。この手順は、使用可能なすべてのコントローラリソースを使用できるようにするために必要です。FAS 2000 シリーズシステムの場合、 1 つのデータアグリゲートで十分です。</block>
  <block id="15780b309192b18b065fdcb3276b82b6" category="paragraph">SAP HANA データベースを使用する複数ホストの SAP 環境では、単一の SVM を使用できます。SVM は、社内の複数のチームによって管理される場合に備え、必要に応じて各 SAP ランドスケープに割り当てることもできます。このドキュメントのスクリーンショットとコマンド出力には、「 HANA 」という名前の SVM が使用されています。</block>
  <block id="6651fd2f7a600a31e0103b2ff23752ca" category="section-title">イニシエータグループ</block>
  <block id="517f95ae0c03c21432632bd009cdff0d" category="paragraph">igroup は、サーバごとに、または LUN へのアクセスを必要とするサーバのグループに対して設定できます。igroup の構成には、サーバの World Wide Port Name （ WWPN ）が必要です。</block>
  <block id="3f87e8b9731d5a43155ef27ca0b567af" category="paragraph">「 anlun 」ツールを使用して次のコマンドを実行し、各 SAP HANA ホストの WWPN を取得します。</block>
  <block id="bc7b122f8c7d1a7a700fe37744267ae2" category="inline-link-macro">ホストのセットアップ：</block>
  <block id="2c8d2683acd00fc6b7bdbecbc4077a74" category="admonition">ハイアベイラビリティ（ HA ）ペアのうち、 1 台のストレージコントローラのみを SAP HANA システムに使用する場合は、データボリュームとログボリュームを同じストレージコントローラに保存することもできます。</block>
  <block id="7a1a0bd259dd739b7d810124fe9f4440" category="paragraph">次の表に、シングルホストシステムのマウントポイント構成の例を示します。</block>
  <block id="414644d9944d8acf448d00964757d116" category="admonition">SAP HANA KPI を実現するために、複数の LUN で LVM を使用する必要はありません。1 つの LUN セットアップで必要な KPI を達成します。</block>
  <block id="6ca08fbeb2f69e5ac6d7d31de1c0d50e" category="paragraph">SAP HANA ホストで、ボリュームグループと論理ボリュームを作成してマウントする必要があります。次の表に、 LVM を使用するシングルホストシステムのマウントポイントを示します。</block>
  <block id="ebcead3815b9e992a87a9c31a4be99fe" category="paragraph">各 SAP HANA ホストには、 1 個のデータボリュームと 1 個のログボリュームが作成されます。「 /hana/shared 」ボリュームは、 SAP HANA システムのすべてのホストで使用されます。次の図は、 4+1 のマルチホスト SAP HANA システムの構成例を示しています。</block>
  <block id="47efb02d47f9965ca8839f52ecc182bc" category="paragraph">次の表に、アクティブな SAP HANA ホストが 4 台あるマルチホストシステムの構成とマウントポイントを示します。</block>
  <block id="415dc524f4e8d720ce545c8d6263459c" category="cell">LUN またはボリューム</block>
  <block id="ea15b968cdc22cb1b865eba6daa0eae0" category="paragraph">Linux LVM を使用すると、パフォーマンスを向上させ、 LUN サイズの制限に対処できます。LVM ボリュームグループの各 LUN は、別のアグリゲートおよび別のコントローラに格納する必要があります。次の表に、 2+1 の SAP HANA マルチホストシステムのボリュームグループあたり 2 つの LUN の例を示します。</block>
  <block id="7e819a8bd73b862fc9b80deb044fa7da" category="admonition">SAP HANA KPI を実現するために LVM を使用して複数の LUN を組み合わせる必要はありません。1 つの LUN セットアップで必要な KPI を達成します。</block>
  <block id="70993f32e0c2ae5000f9a5a9cbf641e4" category="paragraph">SAP HANA ホストで、ボリュームグループと論理ボリュームを作成してマウントする必要があります。</block>
  <block id="203165a49e3a391bdbc44e3a05d54279" category="cell">ONTAP 9</block>
  <block id="77656454768235b0e1954805bd92d9c9" category="section-title">CLI を使用して LUN 、ボリュームを作成し、 igroup に LUN をマッピングします</block>
  <block id="d21a66a2fd717a4acd6dd449ecac4839" category="list-text">システム FC5 に属するすべてのサーバの igroup を作成します。</block>
  <block id="3a630997b07207edb38c5c79a4f7d867" category="list-text">作成した igroup にすべての LUN をマッピングします。</block>
  <block id="60a5608aa352e15e7648da1d39cb299b" category="paragraph">S12 までの SAP HANA 1.0 では、 SAP ノートに記載されているように、 SAP HANA データベースのインストール時にこれらのパラメータを設定できます<block ref="c391dcebb4d33a6a0f840983455654bf" category="inline-link-rx"></block>。</block>
  <block id="8192071b4f7b02996ec3cdeddd07d1d8" category="paragraph">また、パラメータは、 SAP HANA データベースのインストール後に「 hdbparam 」フレームワークを使用して設定することもできます。</block>
  <block id="c0b08fa9f53bd588cf26dd04b2bf1c29" category="inline-link">2399079 - Elimination of hdbparam in HANA 2 』を参照してください</block>
  <block id="25acda0af7df7e8f6aaedc308080d2f2" category="paragraph">SAP HANA 2.0 以降 'hdbparam' は廃止され ' パラメータは global.ini` ファイルに移動されましたパラメータは、 SQL コマンドまたは SAP HANA Studio を使用して設定できます。詳細については、 SAP ノートを参照してください<block ref="936e80e83aa8101d48722d387f096a5f" category="inline-link-rx"></block>。パラメータは 'global.ini` ファイル内で設定することもできます</block>
  <block id="a1dc0f5c23c4490d01718a8d6b05872e" category="paragraph">SAP HANA 2.0 SPS5 以降では、「 etParameter.py 」のスクリプトを使用して上記のパラメータを設定できます。</block>
  <block id="2a986cf5abe7b7785ffcdece33cfc433" category="admonition">SAP HANA KPI を達成するために複数のパーティションを使用する必要はありません。単一の LUN にパーティションが 1 つあると、必要な KPI が満たされます。</block>
  <block id="e7e3db35c66fbc08aba59377e767d66f" category="paragraph">データボリュームのパーティションはいつでも追加できますが、 SAP HANA データベースの再起動が必要になる場合があります。</block>
  <block id="0da243913a454541b5b0036cfd8f8135" category="list-text">global.ini` ファイル内に次のエントリを追加します</block>
  <block id="2b304fd148da024e97f54db599c2f521" category="paragraph">ボリュームと LUN のレイアウトは、 1 つのデータボリュームパーティションを持つ単一のホストのレイアウトに似ていますが、ログボリュームとして別のアグリゲートに追加のデータボリュームと LUN が格納され、残りのデータボリュームも同じです。次の表は、 2 つのデータボリュームパーティションを持つ SAP HANA シングルホストシステムの構成例を示しています。</block>
  <block id="d7021f52f260e11c8c2dd980991f38ae" category="paragraph">ONTAP システムマネージャまたは ONTAP CLI を使用して、新しいデータ LUN を作成します。</block>
  <block id="572b2316d0cecf8ccd134b71ee2fce66" category="list-text">HANA システムに属する追加の各 LUN に XFS ファイルシステムを作成します。</block>
  <block id="23c80196123eb12634dbeb70874872fe" category="list-text">マウントポイントを作成し、データベースホストに権限を設定します。</block>
  <block id="ab876b2fc77b49d4799c8317c49e7fdc" category="list-text">ファイルシステムをマウントし、「 mount – a 」コマンドを実行します。</block>
  <block id="cccc40b2b949eb5631f1a7625e3bbb28" category="paragraph">データボリュームパーティションをテナントデータベースに追加するには、テナントデータベースに対して次の SQL ステートメントを実行します。追加する LUN のパスはそれぞれ異なります。</block>
  <block id="269e48a148be46c6e5fb065e74629d57" category="doc">SAP Business Application と SAP HANA Database ソリューション</block>
  <block id="f01120deea316d303519ad5ab689a57f" category="list-text">解決策概要</block>
  <block id="2f5f480c2cb54884152c412765dd0565" category="summary">効果的なディザスタリカバリ戦略を実装するには、必要なワークフローをテストする必要があります。テストでは、戦略が機能するかどうか、および内部ドキュメントで十分かどうかを検証し、管理者が必要な手順についてトレーニングできるようにします。</block>
  <block id="1135ff8da5df72747612faee39237919" category="doc">ディザスタリカバリのテスト</block>
  <block id="78c7aecd30426566c46ffded8977d5e8" category="paragraph">ANF のクロスリージョンレプリケーションにより、 RTO と RPO をリスクにさらすことなくディザスタリカバリテストを実施できます。ディザスタリカバリのテストは、データレプリケーションを中断することなく実行できます。</block>
  <block id="937c6624e4ad8af35fa4c42dd6d29b86" category="inline-link">Azure NetApp Files スナップショットの仕組み | Microsoft Docs</block>
  <block id="2596187dfded21d3da704d17cb465012" category="paragraph">ディザスタリカバリテストのワークフローでは、 ANF 機能セットを利用して、ディザスタリカバリターゲットの既存の Snapshot バックアップに基づいて新しいボリュームを作成します。を参照してください<block ref="db53ffad00e09cba73a4fdfc74cb3775" category="inline-link-rx"></block>。</block>
  <block id="5cc40200131ad81d8bcd56e79458f4e9" category="paragraph">ログバックアップレプリケーションがディザスタリカバリの設定に含まれているかどうかに応じて、ディザスタリカバリの手順は少し異なります。ここでは、データバックアップのみのレプリケーション、およびログバックアップボリュームのレプリケーションと組み合わせたデータボリュームのレプリケーションに対するディザスタリカバリのテストについて説明します。</block>
  <block id="287204f88222f0f0fc17fea019460c2e" category="paragraph">ディザスタリカバリテストを実行するには、次の手順を実行します。</block>
  <block id="5d15c22569bad82e3c259149418a5567" category="list-text">ターゲットホストを準備します。</block>
  <block id="c47b80a6b3e3eeb1c46a9097541a0186" category="list-text">ディザスタリカバリサイトでの Snapshot バックアップに基づいて新しいボリュームを作成します。</block>
  <block id="3a35566accf9e51bcdeef178bd7f83e7" category="list-text">ターゲットホストに新しいボリュームをマウントします。</block>
  <block id="69a3fff9d66404b6c7c43fe548a89488" category="list-text">HANA データベースをリカバリします。</block>
  <block id="63fe05915e48317fa2d299c9aa6b20e9" category="list-text">データボリュームのリカバリのみ</block>
  <block id="69a5087055235e78cdb882da9f585b30" category="list-text">レプリケートされたログバックアップを使用してリカバリを転送する。</block>
  <block id="c4ac05b35ef0c84121e3311d4bfceacc" category="paragraph">以降のサブセクションで、これらの手順について詳しく説明します。</block>
  <block id="0bd9242ade1764d7b05344c462c5945f" category="summary">これで、前の手順で作成した /etc/fstab ファイルに基づいて、新しいボリュームをターゲットホストにマウントできるようになります。</block>
  <block id="0b31021246b10bf3eae6d1d87ea727ab" category="doc">ターゲットホストに新しいボリュームをマウントします</block>
  <block id="37b6bf2117a49bac550ea7fbde01cbe6" category="paragraph">これで ' 前に作成した /etc/fstab ファイルに基づいて ' 新しいボリュームをターゲット・ホストにマウントできるようになります</block>
  <block id="a8c746bca5da7073413ffa2079797496" category="paragraph">次の出力は、必要なファイルシステムを示しています。</block>
  <block id="a4d54b1dcfdae0e1a0573e950b1d490a" category="summary">ボリュームレプリケーションを設定する前に、ディザスタリカバリサイトでいくつかの準備手順を実行する必要があります。</block>
  <block id="86ba0d39a4ca51b69c6fa7d6c445e674" category="doc">ANF クロスリージョンレプリケーションの設定手順</block>
  <block id="b42a1bf66a549b8645aa369e72b6892a" category="list-text">ネットアップアカウントが利用可能で、ソースと同じ Azure サブスクリプションで設定されている必要があります。</block>
  <block id="e3b7f7acd631c2ed58d549c927044283" category="list-text">容量プールは、前述のネットアップアカウントを使用して使用および設定する必要があります。</block>
  <block id="ab41f73f5c2b7b260e66bd7135be55df" category="list-text">仮想ネットワークが使用可能で、設定されている必要があります。</block>
  <block id="625218459fa15c0fb1b7d5528cb91ccb" category="list-text">仮想ネットワーク内で ANF で使用するためには、委任サブネットが使用可能で構成されている必要があります。</block>
  <block id="458d95f9ec4fff8dd9312e51b3c2a7fb" category="paragraph">HANA データ、 HANA 共有、 HANA ログバックアップボリュームの保護ボリュームを作成できるようになりました。このラボ環境でのデスティネーションボリュームの設定を次の表に示します。</block>
  <block id="d6b016ece56ccaef1fd3fcd56391468c" category="admonition">最高のレイテンシを実現するには、災害時のフェイルオーバー時に SAP HANA を実行する VM の近くにボリュームを配置する必要があります。そのため、他の SAP HANA 本番システムと同じピン固定プロセスが DR ボリュームに必要です。</block>
  <block id="449a0fc6c7996b28a64846e892cd6926" category="cell">HANA ボリューム</block>
  <block id="f31bbdd1b3e85bccd652680e16935819" category="cell">ソース</block>
  <block id="12007e1d59f4d09c87dbe2c438256244" category="cell">宛先</block>
  <block id="c17d95dc84bb02bde4b5e15d2626b9ca" category="cell">レプリケーションスケジュール</block>
  <block id="79d64f73cfdf4a123fdce2f6c75d002b" category="cell">HANA データボリューム</block>
  <block id="26468341ce2b86a76711548bf32d5374" category="cell">pr1 -data-mnt00001</block>
  <block id="dc2ff9902e7813acfb09f85544bb029e" category="cell">pr1 -data-mnt00001 -sm -dest</block>
  <block id="c512b685438f41daa7386329a3b8f8d3" category="cell">毎日</block>
  <block id="1d57310cd0156e7d3039997b3c4fcf49" category="cell">HANA 共有ボリューム</block>
  <block id="79b9df781b053a904e15f901469d5b15" category="cell">PR1 - 共有</block>
  <block id="48a9062e4add008eae1409d0f6180ff5" category="cell">pr1 -shared-sm-dest</block>
  <block id="769cb50c95fd3a43c659aa73aba99e5b" category="cell">毎時</block>
  <block id="175080ca3e495fc5f25b31acc5ea2565" category="cell">HANA のログ / カタログのバックアップボリューム</block>
  <block id="043b690b7fa6b658a34cfe4eddef0f66" category="cell">ハンナバックアップ</block>
  <block id="f607dbc7c9b584df2af13aa1e3effa0a" category="cell">hanabackup-sm -dest</block>
  <block id="c2bd6dc7b8af91e4e8d66ba495a405e1" category="paragraph">ボリュームごとに、次の手順を実行する必要があります。</block>
  <block id="825b53aa3215a8ff5af004871350973b" category="list-text">DR サイトに新しい保護ボリュームを作成します。</block>
  <block id="e84a39f7b4c4e2ad94dca482db6fbc12" category="list-text">ボリューム名、容量プール、クォータ、およびネットワークの情報を指定します。</block>
  <block id="cae87a876f3a8abb3eb23f4af3e93517" category="list-text">プロトコルとボリュームのアクセス情報を指定します。</block>
  <block id="27c07ed9c69be3dccb35efafedd4eba8" category="list-text">ソースボリュームの ID とレプリケーションスケジュールを指定します。</block>
  <block id="e8cef5b7d1f6a0653baaed122e42e586" category="list-text">ターゲットボリュームを作成します。</block>
  <block id="b686ca8bbff390a495e7e60451ecb210" category="list-text">ソースボリュームでレプリケーションを許可します。</block>
  <block id="f81db0f887d96ce44293b99102b352a6" category="list-text">ターゲットボリュームの ID を指定します。</block>
  <block id="5ae1ee782233392892b749a4f5d850ce" category="paragraph">以下のスクリーンショットは、設定手順を詳しく示しています。</block>
  <block id="e2be47b4fb660d20573336e8663f54db" category="paragraph">ディザスタリカバリサイトでは、ボリュームを選択して Add Data Replication （データレプリケーションの追加）をクリックすることで、新しい保護ボリュームが作成されます。[Basics] タブでは、ボリューム名、容量プール、およびネットワーク情報を入力する必要があります。</block>
  <block id="e99589f2cbac6c085c73aea3c0c28855" category="admonition">ボリュームのパフォーマンスはレプリケーションプロセスには影響しないため、ボリュームのクォータは容量要件に基づいて設定できます。ディザスタリカバリフェイルオーバーの場合は、実際のパフォーマンス要件を満たすようにクォータを調整する必要があります。</block>
  <block id="54eafc6acb43f4d58b79a36ccfbff752" category="admonition">容量プールで QoS が手動で設定されている場合は、容量の要件に加えてスループットも設定できます。上記と同様に、通常運用時はスループットの値を低く設定して、ディザスタリカバリフェイルオーバー時に設定することができます。</block>
  <block id="09cc677ff6f2db7b9e0c9f462c378118" category="paragraph">Protocol タブで、ネットワークプロトコル、ネットワークパス、およびエクスポートポリシーを指定する必要があります。</block>
  <block id="964f72274255c85554e9bc4d2c7d3507" category="admonition">プロトコルは、ソースボリュームで使用されているプロトコルと同じである必要があります。</block>
  <block id="aff73926e77c6491902270e665038623" category="paragraph">Replication （レプリケーション）タブで、ソースボリューム ID とレプリケーションスケジュールを設定する必要があります。データボリュームのレプリケーションについては、ラボのセットアップで日次レプリケーションスケジュールを設定しました。</block>
  <block id="716f8c04301b81d7636c064e03f9e95a" category="admonition">ソースボリュームの ID は、ソースボリュームのプロパティ画面からコピーできます。</block>
  <block id="f9ce4d292d3839d7942d11754c497e99" category="paragraph">最後の手順として、ターゲットボリュームの ID を指定してソースボリュームでレプリケーションを許可する必要があります。</block>
  <block id="588edd807dcaffd38e6d9dc085f71430" category="admonition">デスティネーションボリュームのプロパティ画面からデスティネーションボリューム ID をコピーできます。</block>
  <block id="e2a531679c8b0e87dfd7ecbf1e367682" category="paragraph">HANA 共有ボリュームとログバックアップボリュームで同じ手順を実行する必要があります。</block>
  <block id="1805b1ce31eaa33fbab9adfcf5046164" category="doc">ターゲットホストを準備します</block>
  <block id="e90afee4e0255e92692e4dbb455fab0b" category="section-title">ターゲットサーバのホスト名と IP アドレス</block>
  <block id="bb4741b9acd629bc36e0a0afe5a882b0" category="paragraph">ターゲット・サーバのホスト名は ' ソース・システムのホスト名と同じである必要がありますIP アドレスは異なっていてもかまいません。</block>
  <block id="930aaee5905613c0fde11375bafb6008" category="admonition">ターゲットサーバが他のシステムと通信できないように、ターゲットサーバの適切なフェンシングを確立する必要があります。適切なフェンシングが設定されていないと、クローニングされた本番用システムは、他の本番用システムとデータを交換し、論理的にデータが破損する可能性があります。</block>
  <block id="c5d62e4cd93b13ecc40d972d26905aae" category="section-title">必要なソフトウェアをインストールします</block>
  <block id="e6d9f482b1a3219db22a8c75173e86bf" category="inline-link">SAP ホストエージェント</block>
  <block id="8c606d54e77d50b5b8be96eba8964fd9" category="admonition">ホストが HANA QA またはテストシステムとして使用されている場合は、 SAP ホストエージェントソフトウェアがすでにインストールされています。</block>
  <block id="7499cb244ac7c7d171d96246d84cfff2" category="section-title">ユーザ、ポート、および SAP サービスを設定する</block>
  <block id="f7188f776339935568f9082e226a74bf" category="paragraph">ターゲットサーバに、 SAP HANA データベースに必要なユーザとグループが配置されている必要があります。通常は、ユーザの一元管理が使用されるため、ターゲットサーバで設定手順を行う必要はありません。HANA データベースに必要なポートは、ターゲットホストで設定する必要があります。構成は '/etc/services ファイルをターゲット・サーバにコピーすることによって ' ソース・システムからコピーできます</block>
  <block id="e7ab0414c80c78c499518651c496b99b" category="paragraph">必要な SAP サービスのエントリがターゲットホストにあることが必要です。/usr/sap/sapservices' ファイルをターゲットサーバにコピーすることで ' ソースシステムから構成をコピーできます次の出力は、このラボ環境で使用する SAP HANA データベースの必須エントリを示しています。</block>
  <block id="c6f4d12bfe279cd224db1ab7d3bafeee" category="section-title">HANA のログボリュームを準備</block>
  <block id="8ab1ea416a553309f101937f88feadd0" category="paragraph">HANA のログボリュームはレプリケーションの一部ではないため、空のログボリュームがターゲットホストに存在している必要があります。ログボリュームには、ソース HANA システムと同じサブディレクトリを含める必要があります。</block>
  <block id="ebe6e77fe278b0c44da179596e20dc10" category="section-title">ログバックアップボリュームを準備</block>
  <block id="d8c860bb68ca61783d80f8661d53179d" category="paragraph">ソースシステムは HANA ログバックアップ用の個別のボリュームで構成されているため、ターゲットホストにログバックアップボリュームも必要です。ログバックアップ用のボリュームを設定し、ターゲットホストにマウントする必要があります。</block>
  <block id="991bc387262467ee7383a884e1ae528c" category="section-title">ファイルシステムのマウントを準備</block>
  <block id="c62201a5e4ec1f272c1c685c418cae86" category="cell">HANA PR1 ボリューム</block>
  <block id="93b8bd1267fc89b2ca2efe06e289f955" category="cell">ターゲットホストのマウントポイント</block>
  <block id="a4d45ebfbb892aaa3c0aba5e7211fea0" category="cell">データボリューム</block>
  <block id="09e9cb8a4e8275fd4a5db4146ca1609d" category="cell">/hana/data /pr1/mnt00001</block>
  <block id="46e458e62cbb1b2e6d36191ae52d7467" category="cell">共有ボリューム</block>
  <block id="3c6826d6950803e805a42a4d006c4a77" category="cell">/hana/shared /usr/sap/pr1</block>
  <block id="a38c36c25709867c8eb52bece271a213" category="cell">ログバックアップボリューム</block>
  <block id="ac32f37d2501e6d25aef85bf49a3a09d" category="cell">/ はなんバックアップ</block>
  <block id="5aa4fa30550ad8c9254246ba03f89777" category="paragraph">ここでは ' 必須の /etc/fstab エントリを示します</block>
  <block id="91511a18af650a7ce055d8ec78c57f99" category="doc">HANA データベースのリカバリ</block>
  <block id="7988012007cbc71947d6a647a8c8e726" category="paragraph">必要な SAP サービスを開始します。</block>
  <block id="cd963b480c3cb24fbb41cb17a8d85134" category="paragraph">次の出力は、必要なプロセスを示しています。</block>
  <block id="09ee90eaa98c13b5a23451eb4bd876bc" category="paragraph">使用可能なすべてのログ・バックアップを使用したリカバリは ' ユーザー pr1adm として次のコマンドを使用して実行されます</block>
  <block id="557c60d90ae6fa286bf7c2d4c8e08cf2" category="list-text">システムデータベース</block>
  <block id="47dbd31d59cd136040f750cf889b52fd" category="list-text">テナントデータベース</block>
  <block id="a4d94df5aaf94ce5a337f9770dd73652" category="paragraph">また、 HANA Studio または Cockpit を使用して、システムとテナントデータベースのリカバリを実行することもできます。</block>
  <block id="3b67a0f0dbbe2252de94c9cb25faa5bd" category="paragraph">次のコマンド出力は、リカバリの実行を示しています。</block>
  <block id="5204ae5afd7ee53686a6f99190f93e37" category="section-title">システムデータベースのリカバリ</block>
  <block id="3973b179e7f3c7f23b37daa55f8b718c" category="section-title">テナントデータベースのリカバリ</block>
  <block id="410b822ca485235d4570285ab55bd4fc" category="paragraph">ソースシステムで pr1adm ユーザー用のユーザーストアキーが作成されていない場合は ' ターゲットシステムでキーを作成する必要がありますキーで設定されたデータベースユーザには、テナントのリカバリ処理を実行する権限が必要です。</block>
  <block id="b88213d578dadf0b58255002cdc3235f" category="section-title">最新のログバックアップの整合性をチェックしてください</block>
  <block id="b855006be612f8de44edd56b1cbe599e" category="paragraph">ログバックアップボリュームのレプリケーションは、 SAP HANA データベースによって実行されるログバックアッププロセスとは独立して実行されるため、ディザスタリカバリサイトには一貫性のないオープンなログバックアップファイルが存在する可能性があります。最新のログ・バックアップ・ファイルのみが整合性を保持していない可能性がありますこれらのファイルは 'hdbbackupcheck' ツールを使用して災害復旧サイトでフォワード・リカバリを実行する前にチェックする必要があります</block>
  <block id="668fadc42f8855257306656060627f86" category="paragraph">「 hdbbackupcheck 」ツールが最新のログ・バックアップのエラーを報告する場合は、最新のログ・バックアップ・セットを削除するか、削除する必要があります。</block>
  <block id="81dbd9083542b5058eeff2a69b9df0f1" category="summary">アプリケーションに依存しないクロスリージョンレプリケーションの情報は、次の場所にあります。</block>
  <block id="1cc8efad9ef8bc01d2445bfc8d04e15c" category="doc">SAP HANA を使用した ANF のクロスリージョンレプリケーション</block>
  <block id="a9f4d9aafbea086205494239b45e7d8a" category="inline-link">Azure NetApp Files のドキュメント | Microsoft ドキュメント</block>
  <block id="4a822cebdc9c9ffddab9b72668b15b82" category="summary">解決策の検証は、 SAP HANA シングルホストシステムで実行されています。ANF 用 Microsoft AzAcSnap Snapshot バックアップツールを使用して、 HANA アプリケーションと整合性のある Snapshot バックアップを設定しました。</block>
  <block id="2ed67d7b0221292a52e0dad8b778413a" category="doc">ラボのセットアップ</block>
  <block id="c377a17bdb4b49ee81ed4b850d7aa82f" category="paragraph">解決策の検証は、 SAP HANA シングルホストシステムで実行されています。ANF 用 Microsoft AzAcSnap Snapshot バックアップツールを使用して、 HANA アプリケーションと整合性のある Snapshot バックアップを設定しました。日次データボリューム、時間単位のログバックアップ、および共有ボリュームレプリケーションがすべて設定されました。ディザスタリカバリのテストとフェイルオーバーは、フォワードリカバリ処理と同様に、保存ポイントで検証済みです。</block>
  <block id="ee0a08337c36a2e1dc94c66920bc1c53" category="paragraph">ラボ環境で使用しているソフトウェアのバージョンを次に示します。</block>
  <block id="49821fb7d46ce72a906d5558cc7fb49c" category="list-text">シングルホスト SAP HANA 2.0 SPS5 システムとシングルテナント</block>
  <block id="338f7cb0bac9744a3d8f0e058609d27c" category="list-text">SUSE SLES for SAP 15 SP1</block>
  <block id="f169231424331b8331517b539b422205" category="list-text">AzAcSnap 5.0</block>
  <block id="2f756956567b07d5ae865a7961038f49" category="paragraph">DR サイトに、手動 QoS を設定した単一の容量プールが設定されている。</block>
  <block id="8aa3c19ab9d67a7c99258a236498a316" category="paragraph">次の図は、ラボのセットアップを示しています。</block>
  <block id="2ebc3727a62e108be8ad065c82185b2a" category="section-title">AzAcSnap を使用した Snapshot バックアップ設定</block>
  <block id="dea36c580776ee186f7bd3a729fdadae" category="paragraph">プライマリサイトでは、 HANA システム PR1 のアプリケーションと整合性のある Snapshot バックアップを作成するように AzAcSnap が設定されています。これらの Snapshot バックアップは、次の 2 つの図に示すように、 PR1 HANA システムの ANF データボリュームで利用でき、 SAP HANA バックアップカタログにも登録されています。Snapshot バックアップは 4 時間ごとにスケジュールされています。</block>
  <block id="db9218292bb42bb03cca44310ac971c4" category="paragraph">ANF クロスリージョンレプリケーションを使用してデータボリュームをレプリケーションすると、これらの Snapshot バックアップがディザスタリカバリサイトにレプリケートされ、 HANA データベースのリカバリに使用できます。</block>
  <block id="6aeab84a5441035790ad6afb0f70ebbd" category="paragraph">次の図は、 HANA データボリュームの Snapshot バックアップを示しています。</block>
  <block id="e5d963ae30a5059019279dfe93dc08fd" category="paragraph">次の図は、 SAP HANA のバックアップカタログを示しています。</block>
  <block id="6ea9fa207b22b88f7a1b71067c28b27c" category="summary">包括的なディザスタリカバリ解決策では、お客様がプライマリサイトの完全な障害からリカバリできるようにする必要があります。</block>
  <block id="e83bab5b97dcd6d1ab9fd10e243e00a2" category="doc">ディザスタリカバリ解決策の比較</block>
  <block id="c8b28dac8aa9627eba845b258700d143" category="paragraph">包括的なディザスタリカバリ解決策では、お客様がプライマリサイトの完全な障害からリカバリできるようにする必要があります。そのため、サイト障害が発生した場合に必要な本番用 SAP HANA システムを実行するには、データをセカンダリサイトに転送し、インフラ全体を構築する必要があります。アプリケーションの可用性の要件や保護する災害の種類に応じて、 2 サイトまたは 3 サイトのディザスタリカバリ解決策を検討する必要があります。</block>
  <block id="efdfd61135978b48927ebefc9a85bac0" category="paragraph">次の図は、データが同じ Azure リージョン内で同時に 2 つ目のアベイラビリティゾーンにレプリケートされる一般的な設定を示しています。短距離では、データを同期的にレプリケートして、 RPO をゼロにすることができます（一般に HA の提供に使用されます）。</block>
  <block id="6b38154114f7c1d2f1f851414e66cdb5" category="paragraph">また、プライマリリージョンに影響が生じた場合は、災害から保護するためにデータがセカンダリリージョンに非同期でレプリケートされます。達成可能な最小 RPO は、データレプリケーションの頻度によって異なります。この頻度は、プライマリリージョンとセカンダリリージョンの間で使用可能な帯域幅によって制限されます。一般的な最小 RPO は、 20 分から複数時間の範囲です。</block>
  <block id="08c05e932772c12e2978ada46a1f6fde" category="paragraph">このドキュメントでは、 2 リージョンのディザスタリカバリ解決策のさまざまな実装オプションについて説明します。</block>
  <block id="66ae478deb0faaf5c7e1c6c30e561515" category="section-title">SAP HANA システムレプリケーション</block>
  <block id="aeea0de8341a54a856110ddcce703647" category="paragraph">SAP HANA システムレプリケーションはデータベースレイヤで機能します。解決策は、プライマリシステムから変更を受信するディザスタリカバリサイトにある追加の SAP HANA システムに基づいています。このセカンダリシステムは、プライマリシステムと同じである必要があります。</block>
  <block id="ef484be15551dd90fef91c2c2e1282f1" category="paragraph">SAP HANA システムレプリケーションは、次のいずれかのモードで実行できます。</block>
  <block id="d6c8e17e761081d42a482d42d4f77766" category="list-text">データがメモリにプリロードされており、ディザスタリカバリサイトにある専用サーバにロードされている場合：</block>
  <block id="f5c7666e551b7dcd0fb7f6bf74abeccb" category="list-text">このサーバは、 SAP HANA システムレプリケーションセカンダリホストとしてのみ使用されます。</block>
  <block id="ffc1f03746fb6cf99cdec6f3abc213eb" category="list-text">データはすでにメモリにロードされており、フェイルオーバー時にデータベースを起動する必要がないため、 RTO 値は非常に低くなります。</block>
  <block id="a3ebd8ee4ae26bbbfa2ea01be47e0a0d" category="list-text">メモリおよび災害復旧サイトの共有サーバにデータがプリロードされていない場合：</block>
  <block id="477f056d84ccdedcc2b8da7c0fe2f21e" category="list-text">サーバは、 SAP HANA システムレプリケーションセカンダリシステムおよび開発 / テストシステムとして共有されます。</block>
  <block id="1f15430c22b1c4d0b83cbf3df1b2e9f4" category="list-text">RTO は、主にデータベースの起動とメモリへのデータのロードに必要な時間に左右されます。</block>
  <block id="0dbe2efb71acfabc184da717728493bc" category="inline-link">『 SAP HANA Administration Guide 』をご覧ください</block>
  <block id="24fc91edc6ddc9820730d1097931adb5" category="paragraph">すべての設定オプションとレプリケーションシナリオの概要の詳細については、を参照してください<block ref="9cdea1030de1a49498ea242aace833a6" category="inline-link-rx"></block>。</block>
  <block id="61fd3b86c424b68c3025dfa4d7435573" category="paragraph">次の図は、 SAP HANA システムレプリケーションを使用した 2 リージョンのディザスタリカバリ解決策のセットアップを示しています。メモリにプリロードされたデータを含む同期レプリケーションは、同じ Azure リージョン内のローカル HA には使用されますが、アベイラビリティゾーンによって異なります。リモートのディザスタリカバリリージョンには、データがプリロードされていない非同期レプリケーションが設定されています。</block>
  <block id="de6b408d617cacbaebc5613e7bae767a" category="paragraph">次の図は、 SAP HANA システムレプリケーションを示しています。</block>
  <block id="5ad9de507b94a9e35c82779c07b66112" category="section-title">SAP HANA システムレプリケーションとメモリにデータがプリロードされています</block>
  <block id="ad09da2a8b21e5c941bff9931f0257fc" category="paragraph">SAP HANA の RTO 値が非常に低い場合は、メモリにデータがプリロードされた SAP HANA System Replication でのみ達成できます。ディザスタリカバリサイトにある専用のセカンダリサーバを使用して SAP HANA システムレプリケーションを運用すると、 RTO の値が約 1 分以下になります。複製されたデータは、セカンダリシステムのメモリにロードされて受信されます。フェイルオーバーにかかる時間が短く、 SAP HANA システムレプリケーションは、 HANA ソフトウェアのアップグレードなど、ダウンタイムがほぼゼロに近いメンテナンス処理にも使用されることがよくあります。</block>
  <block id="2f8b151742608c981dfe2a7be31eb254" category="paragraph">通常、 SAP HANA システムレプリケーションは、データプリロードが選択されたときに同期的にレプリケートされるように設定されます。同期レプリケーションでサポートされる最大距離は 100km です。</block>
  <block id="3f9cb7e4fa20fef95aea32cdc69e8460" category="section-title">SAP システムレプリケーション：メモリにデータがプリロードされていません</block>
  <block id="694c53f0877cbba373135629373bd319" category="paragraph">RTO 要件が厳しくない場合は、データがプリロードされていなくても SAP HANA システムレプリケーションを使用できます。この運用モードでは、ディザスタリカバリ領域のデータはメモリにロードされません。DR リージョンのサーバは、必要なすべての SAP HANA プロセスを実行する SAP HANA システムレプリケーションの処理にも使用されます。ただし、サーバのメモリのほとんどは、 SAP HANA 開発 / テストシステムなどの他のサービスを実行するために使用できます。</block>
  <block id="2b44d8f81b2975c63242c95c59996df6" category="paragraph">障害が発生した場合は、開発 / テストシステムをシャットダウンし、フェイルオーバーを開始して、データをメモリにロードする必要があります。このコールドスタンバイアプローチの RTO は、データベースのサイズと、行ストアと列ストアの負荷時の読み取りスループットによって異なります。1000Mbps のスループットでデータが読み取られることを前提として、 1TB のデータをロードするには約 18 分かかります。</block>
  <block id="9bcfdabaf14710772f17b0493d653584" category="section-title">ANF クロスリージョンレプリケーションを使用した SAP HANA ディザスタリカバリ</block>
  <block id="b2c9700ba0816986783177a06a90716d" category="paragraph">ANF には、非同期データレプリケーションを使用したディザスタリカバリ解決策として ANF に組み込まれています。ANF クロスリージョンレプリケーションは、プライマリリージョンとセカンダリ Azure リージョンの 2 つの ANF ボリューム間でデータ保護関係を介して設定されます。ANF のクロスリージョンレプリケーションでは、ブロックの差分レプリケーションを効率的に使用してセカンダリボリュームが更新されます。更新スケジュールはレプリケーション設定時に定義できます。</block>
  <block id="35df9d5566869e97350fa1c3c40102d9" category="paragraph">次の図は、 ANF クロスリージョンレプリケーションを使用した 2 リージョンのディザスタリカバリ解決策の例を示しています。この例では、前の章で説明したように、 HANA システムはプライマリリージョン内で HANA システムレプリケーションによって保護されています。セカンダリリージョンへのレプリケーションは、 ANF のクロスリージョンレプリケーションを使用して実行されます。RPO は、レプリケーションスケジュールとレプリケーションオプションによって定義されます。</block>
  <block id="7e70869a8c06362cbdb278f6d317ceec" category="paragraph">RTO は、主に、ディザスタリカバリサイトで HANA データベースを起動してメモリにデータをロードするのに必要な時間に左右されます。データの読み取りスループットが 1000Mb/s の場合、 1TB のデータをロードするには約 18 分かかります。レプリケーション設定に応じて、フォワードリカバリが必要で、 RTO の合計値にも加算されます。</block>
  <block id="333d88bd70b0ad524022e4b15f89a870" category="inline-link-macro">SAP HANA を使用したリージョン間レプリケーションの構成オプション</block>
  <block id="47fee6f62b40967ce289036f382d6aa0" category="paragraph">通常の運用中は、ディザスタリカバリサイトのサーバを開発 / テストシステムとして使用できます。災害が発生した場合は、開発 / テスト用システムをシャットダウンし、 DR 本番用サーバとして起動する必要があります。</block>
  <block id="56f51c8398e16c6c97472e682d0549cd" category="paragraph">ANF クロスリージョンレプリケーションを使用すると、 RPO と RTO に影響を与えることなく DR ワークフローをテストできます。そのためには、ボリュームクローンを作成し、 DR テストサーバに接続します。</block>
  <block id="1300b1f384765a2d6f6642aa7d71b546" category="section-title">ディザスタリカバリソリューションの概要</block>
  <block id="c3cb469f59db6d8e60f13c8b3e5fad50" category="paragraph">次の表に、このセクションで説明したディザスタリカバリソリューションの比較を示し、最も重要な指標を示します。</block>
  <block id="f484ed4f391844d7fadc29244749f39c" category="paragraph">主な調査結果は次のとおりです。</block>
  <block id="6622cfdf1e725d8b4135a456e357be05" category="list-text">RTO が非常に低い場合は、プリロードが設定された SAP HANA システムレプリケーションが唯一のオプションです。</block>
  <block id="b116f45c5b2c42d1e8138d258d2f5fe8" category="list-text">DR サイトに専用のサーバが必要となります。これにより、レプリケートされたデータを受信してデータをメモリにロードできます。</block>
  <block id="2d8a377fde672fd724220780b842a83d" category="list-text">また、データベースの外部にあるデータ（共有ファイル、インターフェイスなど）にもストレージレプリケーションが必要です。</block>
  <block id="ecb2ed817ee95fa396911576436c27ba" category="list-text">RTO / RPO の要件が厳しい場合は、 ANF のクロスリージョンレプリケーションを使用して次のことを行うこともできます。</block>
  <block id="e8c0f0174ad6150d9635ee7aa99e4228" category="list-text">データベースと非データベースのデータレプリケーションを組み合わせます。</block>
  <block id="6266f60d19983a11b58c24924930b95e" category="list-text">ディザスタリカバリのテストや開発 / テストの更新など、その他のユースケースについて説明します。</block>
  <block id="68f3fced0a17e5de6db735bd1ca45890" category="list-text">ストレージレプリケーションを行うことで、 DR サイトのサーバを QA またはテストシステムとして通常運用時に使用できます。</block>
  <block id="f2d77916dea94337c3b46fd53e9685c7" category="list-text">RPO = 0 の HA 解決策として SAP HANA システムレプリケーションを組み合わせ、長距離のストレージレプリケーションを行う場合は、さまざまな要件に対応することが重要です。</block>
  <block id="0a636bae693e759b89cfb2c0eb9cc58d" category="paragraph">次の表に、ディザスタリカバリソリューションの比較を示します。</block>
  <block id="6b0f1320c0ca34e38fda2a62b7d85f42" category="cell">ストレージレプリケーション</block>
  <block id="061f2f8944130376248327444c4e04f3" category="cell">SAP HANA システムのレプリケーション</block>
  <block id="b34347ddf6e48f7eb5aee09d6f7b92a6" category="cell">* リージョン間レプリケーション *</block>
  <block id="a590feeee99c4eece8151edeebf0f29f" category="cell">* データプリロードあり *</block>
  <block id="7a6d071835a5d748a307424938d7828f" category="cell">* データプリロードなし *</block>
  <block id="81acff625024c4f103c5facbd0fd49ea" category="cell">RTO</block>
  <block id="765e065e77ae2adb36770b0a057e2e5b" category="cell">データベースの起動時間およびフォワードリカバリに応じて、低 ～ 中</block>
  <block id="23011c5407fa1798961babe5803602f3" category="cell">とても低いです</block>
  <block id="89d26991942cf55ebbc2208a4c545bf9" category="cell">データベースの起動時間に応じて、低から中に移動します</block>
  <block id="7617de228058c641a638d21a9e3fbd7c" category="cell">RPO</block>
  <block id="161da3361681a0410ce6d369a9f4e50c" category="cell">RPO &gt; 20 分の非同期レプリケーション</block>
  <block id="f13811b02fa6f16283beed9446f9fc82" category="cell">RPO &gt; 20 分の非同期レプリケーション RPO = 0 の同期レプリケーション</block>
  <block id="fcf1ef373c2215be6974c8f48b7e76e1" category="cell">DR サイトのサーバは、開発とテストに使用できます</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="cell">はい。</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="cell">いいえ</block>
  <block id="e9a0c7e28ba3eab1bc6af3c80e34b8a2" category="cell">データベース以外のデータのレプリケーション</block>
  <block id="31dbf042d36f2d2466e8c84d4eb1d5f2" category="cell">DR データは、開発 / テストシステムの更新に使用できます</block>
  <block id="978cc4a302a1b7555072ef943e882f05" category="cell">RTO と RPO に影響を与えずに DR テストを実施</block>
  <block id="4715bf8add38a289ec23829f68ca6ab1" category="summary">調査によると、ビジネスアプリケーションのダウンタイムは企業のビジネスに大きな悪影響を与えることがわかっています。</block>
  <block id="48d5e63e9107995e8ea0ce708339c7bd" category="doc">TR-4891 ：『 SAP HANA disaster recovery with Azure NetApp Files 』</block>
  <block id="ffca3d9db8dc584e54dd8dc3551eabb9" category="paragraph">SAP HANA on Azure NetApp Files （ ANF ）を実行すると、 SAP HANA に組み込まれているデータ保護機能やディザスタリカバリ機能を拡張、向上させる追加機能を利用できます。この概要セクションでは、お客様がビジネスニーズをサポートするオプションを選択できるように、これらのオプションについて説明します。</block>
  <block id="8a675f2a23ea4c44524efb908ae11cc8" category="paragraph">包括的なディザスタリカバリポリシーを作成するには、データ保護とディザスタリカバリに必要なビジネスアプリケーションの要件と技術的な機能を理解する必要があります。次の図に、データ保護の概要を示します。</block>
  <block id="0bfad55781cf801dfc13ccd9a530fc19" category="section-title">ビジネスアプリケーションの要件</block>
  <block id="0703f72eebc09724abffe00a84eccd17" category="paragraph">ビジネスアプリケーションの主要な指標として、次の 2 つがあります。</block>
  <block id="f5075c8d0b3fde0d177163438d4169b9" category="list-text">Recovery Point Objective （ RPO ；目標復旧時点）、またはデータ損失の許容量の上限</block>
  <block id="86c0854362b4108af9e516077a22dcc1" category="list-text">Recovery Time Objective （ RTO ；目標復旧時間）、またはビジネスアプリケーションの最大許容ダウンタイム</block>
  <block id="34a5165e4ff0cd4794a05c9d055ec269" category="paragraph">これらの要件は、使用するアプリケーションの種類とビジネスデータの性質によって定義されます。1 つの Azure リージョンで障害から保護する場合は、 RPO と RTO が異なることがあります。また、 Azure リージョン全体の損失など、災害による災害に備える場合にも同じように、災害によって異なることがあります。RPO と RTO は、利用可能な技術的オプションに大きく影響するため、これらの要件によって定義されるビジネス要件を評価することが重要です。</block>
  <block id="05807e454c19f244770adae059b3c330" category="section-title">高可用性</block>
  <block id="02894d06d27b56212ed6fbfccbf5b46d" category="paragraph">仮想マシン、ネットワーク、ストレージなど、 SAP HANA 用のインフラには、単一点障害がないように冗長コンポーネントが必要です。MS Azure は、さまざまなインフラコンポーネントに対して冗長性を提供します。</block>
  <block id="2056be3e7fe4aad29d8cf504dbe6cad9" category="paragraph">コンピューティング側とアプリケーション側で高可用性を実現するために、スタンバイの SAP HANA ホストは、 SAP HANA マルチホストシステムを使用して、組み込みの高可用性を実現するように構成できます。サーバまたは SAP HANA サービスに障害が発生すると、 SAP HANA サービスがスタンバイホストにフェイルオーバーするため、アプリケーションのダウンタイムが発生します。</block>
  <block id="4acc4b54b5bc31fe21ee19d247c247ba" category="paragraph">サーバやアプリケーションの障害時にアプリケーションのダウンタイムが許容されない場合は、 SAP HANA システムのレプリケーションをハイアベイラビリティ解決策として使用して、非常に短時間でフェイルオーバーを実現することもできます。SAP のお客様は、 HANA システムレプリケーションを使用して、計画外障害に対する高可用性を実現できるだけでなく、 HANA ソフトウェアのアップグレードなどの計画的運用のダウンタイムを最小限に抑えることができます。</block>
  <block id="4cf7b593d5e437dfa0b7b2a5ee3efa97" category="section-title">論理的破損</block>
  <block id="5d107f9aa3c669862cfdd15f14788e11" category="paragraph">論理的破損は、ソフトウェアエラー、人為的エラー、破壊行為などが原因で発生する可能性があります。残念ながら、論理的破損は、標準的な高可用性ソリューションやディザスタリカバリソリューションでは対処できないことがよくあります。そのため、論理的破損が発生したレイヤ、アプリケーション、ファイルシステム、またはストレージによっては、 RTO と RPO の要件が満たされないことがあります。</block>
  <block id="443448e75fe6177a59a73cd194626ddb" category="paragraph">最悪のケースは、 SAP アプリケーションが論理的に破損した場合です。SAP アプリケーションは多くの場合、異なるアプリケーションが相互に通信してデータを交換する環境で動作します。このため、論理的な破損が発生した SAP システムはリストアとリカバリを実行しないことを推奨します。システムを破損前の特定の時点にリストアするとデータが失われるため、 RPO はゼロより大きくなります。また、 SAP ランドスケープは同期されず、さらにポストプロセスが必要になります。</block>
  <block id="04262f34451f36f688f3d8e90f5e8c3c" category="paragraph">SAP システムをリストアする代わりに、別の修復システムで問題を分析して、システム内の論理エラーを修正する方法を推奨します。ルート原因分析には、ビジネスプロセスやアプリケーション所有者の関与が必要です。このシナリオでは、論理的破損が発生する前に格納されたデータに基づいて、修復システム（本番用システムのクローン）を作成します。リペアシステム内では、必要なデータをエクスポートし、本番システムにインポートできます。このアプローチでは、生産性の高いシステムを停止する必要はありません。また、最良のシナリオでは、データが失われたり、データの一部しか失われたりすることはありません。</block>
  <block id="59ccab7de24ca9bc19407633e26a3cf6" category="admonition">修復システムのセットアップに必要な手順は、このドキュメントで説明するディザスタリカバリのテストシナリオと同じです。そのため、説明したディザスタリカバリ解決策を拡張して、論理的な破損にも簡単に対処できます。</block>
  <block id="1414cdc093d39dd56d0b0d20049e17fc" category="section-title">バックアップ</block>
  <block id="0cfa2764bd4e71a51de20746e90e6611" category="paragraph">さまざまなポイントインタイムデータセットからリストアとリカバリを実行できるようにバックアップが作成されている。通常、これらのバックアップは数日から数週間保持されます。</block>
  <block id="df76538ee7be2473592123c0402f7491" category="paragraph">破損の種類に応じて、データを損失するかどうかに関係なく、リストアとリカバリを実行できます。RPO をゼロにする必要がある場合は、プライマリストレージとバックアップストレージが失われた場合でも、バックアップを同期データレプリケーションと組み合わせる必要があります。</block>
  <block id="742cd7a760d5086ea1510d8d642c6ba0" category="paragraph">リストアとリカバリの RTO は、必要なリストア時間、リカバリ時間（データベースの起動を含む）、およびデータをメモリにロードすることによって定義されます。大規模なデータベースや従来のバックアップ方法では、 RTO が数時間に及ぶことがありますが、これは許容されない場合があります。RTO を大幅に短縮するには、バックアップを、データをメモリにプリロードすることを含むホットスタンバイ解決策と組み合わせる必要があります。</block>
  <block id="9fa6087af3062ad3648dc5977dfb040b" category="paragraph">一方、バックアップ解決策は、データレプリケーションソリューションがあらゆる種類の論理的破損に対応できないため、論理的破損に対処する必要があります。</block>
  <block id="5e9d83ea8e8a00e0f5cb9f9049b4ee80" category="section-title">同期または非同期のデータレプリケーション</block>
  <block id="549dd6ad7c9bb8e1ffa4e26090ad44b9" category="paragraph">RPO は、主に、使用するデータレプリケーション方法を決定します。RPO をゼロにする必要がある場合は、プライマリストレージとバックアップストレージが失われた場合でも、データを同期的にレプリケートする必要があります。ただし、同期レプリケーションについては、 2 つの Azure リージョン間の距離などの技術的な制限があります。ほとんどの場合、同期レプリケーションは 100km を超えるレイテンシから受ける距離には適していないため、 Azure リージョン間でのデータレプリケーションには対応できません。</block>
  <block id="5515876e48f77fbadc732d2d0b61fb6e" category="paragraph">RPO を大きくすることが許容される場合は、長距離間で非同期レプリケーションを使用できます。この場合の RPO は、レプリケーションの頻度によって定義されます。</block>
  <block id="50a4caaa98ec68a105f1a2f046046b49" category="section-title">HANA システムのレプリケーションでデータプリロードを設定するかどうか</block>
  <block id="19fe37735fc2d812bd3ae9b350c9042b" category="paragraph">SAP HANA データベースの起動時間は、従来のデータベースよりもはるかに長くなります。これは、データベースが期待されるパフォーマンスを提供するためには、大量のデータをメモリにロードする必要があるためです。そのため、 RTO の大部分はデータベースの起動に必要な時間です。ストレージベースのレプリケーションに加えて、 HANA システムレプリケーションを事前ロードなしで実行する場合、ディザスタリカバリサイトにフェイルオーバーするためには、 SAP HANA データベースを起動する必要があります。</block>
  <block id="e2fc131564c468ee9b36f0286ca4ca75" category="paragraph">SAP HANA システムレプリケーションでは、データがプリロードされ、セカンダリホストで継続的に更新される動作モードが提供されます。このモードでは、 RTO の値が非常に低くなりますが、ソースシステムからのレプリケーションデータの受信にのみ使用される専用のサーバが必要になります。</block>
  <block id="4854d6f0814f33fab723d723df86a202" category="summary">以下は、 HANA データベースのリカバリ手順を示しています</block>
  <block id="7bda2d80ff35cc44a2e131e0160f8093" category="paragraph">以降のサブセクションでは、複製されたログ・バックアップを使用した、フォワード・リカバリを行う場合としない場合のリカバリ・プロセスについて説明しますリカバリは、システムデータベース用の HANA リカバリスクリプトおよびテナントデータベース用の hdbsql コマンドを使用して実行されます。</block>
  <block id="59c7c30c56560af87e5171c311185571" category="section-title">最新の HANA データボリュームバックアップセーブポイントへのリカバリ</block>
  <block id="99deca0459bb05c2895cfaffbd802eef" category="paragraph">最新のバックアップセーブポイントへのリカバリは ' ユーザー pr1adm として次のコマンドを使用して実行されます</block>
  <block id="0795408f76a4c59ab10d4b68b30e2b26" category="paragraph">これで、 hdbsql を使用してテナントのリカバリが実行されました。</block>
  <block id="fbff45b2905a411c1ec2710a73ba047f" category="paragraph">HANA データベースが起動して実行されるようになり、 HANA データベースのディザスタリカバリワークフローがテストされました。</block>
  <block id="180f6a3cc920cbfac7b9138f31af3be1" category="section-title">ログ / カタログバックアップを使用したフォワードリカバリでのリカバリ</block>
  <block id="46fdca8f1816e8f0fba1ae53b20a312a" category="paragraph">ログバックアップと HANA のバックアップカタログがソースシステムからレプリケートされている。</block>
  <block id="7713e703c3de9d49c8be8c5a144941ec" category="admonition">使用可能なすべてのログを使用してリカバリするには、リカバリステートメントのタイムスタンプとして将来の任意の時点を使用します。</block>
  <block id="9aa362cc10f78dc9c324638e14784e6d" category="paragraph">システムとテナントデータベースの最新のログバックアップファイルに対してチェックを実行する必要があります。</block>
  <block id="89c00df8ab7faebd2081b13849c02f6d" category="summary">これで ' 以前に作成した /etc/fstab ファイルに基づいて ' ボリュームをターゲット・ホストにマウントできるようになります</block>
  <block id="13b6058df71d238dde34faeb0f23ca53" category="doc">ターゲットホストにボリュームをマウントします</block>
  <block id="8781b56e6525bf79ec3510bf11e251db" category="doc">ディザスタリカバリのテスト</block>
  <block id="87dee89423a5f714e7dec138750cc5e4" category="summary">ディザスタリカバリの設定によっては（ログバックアップレプリケーションを使用するかどうかに関係なく）、 Snapshot バックアップに基づいて 2 つまたは 3 つの新しいボリュームを作成する必要があります。</block>
  <block id="3599970764d2d96426abf88cbe76d48f" category="doc">ディザスタリカバリサイトでの Snapshot バックアップに基づいて新しいボリュームを作成します</block>
  <block id="6d1f3c07ad25da0bbbcd07ddc688135f" category="list-text">アプリケーションと整合性のある Snapshot バックアップの 1 つが、 HANA データボリュームの新しいボリュームのソースとして選択されています。新規ボリュームへのリストアは、 Snapshot バックアップに基づいて新しいボリュームを作成する場合に選択されます。</block>
  <block id="479340e25e53263cccbe4d400974554e" category="list-text">新しいボリューム名とクォータをユーザインターフェイスに指定する必要があります。</block>
  <block id="60949ae1e8e73bbec42287a8cd6f8ed0" category="list-text">プロトコルタブでは、ファイルパスとエクスポートポリシーが設定されます。</block>
  <block id="8759ff9c6ca36d554091c45e68dc83bd" category="list-text">Create and Review （作成およびレビュー）画面に構成の概要が表示されます。</block>
  <block id="55114f27f28823ee3356c20ed9fef0ef" category="list-text">これで、 HANA の Snapshot バックアップに基づいて新しいボリュームが作成されました。</block>
  <block id="fa6abbf0782170b61d3fdc6372a0efe0" category="paragraph">次の 2 つのスクリーンショットに示すように、 HANA 共有ボリュームとログバックアップボリュームで同じ手順を実行する必要があります。HANA の共有バックアップボリュームとログバックアップボリュームには Snapshot が追加で作成されていないため、新しいボリュームのソースとして最新の SnapMirror Snapshot コピーを選択する必要があります。これは非構造化データであり、 SnapMirror Snapshot コピーを使用してこのユースケースに対応できます。</block>
  <block id="b1c029a960afc679b7835cedb8343cc0" category="paragraph">次のスクリーンショットは、新しいボリュームにリストアされた HANA 共有ボリュームを示しています。</block>
  <block id="620ba589298c0daf613aef8a49ec1187" category="admonition">高パフォーマンス階層が低い大容量プールを使用している場合は、必要なパフォーマンスを提供する容量プールにボリュームを移動する必要があります。</block>
  <block id="2fd2064e7ce5a3879663f0a4fe612413" category="paragraph">これで 3 つの新しいボリュームがすべて使用できるようになり、ターゲットホストにマウントできるようになります。</block>
  <block id="483be6f3dd37511b4c6b3e752d378767" category="summary">災害発生時にフェイルオーバーする場合は、ターゲットホストがボリュームをマウントして読み取りおよび書き込み処理を実行できるように、ターゲットボリュームを切断する必要があります。</block>
  <block id="5facbc8db35e3716949290f0b40e7de4" category="doc">レプリケーションピアリングを解除して削除します</block>
  <block id="9266018f113912af184108e98c050efd" category="admonition">HANA データボリュームの場合は、 AzAcSnap で作成された最新の HANA Snapshot バックアップにボリュームをリストアする必要があります。レプリケーションピアリングが原因で最新のレプリケーション Snapshot がビジーとしてマークされている場合、このボリュームリバート処理は実行できません。そのため、レプリケーションピアリングも削除する必要があります。</block>
  <block id="cb41ee3647c83dda0f32ae3d0c0bbdeb" category="paragraph">次の 2 つのスクリーンショットは、 HANA データボリュームのピアリング操作の解除と削除を示しています。ログバックアップと HANA 共有ボリュームについても、同じ処理を実行する必要があります。</block>
  <block id="46b67b68e6f57344571ed5e6deb96640" category="paragraph">レプリケーションピアリングが削除されたため、ボリュームを最新の HANA Snapshot バックアップにリバートできます。ピアリングが削除されない場合、リバートボリュームの選択はグレー表示になり、選択できなくなります。次に示す 2 つのスクリーンショットは、ボリュームのリバート処理を示しています。</block>
  <block id="44bc131dcbc031dad5c60665d0e777cb" category="paragraph">ボリュームのリバート処理後、データボリュームは整合性のある HANA Snapshot バックアップに基づいており、フォワードリカバリ処理を実行するために使用できるようになりました。</block>
  <block id="26a7c251db745e0e6e323b2d2a1f06f7" category="admonition">高パフォーマンス階層が低い大容量プールを使用している場合は、必要なパフォーマンスを提供できる容量プールにボリュームを移動する必要があります。</block>
  <block id="611474da8104a1c517f6d3e00b794bad" category="summary">ここでは、ディザスタリカバリフェイルオーバーに使用するサーバで必要な準備手順について説明します。</block>
  <block id="fd0f9a84ad1162accae744eb4e8720bc" category="paragraph">通常運用時は、 HANA の QA やテスト用システムなど、通常はターゲットホストがその他の目的に使用されます。そのため、災害時のフェイルオーバーテストを実行する際には、ほとんどの手順を実行する必要があります。一方、関連する構成ファイルは、「 /etc/fstab 」や「 /usr/sap/sapservices 」のように準備し、構成ファイルをコピーするだけで運用に移すことができます。ディザスタリカバリフェイルオーバー手順は、準備された関連する構成ファイルが確実に正しく設定されるようにします。</block>
  <block id="68414e630c2410427f8528f7531641e3" category="paragraph">ターゲット・ホストの準備には、 HANA の QA またはテスト・システムのシャットダウン、および「 systemctl stop sapinit 」を使用したすべてのサービスの停止も含まれます。</block>
  <block id="8660a2116ae3634df0fd5dc665458840" category="paragraph">SAP ホストエージェントソフトウェアをターゲットサーバにインストールする必要があります。詳細については、を参照してください<block ref="dfb99acb3a5bfb8e56c9630a62e67a77" category="inline-link-rx"></block> SAP ヘルプポータルで、次の作業を行います。</block>
  <block id="42b048440c50c198439a3f5cf6b2f8fc" category="paragraph">ディザスタリカバリの設定でログバックアップボリュームのレプリケーションを行う場合、複製されたログバックアップボリュームはターゲットホストにマウントされるため、追加のログバックアップボリュームを準備する必要はありません。</block>
  <block id="cb03fc2ba6f5264a1d18ec731940b865" category="paragraph">次の表に、このラボ環境で使用する命名規則を示します。災害復旧サイトのボリューム名は '/etc/fstab に含まれています</block>
  <block id="3371b95f5c42f5eee8e2e58a6f48fa14" category="cell">ディザスタリカバリサイトにあるボリュームとサブディレクトリ</block>
  <block id="1dc43cfb2d7ee9173ee71963196e6560" category="cell">pr1 -shared-sm-dest/shared pr1 -shared-sm-dest/usr -sap-pr1</block>
  <block id="b22da6ced8752b012e3da78c79177c72" category="admonition">このテーブルのマウントポイントは、ターゲットホストに作成する必要があります。</block>
  <block id="d6592b2b5e0e3f570578edc3ab023e7a" category="summary">ログバックアップレプリケーションがディザスタリカバリの設定の一部かどうかによって、ディザスタリカバリの手順は少し異なります。</block>
  <block id="baaf26c3cc1634b64f550cbbc10d58ed" category="doc">ディザスタリカバリフェイルオーバー</block>
  <block id="e8bee4c9f7418a9fa7423012c3115980" category="paragraph">ログバックアップレプリケーションがディザスタリカバリの設定の一部かどうかによって、ディザスタリカバリの手順は少し異なります。ここでは、データバックアップのみのレプリケーション、およびログバックアップボリュームのレプリケーションと組み合わせたデータボリュームのレプリケーションのためのディザスタリカバリフェイルオーバーについて説明します。</block>
  <block id="1db54f8e2a972ae70747d37496118790" category="paragraph">ディザスタリカバリフェイルオーバーを実行するには、次の手順を実行します。</block>
  <block id="1f61cc07babe71682a84ca95fe1c7d13" category="list-text">レプリケーション関係を解除して削除します。</block>
  <block id="c14c2fe0d30d26aa71b42b15a55b4ac8" category="list-text">データボリュームを、アプリケーションと整合性のある最新の Snapshot バックアップにリストアします。</block>
  <block id="4eee8932f478fb4d431ea7945a48e97a" category="list-text">ターゲットホストにボリュームをマウントします。</block>
  <block id="7f40610e983d6f727ad40881c5a306b8" category="paragraph">以降のサブセクションで、これらの手順について詳しく説明します。次の図は、ディザスタフェイルオーバーのテストを示しています。</block>
  <block id="89b5eb16af03c7090de707cc37ac1f09" category="summary">次の図は、 ANF クロスリージョンレプリケーションを使用した SAP HANA システムのボリュームレプリケーション関係を示しています。</block>
  <block id="7d224183d244c3eb1b578f3d5d711cfb" category="doc">SAP HANA によるクロスリージョンレプリケーションの設定オプション</block>
  <block id="3743669162e4cca4ba5fb8da0d3aa70a" category="paragraph">次の図は、 ANF クロスリージョンレプリケーションを使用した SAP HANA システムのボリュームレプリケーション関係を示しています。ANF クロスリージョンレプリケーションでは、 HANA データと HANA 共有ボリュームがレプリケートされている必要があります。HANA データボリュームのみがレプリケートされている場合、通常の RPO 値は 1 日の範囲になります。RPO の値を低くする必要がある場合は、 HANA のログバックアップもフォワードリカバリのためにレプリケートする必要があります。</block>
  <block id="a5fce1269f63c611b20450b2bb542581" category="admonition">このドキュメントで使用されている「ログバックアップ」という用語には、ログバックアップと HANA バックアップカタログバックアップが含まれています。フォワードリカバリ処理を実行するには、 HANA のバックアップカタログが必要です。</block>
  <block id="114e1274446139d76dc9144e2b14ccc1" category="admonition">以下の概要とラボ環境は、 HANA データベースを対象としています。SAP 転送ディレクトリなどのその他の共有ファイルは、 HANA 共有ボリュームと同じように保護およびレプリケートされます。</block>
  <block id="edeecb7503e77b90ed51e96e450bce5f" category="inline-link">Azure NetApp Files | Microsoft Docs 用の Azure Application Consistent Snapshot ツールとは何ですか</block>
  <block id="3a325ee10c0e0cbba17bbb780ab5ee2c" category="paragraph">ログバックアップを使用して HANA のセーブポイントリカバリまたはフォワードリカバリを有効にするには、アプリケーションと整合性のあるデータ Snapshot バックアップを、 HANA データボリュームのプライマリサイトに作成する必要があります。これは、 ANF バックアップツール AzAcSnap を使用した場合などに実行できます（も参照）<block ref="ad4a6e6049ad4c7fd5609e852333bc9f" category="inline-link-rx"></block>）。プライマリサイトで作成された Snapshot バックアップが、 DR サイトにレプリケートされます。</block>
  <block id="713aae56a240e325bb34a0d833729e8f" category="paragraph">次の図は、複数リージョンレプリケーション用の HANA 構成オプションを示しています。</block>
  <block id="600ce73f728ef876696aea07da944d48" category="paragraph">現在のバージョンのクロスリージョンレプリケーションでは、固定のスケジュールのみを選択でき、実際のレプリケーション更新時間はユーザが定義することはできません。スケジュールは、毎日、毎時、および 10 分ごとに設定できます。これらのスケジュールオプションを使用すると、 RPO の要件に応じて、毎時または 10 分ごとの異なるスケジュールでのデータボリュームのレプリケーションとログバックアップのレプリケーションの 2 種類の設定が有効になります。達成可能な最小の RPO は約 20 分です。次の表に、設定オプションと、結果として得られる RPO と RTO の値を示します。</block>
  <block id="fcd256654a3c5292023efa55d739bc80" category="cell">データボリュームのレプリケーション</block>
  <block id="1a77af3d4771bcb235680750736a7963" category="cell">データとログのバックアップ・ボリューム・リストア</block>
  <block id="ecd2e667aef672cef20ccf5d1999bae6" category="cell">CRR スケジュールのデータ・ボリューム</block>
  <block id="766c1532a762dac9ff24af748740e26b" category="cell">CRR のスケジュールログバックアップボリューム</block>
  <block id="7dd6a6ab32fdea4f29883abb60388da7" category="cell">10 分</block>
  <block id="2b1f07f9d71545257dcca60137caef28" category="cell">最大 RPO</block>
  <block id="ca17d9638aadac1ac94c382ca423aa5f" category="cell">+24 時間 + Snapshot スケジュール（ 6 時間など） +</block>
  <block id="72ab9d0304d3e84c6aa2dd15eda282f2" category="cell">1 時間</block>
  <block id="5bc5ed69f9c54b9d85a1cce3e6d1e921" category="cell">2 x 10 分</block>
  <block id="55786705935c6a97b4d23698d008516f" category="cell">最大 RTO</block>
  <block id="d7d2ff11a56a872692dbbb3d19ff76cd" category="cell">主に HANA の起動時間によって定義されます</block>
  <block id="c13edbe874bb6cf35b0de53cd31a1b74" category="cell">+ HANA の起動時間 + リカバリ時間 +</block>
  <block id="842dc6b7f9e3a2c7e84f044e11faeed2" category="cell">フォワードリカバリ</block>
  <block id="d4cd0dabcf4caa22ad92fab40844c786" category="cell">該当なし</block>
  <block id="49daf1624ce66f46e9b73f92beaa8bdd" category="cell">+ 過去 24 時間のログ + Snapshot スケジュール（ 6 時間など） +</block>
  <block id="4486fa7cd414376cc3abe9834a582117" category="summary">Microsoft Azure では、作成時や割り当て解除された VM の起動時に、特定の仮想マシン（ VM ）タイプの可用性が保証されません。</block>
  <block id="9671268467391e7f925a038c0f83e411" category="doc">要件およびベストプラクティス</block>
  <block id="0041be80697e591a22095c3fa9c2bad7" category="paragraph">Microsoft Azure では、作成時や割り当て解除された VM の起動時に、特定の仮想マシン（ VM ）タイプの可用性が保証されません。具体的には、リージョンで障害が発生した場合、多くのクライアントでディザスタリカバリリージョンに追加の VM が必要になることがあります。そのため、ディザスタリカバリ領域でテストシステムまたは QA システムとして、必要なサイズの VM を、必要な VM タイプを割り当ててアクティブに使用することを推奨します。</block>
  <block id="7e0f2788f79e7e6dac3c7a1763ea03ce" category="paragraph">コストを最適化するには、通常運用時にパフォーマンス階層を下げた ANF 容量プールを使用することを推奨します。データレプリケーションには高パフォーマンスは必要ないため、標準のパフォーマンス階層では大容量プールを使用する可能性があります。ディザスタリカバリのテストやディザスタフェイルオーバーが必要な場合は、高パフォーマンス階層を使用する大容量プールにボリュームを移動する必要があります。</block>
  <block id="d94877e8e507baf3981ecd776b02880f" category="paragraph">2 つ目の容量プールがオプションでない場合は、通常運用時のパフォーマンス要件ではなく、容量要件に基づいてレプリケーションターゲットボリュームを設定する必要があります。クォータまたはスループット（手動 QoS の場合）は、ディザスタリカバリのテスト用にディザスタフェイルオーバーの際に適用できます。</block>
  <block id="4884cf9b8aa0c3a663b5ef3d5ca2e108" category="inline-link">Azure NetApp Files ボリュームのリージョン間レプリケーションを使用する場合の要件と考慮事項 | Microsoft Docs</block>
  <block id="d51d9722e039d6d29e55b83f4505f1e2" category="paragraph">詳細については、を参照してください<block ref="2b5439903546a140450c472c2abf9f4b" category="inline-link-rx"></block>。</block>
  <block id="55d9365909b3a315103ca1908bd396c7" category="summary">次に示す 3 つのスクリーンショットは、データ、ログバックアップ、および共有ボリュームのレプリケーションステータスを示しています。</block>
  <block id="7cc288aea34413093faffad51bc084c1" category="doc">ANF のクロスリージョンレプリケーションを監視しています</block>
  <block id="134c4bbaf0ae858e55b84b72f15d414a" category="paragraph">ボリュームレプリケーションの遅延時間は、 RPO の期待値を把握するのに役立ちます。たとえば、ログバックアップボリュームのレプリケーションで最大遅延時間が 58 分と表示されています。つまり、 RPO の最大値は同じです。</block>
  <block id="ba11fe397b6f7c72532ba24515066c28" category="paragraph">転送時間と転送サイズによって、必要な帯域幅とレプリケートされたボリュームの速度に関する有用な情報が提供されます。</block>
  <block id="b7ecf615e3ff0c312f16190ab1ee41c8" category="paragraph">次のスクリーンショットは、 HANA データボリュームのレプリケーションステータスを示しています。</block>
  <block id="22846a31a2d2e3242432376dc19b200a" category="paragraph">次のスクリーンショットは、 HANA のログバックアップボリュームのレプリケーションステータスを示しています。</block>
  <block id="6d58b85d280817df770609a622725eb4" category="paragraph">次のスクリーンショットは、 HANA 共有ボリュームのレプリケーションステータスを示しています。</block>
  <block id="5bb8b8dab26f014e5b3079efa0dd3754" category="section-title">レプリケートされた Snapshot バックアップ</block>
  <block id="cfb95d4ab5955fc882056df6c5353ec9" category="paragraph">ソースボリュームからターゲットボリュームへのレプリケーションの更新が行われるたびに、前回と現在の更新の間に行われたすべてのブロックの変更がターゲットボリュームにレプリケートされます。これには、ソースボリュームで作成された Snapshot も含まれます。次のスクリーンショットは、ターゲットボリュームで使用可能な Snapshot を示しています。すでに説明したように、 AzAcSnap ツールによって作成される各スナップショットは、アプリケーションと整合性のある HANA データベースのイメージであり、セーブポイントまたはフォワードリカバリのいずれかを実行するために使用できます。</block>
  <block id="e8f1ac642d75f5f86a7154d6dd39a32e" category="admonition">ソースボリュームとターゲットボリュームに SnapMirror Snapshot コピーが作成され、再同期処理とレプリケーション更新処理にも使用されます。これらの Snapshot コピーは、 HANA データベースの観点からはアプリケーションと整合性がありません。 HANA のリカバリ処理には、 AzaCSsnap で作成されたアプリケーションと整合性のある Snapshot のみを使用できます。</block>
  <block id="39827364402eb7a6398af8c1194aa72d" category="doc">データ保護の概要</block>
  <block id="677f2e7e550075f7bbbdac91e0918f2f" category="sidebar">SAP ソリューション</block>
  <block id="fcf140abed196b8eba71c45f21312bce" category="sidebar">ネットアップのソリューション</block>
  <block id="cd47dd01745339787e4c7300389401f2" category="sidebar">ベストプラクティス</block>
  <block id="88aa48beec8729be73be99084cd76b79" category="sidebar">『 SAP HANA on NetApp AFF Systems with FCP Configuration Guide 』</block>
  <block id="a1893b920bc48a028abc56e282719481" category="sidebar">『 SAP HANA on NetApp AFF Systems with NFS Configuration Guide 』</block>
  <block id="566e71293623024943bf4c66fa54d2c8" category="sidebar">『 SAP HANA on NetApp FAS Systems with NFS Configuration Guide 』</block>
  <block id="c8ff9dc5c718603eec8564e06ee7b058" category="sidebar">『 SAP HANA on FAS Systems with FCP Configuration Guide 』を参照してください</block>
  <block id="d5d6ed7727f0e542e6846a58af1d02ba" category="sidebar">SAP HANA Lifecycle Management の略</block>
  <block id="68cc439f4e585883d2aaa26a4e3bcef2" category="sidebar">SAP HANA ディザスタリカバリ</block>
  <block id="fa532045e834ec2fac1200964a189516" category="sidebar">ライフサイクル管理</block>
  <block id="992418be64e705531aba529adefec66f" category="sidebar">バックアップ、リストア、ディザスタリカバリ</block>
  <block id="972d8dadb82724623a226062c52b514d" category="sidebar">Azure NetApp Files を使用した SAP HANA ディザスタリカバリ</block>
  <block id="6c45d41e933130a1d4e3729dad7439f3" category="sidebar">ディザスタリカバリテストの概要</block>
  <block id="6db8771af1e20f8b4493135fb9b2465f" category="sidebar">ディザスタリカバリフェイルオーバーの概要</block>
  <block id="f41a551d63cd5cff04cf3c09ee2c3dea" category="sidebar">SnapCenter を使用した SAP HANA のバックアップとリカバリ</block>
  <block id="dd0dec62b557e33c38d24dc3cbaed4bc" category="sidebar">SAP HANA Disaster Recovery with Storage Replication 』を参照してください</block>
  <block id="0f1df2d5d1f6e9db4283f9e9814fa12a" category="sidebar">ネットアップストレージと Commvault を使用した SAP HANA のバックアップとリカバリ ソフトウェア</block>
  <block id="611a4a6b98272a717f8e1f6bf5ba787b" category="paragraph">Marco Schoen 、ネットアップ</block>
  <block id="bb8cd3f7aec777de29cee988f4ade068" category="paragraph">ネットアップ Nils Bauer</block>
  <block id="1b957531101399d0f744aec724e69fa1" category="summary">ネットアップは、 SAP Landscape Management （ SAP LaMa ）など、 SAP 管理者が日々の運用で使用するツールに完全に統合されたライフサイクル管理解決策を提供することで、機能の実装が遅いという課題や、自動化の欠如、生産性の低下に対処しています。プリプロセスからポストプロセスまで、プロビジョニングのワークフローを簡易化することを目的としています。本番用システムのコピーを作成するために必要なソフトウェアレイヤとストレージレイヤのタスクもすべて含みます。この解決策を使用すると、管理者はマウスを数回クリックするだけで開発およびテスト環境を作成できるため、ライフサイクル管理が向上します。</block>
  <block id="643fa590028dacc026f165afdf4fb795" category="doc">SB-3978 ：『 Lifecycle Management for SAP HANA 』</block>
  <block id="2302484597c5b4089c4a24a850b7f489" category="inline-link-macro"><block ref="2302484597c5b4089c4a24a850b7f489" category="inline-link-rx"></block></block>
  <block id="33876e03541db5898b573e9322b655e7" category="paragraph"><block ref="33876e03541db5898b573e9322b655e7" category="inline-link-macro-rx"></block></block>
  <block id="7b84e8d1abd1ca9b58ab3e77d620c832" category="summary">TR-4711 は、 Commvault IntelliSnap Snapshot 管理テクノロジとネットアップの Snapshot テクノロジを含む、ネットアップと Commvault 解決策 for SAP HANA の設計をまとめたものです。解決策は、ネットアップストレージと Commvault データ保護スイートを基盤としています。</block>
  <block id="8fb21969b8486293a6e9aad64bfdce52" category="doc">TR-4711 ：『 SAP HANA Backup and Recovery Using NetApp Storage Systems and Commvault Software 』</block>
  <block id="6b6da8403e50e999c81fff1b93ddd075" category="inline-link-macro"><block ref="6b6da8403e50e999c81fff1b93ddd075" category="inline-link-rx"></block></block>
  <block id="974fc1d6f48a5236cf23f9d95df8992c" category="paragraph"><block ref="974fc1d6f48a5236cf23f9d95df8992c" category="inline-link-macro-rx"></block></block>
  <block id="47f5c5f7b80224cb7832ed3973296f38" category="doc">TR-4614 ：『 SAP HANA Backup and Recovery with SnapCenter 』</block>
  <block id="8132c1d54d27cf7a67ac0e563e82c329" category="summary">TR-4646 では、 SAP HANA 向けのディザスタリカバリ保護オプションの概要を説明しています。詳細なセットアップ情報、および同期および非同期の NetApp SnapMirror ストレージレプリケーションをベースとした 3 サイトディザスタリカバリ解決策のユースケース概要が含まれます。説明されている解決策では、データベースの整合性を管理するために、 NetApp SnapCenter と SAP HANA プラグインを使用します。</block>
  <block id="c79cdf002876c8be8a196f93f344a33f" category="inline-link-macro"><block ref="c79cdf002876c8be8a196f93f344a33f" category="inline-link-rx"></block></block>
  <block id="d925ae253e076ec94fce589bf0750a31" category="paragraph"><block ref="d925ae253e076ec94fce589bf0750a31" category="inline-link-macro-rx"></block></block>
  <block id="e12451ca8917b29faae9e966a7ef40f6" category="summary">TR-4719 は、 SAP HANA システムレプリケーション環境で、 NetApp SnapCenter テクノロジと SAP HANA プラグインを使用したバックアップとリカバリの方法を説明しています。</block>
  <block id="ef5cc7c8780ee87a124c0fd66dd44867" category="doc">TR-4719 ：『 SAP HANA System Replication - Backup and Recovery with SnapCenter 』</block>
  <block id="1a7acb5247a596ecf14f6381a5824bd7" category="inline-link-macro"><block ref="1a7acb5247a596ecf14f6381a5824bd7" category="inline-link-rx"></block></block>
  <block id="d5dfc6464276a185ca9edd33cbc78835" category="paragraph"><block ref="d5dfc6464276a185ca9edd33cbc78835" category="inline-link-macro-rx"></block></block>
  <block id="9feb66d55a80dea870deeb88fab704c9" category="sidebar">SAP HANA のバックアップとリカバリ</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">著作権に関する声明、商標、特許などにアクセスできます。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法的通知</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">著作権</block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商標</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp のロゴ、および NetApp の商標ページに記載されているマークは、 NetApp, Inc. の商標です。その他の会社名および製品名は、それぞれの所有者の商標である場合があります。</block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">特許</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">ネットアップが所有する特許の最新リストは、次のサイトで入手できます。</block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">プライバシーポリシー</block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">オープンソース</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">通知ファイルには、ネットアップソフトウェアで使用されるサードパーティの著作権およびライセンスに関する情報が記載されています。</block>
  <block id="bca5b2fa001874580bf261991fd79806" category="cell">ONTAP 9.8 以降で NFSv4.1 の nconnect がサポートされるようになりました。新しいバージョンの SAP HANA がリリースされました</block>
  <block id="896435116179bed2dde76b00414b4fa5" category="cell">ネットアップストレージシステムが新しく追加されると、ホストネットワークの設定が変更されます。軽微な変更が</block>
  <block id="7e0efdf8314ae57608296d0f91d73af0" category="list-text">シングル・ホスト・システムの場合は '/hana/shared-volume をマウントし 'hared' サブディレクトリと usr-sap サブディレクトリを作成します</block>
  <block id="80bf104cdee8b8f9c92f9e4ff0972dab" category="inline-link-macro">「データ保護戦略」</block>
  <block id="c578586071a895e1a24fdb22dd828e77" category="paragraph">一般的な最小構成は、次のポリシーで構成されます。</block>
  <block id="1a738a5297df57433f24d32effcccf4f" category="section-title">1 時間ごとの Snapshot バックアップのポリシー</block>
  <block id="b2264bb8d2d665cb70a23e37bcd51220" category="paragraph">次の図に、設定されているポリシーの概要を示します。</block>
  <block id="f6a738f75f76f62a241636eca02cd87d" category="doc">バージョン履歴</block>
  <block id="8002bc13927c65b5f265b031079ce1d4" category="cell">ドキュメントのバージョン履歴</block>
  <block id="ea9349a37bfee247df0f87cbcacca796" category="cell">初版リリース</block>
  <block id="7d5b957cd473f6eaf5ad335a9c63c4ff" category="paragraph">このドキュメントに記載されている情報の詳細については、以下のドキュメントや Web サイトを参照してください。</block>
  <block id="f97a9615a6fd001bdf5fbaad3e762adc" category="section-title">データ保護戦略</block>
  <block id="b02aece9e47a65d17a12859d410988d1" category="paragraph">一般的なアプローチとしては、本番システム、開発システム、テストシステム、サンドボックスシステムなどのシステムタイプを定義します。通常、システムタイプが同じ SAP システムのデータ保護パラメータはすべて同じです。</block>
  <block id="3225a10b07f1580f10dee4abc3779e6c" category="cell">パラメータ</block>
  <block id="04184473c3677aaa3fdc23c8adf9ab11" category="cell">本番用システム</block>
  <block id="6598f2cf94bde191c18961b9844ea3b8" category="cell">開発システム</block>
  <block id="58973466166271c2e12475c970facc8b" category="cell">システムをテストする</block>
  <block id="c913695f49476696caed8e3ec2a9fbbc" category="cell">4 時間ごと</block>
  <block id="ccd21fd3ff614e4ea81e358d4b9dad4f" category="cell">6 時間ごと</block>
  <block id="45fe0d3293152fa29cf10ef8a3c1871d" category="cell">3 日</block>
  <block id="27b749b17e9dce038e22b1cb63840cfd" category="cell">週に 1 回</block>
  <block id="a3c82f66d39159c3e9d428cd534beb34" category="cell">バックアップタイプ</block>
  <block id="bfe4cb821fcce8a234fb6991bc72e925" category="cell">カウント = 12</block>
  <block id="4338f6486dc5d5a5832b758c3d22518e" category="cell">カウント = 3</block>
  <block id="5cd0336074a40ef0493567cff8dc3eb0" category="cell">ファイルベース</block>
  <block id="6c25e6a6da95b3d583c6ec4c3f82ed4d" category="cell">毎週</block>
  <block id="eaf6efa0c22d2f77a7e8c84b08564fa8" category="cell">count = 1</block>
  <block id="e7c7c0ead110b5e0656460f4785bebf0" category="section-title">バックアップ処理</block>
  <block id="43e6569b52fe76a3f2f6e68ae12ba5af" category="admonition">SAP では、 1 つ以上のテナントが停止している場合に MDC システムの Snapshot バックアップ処理はサポートされません。</block>
  <block id="3e736a3cbf8d29dd995a15423e614970" category="paragraph">次の図に、バックアップワークフローの概要を示します。</block>
  <block id="373d0b19f95f30915a259780f1e42683" category="section-title">HANA データベースの Snapshot バックアップのワークフロー</block>
  <block id="6f57f256df1b508ce741be6998f13777" category="section-title">ブロック整合性チェック処理のバックアップワークフロー</block>
  <block id="6a01bd07e34e6ee4ae8c5d876de38f3e" category="section-title">バックアップ保持管理、および不要なデータバックアップとログバックアップの削除</block>
  <block id="4c86e375d8017415e5820e0dda39bc9b" category="list-text">ファイルベースのバックアップ</block>
  <block id="437fd9c44077715ae57f9988105650f3" category="list-text">SAP HANA のバックアップカタログでのデータのバックアップ</block>
  <block id="23fabc748ef59beac69090d6468dbf50" category="list-text">SAP HANA のバックアップカタログとファイルシステムにバックアップを記録します</block>
  <block id="9ba5c6960af3983228e48ddca02fcc8a" category="paragraph">次の図は、各種ワークフローの概要と各処理の依存関係を示しています。以降のセクションでは、さまざまな処理について詳しく説明します。</block>
  <block id="c86bb70cd07f9b1870bd94c202cc545e" category="section-title">ファイルベースのバックアップの保持管理</block>
  <block id="30045cea939eb38d6a07ae386520d93f" category="section-title">SAP HANA のバックアップカタログ内でのデータバックアップの保持管理</block>
  <block id="576bd3a8485aa05c1d0ffd6e07cdc22e" category="section-title">ログバックアップの保持管理</block>
  <block id="ad55e29b285f391746a7617dc2491e24" category="paragraph">SAP HANA データベースでは、ログバックアップが自動的に作成されます。このログバックアップでは、 SAP HANA で構成されたバックアップディレクトリに、個々の SAP HANA サービスごとにバックアップファイルが作成されます。</block>
  <block id="09de968635c1dc837bf4362d72aa3f9c" category="section-title">Snapshot バックアップに必要な容量</block>
  <block id="6be8f3086a30e59e908d53eb620b51dd" category="doc">リストアとリカバリ</block>
  <block id="6ce7acfe97d30fdc19c079a65ba07e22" category="list-text">SAP HANA Studio でリストアとリカバリのプロセスを準備します。</block>
  <block id="217b91e8b34ae4d89f6ce0aea3eae3e0" category="list-text">リカバリタイプとログのバックアップ先を選択します。</block>
  <block id="6f1c0c39a0a9457611f720a7e3f727f0" category="list-text">SAP HANA Studio を使用して、システムデータベースのリカバリプロセスを実行します。</block>
  <block id="3290aa29be79f07d8193b526384a1119" category="list-text">バックアップ・リストから [ 更新 ] をクリックし ' リカバリに使用できるバックアップを選択します（緑色のアイコンが表示されます）</block>
  <block id="2fc425e07c82682fe2a27c132290ee3a" category="list-text">SAP HANA Studio を使用してテナントデータベースのリカバリプロセスを実行します。</block>
  <block id="864972bbadf73d1b9129bd44ce27a736" category="list-text">[Recover Tenant Database] を選択して、リカバリするテナントを選択します。</block>
  <block id="d224ae0a4d51e7c29e63a7687b30517d" category="list-text">リカバリタイプを選択して、 Next （次へ）をクリックします。</block>
  <block id="c3b11a2f5f2eee64b9649be717bb5932" category="list-text">バックアップカタログの場所を指定し、 [ 次へ ] をクリックします。</block>
  <block id="86a3a7022ed0b6c13289fcbf758e3d5d" category="list-text">すべてのデータボリュームをアンマウントします。</block>
  <block id="71cb1faebb7f639c1b5a4238f49846f4" category="list-text">ログバックアップの場所を指定します。次へをクリックします。</block>
  <block id="498b10487f14bcddf044e9c0ce0997fb" category="list-text">必要に応じて、他の設定を選択します。［ デルタバックアップを使用 ］ が選択されていないことを確認します。次へをクリックします。</block>
  <block id="ac359853b48f05fcb2cdd263bd2d14e2" category="list-text">リカバリ設定を確認し、 [ 完了 ] をクリックします。</block>
  <block id="2e40b2a74f9689cc8abbd4feebd9b496" category="paragraph">リカバリプロセスが開始されます。システムデータベースのリカバリが完了するまで待ちます。</block>
  <block id="52f086817629608d1c9271f5b8ecd51d" category="list-text">リカバリするテナントを選択し、 Next （次へ）をクリックします。</block>
  <block id="fc49bdb5ad0943d1647fac2e1b0c5944" category="list-text">リカバリタイプを指定して、 Next （次へ）をクリックします。</block>
  <block id="cc9536c3856cee6b3ae895ffe692fc31" category="list-text">バックアップカタログの場所を確認し、 Next （次へ）をクリックします。</block>
  <block id="57f97e9e6892dd6ef20f4c4bb68ab888" category="list-text">テナントデータベースがオフラインであることを確認します。[OK] をクリックして続行します。</block>
  <block id="ae0a00cc6d706f8a9fea3f175b6629a1" category="list-text">ログのバックアップ先を確認し、 Next （次へ）をクリックします。</block>
  <block id="e4fdc1fd67853318f040ef298f53dde3" category="list-text">[ 完了 ] をクリックして、リカバリ設定を確認し、テナントデータベースのリカバリプロセスを開始します。</block>
  <block id="b3eba0eb79b198a3876779400c4884c7" category="list-text">リカバリが完了してテナントデータベースが起動するまで待ちます。</block>
  <block id="a05d610051777823f28850102c89dd02" category="paragraph">SAP HANA システムは稼働中です。</block>
  <block id="2da06d509fa82d9f4e048f53fdd59f2f" category="summary">このテクニカルレポートでは、 NetApp SnapCenter サービスと Azure NetApp Files を使用した SAP HANA データ保護のベストプラクティスについて説明します。SnapCenter サービスの概念、設定に関する推奨事項、バックアップ、リストア、リカバリ処理などの運用ワークフローについて説明します。</block>
  <block id="84f6a50de79d49013e595a0b9fd524e0" category="doc">TR-4905 ：『 SAP HANA backup and recovery on Azure NetApp Files with SnapCenter Service 』</block>
  <block id="2090e19c47d41004ac9d83b4c834c1d8" category="paragraph">今日の企業には、 SAP アプリケーションを中断なく継続的に利用できることが求められています。データ量が増え続け、システムバックアップなどの日常的な保守作業が必要になった場合に、一貫したパフォーマンスレベルが期待されます。SAP データベースのバックアップは重要な作業であり、本番用 SAP システムのパフォーマンスに大きく影響する可能性があります。</block>
  <block id="26c67fe7078b8352435776ec2a49de01" category="paragraph">バックアップウィンドウは短くなっている一方で、バックアップするデータの量は増加しています。そのため、ビジネスプロセスへの影響を最小限に抑えながらバックアップを実行できるタイミングを見つけ出すのは困難です。本番環境と非本番環境の SAP システムのダウンタイムは、データの損失とビジネスコストを削減するために最小化する必要があるため、 SAP システムのリストアとリカバリに要する時間が重要になります。</block>
  <block id="ce081e1ccd185ea759e068ff2571ccb5" category="paragraph">SAP のバックアップとリカバリに関する課題を以下にまとめます。</block>
  <block id="e11f2988b7e8f11f425c365fe8cf0392" category="list-text">* 本番用 SAP システムのパフォーマンスへの影響。 * 通常、従来のコピーベースのバックアップは、データベースサーバ、ストレージシステム、ストレージネットワークに大きな負荷がかかるため、本番用 SAP システムのパフォーマンスが大幅に低下します。</block>
  <block id="cab54e2b3d87df10220254fdc951d470" category="list-text">* バックアップ・ウィンドウの短縮 * 従来のバックアップは 'SAP システムでの対話またはバッチ・アクティビティが少ない場合にのみ可能ですSAP システムが 24 時間稼働していると、バックアップのスケジュール設定がさらに難しくなります。</block>
  <block id="f0e5827e00cf900f71151c63c4f3a68b" category="list-text">* データの急増。 * データの急増とバックアップ・ウィンドウの短縮には、バックアップ・インフラへの継続的な投資が必要です。つまり、追加のバックアップディスクスペースを確保し、より高速なバックアップネットワークを構築する必要があります。また、これらのバックアップ資産の格納と管理に要する継続的なコストについても説明する必要があります。こうした問題には差分バックアップで対処することもできますが、リストアプロセスが煩雑で非常に時間がかかるうえ、複雑なため検証も難しくなります。このようなシステムでは、通常、 Recovery Time Objective （ RTO ；目標復旧時間）と Recovery Point Objective （ RPO ；目標復旧時点）が長くなり、ビジネスには受け入れられません。</block>
  <block id="a8f8133e051f5ce157248709bac6d380" category="list-text">* ダウンタイムのコスト増加。 * SAP システムの計画外のダウンタイムは、通常、ビジネスの財務に影響を及ぼします。計画外停止の大部分は、 SAP システムのリストアとリカバリの要件に応じて消費されます。そのため、必要な RTO は、バックアップとリカバリのアーキテクチャの設計を決定します。</block>
  <block id="2a6ae4b4f6c920b26c01df5da7c2e422" category="list-text">* SAP アップグレード・プロジェクトのバックアップ / リカバリ時間。 * SAP アップグレードのプロジェクト計画には、 SAP データベースのバックアップが 3 つ以上含まれています。これらのバックアップにより、アップグレードプロセスにかかる時間が大幅に短縮されます。通常、続行するかどうかは、以前に作成したバックアップからデータベースをリストアおよびリカバリするのに要する時間に基づいて判断します。システムを以前の状態にリストアするだけでなく、アップグレード中に発生する可能性のある問題を迅速にリストアすることで解決できます。</block>
  <block id="f811314d17a1d16a1faad0f452dc6860" category="doc">このレポートで使用するラボのセットアップ</block>
  <block id="7e897f23ed71aef1c0a8acf1ae54e9e4" category="section-title">解決策コンポーネント</block>
  <block id="01b841fc3abde7f02e3fc6d20ce2490e" category="list-text">ストレージベースの Snapshot コピーを使用した SAP HANA データのバックアップ：</block>
  <block id="b91349a37c07cbc607967b352d27ac85" category="list-text">バックアップのスケジュール設定</block>
  <block id="3dff72048413a2d2a95ad3e613d65664" category="list-text">保持管理</block>
  <block id="868fc3042a779c3102d74797f55dbcb8" category="list-text">不要な SAP HANA バックアップカタログの削除</block>
  <block id="08982f6d9b754b9de2af69edceefff75" category="list-text">リストア処理を実行します</block>
  <block id="43390268352d31fc3a2bfe63eda69144" category="list-text">HANA データベースログバックアップの保持管理：</block>
  <block id="f3afcc2a29b00a45585e1d8c2259abaf" category="list-text">データバックアップの保持に基づく保持管理</block>
  <block id="8c58572df982588195422e103d78a3e6" category="section-title">サポートされている SAP HANA リリースと構成</block>
  <block id="c8d591b036c6345c614160fd9eb8e2b7" category="doc">NetApp 解決策の略</block>
  <block id="923600a8a9a4e2aae6be8141e3fc623d" category="section-title">Snapshot バックアップの実行時間</block>
  <block id="20225b7353738f995acfabb75d63c79e" category="paragraph">このセクションでは、ファイルベースとストレージベースの Snapshot バックアップの RTO 比較を示します。RTO は、データベースのリストアに必要な時間と、データベースの起動およびリカバリに必要な時間の合計によって定義されます。</block>
  <block id="3595bb49b6abd88938e481ccc0d97119" category="section-title">データベースのリストアに必要な時間</block>
  <block id="9abaa35fafe6af9114d3f925f652af20" category="section-title">データベースの起動に必要な時間</block>
  <block id="60ea11645c6193ef1631453b24f6f3ca" category="section-title">データベースのリカバリに要する時間</block>
  <block id="5cec17cdb7f328cdc9f69b7b0a90d673" category="paragraph">リカバリ時間は、リストア後に適用する必要があるログの数によって異なります。この数は、データバックアップを実行する頻度によって決まります。</block>
  <block id="bd187d40a614fe4ea78dfa6fca960882" category="paragraph">次の図に、ファイルベースのデータバックアップを使用する場合の 1TB データベースの RTO の例を示します。この例では、バックアップが 1 日に 1 回作成されます。RTO は、リストアとリカバリの実行タイミングによって異なります。バックアップの作成直後にリストアとリカバリを実行した場合の RTO は、主にリストア時間に基づきます。この例では、 1 時間 10 分です。リカバリ時間は、次のバックアップが作成される直前にリストアとリカバリが実行され、最大 RTO は 4 時間 30 分になりました。</block>
  <block id="a61c800d17b38f8aa5ba586ab3ca9a7b" category="paragraph">次の図に、データベースサイズや Snapshot バックアップの頻度に応じた、ファイルベースとストレージベースの Snapshot バックアップの RTO 比較を示します。緑のバーは、ファイルベースのバックアップを示しています。その他のバーには、バックアップ頻度が異なる Snapshot コピーのバックアップが表示されます。</block>
  <block id="9146086648c59ec16c636f6376bdfd2e" category="paragraph">保持管理ロジックは、 SnapCenter の各バックアップワークフローで実行されます。</block>
  <block id="253e2318e8893b42b0160e70f2371673" category="summary">SAP のバックアップ、リストア、ディザスタリカバリに関する一連のブログ</block>
  <block id="3c076a182be1751030f4612f09c54ab2" category="doc">SAP のバックアップ、リストア、ディザスタリカバリに関するブログ</block>
  <block id="dcfb0772c9f2c9e98d41f5f0e799a89a" category="paragraph">SAP のバックアップ、リストア、ディザスタリカバリに関するブログの概要</block>
  <block id="23083712546bfb74d3153dd83b152769" category="summary">SAP 解決策ポートフォリオに新たに追加された機能</block>
  <block id="ff0018dfdf641d75e04d581743c81f22" category="paragraph">最新の SAP ソリューションとソリューションの資料の概要</block>
  <block id="91e3a26ea4105ecd20561989c3c58a32" category="inline-link-macro">TR-4290 ：『 SAP HANA on NetApp FAS systems with NFS Configuration Guide 』</block>
  <block id="6408743c7b0a502fe49fed25ac968c17" category="summary">SAP ライフサイクル管理に関する一連のビデオとデモ</block>
  <block id="18c100c6d8f14819ac80ee276eb251a6" category="doc">SAP ライフサイクル管理のビデオとデモ</block>
  <block id="1e36c812f9450a024b52c0b4085d0776" category="paragraph">SAP Lifecycle Management を紹介するビデオとデモの概要。</block>
  <block id="5673b57ca1dc3ec2a9c2adcc115e3718" category="inline-link-macro">予期しないイベントに備えて、基幹業務の継続性を確保します</block>
  <block id="5fb4ff4d48cdc2aa80ff2d0945e1a23c" category="inline-link-macro">SnapCenter のユースケース</block>
  <block id="c54076227bebe4b120f17a0f5a22ce81" category="summary">ネットアップでは、 SAP と SAP HANA に関するテクニカルレポート、検証済みの設計、ビデオ、ブログ、解決策概要を幅広くご用意しています。</block>
  <block id="824aec17cb9bd27843cf6addb92b57fc" category="summary">SAP ソリューションを紹介する一連のビデオとデモ</block>
  <block id="293e9d744a4c2a3dfc4088f7b8aa25d5" category="doc">SAP 解決策のビデオとデモ</block>
  <block id="2259bdd472d4d2949e3eea23b5e4ef34" category="paragraph">SAP ソリューションを紹介するビデオとデモの概要</block>
  <block id="aa5b0840e871ca382a477398de4a7243" category="section-title">SAP Configuration Best Practices ビデオおよびデモをご覧ください</block>
  <block id="ed2640c6c02db4ce182af25c797097d8" category="section-title">SAP のバックアップ、リストア、ディザスタリカバリに関するビデオとデモ</block>
  <block id="eabc448bcef35b3d5eb92882f22f6f0c" category="inline-link-macro">SAP HANA のディザスタリカバリオプション</block>
  <block id="dd39ffa36b8ed682c45520c7d7dc8517" category="summary">SAP Lifecycle Management のツールとヒント</block>
  <block id="9ed86ffbd478752ccf2baab032a8e364" category="doc">SAP Lifecycle Management 用ツール</block>
  <block id="08fc5b32a35c491189156ebd21b39ecf" category="paragraph">SAP ライフサイクル管理ソリューション用ツールとソリューション関連資料の概要</block>
  <block id="3336391ac14de02458baea06fda369fd" category="inline-link-macro">SAP LaMa 対応の Storage Services Connector （ SSC</block>
  <block id="64089c921d1f873faaec351a3fbb7b06" category="list-text"><block ref="64089c921d1f873faaec351a3fbb7b06" category="inline-link-macro-rx"></block></block>
  <block id="9ae2a6f9c25e674f13f60775bc219616" category="summary">SAP 構成のベストプラクティスに関する一連のビデオとデモ</block>
  <block id="e3f458e2f7c3ee2f08aa3f0f84d2057a" category="paragraph">SAP Configuration Best Practices に記載されたビデオとデモの概要</block>
  <block id="99ba99217dcc4bc08573dd9b9c599881" category="summary">SAP ソリューションに関する一連のブログ</block>
  <block id="d1f7df907dee6bb993a5921834e8af81" category="doc">SAP 解決策ブログ</block>
  <block id="dd3e5e982b28f1c82ee7d812bb5ef8b6" category="paragraph">ネットアップを基盤とした SAP に関するブログの概要</block>
  <block id="2f473b758c3d7720634f7b7236d0e7bf" category="section-title">SAP 構成のベストプラクティスブログ</block>
  <block id="7817ea28831bda7c38bf222b46e04cdd" category="section-title">SAP ライフサイクル管理ブログ</block>
  <block id="cda880af5848ab641df0654037dabc8b" category="inline-link-macro">ネットアップを使用した SAP Landscape Management の導入</block>
  <block id="bc48aec540da03e5e4106e1896968eb5" category="list-text"><block ref="bc48aec540da03e5e4106e1896968eb5" category="inline-link-macro-rx"></block></block>
  <block id="8c0446786df20f3bab9e76c7238785bb" category="summary">SAP の設定に関するベストプラクティスのツールとヒント</block>
  <block id="c22c310ff34da15c4cf9e24071a8d99a" category="doc">SAP 構成のベストプラクティスツール</block>
  <block id="37efeba04a4ec5b4f483120771d49605" category="paragraph">SAP 構成のベストプラクティスソリューション用ツールとソリューション関連資料の概要</block>
  <block id="375187184a6023d3a0c03cb49eac0f2f" category="summary">SAP 構成のベストプラクティスに関する一連のブログ</block>
  <block id="926e1400cb4a7cc5855810bdb87175d9" category="paragraph">SAP 構成のベストプラクティスに関連するブログの概要を参照できます。</block>
  <block id="08a3dd34b6649d68580f425952a735ac" category="summary">SAP のバックアップ、リストア、ディザスタリカバリに関する一連のビデオとデモ</block>
  <block id="fc405c6c18eb854c5bfa5e386da6706c" category="paragraph">SAP のバックアップ、リストア、ディザスタリカバリに関するビデオとデモの概要</block>
  <block id="dd8cf04faf0e63219895ef355bac05f9" category="summary">SAP のライフサイクル管理に関する一連のブログ</block>
  <block id="ab6524564d590a2cf59d10dcc63ff99e" category="paragraph">SAP のライフサイクル管理を中心としたブログの概要。</block>
  <block id="b45ecd3afcfa865514a59b475de3e93e" category="sidebar">FlexPod SAP ソリューション</block>
  <block id="cd0aa799857a204938b1d6cabb99618f" category="doc">SAP の新機能</block>
  <block id="243e854b0d7da6e16a4a87f0f9ea87ba" category="paragraph">このドキュメントに記載されている情報の詳細については、次のドキュメントを参照してください。</block>
  <block id="b1cd4632a9cd8998e7a0017f528fcc5b" category="list-text">SnapCenter を使用して SAP HANA システムのコピーおよびクローン処理を自動化</block>
  <block id="36352fdf713e8c1508666c9640668e0a" category="summary">SnapCenter 4.6 では、 HANA システムレプリケーションが設定された HANA システムの自動検出がサポートされます。SnapCenter 4.6 には、バックアップ処理中にプライマリおよびセカンダリの HANA ホストを識別し、両方の HANA ホスト間で保持管理を処理するロジックが含まれています。</block>
  <block id="8b1c808eafbee9527d4e168ef1f16c09" category="doc">リソースグループを使用した SnapCenter 4.6 の設定</block>
  <block id="b39fd9047d2089b24c418d3512b8c903" category="paragraph">SnapCenter 4.6 では、 HANA システムレプリケーションが設定された HANA システムの自動検出がサポートされます。SnapCenter 4.6 には、バックアップ処理中にプライマリおよびセカンダリの HANA ホストを識別し、両方の HANA ホスト間で保持管理を処理するロジックが含まれています。また、 HANA システムレプリケーション環境でも自動リストアと自動リカバリが利用できるようになりました。</block>
  <block id="6a24c6a18054ecbcf8919b90f4ff5eb8" category="section-title">SnapCenter 4.6 HANA システムレプリケーション環境の構成</block>
  <block id="ef7979296ea2465331699c64e5450ad0" category="paragraph">次の図に、この章で使用するラボのセットアップを示します。HANA システムレプリケーションを使用して、 HANA ホストを 2 台、 HANA を 3 台、 HANA を 4 台構成しました。</block>
  <block id="3719dabf545d56e27391b4c1bb73b944" category="paragraph">SnapCenter で HANA システムのレプリケーションを設定するには、大まかに見て次の手順を実行する必要があります。</block>
  <block id="bc1873525b8d9ae5c49626cd6b47592c" category="list-text">HANA プラグインをプライマリホストとセカンダリホストにインストールします。自動検出が実行され、各プライマリホストまたはセカンダリホストで HANA システムのレプリケーションステータスが検出されます。</block>
  <block id="3b7407b92790f4d78d820c6ebd3e159d" category="list-text">SnapCenter の configure database を実行し 'hdbuserstore キーを指定しますさらに自動検出操作が実行されます。</block>
  <block id="93564a49cedf2137deead20877f792cd" category="list-text">両方のホストを含むリソースグループを作成し、保護を設定します。</block>
  <block id="b9e7f8ca0dd679eb7244d3b0c456f58e" category="paragraph">両方の HANA ホストに SnapCenter HANA プラグインをインストールすると、他の自動検出されたリソースと同じように、 HANA システムが SnapCenter リソースビューに表示されます。SnapCenter 4.6 以降では、追加の列に HANA システムレプリケーション（有効 / 無効、プライマリ / セカンダリ）のステータスが表示されます。</block>
  <block id="d6fc9c8644818503f282251021723ef4" category="paragraph">リソースをクリックすると、 SnapCenter は HANA システムの HANA ユーザストアキーを要求します。</block>
  <block id="8b0bc5e36095bf09eb695be9b8de1862" category="paragraph">追加の自動検出ステップが実行され、 SnapCenter にリソースの詳細が表示されます。SnapCenter 4.6 では、システムレプリケーションのステータスとセカンダリサーバがこのビューに表示されます。</block>
  <block id="28fd5edae03b34a5e3181325d18aaf9b" category="paragraph">2 つ目の HANA リソースに対して同じ手順を実行すると、自動検出プロセスが完了し、両方の HANA リソースが SnapCenter で構成されます。</block>
  <block id="3a6aa9f1c27d2d807b9c4b5cc15c0c66" category="paragraph">HANA システムレプリケーションを有効にしたシステムでは、両方の HANA リソースを含む SnapCenter リソースグループを設定する必要があります。</block>
  <block id="78110de010c4ee1945de37cc79b3b7cf" category="paragraph">Snapshot 名には、ホスト名、ポリシー、スケジュールなどを含めるカスタムの名前形式を使用することを推奨します。</block>
  <block id="7ca4e5c2fcfa31585e0bf441458f2cfc" category="paragraph">リソースグループに両方の HANA ホストを追加する必要があります。</block>
  <block id="ed775f1c4384259d73349821be6c2694" category="paragraph">リソースグループにはポリシーとスケジュールが設定されます。</block>
  <block id="91804b09f65a1f54267e7fa96cbfd6f1" category="admonition">ポリシーで定義された保持設定は、両方の HANA ホストで使用されます。たとえば、ポリシーで保持数が 10 に定義されている場合、両方のホストのバックアップの合計がバックアップ削除の基準として使用されます。SnapCenter は、現在のプライマリホストまたはセカンダリホストに作成された最も古いバックアップを個別に削除します。</block>
  <block id="d963f6f8f451d72b26442e3c2c35bcf1" category="paragraph">これでリソースグループの設定が終了し、バックアップを実行できるようになります。</block>
  <block id="fb04e74862dcc89c849934898ae20df8" category="section-title">Snapshot のバックアップ処理</block>
  <block id="c14b7fc8184ded19e7d1d53f9e7ab803" category="paragraph">リソースグループのバックアップ処理が実行されると、 SnapCenter はどのホストがプライマリであるかを識別し、プライマリホストでのみバックアップをトリガーします。つまり、プライマリホストのデータボリュームのみが Snapshot されます。この例では、 HANA 3 が現在のプライマリホストであり、このホストでバックアップが実行されています。</block>
  <block id="779618797296fde495820a84f779ecab" category="paragraph">SnapCenter ジョブログには、識別処理と、現在のプライマリホスト HANA でのバックアップの実行が表示されます。</block>
  <block id="c652f5e24fbe7fb888911613189b45da" category="paragraph">これで、プライマリ HANA リソースに Snapshot バックアップが作成されました。バックアップ名に含まれるホスト名は HANA - 3 と表示されます。</block>
  <block id="bcb05d93e0f8deb7992f97c99b67a704" category="paragraph">HANA のバックアップカタログにも同じ Snapshot バックアップが表示されます。</block>
  <block id="227417a294975cfdd600c953a7227e0a" category="paragraph">テイクオーバー処理が実行されると、それ以降の SnapCenter バックアップで元のセカンダリホスト（ Hana-4 ）がプライマリとして識別され、 Hana-4 でバックアップ処理が実行されるようになります。ここでも、新しいプライマリホスト（ HANA - 4 ）のデータボリュームのみが Snapshot されています。</block>
  <block id="126fd58f4273ad597cbcab66140a53bf" category="admonition">SnapCenter 識別ロジックで対応しているのは、 HANA ホストがプライマリとセカンダリの関係にあるシナリオと、 HANA ホストの 1 つがオフラインになっているシナリオだけです。</block>
  <block id="146a3e54d7baf77bf5f24736862b2e87" category="paragraph">SnapCenter ジョブログには、識別処理と、現在のプライマリホスト HANA でのバックアップの実行が表示されます。</block>
  <block id="bbd4f4df2e21b1ce421727b7362f417b" category="paragraph">これで、プライマリ HANA リソースに Snapshot バックアップが作成されました。バックアップ名に含まれているホスト名は、 HANA のホスト名です。</block>
  <block id="4964ef2f01ba430e3456e779528b2769" category="section-title">ファイルベースのバックアップを使用したブロック整合性チェック処理</block>
  <block id="b69253be3260fc04bd3bfddc522b4fc4" category="paragraph">SnapCenter 4.6 では、ファイルベースのバックアップでブロック整合性チェック処理を実行する場合と同じロジックを使用します。SnapCenter は現在のプライマリ HANA ホストを識別し、このホストに対してファイルベースのバックアップを実行します。保持管理も両方のホスト間で実行されるため、現在プライマリになっているホストに関係なく、最も古いバックアップが削除されます。</block>
  <block id="6856414db85233a8e045263f695b175e" category="section-title">SnapVault レプリケーション</block>
  <block id="061d3cb22e674e47881a1e516fec08eb" category="paragraph">テイクオーバー時に透過的なバックアップ処理を可能にし、現在プライマリホストになっている HANA ホストに依存しないようにするには、両方のホストのデータボリュームに SnapVault 関係を設定する必要があります。SnapCenter は、バックアップの実行ごとに、現在のプライマリホストに対して SnapVault 更新処理を実行します。</block>
  <block id="6d2237ec4d6cf324b50a6aa67d5813d6" category="admonition">セカンダリホストへのテイクオーバーが長時間実行されない場合、セカンダリホストでの最初の SnapVault 更新で変更されたブロック数は多くなります。</block>
  <block id="8bcfb1be8ac0f60d97f95518b3e7f466" category="paragraph">SnapVault ターゲットの保持管理は ONTAP by SnapCenter の外部で管理されるため、両方の HANA ホスト間で処理することはできません。そのため、テイクオーバー前に作成されたバックアップは、以前のセカンダリではバックアップ処理によって削除されません。これらのバックアップは、元のプライマリが再びプライマリになるまで保持されます。これらのバックアップによってログバックアップの保持管理がブロックされないように、 SnapVault ターゲットまたは HANA のバックアップカタログから手動で削除する必要があります。</block>
  <block id="e16ff6e568f8eb35263ae87e0b2fb4c7" category="admonition">1 つの SnapVault コピーが同期ポイントとしてブロックされるため、すべての Snapshot コピーのクリーンアップを実行できません。最新の Snapshot コピーも削除する必要がある場合は、 SnapVault レプリケーション関係を削除してください。この場合は、 HANA のバックアップカタログ内のバックアップを削除して、ログのバックアップ保持管理のブロックを解除することを推奨します。</block>
  <block id="dc89ca90a524118bdb23dfe95009d16c" category="paragraph">SnapCenter 4.6 は、両方の HANA ホストで Snapshot バックアップ、ブロック整合性チェック処理、 HANA バックアップカタログのエントリ、ログバックアップ（無効になっていない場合）の保持を管理できるため、どちらのホストが現在プライマリであるかセカンダリであるかは関係ありません。削除処理が現在のプライマリホストとセカンダリホストのどちらで必要かに関係なく、定義された保持設定に基づいて HANA カタログのバックアップ（データとログ）とエントリが削除されます。つまり、テイクオーバー処理を実行した場合や、レプリケーションが反対方向に設定されている場合は、手動での操作は必要ありません。</block>
  <block id="6db8f8c174516b1dc5a1f3305fe43190" category="paragraph">次の図は、複数のテイクオーバーが実行され、両方のサイトに Snapshot バックアップが作成された場合のシナリオを示しています。現在のステータスでは、ホスト HA-3 がプライマリホスト、最新のバックアップは T4 であり、これはホスト HA-3 で作成されています。リストアおよびリカバリ処理を実行する必要がある場合、バックアップ T1 および T4 は SnapCenter のリストアとリカバリに使用できます。ホスト HA-4 （ T2 、 T3 ）で作成されたバックアップは、 SnapCenter を使用してリストアできません。リカバリのために、これらのバックアップを HANA のデータボリュームに手動でコピーする必要があります。</block>
  <block id="50ff1d24fad3646f6fdf9aea77002929" category="inline-link-macro">他のホストで作成されたバックアップからのリストアとリカバリ</block>
  <block id="1fd25d525832cdf3655a067856ae6010" category="summary">SnapCenter リソースは、 HANA システムレプリケーション環境の仮想 IP アドレス（ホスト名）で構成されます。このアプローチでは、ホスト 1 とホスト 2 のどちらがプライマリかに関係なく、 SnapCenter は常にプライマリホストと通信します。</block>
  <block id="260f08a78b9b41762b41f2772c1cda65" category="doc">単一のリソースを使用する SnapCenter 構成</block>
  <block id="5411f416854228c6901553a528a29ad7" category="paragraph">SnapCenter リソースは、 HANA システムレプリケーション環境の仮想 IP アドレス（ホスト名）で構成されます。このアプローチでは、ホスト 1 とホスト 2 のどちらがプライマリかに関係なく、 SnapCenter は常にプライマリホストと通信します。両方の SAP HANA ホストのデータボリュームは、 SnapCenter リソースに含まれています。</block>
  <block id="d223d6e73fef21ec370c1a5c0e109630" category="admonition">仮想 IP アドレスは常にプライマリ SAP HANA ホストにバインドされているものとします。仮想 IP アドレスのフェイルオーバーは、 HANA システムレプリケーションのフェイルオーバーワークフローの一環として、 SnapCenter の外部で実行されます。</block>
  <block id="6f723c4c9a56249ef6ad0fc5205452b8" category="paragraph">ホスト 1 をプライマリホストとするバックアップを実行すると、データベースと整合性のある Snapshot バックアップがホスト 1 のデータボリュームに作成されます。ホスト 2 のデータボリュームは SnapCenter リソースの一部であるため、このボリュームに対してもう 1 つの Snapshot コピーが作成されます。この Snapshot コピーはデータベースの整合性を維持するのではなく、セカンダリホストのクラッシュイメージにすぎません。</block>
  <block id="748f9383138a6d21a5f9dc95cf69b88c" category="paragraph">SAP HANA のバックアップカタログと SnapCenter リソースには、ホスト 1 で作成されたバックアップが含まれています。</block>
  <block id="9b9c7d8b5c0d0fafbea9ea847faf4e80" category="paragraph">次の図に、ホスト 2 へのフェイルオーバーおよびホスト 2 からホスト 1 へのレプリケーション後のバックアップ処理を示します。SnapCenter は、 SnapCenter リソースに設定されている仮想 IP アドレスを使用して、ホスト 2 と自動的に通信します。これで、ホスト 2 にバックアップが作成されます。SnapCenter によって 2 つの Snapshot コピーが作成されます。ホスト 2 のデータボリュームにあるデータベースと整合性のあるバックアップと、ホスト 1 のデータボリュームにあるクラッシュイメージの Snapshot コピーです。SAP HANA のバックアップカタログと SnapCenter リソースに、ホスト 1 で作成されたバックアップとホスト 2 で作成されたバックアップが含まれるようになりました。</block>
  <block id="2b26158b4aff092cc0728d277d344a5a" category="paragraph">不要なデータバックアップやログバックアップは、定義された SnapCenter 保持ポリシーに基づいて削除され、プライマリまたはセカンダリのホストに関係なく、バックアップは削除されます。</block>
  <block id="b3c7f675aa9e386d0aaa73f2de847188" category="inline-link-macro">ストレージ Snapshot バックアップと SAP システムレプリケーション</block>
  <block id="76668f896551ee021941705402feda3b" category="paragraph">シングルリソースの SnapCenter 構成では、バックアップがどこに作成されたかが SnapCenter で認識されません。そのため、 SnapCenter のバックアップワークフローにバックアップ前のスクリプトを追加して、現在プライマリ SAP HANA ホストになっているホストを特定することを推奨します。</block>
  <block id="bb9f6626d16fda2d847f88dabedc7961" category="paragraph">次の図は、バックアップホストの ID を示しています。</block>
  <block id="4b152f4bba0a5ca6345daa47736e4622" category="section-title">SnapCenter 構成</block>
  <block id="32423786e97f4f83fdc90f030727503b" category="paragraph">次の図は、ラボでのセットアップと必要な SnapCenter 構成の概要を示しています。</block>
  <block id="c1968668fc5cbc2c5e8b49c18c362b55" category="paragraph">どの SAP HANA ホストがプライマリであっても、 1 つのホストがダウンしている場合でもバックアップ処理を実行するには、 SnapCenter SAP HANA プラグインを中央のプラグインホストに導入する必要があります。今回のラボ環境では、 SnapCenter サーバを中央プラグインホストとして使用し、 SnapCenter サーバに SAP HANA プラグインを導入しました。</block>
  <block id="bd5c6333eef324e59a3de18aa6e29173" category="paragraph">HANA データベースに、バックアップ処理を実行するユーザを作成しました。SAP HANA プラグインがインストールされている SnapCenter サーバにユーザストアキーが設定されている。ユーザーストアキーには、 SAP HANA システムレプリケーションホスト（ SSR-VIP ）の仮想 IP アドレスが含まれます。</block>
  <block id="d7e2061a39f4790783431f1963349b9b" category="paragraph">SnapCenter では ' 次の図に示すように ' リソースは ' 前に構成されたユーザー・ストア・キーと SnapCenter サーバを 'hdbsql' 通信ホストとして構成されます</block>
  <block id="2a64b18e126555fa2ca4e7fb0bf3bc37" category="paragraph">次の図に示すように、両方の SAP HANA ホストのデータボリュームがストレージ設置面積構成に含まれています。</block>
  <block id="90323af735fbe3861cb8bc49a36914b1" category="paragraph">前述したように、 SnapCenter はバックアップがどこで作成されたかを認識しません。したがって、 SnapCenter バックアップワークフローにバックアップ前のスクリプトを追加して、現在プライマリ SAP HANA ホストとなっているホストを特定することを推奨します。この識別は、次の図に示すように、バックアップワークフローに追加された SQL ステートメントを使用して実行できます。</block>
  <block id="0b345bf9ce49cf6e06f2ca4c412deff5" category="section-title">SnapCenter バックアップ処理</block>
  <block id="82e7650ccab95a6d3386e10752618019" category="paragraph">バックアップ処理が通常どおり実行されるようになりました。不要なデータバックアップとログバックアップの削除は、プライマリまたはセカンダリの SAP HANA ホストとは無関係に実行されます。</block>
  <block id="d0c6300a20b1a2c2c3b854a631ac2e32" category="paragraph">バックアップジョブログには SQL ステートメントの出力が含まれており、バックアップが作成された SAP HANA ホストを特定できます。</block>
  <block id="6354370842f86dd420800ec685504912" category="paragraph">次の図に、ホスト 1 をプライマリホストとするバックアップジョブログを示します。</block>
  <block id="21707873392b599f402b6c2e8519e23a" category="paragraph">この図は、ホスト 2 がプライマリホストであるバックアップジョブログを示しています。</block>
  <block id="13dea575ccfa5ca9cd3d63c2e68f6d10" category="paragraph">次の図は、 SAP HANA Studio の SAP HANA バックアップカタログを示しています。SAP HANA データベースがオンラインの場合、バックアップが作成された SAP HANA ホストが SAP HANA Studio に表示されます。</block>
  <block id="193b24cf7c478d099c4fbbe19f8ad124" category="admonition">リストア処理とリカバリ処理で使用されるファイルシステム上の SAP HANA バックアップカタログに、バックアップが作成されたホスト名は含まれません。データベースがダウンしているときにホストを識別する唯一の方法は、バックアップカタログのエントリと、両方の SAP HANA ホストの「 backup.log 」ファイルを組み合わせることです。</block>
  <block id="2e0e4fbbcdc158520c486ebd1cb95f4e" category="paragraph">前述したように、必要なリストア処理を定義するために、選択したバックアップの作成先を特定できる必要があります。SAP HANA データベースがオンラインのままの場合は、 SAP HANA Studio を使用して、バックアップが作成されたホストを特定できます。データベースがオフラインの場合、情報は SnapCenter バックアップジョブログでのみ確認できます。</block>
  <block id="ec3a3d8d3490fe3ecd7daa9a92d23e25" category="paragraph">次の図に、選択したバックアップに応じたリストア処理を示します。</block>
  <block id="f3f8ad38930fbe26474c020c9937d5e0" category="paragraph">タイムスタンプ T3 の後にリストア処理を実行する必要があり、ホスト 1 がプライマリである場合は、 SnapCenter を使用して T1 または T3 で作成されたバックアップをリストアできます。これらの Snapshot バックアップは、ホスト 1 に接続されているストレージボリュームで使用できます。</block>
  <block id="a039a31368090cbccac747771d4314fe" category="paragraph">ホスト 2 （ T2 ）に作成されたバックアップを使用してリストアする必要がある場合は、ホスト 2 のストレージボリュームにある Snapshot コピーを使用する必要があります。このバックアップを利用するには、バックアップから NetApp FlexClone コピーを作成し、 FlexClone コピーをホスト 1 にマウントし、データを元の場所にコピーします。</block>
  <block id="cc77c2d84c4d0532580c7648fb527068" category="paragraph">単一の SnapCenter リソース構成では、両方の SAP HANA システムレプリケーションホストの両方のストレージボリュームに Snapshot コピーが作成されます。フォワードリカバリに使用できるのは、プライマリ SAP HANA ホストのストレージボリュームに作成された Snapshot バックアップのみです。セカンダリ SAP HANA ホストのストレージボリュームに作成された Snapshot コピーは、フォワードリカバリに使用できないクラッシュイメージです。</block>
  <block id="914fe0e173ea134cf6a261a23bb9be7c" category="paragraph">SnapCenter でのリストア処理は、次の 2 つの方法で実行できます。</block>
  <block id="da47f45ee3786a65f83ac527b48e3368" category="list-text">有効なバックアップのみをリストアしてください</block>
  <block id="efa0a43a073fecc57325043414b7410e" category="list-text">有効なバックアップとクラッシュ・イメージを含む ' リソース全体をリストアする以下のセクションでは '2 つの異なるリストア・オペレーションについて詳細に説明します</block>
  <block id="cae4c5e22b0e817592c5813faad601cf" category="paragraph">次の図は、単一の SnapCenter リソース構成を使用したリストア処理を示しています。</block>
  <block id="999b37dc80676993381a9707924e29c3" category="section-title">有効なバックアップの SnapCenter リストアのみを実行してください</block>
  <block id="f17433ab3965bf2e142fb4e1dff405e2" category="paragraph">次の図に、このセクションで説明するリストアとリカバリのシナリオの概要を示します。</block>
  <block id="36859b36c1aed5070a33950066055b92" category="paragraph">T1 のホスト 1 にバックアップが作成されました。ホスト 2 へのフェイルオーバーが実行されました。特定の時点で、ホスト 1 へのフェイルオーバーが再度実行されます。現在の時点では、ホスト 1 がプライマリホストになります。</block>
  <block id="880f2e960b16f01349f2ca3486d1bd6a" category="list-text">障害が発生したため、 T1 のホスト 1 で作成されたバックアップにリストアする必要があります。</block>
  <block id="4af51d00fac3b893eeec6663c152d51a" category="list-text">セカンダリホスト（ホスト 2 ）はシャットダウンされますが、リストア処理は実行されません。</block>
  <block id="7ded02ea0206a70a9c98edbe7828dcdb" category="list-text">ホスト 1 のストレージボリュームは、 T1 で作成されたバックアップに復元されます。</block>
  <block id="dd764570723e348d81f59c7841180784" category="list-text">フォワードリカバリは、ホスト 1 およびホスト 2 のログを使用して実行されます。</block>
  <block id="209c12c254cf841cccc9a950309a933e" category="list-text">ホスト 2 が開始され、ホスト 2 のシステムレプリケーションの再同期が自動的に開始されます。</block>
  <block id="c37725f2a48f8baeb00c03c364ea3a90" category="paragraph">次の図は、 SAP HANA Studio の SAP HANA バックアップカタログを示しています。強調表示されたバックアップは、 T1 のホスト 1 で作成されたバックアップを示しています。</block>
  <block id="5b426b49c093dba7596721df7ef7ef47" category="paragraph">リストア処理とリカバリ処理は SAP HANA Studio で開始されます。次の図に示すように、バックアップが作成されたホストの名前はリストアとリカバリのワークフローには表示されません。</block>
  <block id="f608de875db67dd46fec88060326d0b1" category="admonition">テストシナリオでは、データベースがオンラインのままの場合、 SAP HANA Studio で正しいバックアップ（ホスト 1 で作成されたバックアップ）を特定できました。データベースを使用できない場合は、 SnapCenter バックアップジョブログで適切なバックアップを特定する必要があります。</block>
  <block id="53b821249032276c494242cb38256d19" category="paragraph">SnapCenter では、バックアップが選択され、ファイルレベルのリストア処理が実行されます。ファイルレベルのリストア画面では、有効なバックアップのみがリストアされるように、ホスト 1 のボリュームのみが選択されます。</block>
  <block id="b01c5d1bb46aad41f5286805bebfd4f0" category="paragraph">リストア処理が完了すると、 SAP HANA Studio でバックアップが緑色で強調表示されます。ホスト 1 とホスト 2 のログバックアップのファイルパスがバックアップカタログに含まれているため、追加のログバックアップの場所を入力する必要はありません。</block>
  <block id="f286578015316aaefdf2a9d71504270e" category="paragraph">フォワードリカバリが完了すると、セカンダリホスト（ホスト 2 ）が起動し、 SAP HANA システムレプリケーションの再同期が開始されます。</block>
  <block id="4fb7470490997c95ffa1c5600ec5ecd3" category="admonition">セカンダリホストが最新の状態である（ホスト 2 に対してリストア処理が実行されていない）場合でも、 SAP HANA はすべてのデータの完全なレプリケーションを実行します。この動作は、 SAP HANA システムレプリケーションを使用したリストア処理とリカバリ処理後に標準で実行されます。</block>
  <block id="79dc576ddf59dc20fca6834461f7ac09" category="section-title">有効なバックアップとクラッシュイメージの SnapCenter リストア</block>
  <block id="da1933d80ef83cf1ec0c167fcc7d7f1e" category="list-text">セカンダリホスト（ホスト 2 ）がシャットダウンされ、 T1 クラッシュイメージが復元されます。</block>
  <block id="184f8e362eb69a36b78d905cfdd2bf4e" category="list-text">ホスト 2 が開始され、ホスト 2 のシステムレプリケーションの再同期が自動的に開始されます。</block>
  <block id="ce7fc220814189df737dd5a85d9ec6fe" category="paragraph">リストア処理を実行するには、 SnapCenter でリソースを完全に選択してください。両方のホストのボリュームがリストアされます。</block>
  <block id="a2d30341e8760144a82505e4f2584b74" category="paragraph">フォワードリカバリが完了すると、セカンダリホスト（ホスト 2 ）が起動し、 SAP HANA システムレプリケーションの再同期が開始されます。すべてのデータの完全なレプリケーションが実行されます。</block>
  <block id="8b882a288d6cd3bd9c486a64d890100d" category="summary">他の SAP HANA ホストで作成されたバックアップからのリストア処理は、両方の SnapCenter 構成オプションで有効なシナリオです。</block>
  <block id="9256b11afc32bceb372c74dfeeb3433a" category="doc">もう一方のホストで作成されたバックアップからのリストアとリカバリ</block>
  <block id="a45630ea5c1a78685a85cc9991055838" category="paragraph">T1 のホスト 1 にバックアップが作成されました。ホスト 2 へのフェイルオーバーが実行されました。現在の時点では、ホスト 2 がプライマリホストになります。</block>
  <block id="7f7f6d932a287ba353121a42032e859c" category="list-text">プライマリホスト（ホスト 1 ）がシャットダウンされます。</block>
  <block id="08ab08de2b84a1abeec853852fbb270b" category="list-text">ホスト 1 のバックアップデータ T1 は、ホスト 2 に復元されます。</block>
  <block id="54a006a73eb9494b19b57e09390aac49" category="list-text">フォワードリカバリは、ホスト 1 およびホスト 2 のログを使用して実行されます。</block>
  <block id="61eb913111b23af6c5cbbc8dbc814cc4" category="list-text">ホスト 1 が開始され、ホスト 1 のシステムレプリケーションの再同期が自動的に開始されます。</block>
  <block id="420b1e4ee829dd3eb714e9041891238b" category="paragraph">次の図は、 SAP HANA のバックアップカタログを示しており、リストア処理とリカバリ処理に使用した、ホスト 1 で作成されたバックアップを強調表示しています。</block>
  <block id="cd5d505ca2373cdc7d18efb2869033ed" category="paragraph">リストア処理には次の手順が含まれます。</block>
  <block id="2d08d5136ddc4086894bda34d14b24d0" category="list-text">ホスト 1 で作成したバックアップからクローンを作成します。</block>
  <block id="6043974c0cea7ef12e2b91ac16162035" category="list-text">クローンボリュームをホスト 2 にマウントします。</block>
  <block id="451bde33fa7b247f83d7b14fd93c467a" category="list-text">クローンボリュームのデータを元の場所にコピーします。</block>
  <block id="9fcc4360269dfed6a58662eaaff3f7a4" category="paragraph">SnapCenter で、バックアップが選択され、クローニング処理が開始されます。</block>
  <block id="3b8d6cba3e9f1c4ec4c62eaa46003ff0" category="paragraph">クローンサーバおよび NFS エクスポートの IP アドレスを指定する必要があります。</block>
  <block id="50d76361ddca8e22e3d17e0f39e45c9c" category="admonition">SnapCenter のシングルリソース構成では、 SAP HANA プラグインはデータベースホストにインストールされません。SnapCenter のクローニングワークフローを実行するには、 HANA プラグインがインストールされたすべてのホストをクローンサーバとして使用できます。</block>
  <block id="59edb5bba2c252f423a3013c5a80ed7a" category="paragraph">+ 別々のリソースを使用する SnapCenter 構成では、 HANA データベースホストがクローンサーバとして選択され、マウントスクリプトを使用してクローンがターゲットホストにマウントされます。</block>
  <block id="fe739341f732db5aff63cb28381d9cdc" category="paragraph">クローンボリュームのマウントに必要なジャンクションパスを特定するには、次の図に示すように、クローニングジョブのジョブログを確認します。</block>
  <block id="a5f909bb980ebce8c8c504b2b21da69a" category="paragraph">これで、クローンボリュームをマウントできるようになります。</block>
  <block id="c5dcd428c947792bd217fd89ee812f51" category="paragraph">クローンボリュームには、 HANA データベースのデータが含まれています。</block>
  <block id="1f20a3a37744f93109db368fed3d4d72" category="paragraph">データが元の場所にコピーされます。</block>
  <block id="cb014ba864354c430b0d6d7e306d1c0c" category="summary">このページでは、 SAP システムレプリケーションの設定オプションについて説明します。</block>
  <block id="76c0a8113c74eb76e36c8c87f7095211" category="doc">SAP システムレプリケーションの SnapCenter 設定オプション</block>
  <block id="b65fb91c7466f471e73d7a165cddad8f" category="paragraph">SAP HANA システムレプリケーション環境で NetApp SnapCenter ソフトウェアを使用してデータ保護を設定するには、次の 2 つの方法があります。</block>
  <block id="a6161fc735dff46e0f1e300b07198882" category="list-text">SnapCenter リソースグループ。 SAP HANA ホストと SnapCenter バージョン 4.6 以降を使用した自動検出の両方が含まれます。</block>
  <block id="27cd07c42b7b1163d4ec30ce77a50ba7" category="list-text">仮想 IP アドレスを使用する、両方の SAP HANA ホスト用の単一の SnapCenter リソース。</block>
  <block id="8cf962f6ac56a026f883cf2e827b0423" category="paragraph">SnapCenter 4.6 以降では、 HANA システムレプリケーション関係で設定された HANA システムの自動検出が SnapCenter でサポートされます。各ホストは、物理 IP アドレス（ホスト名）とストレージレイヤ上の個々のデータボリュームを使用して設定されます。2 つの SnapCenter リソースが 1 つのリソースグループにまとめられ、プライマリまたはセカンダリのホストが SnapCenter によって自動的に識別され、必要なバックアップ処理が適宜実行されます。SnapCenter で作成された Snapshot とファイルベースのバックアップの保持の管理は両方のホストで実行されるため、現在のセカンダリホストでも古いバックアップを削除できます。</block>
  <block id="cbcfd6defd0fc62b33d3178fca9312bf" category="paragraph">両方の SAP HANA ホストに単一リソース構成を使用する場合、単一の SnapCenter リソースは、 SAP HANA システムレプリケーションホストの仮想 IP アドレスを使用して構成されます。SAP HANA ホストの両方のデータボリュームが SnapCenter リソースに含まれています。SnapCenter のリソースは 1 つであるため、 SnapCenter で作成された Snapshot とファイルベースのバックアップの保持管理は、現在プライマリとセカンダリのどちらのホストにも依存しません。このオプションは、すべての SnapCenter リリースで使用できます。</block>
  <block id="56360ee768eb6691b2c48a27f2d5295a" category="paragraph">次の表に、 2 つの設定オプションの主な違いをまとめます。</block>
  <block id="624d27e661ea476c564f0a0e3d4759da" category="cell">SnapCenter 4.6 を使用したリソースグループ</block>
  <block id="26fa56c884b002243efdac83893ee4ce" category="cell">単一の SnapCenter リソースと仮想 IP アドレス</block>
  <block id="99f1744d8b70ed4b0920b180edf0fcaf" category="cell">バックアップ処理（ Snapshot およびファイルベース）</block>
  <block id="b683f173eb3a957cb9fcf3dee8b98d20" category="cell">リソースグループ内のプライマリホストの自動識別</block>
  <block id="d0a2e35f97d84456638a2e94141fefe0" category="cell">仮想 IP アドレスを自動的に使用する</block>
  <block id="cba3252df7023060b9d2ea4794c05c95" category="cell">保持管理（ Snapshot とファイルベース）</block>
  <block id="d7689d65ad93f6364ea756a32efbf386" category="cell">両方のホストで自動的に実行されます</block>
  <block id="8d7c7381c71c46d6b299eed1ea14ad55" category="cell">単一のリソースを自動的に使用します</block>
  <block id="c8fa3fe6d9be52e4e17b9869fed3de64" category="cell">バックアップ容量の要件</block>
  <block id="5bb47a2dec0018ff60254946131850c6" category="cell">バックアップはプライマリホストボリュームでのみ作成されます</block>
  <block id="0bd97517cd8fd61a12818f7ae5a32550" category="cell">バックアップは両方のホストボリュームで常に作成されます。2 番目のホストのバックアップはクラッシュ整合性のみであり、ロールフォワードには使用できません。</block>
  <block id="9ab07fad125b53ff193b9837f7d654bb" category="cell">現在のアクティブホストのバックアップをリストア処理に使用できます</block>
  <block id="85afbaa0de4ef1ff6c48b160c1b340ff" category="cell">リストアに使用できる有効なバックアップを特定するためのバックアップ前スクリプト</block>
  <block id="8d5e0cfc83e98d36864aa5b7f1ba6186" category="cell">リカバリ処理</block>
  <block id="a92469fe3f104489efc5db9c40bbbea5" category="cell">自動検出されたすべてのリソースと同じリカバリオプションを使用できます</block>
  <block id="54bdadbafa35816a3af014e9c09e968a" category="cell">手動でリカバリする必要があります</block>
  <block id="bae3dca5f2cc89808cfbe3a06c9cb114" category="admonition">一般に、リソースグループ構成オプションを SnapCenter 4.6 に設定して、 HANA システムのレプリケーションを有効にして HANA システムを保護することを推奨します。単一の SnapCenter リソース構成が必要になるのは、 SnapCenter の処理アプローチが中央のプラグインホストに基づいており、 HANA プラグインが HANA データベースホストに導入されていない場合だけです。</block>
  <block id="075a31e8a9e4995876239319585370dc" category="paragraph">この 2 つのオプションについては、以降のセクションで詳しく説明します。</block>
  <block id="02d0cc60ddfcc9dc29916a6b5d3b6cf2" category="summary">バックアップ処理は常にプライマリ SAP HANA ホストで実行されます。バックアップ処理に必要な SQL コマンドをセカンダリ SAP HANA ホストで実行することはできません。</block>
  <block id="8acd7da6dce942a7c8148e0a6e5875e2" category="doc">ストレージ Snapshot バックアップと SAP システムレプリケーション</block>
  <block id="1d3a0cbc6231799f2858090710d6f945" category="paragraph">SAP HANA のバックアップ処理では、プライマリとセカンダリの SAP HANA ホストが単一のエンティティになります。バックアップがプライマリ SAP HANA ホストとセカンダリ SAP HANA ホストのどちらで作成されたかに関係なく、 SAP HANA は同じバックアップカタログを共有し、リストアとリカバリにバックアップを使用します。</block>
  <block id="c492ffff6ae308c1f530d6498d7ecfe5" category="paragraph">いずれかのバックアップをリストアに使用したり、両方のホストからログバックアップを使用してリカバリを転送したりするには、両方のホストからアクセスできる共有ログバックアップの場所が必要です。共有ストレージボリュームを使用することを推奨します。ただし、ログバックアップのデスティネーションは、共有ボリューム内のサブディレクトリに分ける必要があります。</block>
  <block id="0dc8552d7c114c04ba4721d2bfce22a8" category="paragraph">各 SAP HANA ホストには、独自のストレージボリュームがあります。ストレージベースの Snapshot を使用してバックアップを実行すると、データベースと整合性のある Snapshot がプライマリ SAP HANA ホストのストレージボリューム上に作成されます。</block>
  <block id="20298f12913ee9159d89657f340f41d0" category="paragraph">ホスト 2 へのフェイルオーバーが実行されると、ホスト 2 がプライマリホストになり、ホスト 2 でバックアップが実行され、ホスト 2 のストレージボリュームに Snapshot バックアップが作成されます。</block>
  <block id="ec9f7dc4c9415267c560fe9756643a87" category="paragraph">ホスト 2 で作成されたバックアップは、ストレージレイヤで直接リストアできます。ホスト 1 に作成したバックアップを使用する場合は、ホスト 1 のストレージボリュームからホスト 2 のストレージボリュームにバックアップをコピーする必要があります。フォワードリカバリでは、両方のホストからのログバックアップが使用されます。</block>
  <block id="d53230f85b50903f17f7e6099737f107" category="summary">SAP HANA システムレプリケーションは、一般に、 SAP HANA データベースの高可用性またはディザスタリカバリ解決策として使用されます。SAP HANA システムレプリケーションには、ユースケースや可用性の要件に応じて、さまざまな動作モードが用意されています。</block>
  <block id="ac95c867fdf2157d0248719b002ae0f0" category="paragraph">組み合わせて使用できる主なユースケースは次の 2 つです。</block>
  <block id="c34a01f37570a68dbcba0f7ef58b79c6" category="list-text">専用のセカンダリ SAP HANA ホストを使用した、ゼロの Recovery Point Objective （ RPO ；目標復旧時点）と最小の Recovery Time Objective （ RTO ；目標復旧時間）による高可用性。</block>
  <block id="d824f0f483d8766968c3873c43c7e813" category="list-text">遠隔地での災害復旧。セカンダリ SAP HANA ホストは、通常運用時の開発やテストにも使用できます。</block>
  <block id="f5c1fbf48c6494a4f2e5ddc50e73ce6e" category="section-title">RPO がゼロで RTO が最小限のハイアベイラビリティ</block>
  <block id="af656bf36a5e2d1cdf132f7992f06b9e" category="paragraph">システムレプリケーションでは、セカンダリ SAP HANA ホストのメモリにプリロードされたテーブルを使用して同期レプリケーションが設定されます。この高可用性解決策を使用して、ハードウェアやソフトウェアの障害に対処できるほか、 SAP HANA ソフトウェアのアップグレード中の計画的停止（ダウンタイムはほぼゼロ）を軽減できます。</block>
  <block id="1634b98ad5173e165735c803c11fe9d5" category="paragraph">フェイルオーバー処理は、多くの場合、サードパーティ製のクラスタソフトウェアを使用するか、 SAP Landscape Management ソフトウェアでワンクリックで実行することで自動化されます。</block>
  <block id="3d3f4f563a8744c58df8ea6e38510f02" category="paragraph">バックアップ要件の観点では、どの SAP HANA ホストがプライマリまたはセカンダリであるかに関係なく、バックアップを作成できる必要があります。バックアップを作成したホストに関係なく、共有バックアップインフラを使用してバックアップがリストアされます。</block>
  <block id="511a3a3dfd265b06ef79626d79c520e7" category="paragraph">このドキュメントの残りの部分では、ハイアベイラビリティ解決策として構成された SAP システムレプリケーションを使用したバックアップ処理について説明します。</block>
  <block id="24d82a388e886346237cd51fe934aa03" category="section-title">遠隔地での災害復旧</block>
  <block id="118abb1eac5a98e2067a4403636320af" category="paragraph">システムレプリケーションは、セカンダリホストのメモリにテーブルがプリロードされていない非同期レプリケーションで構成できます。この解決策はデータセンターの障害に対処するために使用され、通常は手動でフェイルオーバー処理が実行されます。</block>
  <block id="6daa00da4eeb35d26853e03f23ef0546" category="paragraph">バックアップ要件に関しては、データセンター 1 での通常運用中、およびデータセンター 2 でのディザスタリカバリ中に、バックアップを作成できる必要があります。データセンター 1 と 2 には独立したバックアップインフラがあり、ディザスタフェイルオーバーの一環としてバックアップ処理がアクティブ化されます。通常、バックアップインフラは共有されません。もう一方のデータセンターで作成されたバックアップをリストアすることはできません。</block>
  <block id="0844bd2427e754de1d07ca91d15284a5" category="cell">ドキュメントバージョン履歴</block>
  <block id="77fce67ff1ced73f063cdd19c439b627" category="cell">2018 年 10 月</block>
  <block id="b9365bb9132d1eb8770275a763fc5d69" category="cell">2022 年 1 月</block>
  <block id="bc86535b64f45ec20770222ebaa5ca21" category="cell">SnapCenter 4.6 HANA システムレプリケーションのサポートに対応するように更新</block>
  <block id="02fa3d38f575ae1d4c7d0f5663a0d3ed" category="sidebar">SnapCenter を使用した SAP HANA システムレプリケーションのバックアップとリカバリ</block>
  <block id="4bb12dc6461f1d5fa4e11ed67fdeef9e" category="sidebar">SAP HANA システムレプリケーションの概要</block>
  <block id="152277675a8ef46c12f1dc91f2f53ede" category="paragraph">SAP HANA 向けのネットアップ認定ストレージソリューションの一覧については、を参照してください<block ref="a3976abaebe3520fd66c465c4d7747d7" category="inline-link-rx"></block>。</block>
  <block id="18cab9085e2115741cf08f1964299a5a" category="paragraph">本ドキュメントでは、 NFS プロトコルバージョン 3 （ NFSv3 ）または NFS プロトコルバージョン 4 （ NFSv4.1 ）の ONTAP 設定要件について説明します。</block>
  <block id="c16b7b6c06ec01825313e31feb82c6d2" category="cell">rsize=1048576 、 wsize=262144</block>
  <block id="5f99a6ad54bfd8d0c68c8cc9f709365b" category="inline-link">SAP ノート 1900823</block>
  <block id="8e473bb8179de06c9675fded85db8531" category="paragraph">SAP HANA の容量要件の詳細な概要については、を参照してください<block ref="7c7e574e6ad6c7603298dd899482269f" category="inline-link-rx"></block> ホワイトペーパー。</block>
  <block id="0b65064648e048922c198e4d6e2cafc1" category="admonition">各データボリュームを接続するために異なるストレージ仮想インターフェイスを使用して、ボリュームごとに異なる TCP セッションを使用するか、使用している OS で利用可能な場合は nConnect マウントオプションを使用します。</block>
  <block id="4a09ae73b23148acb0508b47589e3623" category="cell">rsize=1048576 、 wsize=262144 、</block>
  <block id="f9d7623ba6cc83509340e737618f63c2" category="paragraph">次の例は、 SID=NF2 で、 NFSv3 を使用し、書き込みの場合は NFS 転送サイズが 1MB 、読み取りの場合は 256K の、シングルホスト SAP HANA データベースを示しています。</block>
  <block id="b6002aa673859c29cc8fc6915c01cf54" category="paragraph">次の例は、 SID=NF2 で、データファイルシステムとログファイルシステムに NFSv4.1 を使用し、「 /hana/shared 」ファイルシステムと「 /usr/sap/nf2 」ファイルシステムに NFSv3 を使用する、マルチホスト SAP HANA データベースを示しています。書き込みでは、読み取りの場合は 1MB 、書き込みの場合は 256K の NFS 転送サイズが使用されます。</block>
  <block id="4ba3e1c058ef7fff97064b76f2483b24" category="paragraph">SAP HANA の容量要件の詳細な概要については、を参照してください<block ref="7c7e574e6ad6c7603298dd899482269f" category="inline-link-rx"></block> ホワイトペーパーを添付。</block>
  <block id="45bb1f13b573370e5659e113eaa6e2a7" category="paragraph">本ドキュメントでは、 NFS バージョン 3 （ NFSv3 ）プロトコルまたは NFS バージョン 4 （ NFSv4.1 ）プロトコルの ONTAP 設定要件について説明します。</block>
  <block id="bc3bbc9b5df10cfc4c9d9747e9b15e4f" category="paragraph">SAP HANA 向けのネットアップ認定ストレージソリューションの一覧については、を参照してください<block ref="2585df8f0f74fb3d91dc9a930fa3213b" category="inline-link-rx"></block>。</block>
  <block id="97bfb54320c9268725cfbb374a5168fb" category="paragraph">SAP HANA 向けのネットアップ認定ストレージソリューションの一覧については、を参照してください<block ref="a3976abaebe3520fd66c465c4d7747d7" category="inline-link-rx"></block>。</block>
  <block id="71eda0c30c9b341a4814ddd0954d1862" category="summary">このセクションでは ' ストレージ・システム ' 認証情報 ' ホスト 'hdbsql クライアント ' ポリシーなどの SnapCenter の初期設定について説明します</block>
  <block id="4386d3e7902f293404d64c4abe1e295d" category="doc">SnapCenter の初期設定</block>
  <block id="a68a95b40735fd6822c60b05c35bb544" category="paragraph">初期設定には、次の手順が含まれます。</block>
  <block id="2139fe384d5ae165545994dff01961d9" category="list-text">ストレージシステムの構成：</block>
  <block id="a3d3f6c9fdb623aaaa9ab78bf4af2a18" category="list-text">プラグインのインストールに使用するクレデンシャルの設定</block>
  <block id="9a6b88f68b9503b8b8210d2f30184988" category="list-text">中央の HANA プラグインホストの場合：</block>
  <block id="d1f6ddc617c4c51ad270c9463ed06d40" category="list-text">ホスト構成と SAP HANA プラグインの導入</block>
  <block id="2911ecfc915016f253bcd0e0c564fe74" category="list-text">SAP HANA hdbsql クライアントソフトウェアのインストールと設定</block>
  <block id="912ee21b90ba32aba0daa8f0d8e4e314" category="list-text">ポリシー設定</block>
  <block id="d8243d84dff5ee3bd86e7f3bae3587b5" category="paragraph">以降のセクションでは、初期設定手順について説明します。</block>
  <block id="24f5e840a11590fca0575cc142d6ef35" category="list-text">SnapCenter サーバ GUI にログインします。</block>
  <block id="29ca4e3da48110ba26ba87b3d9a90f16" category="list-text">[ ストレージシステム ] を選択します。</block>
  <block id="29e64158d13453d65dbd12eb9c6f1d75" category="admonition">画面では、 ONTAP SVM または ONTAP クラスタなどのストレージシステムタイプを選択できます。ストレージシステムを SVM レベルで構成する場合は、各 SVM に対して管理 LIF を設定する必要があります。代わりに、クラスタレベルで SnapCenter 管理アクセスを使用することもできます。SVM 管理を使用する例を次に示します。</block>
  <block id="70e5fd718721e814176b70aa732f9153" category="list-text">New をクリックしてストレージシステムを追加し、必要なホスト名とクレデンシャルを入力します。</block>
  <block id="3f20bb8d817b9e6936e5c249b6c113be" category="inline-link">SnapCenter インストールガイド</block>
  <block id="b8bc58e2f5a80c623945771af4f0a8b2" category="admonition">スクリーンショットに示されているように、 SVM ユーザを vsadmin ユーザにする必要はありません。通常、ユーザは SVM 上で設定し、バックアップとリストアの処理を実行するために必要な権限を割り当てます。必要な権限の詳細については、を参照してください<block ref="7b715dbc2fecfcb275c5209e8e720c86" category="inline-link-rx"></block> 「 Minimum ONTAP Privileges Required 」の項を参照してください。</block>
  <block id="99e1f8e6cfae3062c90ba4e3fe852eee" category="list-text">[ その他のオプション ] をクリックして、ストレージプラットフォームを構成します。</block>
  <block id="bf28bc3620d2e85e431236bc6ef90022" category="paragraph">ストレージプラットフォームは、 FAS 、 AFF 、 ONTAP Select 、 Cloud Volumes ONTAP のいずれかです。</block>
  <block id="22563a02dd4dab831f4bae0ae56cf40e" category="admonition">SnapVault ターゲットまたは SnapMirror ターゲットとして使用されているシステムの場合は、セカンダリアイコンを選択します。</block>
  <block id="7a09a8e6339e45c4ca4a38a196028cb4" category="list-text">必要に応じてストレージシステムを追加この例では、追加のオフサイトバックアップストレージとディザスタリカバリ用ストレージが追加されています。</block>
  <block id="9a54594daffa2c01e5e883a01cf1f6f5" category="section-title">クレデンシャルの設定</block>
  <block id="6ebb04d93cddc56ead5028b5dc46876e" category="list-text">[ 設定 ] に移動し、 [ 資格情報 ] を選択して、 [ 新規 ] をクリックします</block>
  <block id="0f3e3833c619c41b3967f317840dbd8d" category="list-text">Linux システムへのプラグインのインストールに使用するユーザのクレデンシャルを入力します。</block>
  <block id="a848ef1fa53d291c03c4cf559f500322" category="list-text">Windows システムへのプラグインのインストールに使用するユーザのクレデンシャルを入力します。</block>
  <block id="47f3c6b42d0334c31137562aca2a0b88" category="paragraph">次の図に、設定されたクレデンシャルを示します。</block>
  <block id="13755548f18d3df287a2229ebd3d97dc" category="section-title">中央のプラグインホストへの SAP HANA プラグインのインストール</block>
  <block id="8d4bd2a661b6281b4d82cc00590252be" category="paragraph">ラボのセットアップでは、 SnapCenter サーバは中央の HANA プラグインホストとしても使用されます。SnapCenter サーバを実行する Windows ホストがホストとして追加され、 SAP HANA プラグインが Windows ホストにインストールされます。</block>
  <block id="be95026bc00e897261477d1bef0c1058" category="admonition">SAP HANA プラグインには、 Java 64 ビットバージョン 1.8 が必要です。SAP HANA プラグインを導入する前に、ホストに Java をインストールする必要があります。</block>
  <block id="bf0373d0d66d725186d3e84024b089fd" category="list-text">Hosts に移動し、 Add をクリックします。</block>
  <block id="fb8a6d76e5ad5c489027a82c42ccd333" category="list-text">必要なホスト情報を指定します。Submit をクリックします。</block>
  <block id="3da08ec555eef13b285f865100858ba8" category="paragraph">次の図は、 HANA プラグインの導入後に構成されたすべてのホストを示しています。</block>
  <block id="ff1e6c37ad8f4f2e8e74ab59aea74c3f" category="inline-link">SAP サポートポータル</block>
  <block id="c057c768d3ac32304fd365c3084c8fa9" category="paragraph">SAP HANA hdbsql クライアントソフトウェアは、 SAP HANA プラグインがインストールされているホストと同じホストにインストールする必要があります。ソフトウェアはからダウンロードできます<block ref="fbd74ee0e1039f20414be5f6472224aa" category="inline-link-rx"></block>。</block>
  <block id="4b9d3e971ab2f9958c9a94799f2fe172" category="paragraph">リソース設定中に設定された HDBSQL OS ユーザは、 hdbsql 実行可能ファイルを実行できる必要があります。hdbsql 実行ファイルへのパスは 'hana.properties` ファイルで設定する必要があります</block>
  <block id="140710a8dd48496a1ea3b09f2799c408" category="list-text">Windows の場合</block>
  <block id="82c6ab7bfe1f9fbf789b4f7f57b56c24" category="list-text">Linux ：</block>
  <block id="60ed9fa3660d9d3970b9500659efd5cd" category="section-title">ポリシー設定</block>
  <block id="701ae19153f59cf5b064428875e644e2" category="list-text">レプリケーションを行わずに 1 時間ごとのバックアップを行うためのポリシー： LocalSnap</block>
  <block id="c6120c0384590236fdec4fc6ebd300ae" category="list-text">SnapVault レプリケーションを使用した日次バックアップのポリシー：「 LocalSnapAndSnapVault'</block>
  <block id="ec5a8f62de274a4de661b7a6c7a31f7b" category="list-text">ファイル・ベースのバックアップを使用した週次ブロック整合性チェックのポリシー： BlockIntegrityCheck</block>
  <block id="a160185a60557a18fe2878ba31857c3b" category="paragraph">以降のセクションでは、これら 3 つのポリシーの設定について説明します。</block>
  <block id="b923bc9dd59677ab62e9184acf6a8a1d" category="list-text">[ 設定 ] 、 [ ポリシー ] の順に移動し、 [ 新規 ] をクリックします</block>
  <block id="202b5482b689d83a7038543a22d23566" category="list-text">ポリシー名と概要を入力します。次へをクリックします。</block>
  <block id="03fcbdc3a76525840c5cd7acfcf003e1" category="list-text">バックアップタイプとして「 Snapshot Based 」を選択し、スケジュール頻度を選択するには「 Hourly 」を選択します。</block>
  <block id="9c04035bf698696ac176d8f27a3b6cbb" category="list-text">オンデマンドバックアップの保持を設定します。</block>
  <block id="56b7270384a3729bb3f980591bc67da4" category="list-text">スケジュールされたバックアップの保持を設定します。</block>
  <block id="cf97995427598a8ba429f96a4a274f02" category="list-text">レプリケーションオプションを設定します。この場合、 SnapVault または SnapMirror の更新は選択されていません。</block>
  <block id="e1147a04a00490e6c50fca223d7f0bbc" category="list-text">[ 概要 ] ページで、 [ 完了 ] をクリックします。</block>
  <block id="bf16ce3407c41ba06c774661a3399961" category="section-title">SnapVault レプリケーションを行う日次 Snapshot バックアップのポリシー</block>
  <block id="b312ca1a1b34e03353fb8562c080bf37" category="list-text">バックアップタイプを Snapshot ベースに、スケジュール頻度を「毎日」に設定します。</block>
  <block id="5f4da9066e44ef7d68263c60abc054d7" category="list-text">ローカル Snapshot コピーの作成後に SnapVault を更新するを選択します。</block>
  <block id="84d0ea6dd0c20f51d709dc5137c2df23" category="inline-link-macro">「オフサイトのバックアップストレージへのデータ保護の構成」</block>
  <block id="85a1074fe49bf71488c2afb543c5d5e9" category="section-title">週次ブロック整合性チェックのポリシー</block>
  <block id="9f96a4a39e01d723f3c140a0ce4c763e" category="list-text">バックアップタイプを「ファイルベース」に、スケジュール頻度を「毎週」に設定します。</block>
  <block id="48b018e173131b38947be1f4747f02fd" category="summary">SnapCenter は、アプリケーションと整合性のあるデータ保護を実現する拡張性に優れたユニファイドプラットフォームです。SnapCenter では一元的な管理と監視が可能ですが、一方で、アプリケーション固有のバックアップ、リストア、クローニングのジョブの管理を各ユーザに委譲することができます。</block>
  <block id="26e2418d177df1dddb008e455ce28752" category="doc">SnapCenter アーキテクチャ</block>
  <block id="4a8478781fce30dd0844fa495323657c" category="section-title">SnapCenter コンポーネント</block>
  <block id="6b6680d81f3584fb2812532f734ed372" category="paragraph">SnapCenter には、 SnapCenter サーバ、 Windows 用 SnapCenter プラグインパッケージ、および Linux 用 SnapCenter プラグインパッケージが含まれています。各パッケージには、さまざまなアプリケーションやインフラコンポーネント用の SnapCenter へのプラグインが含まれています。</block>
  <block id="dd891a45b8606deb4a6fa0a063179e5f" category="paragraph">SnapCenter のカスタムプラグインを使用すると、独自のプラグインを作成し、同じ SnapCenter インターフェイスを使用してアプリケーションを保護できます。</block>
  <block id="85c9db69d08b28f5cf1e67e13162f818" category="paragraph">次の図は、 SnapCenter のコンポーネントを示しています。</block>
  <block id="69e46b0218eefa9aa82983c5ee743ae3" category="list-text">SnapCenter のリソースページ</block>
  <block id="1911e0ada44759ee3994a93b354b6e23" category="inline-link"><block ref="1911e0ada44759ee3994a93b354b6e23" category="inline-link-rx"></block></block>
  <block id="d127c7070231e882bd97e8f2760d0a4f" category="list-text">SnapCenter ソフトウェアのドキュメント</block>
  <block id="532841fbf704673d5f6dc65db8d8cf66" category="inline-link"><block ref="532841fbf704673d5f6dc65db8d8cf66" category="inline-link-rx"></block></block>
  <block id="5d78d056a947fb2b364bf2803792ba96" category="paragraph"><block ref="5d78d056a947fb2b364bf2803792ba96" category="inline-link-rx"></block></block>
  <block id="5a27c7287063d118cc647ae4518ed81a" category="list-text">TR-4667 ：『 Automating SAP System Copies Using the SnapCenter 』</block>
  <block id="70135b5e9cdadcbec80ac7a6b41e1166" category="list-text">TR-4719 ：『 SAP HANA System Replication 、 Backup and Recovery with SnapCenter 』</block>
  <block id="98d29b74b4819c66a9b3a065f317875a" category="list-text">TR-4018 ：『 Integrating NetApp ONTAP Systems with SAP Landscape Management 』</block>
  <block id="0efddc6f7a1abd249b378561d3fc08dd" category="inline-link"><block ref="0efddc6f7a1abd249b378561d3fc08dd" category="inline-link-rx"></block></block>
  <block id="d7b3b01598dae86f75591cb7f2b59ec3" category="paragraph"><block ref="d7b3b01598dae86f75591cb7f2b59ec3" category="inline-link-rx"></block></block>
  <block id="a71c27bab5cf27201389a84025d42bb9" category="paragraph"><block ref="a71c27bab5cf27201389a84025d42bb9" category="inline-link-rx"></block></block>
  <block id="7b41e76f621bf4b9f9ea9bbe09c2d06e" category="summary">SnapCenter の設定は、初期設定とリソース固有の設定の 2 つの主要な領域に分けることができます。</block>
  <block id="b1edd4b10b97c3eac95b42952c1bf03d" category="paragraph">SnapCenter の設定は、次の 2 つの主要な領域に分けることができます。</block>
  <block id="306f5b2709c954bcbf7b6bdf2cd70705" category="list-text">* 初期構成。 * 個々の SAP HANA データベースに依存しない一般的な構成を取り上げます。リソース固有の設定を実行する際に選択される、ストレージシステム、中央 HANA プラグインホスト、ポリシーなどの構成。</block>
  <block id="2df9975b7ffe963062b41c54fd531806" category="list-text">* リソース固有の構成。 * SAP HANA システム固有の構成を対象としており、各 SAP HANA データベースに対して実行する必要があります。</block>
  <block id="cded40649c715307baec2ad81edb422d" category="paragraph">次の図に、構成コンポーネントとその依存関係の概要を示します。緑のボックスは、 SnapCenter の外部で実行する必要がある設定手順を示しています。青いボックスは、 SnapCenter GUI を使用して実行する手順を示しています。</block>
  <block id="9de05392c0c4ce6f18c64aaa8a01e16e" category="paragraph">初期設定では、次のコンポーネントがインストールおよび設定されます。</block>
  <block id="740b5ebffd57168ed255badf5f5e2302" category="list-text">* ストレージシステム。 * SAP HANA システムで使用されるすべての SVM のクレデンシャル設定。通常は、プライマリストレージ、オフサイトバックアップストレージ、ディザスタリカバリストレージを構成します。</block>
  <block id="149b90296b82f49dfb4a9ebabe53de1e" category="admonition">ストレージクラスタのクレデンシャルは、個々の SVM のクレデンシャルの代わりにを設定することもできます。</block>
  <block id="1e76e4d9af64a701de837e47ddaed309" category="list-text">* 資格情報。 * SAP HANA プラグインをホストに導入するために使用する資格情報の設定。</block>
  <block id="4d2bc301f9097bb554e8b38a8ddc129a" category="list-text">* ホスト（中央 HANA プラグインホスト用）。 * SAP HANA プラグインの導入。SAP HANA hdbclient ソフトウェアのホストへのインストールSAP hdbclient ソフトウェアは手動でインストールする必要があります</block>
  <block id="abc6b9384a85ef20a84780c190dcfc2f" category="list-text">* ポリシー。 * バックアップタイプ、保持、およびレプリケーションの構成。通常、ローカル Snapshot コピー用、 SnapVault レプリケーション用、およびファイルベースのバックアップ用に、少なくとも 1 つのポリシーが必要です。</block>
  <block id="18234143eef999d6f137e5d529702d66" category="paragraph">リソース固有の設定は、 SAP HANA データベースごとに実行する必要があります。これには、次の設定が含まれます。</block>
  <block id="974a71553a5ba330017cecb3d2984ece" category="list-text">SAP HANA の非データボリュームのリソース構成：</block>
  <block id="62d13dde5f364cd839a8269393c2ee10" category="list-text">ストレージシステムおよびボリューム</block>
  <block id="8787522e74280daf3e68d9c8596f8ffa" category="list-text">SAP hdbuserstore キーの設定：</block>
  <block id="670a53ee9043448b355010ddd1300a1b" category="list-text">特定の SAP HANA データベースの SAP hdbuserstore キー設定は、 HANA プラグインの導入場所に応じて、中央のプラグインホストまたは HANA データベースホストのいずれかで実行する必要があります。</block>
  <block id="4c78668de8219a6a279bac0459f8ed7b" category="list-text">自動検出された SAP HANA データベースのリソース：</block>
  <block id="58022f952ea9031246441a94db279c4a" category="list-text">データベースホストへの SAP HANA プラグインの導入</block>
  <block id="9902d1ebd70cb48fb95a10d3f3599577" category="list-text">hdbuserstore キーを入力します</block>
  <block id="7c504e357529e86f997175b76982b26c" category="list-text">SAP HANA データベースの手動リソース構成：</block>
  <block id="2e4ff7286ed5779f8bf068a582fa75c7" category="list-text">SAP HANA データベースの SID 、プラグインホスト、 hdbuserstore キー、ストレージシステム、ボリューム</block>
  <block id="b0df6141ec744a7e465d26f70a8b3925" category="list-text">リソース保護の構成：</block>
  <block id="3c9c3596532fc9e82b7dd3cb345f2e2d" category="list-text">必要なポリシーを選択できます</block>
  <block id="fea5a24c8c428edda2fdbda8affc1e25" category="list-text">各ポリシーのスケジュールの定義</block>
  <block id="18e4ec50bcd303126f2fa3c20d92e85d" category="list-text">ONTAP データ保護構成：</block>
  <block id="751e9e7f28f705474333bcddb9460e70" category="list-text">バックアップをオフサイトのバックアップストレージにレプリケートする場合にのみ必要です。</block>
  <block id="37dce88dd05881d1ac0110266b4dab43" category="list-text">関係と保持の定義。</block>
  <block id="be52be2434eedb68a3850faec724281a" category="summary">以降のセクションでは、 3 種類のシナリオと設定例について、リストアとリカバリのワークフローを説明します。</block>
  <block id="f44580ef6b3e3cb10e325c33bde13b2b" category="list-text">リストアとリカバリの自動化：</block>
  <block id="fbc1e70493253a34b3d5c45f838561ef" category="list-text">自動検出された HANA システム SS1</block>
  <block id="a516d8aebd78bc70b89cee03366a17b5" category="list-text">NFS を使用した SAP HANA シングルホスト MDC のシングルテナントシステム</block>
  <block id="5e1ac231a5151a48d4cc9dbf052b0add" category="list-text">シングルテナントのリストアとリカバリ：</block>
  <block id="3e9f1da5bf97da92f4e351c171d7c843" category="list-text">自動検出された HANA システム SM1</block>
  <block id="4a3981ff09c013c89b6f575d709cc80f" category="list-text">SAP HANA シングルホスト MDC の NFS を使用したマルチテナントシステム</block>
  <block id="eb5cbe641700ce67df71d411b7e4ad10" category="list-text">手動リカバリによるリストア：</block>
  <block id="27ffcd98e45c55fb51621ebffaa5dd59" category="list-text">手動構成の HANA システム SS2</block>
  <block id="9e522ea8faccb528a5f4b05e6f2fdea9" category="paragraph">以降のセクションでは、 SAP HANA シングルホストと複数のホストおよび Fibre Channel SAN Attached HANA システムの違いを示します。</block>
  <block id="43e64ba823bc1d86bfae102cfdbccfac" category="paragraph">以下の例では、手動リカバリを実行するツールとして SAP HANA Studio を使用しています。SAP HANA Cockpit または HANA の SQL ステートメントを使用することもできます。</block>
  <block id="ea97f578f1fa3dc5c59fcebd659118ba" category="section-title">リストアとリカバリの自動化</block>
  <block id="d911b25c0cda59930d125abfb2bd7cd5" category="paragraph">SnapCenter 4.3 では、 SnapCenter によって自動検出された HANA シングルコンテナシステムまたは MDC シングルテナントシステムで自動リストア処理とリカバリ処理がサポートされています。</block>
  <block id="4344ed84200b3882e693332ce520922b" category="paragraph">リストア処理とリカバリ処理の自動化は、次の手順で実行できます。</block>
  <block id="d16a7b3211c17242dd4dbf5f68703753" category="list-text">リストア処理に使用するバックアップを選択します。バックアップは、次のストレージ・オプションから選択できます。</block>
  <block id="86b11f41cdd4202ed814b1453f2dd058" category="list-text">プライマリストレージ</block>
  <block id="e56982c0553019ef1a653c1403027b7a" category="list-text">オフサイトのバックアップストレージ（ SnapVault ターゲット）</block>
  <block id="23d538532237d8a8aad1ec8328b20a9c" category="list-text">リストアタイプを選択します。[Complete Restore with Volume Revert or Without Volume Revert] を選択します。</block>
  <block id="57d518b01238d5893661711dce71f42a" category="admonition">ボリュームリバートオプションを使用できるのは、プライマリストレージからのリストア処理と、 HANA データベースでストレージプロトコルとして NFS を使用している場合のみです。</block>
  <block id="d1cb9744f6bb099dfa460ee7e6fd6f3f" category="list-text">次のオプションからリカバリタイプを選択します。</block>
  <block id="0dea40bb05391c5e1484336ca1b9d2f8" category="list-text">を最新の状態に変更します</block>
  <block id="d85bd207dd9f51505e34db7d28499176" category="list-text">ポイントインタイム</block>
  <block id="e16159b7e258bed62fe7e3f6170ae607" category="list-text">特定のデータのバックアップ</block>
  <block id="17f8b49df414bfdc7181fe5fa83d6253" category="list-text">リカバリなし</block>
  <block id="ff7164c1629743c045a5b37e453d7a0c" category="admonition">選択したリカバリタイプは、システムとテナントデータベースのリカバリに使用されます。</block>
  <block id="ef0f611cbdf3d8898ab0d52d76536b96" category="paragraph">次に、 SnapCenter は次の処理を実行します。</block>
  <block id="84a899d6360c249dd29e2cbfe8043ad5" category="list-text">HANA データベースが停止します。</block>
  <block id="102e0250e0792ade0641ba7dbb6bde8b" category="list-text">データベースがリストアされます。</block>
  <block id="dbe89fd565f0d4bcf122bb64b452eb89" category="paragraph">選択したリストアタイプと使用するストレージプロトコルに応じて、異なる処理が実行されます。</block>
  <block id="271593abf4b17da42855c88c0b5260cd" category="list-text">NFS と Volume Revert を選択した場合は、 SnapCenter がボリュームをアンマウントし、ストレージレイヤのボリュームベースの SnapRestore を使用してボリュームをリストアし、ボリュームをマウントします。</block>
  <block id="0d115dbcb53c942ef1a2c278e8b04a83" category="list-text">NFS を選択し、ボリュームの復元を選択しない場合、 SnapCenter はストレージレイヤで単一ファイルの SnapRestore 操作を使用してすべてのファイルを復元します。</block>
  <block id="b2b23725cc4472e5d3d9f090a0128d9c" category="list-text">ファイバチャネル SAN を選択した場合、 SnapCenter は LUN をアンマウントし、ストレージレイヤでの単一ファイルの SnapRestore 処理を使用して LUN をリストアし、その LUN を検出してマウントします。</block>
  <block id="1bb7372248fe80609e0de816e9614f0a" category="list-text">データベースをリカバリします。</block>
  <block id="7d3d3cd4a0187d7ec48c9b25fb2a67d3" category="list-text">システムデータベースがリカバリされます。</block>
  <block id="9b2e306e1a7eea21bcbcc42bb480fd06" category="list-text">テナントデータベースがリカバリされます。</block>
  <block id="c7be0866b1c5a3a9a9cff3b5c3857636" category="paragraph">または、 HANA のシングルコンテナシステムの場合、リカバリは 1 つの手順で実行されます。</block>
  <block id="8a1c1220be0aeb46be469fc6f2c7238c" category="list-text">HANA データベースが起動します。</block>
  <block id="f70441c1cb725407f3487c3ec6cd8c4b" category="admonition">リカバリなしを選択した場合は、 SnapCenter が終了し、システムとテナントデータベースのリカバリ処理を手動で実行する必要があります。</block>
  <block id="c92ee67cd936173cf9044234db581919" category="paragraph">このセクションでは、自動検出された HANA システム SS1 （ SAP HANA シングルホスト、 NFS を使用した MDC シングルテナントシステム）の自動リストア処理とリカバリ処理の手順を説明します。</block>
  <block id="74a4551b3bbd8432ec1407907102cc63" category="list-text">SnapCenter で、リストア処理に使用するバックアップを選択します。</block>
  <block id="dbfa37eb1460f2612056e50c424882fd" category="admonition">プライマリまたはオフサイトのバックアップストレージからリストアを選択できます。</block>
  <block id="ede6a2ebef849cace69b6ddea050eebb" category="list-text">リストアの範囲とタイプを選択します。</block>
  <block id="f4b7bc700da692e66bce6ad4f37490ac" category="paragraph">次の 3 つのスクリーンショットは、 NFS を使用したプライマリからのリストア、 NFS を使用したセカンダリからのリストア、ファイバチャネル SAN を使用したプライマリからのリストアのリストアオプションを示しています。</block>
  <block id="04d4b6f0308c909f19dd66790d3bf5cb" category="paragraph">プライマリストレージからリストアする場合のリストアタイプのオプション。</block>
  <block id="3f37e843bef6062d9f6d21340311b067" category="admonition">ボリュームリバートオプションは、 NFS でプライマリからのリストア処理でのみ使用できます。</block>
  <block id="d71f7098f62d47b862323fdd9a79c20d" category="paragraph">オフサイトのバックアップストレージからリストアする場合のリストアタイプのオプション。</block>
  <block id="2a531455e829eab1b5c413bdf3a9c09b" category="paragraph">ファイバチャネル SAN を使用してプライマリストレージからリストアする場合のリストアタイプのオプション。</block>
  <block id="998316bca47edd7199d19f50f506130b" category="list-text">Recovery Scope を選択し、ログバックアップとカタログバックアップの場所を指定します。</block>
  <block id="d062aba8fc1c88e1e40c5273b2f25f70" category="admonition">SnapCenter では、 HANA の global.ini ファイルのデフォルトパスまたは変更されたパスを使用して、ログとカタログのバックアップの場所が事前に入力されます。</block>
  <block id="664739985774f32e8e69169261c44cb1" category="list-text">オプションのリストア前のコマンドを入力します</block>
  <block id="32d6abea376025ea0f7ec8c6f9308b3c" category="list-text">オプションのリストア後のコマンドを入力します。</block>
  <block id="d5580d32ca7142b15df13d2e13ce81e9" category="list-text">オプションの E メール設定を入力します。</block>
  <block id="52ffc18711958ea3b01ea643a536b477" category="list-text">リストア処理を開始するには、 [ 完了 ] をクリックします。</block>
  <block id="6ee1a75c79c794a6fb3f72e16da944d2" category="list-text">SnapCenter によってリストアおよびリカバリ処理が実行されます。この例は、リストアジョブとリカバリジョブのジョブの詳細を表示しています。</block>
  <block id="3a1aea2881bec87b5ce8e401ee0520bd" category="section-title">シングルテナントでのリストアおよびリカバリ処理</block>
  <block id="3b15f0bc9024903dec7c4695e3155bf1" category="paragraph">SnapCenter 4.3 では、シングルテナントを使用する HANA MDC システム、または SnapCenter によって自動検出された複数のテナントを使用する場合に、シングルテナントのリストア処理がサポートされます。</block>
  <block id="0fee49305acef3632abbf848b903631b" category="paragraph">シングルテナントのリストアおよびリカバリ処理は、次の手順で実行できます。</block>
  <block id="67aa61a4ec3511ee190ecad019aeb30b" category="list-text">リストアおよびリカバリするテナントを停止します。</block>
  <block id="81f028cbdbdc320fd192a487cbd1318f" category="list-text">SnapCenter でテナントをリストアします。</block>
  <block id="c178ce48989ea0af333fc54437d692aa" category="list-text">プライマリストレージからリストアする場合、 SnapCenter は次の処理を実行します。</block>
  <block id="29b2230e330fe45145e4b681e0046505" category="list-text">* NFS. * ストレージの単一ファイルの SnapRestore 操作は、テナントデータベースのすべてのファイルに対応しています。</block>
  <block id="3eb4d46bdff6451fbb6f87bb525d3990" category="list-text">* SAN. * LUN のクローンを作成してデータベースホストに接続し、テナント・データベースのすべてのファイルをコピーします。</block>
  <block id="22e20de0bb4a90e80400ce852271e09d" category="list-text">セカンダリストレージからリストアする場合、 SnapCenter は次の処理を実行します。</block>
  <block id="4b31581f309cafd79125e4e1b91cace2" category="list-text">* nfs.* テナントデータベースのすべてのファイルに対する Storage SnapVault リストア処理</block>
  <block id="a521a7d1f76af7e97146a07a31abc8cb" category="list-text">* SAN. * LUN のクローンを作成してデータベースホストに接続し、テナント・データベースのすべてのファイルをコピーします</block>
  <block id="50d522157f7a37b456e3d91c1c819dd9" category="list-text">HANA Studio 、 Cockpit 、または SQL ステートメントを使用してテナントをリカバリします。</block>
  <block id="3005119988432d4e45739c1d44b4b034" category="paragraph">このセクションでは、自動検出された HANA システム SM1 （ SAP HANA シングルホスト、 MDC マルチテナントシステム、 NFS を使用）のプライマリストレージからリストアとリカバリの処理を実行する手順を説明します。ユーザ入力の観点では、ファイバチャネル SAN の設定でセカンダリまたはリストアを実行する場合のワークフローは同じです。</block>
  <block id="aed89660dbd87e3983762091fef0d51a" category="list-text">テナントデータベースを停止します。</block>
  <block id="2fcbdfe66c07526cffaebe5176545c9c" category="list-text">リストアするテナントを選択します。</block>
  <block id="19f018bc36fc350470a0498d5854069c" category="admonition">SnapCenter に、選択したバックアップに含まれるすべてのテナントのリストが表示されます。</block>
  <block id="e1a46d5de522291f70c781fccedfcc60" category="paragraph">シングルテナントリカバリは、 SnapCenter 4.3 ではサポートされていません。リカバリは事前に選択されておらず、変更することはできません。</block>
  <block id="720dfcaa32518593ec523932ae9faea2" category="list-text">オプションのリストア後のコマンドを入力します。</block>
  <block id="6a6e8b779757b9f75738fb3b86a61fcc" category="paragraph">リストア処理は SnapCenter によって実行されます。この例は、リストアジョブのジョブの詳細を表示します。</block>
  <block id="40db8443209e5d3afbdca4a942d06143" category="admonition">テナントのリストア処理が終了すると、テナントに関連するデータのみがリストアされます。HANA データベースホストのファイルシステムで、リストアしたデータファイルとテナントの Snapshot バックアップ ID ファイルを使用できます。</block>
  <block id="68bfc883e6b2855ddff9fdf06b94ce9b" category="list-text">HANA Studio でリカバリを開始します。</block>
  <block id="b6845cbdd15d7a33174052df7502cf32" category="list-text">テナントを選択します。</block>
  <block id="cd8d493931d8670a43b07123d359a209" category="list-text">リカバリのタイプを選択します。</block>
  <block id="d37bdebf1b32778793a7b4b9e33bd5ec" category="list-text">バックアップカタログの場所を指定します。</block>
  <block id="f4510f249d028c44410fdab09af35950" category="paragraph">バックアップカタログ内で、リストアされたバックアップが緑のアイコンで強調表示されます。外部バックアップ ID には、 SnapCenter で以前に選択されたバックアップ名が表示されます。</block>
  <block id="65a02326980287a87e65dd25667b806c" category="list-text">緑のアイコンが表示されたエントリを選択し、次へをクリックします。</block>
  <block id="eadda446e15d20ede6c5e18fd7d399ea" category="list-text">ログのバックアップ先を指定します。</block>
  <block id="89f845c54b2f3c2aa34761748971067c" category="list-text">必要に応じて、他の設定を選択します。</block>
  <block id="aed1891a9c84b2d526253a84689579ac" category="list-text">テナントのリカバリ処理を開始します。</block>
  <block id="f084a541788261dbb4ec0e6e892dadd4" category="section-title">手動リカバリによるリストア</block>
  <block id="d308f035c60fda2ed0568cf9debd2c56" category="paragraph">SAP HANA Studio および SnapCenter を使用して SAP HANA MDC のシングルテナントシステムをリストアおよびリカバリするには、次の手順を実行します。</block>
  <block id="618a329b4db7b150870ca98e5ed89642" category="list-text">システムデータベースのリカバリを選択し、 SAP HANA システムのシャットダウンを確認します。</block>
  <block id="d435bb1a0709a5ac7a8cec5e0ef65067" category="list-text">データバックアップのリストが表示されます。外部バックアップ ID を表示するには、 Backup を選択します。</block>
  <block id="7d5036f83c8d6e0bca40d1ddb23b8cd9" category="list-text">SnapCenter でリストアプロセスを実行します。</block>
  <block id="109cf94e2e1d899c5cbe0ba9432f3db7" category="list-text">リソースのトポロジビューで、オフサイトのバックアップストレージからリストアする場合は、プライマリストレージまたはバックアップコピーからリストアするローカルコピーを選択します。</block>
  <block id="66c736ed388a6ff23e9e306d983030d0" category="list-text">SAP HANA Studio の外部バックアップの ID またはコメントフィールドと一致する SnapCenter バックアップを選択します。</block>
  <block id="eaea15be3b6bcfaa466a7e8c5adb9432" category="list-text">リストアプロセスを開始します。</block>
  <block id="0b851616fd46128f20c0da790ae82f05" category="admonition">プライマリストレージからボリュームベースのリストアを選択した場合は、リストアプロセスの完了後に、すべての SAP HANA データベースホストからデータボリュームをアンマウントして再度マウントする必要があります。</block>
  <block id="0f47974782affac68b494486493475f1" category="admonition">FC を使用する SAP HANA マルチホスト環境では、データベースのシャットダウンと起動のプロセスの一環として、 SAP HANA ネームサーバによってアンマウントとマウントの処理が実行されます。</block>
  <block id="f8a1017f1d573176e0c09b77e9411ef5" category="list-text">リカバリプロセスを開始します。リカバリプロセスが完了すると、システムデータベースが起動します。</block>
  <block id="c300d3adad469f758c239ac69abd59c2" category="paragraph">データバックアップのリストが表示されます。データボリュームはすでにリストアされているため、テナントのバックアップは使用可能（緑）と表示されます。</block>
  <block id="1b0bc5dfa3c59bd3282488a100771bec" category="list-text">このバックアップを選択し、リカバリプロセスを開始します。リカバリプロセスが完了すると、テナントデータベースが自動的に起動します。</block>
  <block id="655fdebc6400cdd5b7b6039edcc5ef91" category="paragraph">次のセクションでは、手動で設定した HANA システム SS2 （ SAP HANA シングルホスト、 NFS を使用した MDC マルチテナントシステム）のリストア処理とリカバリ処理の手順について説明します。</block>
  <block id="6e07aa49ce0f008266e457437bf58618" category="list-text">SAP HANA Studio で、 Recover System Database オプションを選択して、システムデータベースのリカバリを開始します。</block>
  <block id="da60453971d7812f926c6d4dd8faedfc" category="list-text">[OK] をクリックして、 SAP HANA データベースをシャットダウンします。</block>
  <block id="7ad42396d12d80544d9b21a4a3f94969" category="paragraph">SAP HANA システムがシャットダウンし、リカバリウィザードが起動します。</block>
  <block id="539b55bfbf4e9a12b0b79e9c7f2264a2" category="list-text">バックアップカタログの内容に基づいて、使用可能なバックアップのリストが表示されます。必要なバックアップを選択し、外部バックアップ ID をメモします。この例では、最新バックアップを選択します。</block>
  <block id="7f22d467d3abf924a1d98481cc16a84c" category="admonition">NFS を使用する SAP HANA マルチホストシステムの場合は、各ホスト上のすべてのデータボリュームをアンマウントする必要があります。</block>
  <block id="0a979fbdc691405e2ecf3f21f214f1d5" category="admonition">FC を使用する SAP HANA マルチホストセットアップでは、シャットダウンプロセスの一環として、 SAP HANA ネームサーバによってアンマウント処理が実行されます。</block>
  <block id="0c0d64691714ab24aa54c51efccdbaf9" category="list-text">SnapCenter の GUI で、リソーストポロジビューを選択し、リストアするバックアップを選択します。この例では、最新のプライマリバックアップを選択します。リストアアイコンをクリックして、リストアを開始します。</block>
  <block id="2504fb5831fc57db27b887bf63f0887a" category="paragraph">SnapCenter リストアウィザードが起動します。</block>
  <block id="ad1e706a026bae5fa0e49279c3661115" category="list-text">リストア・タイプとして ［ 完全なリソース ］ または ［ ファイル・レベル ］ を選択します</block>
  <block id="2b846cc0556dd02047bdbfb3e0f57de1" category="paragraph">ボリュームベースのリストアを使用するには、 [ リソース全体 ] を選択します。</block>
  <block id="d14d0f2038e3d915b3534446ed6e080f" category="list-text">すべてのファイルに単一ファイルの SnapRestore 操作を使用するには、 [ ファイルレベルとすべて ] を選択します。</block>
  <block id="14e6373421e10742a1dd56374e1ba0fa" category="admonition">SAP HANA マルチホストシステムのファイルレベルのリストアを実行する場合は、すべてのボリュームを選択します。</block>
  <block id="7da7c0b60e307362a8634d684b76af4f" category="list-text">（オプション）中央の HANA プラグインホストで実行されている SAP HANA プラグインから実行するコマンドを指定します。次へをクリックします。</block>
  <block id="5330486ca6a97bf88a80230a772af6d0" category="list-text">オプションのコマンドを指定し、次へをクリックします。</block>
  <block id="fed1b6603cc6dfe60b19cf287b1aa459" category="list-text">通知設定を指定して、 SnapCenter からステータス E メールとジョブログを送信できるようにします。次へをクリックします。</block>
  <block id="c261785ed15600658e731fc1cec9fdba" category="list-text">概要を確認し、 [ 完了 ] をクリックしてリストアを開始します。</block>
  <block id="d63984aae331b3071efc01231ee47359" category="list-text">リストアジョブが開始され、アクティビティペインのログ行をダブルクリックするとジョブログが表示されます。</block>
  <block id="bac336278522062d883ec24dccefbb40" category="list-text">リストアプロセスが完了するまで待ちます。各データベースホストで、すべてのデータボリュームをマウントします。この例では、データベースホスト上で再マウントが必要なボリュームは 1 つだけです。</block>
  <block id="3e0dee0ba4ab61927ece723410ce2c21" category="list-text">SAP HANA Studio に移動し、 Refresh をクリックして、使用可能なバックアップのリストを更新します。SnapCenter でリストアされたバックアップは、バックアップのリストに緑のアイコンで表示されます。バックアップを選択し、 Next （次へ）をクリックします。</block>
  <block id="54b5a6f76ec5eeef36ab37e5bc55ae5f" category="list-text">SAP HANA Studio で、システムデータベースのエントリを選択し、 Backup Recovery - Recover Tenant Database を開始します。</block>
  <block id="9c98b915d8b8e49f33ff3f40cace1a90" category="list-text">システムデータベースのリカバリ前にデータボリュームのリストアが実行されたため、テナントバックアップをすぐに使用できます。緑色でハイライトされたバックアップを選択し、次へをクリックします。</block>
  <block id="96520d7a480e70c8e9a8a478e649b690" category="admonition">複数のテナントを使用する SAP HANA MDC システムの場合は、テナントごとに手順 20~29 を繰り返す必要があります。</block>
  <block id="42f56db89b1fd3446a0dc17a48ffcd56" category="summary">このページでは、設定と調整を完了するために必要なさまざまな操作について説明します。</block>
  <block id="74555398f6732868f7098c16987eaf1d" category="doc">高度な設定と調整</block>
  <block id="ebd54efb13a29a91ee18444b4b588e62" category="paragraph">このセクションでは、 SnapCenter の設定を特定のニーズに合わせるためにお客様が使用できる設定および調整オプションについて説明します。すべての設定がすべてのお客様のシナリオに適用されるわけではありません。</block>
  <block id="b36025dbf19c7d418acc927e3eff5726" category="section-title">HANA データベースとのセキュアな通信を有効にします</block>
  <block id="2c26782380d64762dbb9ff64ff38f98d" category="paragraph">HANA データベースにセキュアな通信が設定されている場合、 SnapCenter によって実行される「 hdbsql 」コマンドでは、追加のコマンドラインオプションを使用する必要があります。これは、必要なオプションを指定して「 hdbsql 」を呼び出すラッパースクリプトを使用して実現できます。</block>
  <block id="87a9192bcd59daed56e382d8005bcc6b" category="admonition">SSL 通信を設定するには、さまざまなオプションがあります。次の例では、コマンドラインオプションを使用して最も単純なクライアント設定について説明します。この場合、サーバ証明書の検証は行われません。サーバー側またはクライアント側で証明書の検証が必要な場合は、 hdbsql コマンドラインオプションを変更する必要があります。また、『 SAP HANA Security Guide 』の説明に従って、 PSE 環境を設定する必要があります。</block>
  <block id="1c9ce72e23307b41eeb8bb0dcd7098af" category="paragraph">hana.properties` ファイルで「 hdbsql 」実行可能ファイルを設定する代わりに、ラッパースクリプトが追加されます。</block>
  <block id="018c7398ef29574d14d403bf93e4fed2" category="paragraph">SnapCenter Windows サーバ上の中央 HANA プラグインホストの場合、「 C ： \Program Files\NetApp\SnapManager \Snapcenter Plug-in Creator\etc\hana.properties` 」に次のコンテンツを追加する必要があります。</block>
  <block id="15cea5f6ffeca8d29ba6f7f5fc724f97" category="paragraph">ラッパースクリプト「 hdbsql-ssl.cmd 」は、必要なコマンドラインオプションを指定して「 hdbsql.exe 」を呼び出します。</block>
  <block id="46113eeca61d4e4139d8d0796e2e1b04" category="admonition">-e-ssltrustcert'hdbsql コマンドライン・オプションは 'SSL が有効になっていない HANA システムでも機能しますそのため、すべての HANA システムで SSL が有効または無効になっているわけではなく、このオプションを中央の HANA プラグインホストでも使用できます。</block>
  <block id="6de64d0d2282b0e94a128ee5bf587633" category="paragraph">HANA プラグインが個々の HANA データベースホストに導入されている場合は、それに応じて各 Linux ホストで設定を行う必要があります。</block>
  <block id="29cfdb64fd85feafbf4960346572109a" category="paragraph">ラッパースクリプト「 hdbsqls 」は、必要なコマンドラインオプションを指定して「 hdbsql 」を呼び出します。</block>
  <block id="76a5f251ab6965b0373df9022a38f5b0" category="section-title">HANA プラグインホストで自動検出を無効にします</block>
  <block id="4ba643eff563a3bd70a8c2792ade9cc9" category="paragraph">HANA プラグインホストで自動検出を無効にするには、次の手順を実行します。</block>
  <block id="3ed13fae46d0e665d580e7feffb0d68f" category="list-text">SnapCenter サーバで、 PowerShell を開きます。「 Open-SmConnectコネクション 」コマンドを実行して SnapCenter サーバに接続し、最初のログインウィンドウでユーザ名とパスワードを指定します。</block>
  <block id="62b41927ef5b42e34a666d7e1082c90c" category="list-text">自動検出をディセーブルにするには、「 Set-SmConfigSettings 」コマンドを実行します。</block>
  <block id="51c124ef9e356b1262d5226b5c08f378" category="paragraph">HANA ホストの「 HANA -2' 」の場合、このコマンドは次のようになります。</block>
  <block id="e9caa0a68efba627b98862415aa3c29c" category="list-text">「 Get-SmConfigSettings 」コマンドを実行して、設定を確認します。</block>
  <block id="a2fb1fe6f4b2f8a92a01bd85ef7d2568" category="paragraph">構成はホスト上のエージェント構成ファイルに書き込まれ、 SnapCenter によるプラグインのアップグレード後も引き続き使用できます。</block>
  <block id="9e6eeb9d8e52bff7eee430478f3139b2" category="section-title">ログバックアップの自動削除を非アクティブ化します</block>
  <block id="406b242a0620f29e2f7ecdc0b3c49c48" category="paragraph">ログバックアップの不要ファイルの削除はデフォルトで有効になっており、 HANA プラグインのホストレベルで無効にすることができます。これらの設定を変更するには、 2 つのオプションがあります。</block>
  <block id="c0685bfe05c38d580ee61881c0233cfc" category="section-title">hana.property ファイルを編集します</block>
  <block id="f3c9376d1332a956f0c0ed748ea89162" category="paragraph">hana.property` 構成ファイルのパラメータ log_cleanup_disable=Y' を指定すると ' この SAP HANA プラグイン・ホストを通信ホストとして使用して ' すべてのリソースのログ・バックアップ・ハウスキーピングが無効になります</block>
  <block id="68caa1c9492156e7687e551e3e2392b8" category="list-text">Windows 上の Hdbsql 通信ホストの場合、「 hana.property` 」ファイルは C:\Program Files\NetApp\SnapCenter \Snapcenter Plug-in Creator\etc にあります。</block>
  <block id="0c1bf009e7852817f75c886fb2271ab4" category="list-text">Linux 上の Hdbsql 通信ホストの場合、「 hana.property` 」ファイルは「 /opt/NetApp/snapcenter /sscc /etc 」にあります。</block>
  <block id="ec202ab85e35217db2f5aefeee86d896" category="section-title">PowerShell コマンドを使用します</block>
  <block id="7465bc608b7ba8996b13823af509a13b" category="paragraph">2 つ目のオプションでは、 SnapCenter PowerShell コマンドを使用します。</block>
  <block id="a0045b25b946141fdf79a4f4be908511" category="list-text">SnapCenter サーバで、 PowerShell を開きます。「 Open-SmConnection 」コマンドを使用して SnapCenter サーバに接続し、最初のログインウィンドウでユーザ名とパスワードを指定します。</block>
  <block id="3763f544e62c64c495333749f419f9c7" category="list-text">「 Set-SmConfigSettings-Plugin-hostname &lt;pluginhostname&gt;-PluginCode HANA -configSettings@{"log_cleanup_disable"="Y"}" 」コマンドを使用すると、 IP またはホスト名で指定した SAP HANA プラグインホスト「 &lt;plughostname&gt; 」に変更が設定されます（次の図を参照）。</block>
  <block id="f81644ea080b8fea97ed792373fba735" category="section-title">仮想環境で SAP HANA プラグインを実行する際の警告を無効にします</block>
  <block id="fd16e3a17c275b721a8f1bca54a6e738" category="paragraph">SnapCenter は、 SAP HANA プラグインが仮想環境にインストールされているかどうかを検出します。これは、パブリッククラウドプロバイダでの VMware 環境や SnapCenter 環境の場合があります。この場合、次の図に示すように、ハイパーバイザーの設定に関する警告が SnapCenter に表示されます。</block>
  <block id="dbc51e54d901bd82b0ada5450fb2532f" category="paragraph">この警告をグローバルに抑制することができます。この場合、 SnapCenter は仮想環境を認識しないため、警告は表示されません。</block>
  <block id="4f12b39de0379b54307e19e7b392caf6" category="paragraph">この警告を抑制するように SnapCenter を設定するには、次の設定を適用する必要があります。</block>
  <block id="e8677b2957270cfbd602c7fcd2b1a0b3" category="list-text">[ 設定 ] タブで、 [ グローバル設定 ] を選択します。</block>
  <block id="3e9cb21d308ff815d97bb64f89c45e89" category="list-text">ハイパーバイザー設定で、すべてのホストに対して VM に iSCSI Direct Attached Disks または NFS を選択し、設定を更新します。</block>
  <block id="c5326c28a7f793eb7b9177f94a4a22f3" category="section-title">オフサイトのバックアップストレージとのバックアップ同期のスケジュール頻度を変更します</block>
  <block id="898a36ba79f0029f3604d6260d953a97" category="inline-link-macro">「セカンダリ・ストレージでのバックアップの保持管理」</block>
  <block id="1a397f708626e53066445f8b0a45ae95" category="paragraph">SnapCenter のクリーンアップジョブでは、オフサイトのバックアップストレージで削除したバックアップが見つかった場合に、 SnapCenter リポジトリおよび SAP HANA のバックアップカタログからバックアップが削除されます。</block>
  <block id="b6256d5acf0a237a2bfb99c200a47e59" category="paragraph">クリーンアップジョブは、不要な SAP HANA ログバックアップの削除も実行します。</block>
  <block id="c5b91a93b82ebe45816f5f5af37f3c7a" category="paragraph">スケジュールされたこのクリーンアップが完了するまでの間、 SAP HANA と SnapCenter では、オフサイトのバックアップストレージからすでに削除されたバックアップが引き続き表示されることがあります。</block>
  <block id="b796643f0612d9fabdcee75233e699f9" category="admonition">その結果、オフサイトのバックアップストレージ上の対応するストレージベースの Snapshot バックアップがすでに削除されている場合でも、ログバックアップが新たに保持されることがあります。</block>
  <block id="2971e00ac834523ed205d9baba4a1ec9" category="paragraph">次のセクションでは、この一時的な不一致を回避する 2 つの方法について説明します。</block>
  <block id="3441a12e5d3e26f5680c6227809710fa" category="section-title">リソースレベルの手動更新</block>
  <block id="26b8c598da47c7623949a9b89a388603" category="paragraph">リソースのトポロジビューでは、次のスクリーンショットに示すように、セカンダリバックアップを選択する際に、 SnapCenter によってオフサイトのバックアップストレージにバックアップが表示されます。SnapCenter は、更新アイコンを使用してクリーンアップ処理を実行し、このリソースのバックアップを同期します。</block>
  <block id="fcca844280c97b2c08b17bca95637969" category="section-title">SnapCenter クリーンアップジョブの頻度を変更します</block>
  <block id="2811d2a8313b7bec58816678a8b1bcc5" category="paragraph">SnapCenter は、 Windows タスクのスケジュールメカニズムを使用して、すべてのリソースに対してデフォルトでクリーンアップジョブ「 SnapCenter _ RemoveSecondaryBackup 」を毎週実行します。これは、 SnapCenter PowerShell コマンドレットを使用して変更できます。</block>
  <block id="3f13831740463d1bd3841266c795f77f" category="list-text">SnapCenter サーバで PowerShell コマンドウィンドウを起動します。</block>
  <block id="bf8c868a75dd9be9a0b1995f9695010e" category="list-text">SnapCenter サーバへの接続を開き、ログインウィンドウに SnapCenter 管理者のクレデンシャルを入力します。</block>
  <block id="ed0087c23be9dead570ee81bfe67fc40" category="list-text">スケジュールを週単位から日単位に変更するには、「 Set-SmSchedule 」コマンドレットを使用します。</block>
  <block id="e83c1ad6099cb59a650eabeabfcc6675" category="list-text">Windows タスクスケジューラでジョブのプロパティを確認できます。</block>
  <block id="fcef096381705d4bcfa467d40d0b387f" category="summary">ここでは、 SS2 および SS1 の 2 つの設定例の設定手順について説明します。</block>
  <block id="70301bf4b26989d57e0885606679e051" category="doc">SAP HANA データベースのバックアップ用の SnapCenter リソース固有の構成</block>
  <block id="f4e81e10f3cb525298be194aea42006f" category="paragraph">ここでは、 2 つの設定例の設定手順について説明します。</block>
  <block id="fa965a3de49a71b6a12a753401775293" category="list-text">* SS2.*</block>
  <block id="51c290b5b5c894a2107decea434365ad" category="list-text">ストレージアクセスに NFS を使用するシングルホスト SAP HANA MDC のシングルテナントシステム</block>
  <block id="e88fef62277e0a1c147f21e0c953ba8b" category="list-text">リソースは SnapCenter で手動で設定されます。</block>
  <block id="60b65c3fbea29f8def663cc21aafc582" category="list-text">リソースは、週単位のファイルベースのバックアップを使用して、 SAP HANA データベースのローカル Snapshot バックアップを作成し、ブロック整合性チェックを実行するように設定されています。</block>
  <block id="255aad876f85e1c18a9907724b93daaa" category="list-text">* SS1.*</block>
  <block id="8bc72a7150e59210f0b5463bb10e30a3" category="list-text">リソースは SnapCenter で自動検出されます。</block>
  <block id="fc1ac30a53328dfb93dca9f7139b843b" category="list-text">リソースは、ローカル Snapshot バックアップを作成し、 SnapVault を使用してオフサイトのバックアップストレージにレプリケートし、週 1 回のファイルベースのバックアップを使用して SAP HANA データベースのブロック整合性チェックを実行するように設定されます。</block>
  <block id="66fe6c9b122286cf99f5f0138b0fa347" category="paragraph">SAN 接続、シングルコンテナ、またはマルチホストシステムの違いは、対応する設定またはワークフローの手順に反映されます。</block>
  <block id="bdb4ca864f28f4d4427e31fe3874148a" category="section-title">SAP HANA のバックアップユーザと hdbuserstore の設定を指定します</block>
  <block id="51f52a019fed97257139db81ad9f7174" category="paragraph">SnapCenter でバックアップ処理を実行するには、 HANA データベースに専用のデータベースユーザを設定することを推奨します。2 番目の手順では、このバックアップユーザ用に SAP HANA ユーザストアキーが設定され、このユーザストアキーは SnapCenter SAP HANA プラグインの構成で使用されます。</block>
  <block id="fe6f69e0a2ecafbdaceb1719bf9a1a88" category="paragraph">次の図は、バックアップユーザの作成に使用できる SAP HANA Studio を示しています。</block>
  <block id="d485cbfafcf67fe0af5fc6229e56b0f4" category="admonition">必要な権限は、 HANA 2.0 SPS5 リリースで変更されています。 backup admin 、 catalog read 、 database backup admin 、および database recovery operator以前のリリースの場合は、バックアップ管理者とカタログの読み取りで十分です。</block>
  <block id="9d52a4754b65c174f47d3aa970f06493" category="admonition">SAP HANA MDC システムの場合は、システムデータベース内にユーザを作成する必要があります。これは、システムデータベースを使用してシステムとテナントデータベースのバックアップコマンドがすべて実行されるためです。</block>
  <block id="840539751269be4e3753202d7662d8cb" category="paragraph">SAP HANA プラグインと SAP hdbsql クライアントがインストールされている HANA プラグインホストで、 userstore キーを設定する必要があります。</block>
  <block id="38cb77d0df57e3dda9aa8b654ad92b4f" category="section-title">中央の HANA プラグインホストとして使用される SnapCenter サーバでのユーザストア設定</block>
  <block id="bbdc83bcbc051a80322ec102a572ecdc" category="paragraph">SAP HANA プラグインと SAP hdbsql クライアントが Windows にインストールされている場合、ローカルシステムユーザーは hdbsql コマンドを実行し、デフォルトでリソース設定に設定されます。システムユーザはログオンユーザではないため、ユーザストア設定は別のユーザと「 -u &lt;User&gt;` 」オプションを使用して行う必要があります。</block>
  <block id="b8da6948ade523d68e8ab7b8ed12826c" category="admonition">まず、 SAP HANA hdbclient ソフトウェアを Windows ホストにインストールする必要があります。</block>
  <block id="a17a29a466ce49e9669ffdefbae9c596" category="section-title">Central HANA プラグインホストとして使用される別の Linux ホストでのユーザストア設定</block>
  <block id="8aa0bd3330a87f410cbc39982f1764fc" category="paragraph">SAP HANA プラグインと SAP hdbsql クライアントが別の Linux ホストにインストールされている場合は、リソース設定で定義されているユーザのストア設定に次のコマンドが使用されます。</block>
  <block id="2d952d2344e9646adbf709d2cf78e6e7" category="admonition">まず、 SAP HANA hdbclient ソフトウェアを Linux ホストにインストールする必要があります。</block>
  <block id="fa5bf57daa02a0d0988c9193381f807d" category="section-title">HANA データベースホスト上のユーザストア設定</block>
  <block id="5f01f23853abc5e513d49be8a5cdd096" category="paragraph">SAP HANA プラグインが HANA データベースホストに導入されている場合、ユーザストア設定には次のコマンドが使用されます。ユーザ名は「 sid&gt;adm 」です。</block>
  <block id="5b7ab301f58dc658ec70494a737f828e" category="admonition">SnapCenter は、「 &lt;sid&gt;adm 」ユーザを使用して HANA データベースと通信します。したがって、ユーザストアキーは、データベースホスト上の &lt;%sid&gt;adm` ユーザを使用して設定する必要があります。</block>
  <block id="cd4a470aff3703c885ad99676d16055d" category="admonition">通常、 SAP HANA hdbsql クライアントソフトウェアは、データベースサーバのインストールと一緒にインストールされます。そうでない場合は、先に hdbclient をインストールする必要があります。</block>
  <block id="0e9fced583a2d6b1c7784b81ef75e850" category="section-title">ユーザストアの構成は、 HANA システムのアーキテクチャに応じて異なります</block>
  <block id="3a5b6e126b997f5aebdba1d196187326" category="paragraph">SAP HANA MDC のシングルテナント構成では、ポート「 3 」はシステムデータベースへの SQL アクセス用の標準ポートであり、 hdbuserstore 構成で使用する必要があります。</block>
  <block id="db9b1da043cd3d841d9c5c69e5a38292" category="paragraph">SAP HANA シングルコンテナ設定の場合、ポート「 3&lt;instanceNo&gt;15 」はインデックスサーバへの SQL アクセス用の標準ポートであり、 hdbuserstore 設定で使用する必要があります。</block>
  <block id="a2e6b5aefaa377838317f8be8742bb37" category="paragraph">SAP HANA マルチホストを設定する場合は、すべてのホストのユーザストアキーを設定する必要があります。SnapCenter は指定された各キーを使用してデータベースへの接続を試みます。そのため、異なるホストへの SAP HANA サービスのフェイルオーバーとは独立して動作します。</block>
  <block id="28de3e05c0a85df55248daad4cd4bac6" category="section-title">Userstore の構成例</block>
  <block id="5c9181ed7362f81e962093c13840fab8" category="paragraph">このラボ環境では、 SAP HANA プラグインが混在した環境を使用します。HANA プラグインは、一部の HANA システムの SnapCenter サーバにインストールされ、他のシステムの個々の HANA データベースサーバに導入されます。</block>
  <block id="1404381c698e4c5d564feda96aaa1c22" category="paragraph">* SAP HANA システム SS1 、 MDC のシングルテナント、インスタンス 00 *</block>
  <block id="42579371c7eda99c5889fb9933e8ba4b" category="paragraph">HANA プラグインがデータベースホストに導入されている。したがって ' キーは 'ss1adm というユーザを持つデータベース・ホストで構成する必要があります</block>
  <block id="18d71d1612c2658ba5936d6ca062329e" category="paragraph">* SAP HANA システム MS1 、マルチホスト MDC のシングルテナント、インスタンス 00 *</block>
  <block id="c35984d6886a6387baba752af82f564d" category="paragraph">HANA マルチホストシステムの場合、 SnapCenter サーバを使用したセットアップでは、中央のプラグインホストが必要です。そのため、ユーザストア設定は SnapCenter サーバ上で行う必要があります。</block>
  <block id="2abcd488c56140fe10bb20da77ecf642" category="section-title">オフサイトのバックアップストレージにデータ保護を設定する</block>
  <block id="f262b6604cf3acf9374dd1fc6e754740" category="paragraph">SnapCenter でレプリケーションの更新を管理するには、データ保護関係および最初のデータ転送の設定を実行する必要があります。</block>
  <block id="402aeb49864ee4345ff4480e7ff2588a" category="paragraph">次の図は、 SAP HANA システム SS1 用に設定された保護関係を示しています。この例では、 SVM 「 HANA プライマリ」のソースボリューム「 SS1_data_mnt00001 」が SVM 「 HANA - バックアップ」とターゲットボリューム「 SS1_data_mnt00001_dest 」にレプリケートされます。</block>
  <block id="149e2b8a1b2b977e7d1afa6ea1f37c8c" category="admonition">SnapCenter によって SnapVault の更新がトリガーされるため、関係のスケジュールは None に設定する必要があります。</block>
  <block id="16ded84606c10f7da418b0555b25ceee" category="paragraph">次の図に、保護ポリシーを示します。保護関係に使用される保護ポリシーでは、セカンダリストレージでのバックアップの保持に加え、 SnapMirror ラベルも定義されます。この例では ' 使用されているラベルは毎日 ' 保存期間は 5 に設定されています</block>
  <block id="5c5eeb863cdfc0db3f197c826e6c7455" category="admonition">オフサイトのバックアップストレージでのバックアップの保持は、ポリシーに定義され、 ONTAP によって制御されます。</block>
  <block id="b75893c9952bb9cfc6ec0d811541b0a6" category="section-title">HANA のリソースを手動で構成</block>
  <block id="d744af4332930eba6c682765a5680759" category="paragraph">このセクションでは、 SAP HANA リソース SS2 と MS1 を手動で設定する方法について説明します。</block>
  <block id="15c0aa9b657f3649ebe64bd584af2c69" category="list-text">SS2 は、シングルホスト MDC のシングルテナントシステムです</block>
  <block id="68490ecb86f21230a0b2e95a70f95144" category="list-text">MS1 は、マルチホスト MDC のシングルテナントシステムです。</block>
  <block id="64ba1f95653f9f05b4225cee464cf6e6" category="list-text">リソースタブで、 SAP HANA を選択し、 SAP HANA データベースの追加をクリックします。</block>
  <block id="34606acaa040a93c19b426a780cd6775" category="list-text">SAP HANA データベースを設定するための情報を入力し、 Next （次へ）をクリックします。</block>
  <block id="e81504623a071c0fa17c66d26729447f" category="paragraph">この例では、マルチテナントデータベースコンテナのリソースタイプを選択します。</block>
  <block id="89d52188e7a1934360194af072002b49" category="admonition">HANA シングルコンテナシステムの場合は、リソースタイプとしてシングルコンテナを選択する必要があります。他の設定手順はすべて同じです。</block>
  <block id="f0037094a0c5f8dbbf5c217dc5a1e743" category="paragraph">SAP HANA システムの場合、 SID は SS2 です。</block>
  <block id="6985d624e8d700a19d4bf7d44d1d4b93" category="paragraph">この例の HANA プラグインホストは、 SnapCenter サーバです。</block>
  <block id="4106a2fb2792b3f4515ec73bbc9eaf56" category="paragraph">hdbuserstore キーは、 HANA データベース SS2 用に設定されたキーと一致している必要があります。この例では、 SS2KEY です。</block>
  <block id="b2079b5692480841bc273b4cd0072a29" category="admonition">SAP HANA マルチホストシステムの場合、次の図に示すように、すべてのホストの hdbuserstore キーを含める必要があります。SnapCenter は、リストの最初のキーとの接続を試行し、最初のキーが機能しない場合には、他のケースとの接続を続行します。これは、ワーカーホストとスタンバイホストを使用するマルチホストシステムで HANA フェイルオーバーをサポートするために必要です。</block>
  <block id="3a52386058c5416573960cfc63cd4aa9" category="list-text">ストレージシステム（ SVM ）とボリューム名に必要なデータを選択します。</block>
  <block id="7202458df8d18d28c523bc7d656460e1" category="admonition">ファイバチャネル SAN 構成の場合は、 LUN も選択する必要があります。</block>
  <block id="8983e0678721acf19955d152bb5e2447" category="admonition">SAP HANA マルチホストシステムの場合は、次の図に示すように、 SAP HANA システムのすべてのデータボリュームを選択する必要があります。</block>
  <block id="a537d2b57b2da86f3595e0d4736c64bc" category="paragraph">リソース構成の概要画面が表示されます。</block>
  <block id="74d979d66ea08432b6a8bf4dec81a84f" category="list-text">Finish をクリックして、 SAP HANA データベースを追加します。</block>
  <block id="9c4a783c592f95ccc4cecc5dd4717224" category="section-title">HANA データベースの自動検出</block>
  <block id="e8ab1d33eb19b325a31fa06080fd52e7" category="paragraph">このセクションでは、 SAP HANA リソース SS1 （ NFS を使用するシングルホスト MDC シングルテナントシステム）の自動検出について説明します。ここで説明する手順はすべて、 HANA シングルコンテナ、 HANA MDC マルチテナントシステム、およびファイバチャネル SAN を使用する HANA システムで同じです。</block>
  <block id="a7f41558e051c56ded21f272fe49e225" category="admonition">SAP HANA プラグインには、 Java 64 ビットバージョン 1.8 が必要です。SAP HANA プラグインを導入する前に、ホストに Java をインストールする必要があります。</block>
  <block id="6fff1abc903305209c87f7b90f7e1b1a" category="list-text">ホストタブで、追加をクリックします。</block>
  <block id="8970de3a2a41c242eb60c8fc5e3b607c" category="list-text">ホスト情報を入力し、インストールする SAP HANA プラグインを選択します。Submit をクリックします。</block>
  <block id="fa9fc54000c6f4ea50c6fde5d70c4e23" category="list-text">フィンガープリントを確認します。</block>
  <block id="ce979c8e3f61c1ca2b3e50d9c5a0cfe1" category="paragraph">HANA プラグインと Linux プラグインのインストールが自動的に開始されます。インストールが完了すると、ホストの status 列に running と表示されます。画面には、 Linux プラグインが HANA プラグインと一緒にインストールされていることも表示されます。</block>
  <block id="cd010989717ddfd5f977bb9b51a73a35" category="paragraph">プラグインのインストール後、 HANA リソースの自動検出プロセスが自動的に開始されます。[ リソース ] 画面で、新しいリソースが作成されます。このリソースは、赤い南京錠のアイコンでロックされていることが示されます。</block>
  <block id="35f8f8811e136557a57edc7704ee5b22" category="list-text">を選択し、をクリックして設定を続行します。</block>
  <block id="f50eb8052b36abc4f9b3cad6d960fd7f" category="admonition">[ リソースの更新 ] をクリックして、 [ リソース ] 画面で自動検出プロセスを手動で開始することもできます。</block>
  <block id="fe618178f7c10f4f968b1e55e6e3d9e2" category="list-text">HANA データベースのユーザストアキーを指定します。</block>
  <block id="402cddec6e638b8f8c1c569ced4f1a90" category="paragraph">第 2 レベルの自動検出プロセスでは、テナントのデータとストレージのフットプリントの情報が検出されます。</block>
  <block id="77cbb735a690f450f24356e2a1deed79" category="list-text">Details をクリックして、リソーストポロジビューで HANA リソース構成情報を確認します。</block>
  <block id="76e03c71835140195f3451e1d5443d5e" category="paragraph">リソース構成が終了したら ' 次のセクションの説明に従ってリソース保護構成を実行する必要があります</block>
  <block id="12951e02508b48eb46e315f8d0562ff6" category="section-title">リソース保護の設定</block>
  <block id="12aaca285ac0310e6d68d828172364e9" category="paragraph">ここでは、リソース保護の設定について説明します。リソースが自動検出されたか手動で設定されたかに関係なく、リソース保護の設定は同じです。また、すべての HANA アーキテクチャ、単一または複数のホスト、単一コンテナ、 MDC システムでも同じです。</block>
  <block id="055d374e381cdcb3c869f3d9a80b4502" category="list-text">[ リソース ] タブで、リソースをダブルクリックします。</block>
  <block id="5ef30ac91b203045749e324a7c953330" category="list-text">Snapshot コピーにカスタムの名前形式を設定します。</block>
  <block id="e403c3e829dba2bfdb738b52d2d59f83" category="admonition">カスタムの Snapshot コピー名を使用して、どのバックアップがどのポリシーおよびスケジュールタイプで作成されたかを簡単に識別することを推奨します。Snapshot コピー名にスケジュールタイプを追加することで、スケジュールバックアップとオンデマンドバックアップを区別できます。オンデマンドバックアップの「スケジュール名」文字列は空ですが、スケジュールバックアップには「毎時」、「毎日」、または「毎週」という文字列が含まれます。</block>
  <block id="b0425f359f0a3d6106d6138fde093c4a" category="paragraph">次の図に示す構成では、バックアップ名と Snapshot コピー名の形式は次のとおりです。</block>
  <block id="6a9d47e7eeb50363e1b7a1dbe388e0ba" category="list-text">1 時間ごとのバックアップをスケジュール：「 SnapCenter _LocalSnap_Hourly_&lt;time_stamp&gt;` 」</block>
  <block id="3355314ce177f72a1b8e8407de977cca" category="list-text">日次バックアップのスケジュール：「 SnapCenter _LocalSnapAndSnapVault_daily_&lt;time_stamp&gt;`</block>
  <block id="6420569a9c32dd8b96c8d44895321def" category="list-text">時間単位のバックアップをオンデマンドで実行：「 SnapCenter _LocalSnap_&lt;time_stamp&gt;`</block>
  <block id="1ea93710515eeb13cfbf2e235737b75a" category="list-text">毎日のオンデマンドバックアップ：「 SnapCenter _LocalSnapAndSnapVault_&lt;time_stamp&gt;`</block>
  <block id="b76f8c2a7cb1e101f995e83095d6178a" category="admonition">ポリシー設定でオンデマンドバックアップに対して保持が定義されていても、不要なファイルの削除は別のオンデマンドバックアップが実行されたときにのみ実行されます。そのため、通常、 SnapCenter でオンデマンドバックアップを手動で削除して、これらのバックアップが SAP HANA バックアップカタログからも削除され、ログバックアップの不要な削除が古いオンデマンドバックアップに基づいて行われないようにする必要があります。</block>
  <block id="b003a1018f70b1f4d3c1a5616cab19d4" category="list-text">[ アプリケーションの設定 ] ページで、特定の設定を行う必要はありません。次へをクリックします。</block>
  <block id="894e5b025b3245607edb9f8a43f02429" category="list-text">リソースに追加するポリシーを選択してください。</block>
  <block id="43104f81893a1fc2c62fc00994e63831" category="list-text">LocalSnap ポリシーのスケジュールを定義します（この例では 4 時間ごと）。</block>
  <block id="1544a621c5ea50f94ae17918bc04e3e5" category="list-text">LocalSnapAndSnapVault ポリシーのスケジュールを定義します（この例では 1 日に 1 回）。</block>
  <block id="0b4337a47e9b930f09a9cd9baec4b896" category="list-text">ブロック整合性チェックポリシーのスケジュールを定義します（この例では週に 1 回）。</block>
  <block id="11b2dcbc196b4932ce3fc87795a4c761" category="list-text">E メール通知に関する情報を指定します。</block>
  <block id="1f073d3f1fa31a7943b90fab6d63038c" category="list-text">トポロジページでオンデマンドバックアップを作成できるようになりました。スケジュールされたバックアップは、設定に基づいて実行されます。</block>
  <block id="70cc601fa82e577c081c400b88d57ee0" category="section-title">Fibre Channel SAN 環境向けのその他の設定手順</block>
  <block id="9ed28ce680ba733c2fe37c75373d98df" category="paragraph">HANA リリースと HANA プラグインの導入方法に応じて、 SAP HANA システムがファイバチャネルと XFS ファイルシステムを使用している環境では追加の設定手順が必要です。</block>
  <block id="8ff318fc76f9b3a3de0488ffd2d04c8e" category="admonition">これらの追加の設定手順は、 SnapCenter で手動で設定した HANA リソースにのみ必要です。また、 HANA 1.0 リリースおよび HANA 2.0 リリース（ SPS2 まで）でのみ必要です。</block>
  <block id="c2fce189d8eec37410d2f593810352a1" category="paragraph">SAP HANA の SnapCenter によって HANA のバックアップ保存ポイントがトリガーされると、 SAP HANA は、最後の手順として、テナントとデータベースサービスごとに Snapshot ID ファイルを書き込みます（例：「 /hana/data/side/mnt00001/hdb00001/snapshot_databackup_0_1 」）。これらのファイルはストレージ上のデータボリュームの一部であるため、ストレージ Snapshot コピーの一部です。このファイルは、バックアップがリストアされる場合にリカバリを実行する際に必須です。Linux ホスト上の XFS ファイルシステムを使用してメタデータをキャッシングするため、ストレージレイヤでファイルがすぐに認識されることはありません。メタデータキャッシングの標準 XFS 設定は 30 秒です。</block>
  <block id="f4e76c9471978aaeb772485f58e7a395" category="admonition">HANA 2.0 SPS3 では、メタデータのキャッシングが問題にならないように、 SAP はこれらの Snapshot ID ファイルの書き込み処理を同期に変更しました。</block>
  <block id="4cc50bec1942773fad9ded9d3cd842a8" category="admonition">SnapCenter 4.3 では、 HANA プラグインがデータベースホストに導入されている場合、ストレージの Snapshot がトリガーされる前に Linux プラグインによってホスト上でファイルシステムフラッシュ処理が実行されます。この場合、メタデータのキャッシングは問題になりません。</block>
  <block id="1f7de7fc4ca98e15318923ea006f4d57" category="paragraph">SnapCenter では 'XFS メタデータ・キャッシュがディスク・レイヤーにフラッシュされるまで待機する 'postquiesce コマンドを設定する必要があります</block>
  <block id="2410e6cec8fb08d6ad20dfb5799dd6c7" category="paragraph">メタデータのキャッシングの実際の設定を確認するには、次のコマンドを使用します。</block>
  <block id="ecf49e35456f017989d424036038da90" category="paragraph">「 fs.xfs.xfssyncd_centiseconds 」パラメータの 2 倍の待ち時間を使用することを推奨します。デフォルト値は 30 秒であるため、 sleep コマンドは 60 秒に設定します。</block>
  <block id="29884ea371b02c8bba08943ed42ee409" category="paragraph">SnapCenter サーバが中央の HANA プラグインホストとして使用されている場合は、バッチファイルを使用できます。バッチファイルには、次の内容が含まれている必要があります。</block>
  <block id="c08fa9b50927a629fa005c6dca42b302" category="paragraph">バッチファイルは、「 C ： \Program Files\NetApp\Wait60Sec.bat 」のように保存できます。リソース保護構成では、バッチファイルを [ 休止後に追加 ] コマンドとして追加する必要があります。</block>
  <block id="5a9ee55acf58f2d318f768581181f902" category="paragraph">別の Linux ホストを中央の HANA プラグイン・ホストとして使用する場合は、 SnapCenter UI で POST Quiesce コマンドとしてコマンドの /bin/sleep 60 を設定する必要があります。</block>
  <block id="8aa8a84f4f37f29ea89f20e3a69b300d" category="paragraph">次の図に、リソース保護設定画面での休止後のコマンドを示します。</block>
  <block id="5f41ebd846d632bd2b1a2264c1132da4" category="list-text">* データの急増。 * データの急増とバックアップ・ウィンドウの短縮には、バックアップ・インフラへの継続的な投資が必要です。つまり、より多くのテープドライブを調達し、追加のバックアップディスクスペースを確保し、より高速なバックアップネットワークを構築する必要があります。また、これらのテープ資産の格納と管理にかかる継続的なコストについても説明する必要があります。こうした問題には差分バックアップで対処することもできますが、リストアプロセスが煩雑で非常に時間がかかるうえ、複雑なため検証も難しくなります。このようなシステムでは、通常、 Recovery Time Objective （ RTO ；目標復旧時間）と Recovery Point Objective （ RPO ；目標復旧時点）が長くなり、ビジネスには受け入れられません。</block>
  <block id="1651b50e0d1cf61dd130c805642637d7" category="paragraph">ネットアップの Snapshot テクノロジを使用すれば、データベースのバックアップを数分で作成できます。Snapshot コピーではストレージプラットフォーム上の物理データブロックは移動されないため、 Snapshot コピーの作成に要する時間はデータベースのサイズに左右されません。また、 Snapshot コピーの作成時やアクティブファイルシステムのデータが変更されたときにデータブロックの移動やコピーが NetApp Snapshot テクノロジによって行われないため、稼働中の SAP システムのパフォーマンスに影響がありません。そのため、 Snapshot コピーの作成スケジュールは、対話形式またはバッチでのアクティビティのピーク期間を気にせずに作成できます。SAP とネットアップのお客様は、通常、複数のオンライン Snapshot バックアップを 1 日に行うようにスケジュールを設定します。たとえば、一般に 4 時間ごとなどです。作成された Snapshot バックアップをプライマリストレージシステムに 3~5 日間保持しています。</block>
  <block id="133a887f3b7a331b1bb97c917ab238b8" category="paragraph">Snapshot コピーは、リストア処理とリカバリ処理にも大きなメリットがあります。NetApp SnapRestore データリカバリソフトウェアを使用すると、データベース全体または利用可能な Snapshot コピーに基づいて、データベースの一部を任意の時点にリストアできます。このようなリストアプロセスは、データベースのサイズに関係なく数分で完了します。オンラインの Snapshot バックアップは 1 日に数回作成されるため、従来のバックアップ方式に比べて、リカバリプロセスに要する時間が大幅に短縮されます。24 時間以内ではなく数時間前の Snapshot コピーを使用してリストアできるため、適用するトランザクションログの数を少なくする必要があります。そのため、従来のシングルサイクルのテープバックアップでは数時間かかるのに対し、 RTO が数分に短縮されます。</block>
  <block id="6888872d812bb849b73e336be754410e" category="paragraph">Snapshot コピーバックアップは、アクティブなオンラインデータと同じディスクシステムに格納されます。セカンダリストレージへのバックアップに代わる手段としてではなく、補助的な用途で使用することを推奨します。リストアとリカバリのほとんどはプライマリストレージシステムで SnapRestore を使用して実行されます。セカンダリストレージからのリストアが必要になるのは、 Snapshot コピーが格納されているプライマリストレージシステムが損傷している場合のみです。セカンダリストレージは、たとえば月末のバックアップのように、 Snapshot コピーからは提供されなくなったバックアップをリストアする必要がある場合にも使用できます。</block>
  <block id="e608654d33837deefa07ba1970e5e003" category="paragraph">セカンダリストレージへのバックアップは、プライマリストレージに作成された Snapshot コピーがベースとなります。そのため、プライマリストレージシステムから直接データが読み取られ、 SAP データベースサーバに負荷は生成されません。プライマリストレージはセカンダリストレージと直接通信し、 NetApp SnapVault のディスクツーディスクバックアップを使用してバックアップデータをデスティネーションに送信します。</block>
  <block id="5a83d4498ee4c3a831980e216c538942" category="paragraph">SnapVault には、従来のバックアップに比べて大きな利点があります。最初のデータ転送でソースからデスティネーションにすべてのデータが転送され、以降のバックアップでは変更されたブロックだけがセカンダリストレージにコピーされます。そのため、プライマリストレージシステムへの負荷およびフルバックアップに要する時間が大幅に削減されます。SnapVault では変更されたブロックだけがデスティネーションに格納されるため、データベースのフルバックアップに必要なディスクスペースも少なくて済みます。</block>
  <block id="8357feb9601e96769166a4c960d3aca0" category="paragraph">解決策 は、ハイブリッドクラウド運用モデルにシームレスに拡張することもできます。ディザスタリカバリやオフサイトのバックアップを目的としたデータレプリケーションは、オンプレミスの NetApp ONTAP システムから、クラウドで実行されている Cloud Volumes ONTAP インスタンスに実施できます。SnapCenter は、 SAP HANA システムをオンプレミスで実行する場合でも、クラウドで実行する場合でも、データ保護とデータレプリケーションを一元的に管理するツールとして使用できます。次の図に、バックアップ解決策 の概要を示します。</block>
  <block id="c8c0c4fd6276899657fcf55f879b0bbb" category="paragraph">次のスクリーンショットは、ネットアップストレージ上で SAP HANA を実行しているお客様の HANA Studio を示しています。Snapshot コピーを使用して HANA データベースをバックアップしている。この図では、 Snapshot バックアップテクノロジを使用して、 HANA データベース（約 2.3TB のサイズ）を 2 分 11 秒でバックアップしています。</block>
  <block id="1019082efe6d65534f457340d1be279a" category="admonition">全体的なバックアップワークフローランタイムの最大の部分は、 HANA のバックアップセーブポイント処理を実行するために必要な時間です。この手順は、 HANA データベースの負荷によって異なります。ストレージ Snapshot バックアップ自体は、数秒で完了します。</block>
  <block id="81206476869ff48ddb7258539ced5bcc" category="section-title">目標復旧時間の比較</block>
  <block id="37aa1a462c93cfc77a8aa63e2f8ffd5a" category="paragraph">ファイルベースのバックアップでは、リストア時間はデータベースのサイズとバックアップインフラによって異なり、リストア速度は 1 秒あたりのメガバイト数で定義されます。たとえば、インフラで 250MBps の高速なリストア処理がサポートされている場合、データベースのサイズが 1TB にリストアされるまでに約 1 時間 10 分かかります。</block>
  <block id="852a28121e38cfc60cc3c1fa243f4eff" category="paragraph">ストレージ Snapshot コピーバックアップでは、リストア時間はデータベースのサイズに左右されず、プライマリストレージからリストアを実行できる数秒の範囲になります。セカンダリストレージからのリストアが必要になるのは、プライマリストレージが使用できなくなったときに災害が発生した場合だけです。</block>
  <block id="1173d8912da48858e849bb3fccbf7171" category="paragraph">データベースの開始時間は、行および列ストアのサイズによって異なります。列ストアの場合、開始時間は、データベースの起動時にプリロードされるデータの量によっても異なります。次の例では、開始時間は 30 分であると想定しています。開始時刻は、ファイルベースのリストアとリカバリ、および Snapshot に基づくリストアとリカバリで同じです。</block>
  <block id="5556b5c6ecf3f033b4ffde8d3c45eac4" category="paragraph">ファイルベースのデータバックアップでは、通常、バックアップスケジュールは 1 日に 1 回となります。バックアップによって本番環境のパフォーマンスが低下するため、通常はバックアップ頻度を高くすることはできません。したがって、最悪の場合は、フォワードリカバリ時に 1 日中に書き込まれたすべてのログを適用する必要があります。</block>
  <block id="e1740ff2f0b2a56fc2f953f3d1be5ecb" category="paragraph">ストレージ Snapshot コピーのデータバックアップは、通常、 SAP HANA データベースのパフォーマンスに影響しないため、頻繁にスケジュールされます。たとえば、 Snapshot コピーのバックアップを 6 時間ごとに実行するようにスケジュールした場合、最大でファイルベースのバックアップのリカバリ時間の 4 分の 1 （ 6 時間 /24 時間 = ¼ ）というリカバリ時間がかかります。</block>
  <block id="32378a49bfefae9d51083bafc161e544" category="paragraph">次の図に、 Snapshot バックアップの使用時の 1TB データベースの RTO の例を示します。ストレージベースの Snapshot バックアップでは、データベースのサイズに関係なく数秒でリストアが完了するため、 RTO はデータベースの開始時間と転送リカバリ時間にのみ左右されます。また、リストアとリカバリの実行タイミングによってもフォワードリカバリの時間が長くなりますが、バックアップの頻度が高い（この例では 6 時間ごと）ため、最大で 43 分までリカバリ時間が短縮されます。この例では、最大 RTO は 1 時間 13 分です。</block>
  <block id="a931b15763a0d7c48777aa949bbb60e7" category="paragraph">1 日に 1 回の Snapshot コピーでデータをバックアップする RTO は、ファイルベースのデータバックアップに比べてすでに 40% 短縮されています。1 日に 4 つの Snapshot バックアップを作成すると、削減率は 70% になります。また、 Snapshot のバックアップ頻度を 1 日あたり 4~6 個の Snapshot バックアップに増やすと、この図ではフラットな状態になります。したがって、お客様は通常、 1 日に 4~6 個の Snapshot バックアップを作成します。</block>
  <block id="09c2f8b288eb278a7e0b050639b8fb12" category="admonition">このグラフには、 HANA サーバの RAM サイズが表示されます。メモリ内のデータベースサイズは、サーバの RAM サイズの半分になるように計算されます。</block>
  <block id="cc7384b3c84a0bffa3195fb822301a4a" category="admonition">リストアとリカバリの所要時間は、次の前提に基づいて計算します。データベースは 250MBps でリストアできます。1 日のログファイルの数は、データベースサイズの 50% です。たとえば、 1TB のデータベースでは、 1 日 500MB のログファイルが作成されます。リカバリは 100Mbps で実行できます。</block>
  <block id="c1665b6df297e7a2e1db92f10416b879" category="summary">SAP では、ブロックの整合性チェックを実行するために、ストレージベースの Snapshot バックアップと週次ファイルベースのバックアップを組み合わせることを推奨しています。SnapCenter では、バックアップタイプとしてファイルベースのバックアップを選択するポリシーを使用して、ブロック整合性チェックを実行できます。</block>
  <block id="dccc440b322ed1d3d09bf6576f0a4793" category="doc">ブロック整合性チェック</block>
  <block id="676cfd91b13790927d9992a7d08c8828" category="paragraph">このポリシーを使用してバックアップをスケジュールすると、 SnapCenter によってシステムデータベースとテナントデータベース用の標準の SAP HANA ファイルバックアップが作成されます。</block>
  <block id="e31898da9c6e6dc3b7af9f990b041c59" category="paragraph">SnapCenter では、 Snapshot コピーベースのバックアップと同じ方法でブロック整合性チェックが表示されません。代わりに、サマリーカードには、ファイルベースのバックアップの数と、以前のバックアップのステータスが表示されます。</block>
  <block id="3fd5edce432881c2683af2b35468c624" category="paragraph">ブロック整合性チェックのバックアップは、 SnapCenter UI では削除できませんが、 PowerShell コマンドを使用して削除することはできます。</block>
  <block id="06a4abfaf0e161e7e3e07f7943ecd9a8" category="paragraph">SAP HANA のバックアップカタログには、システムデータベースとテナントデータベースの両方のエントリが表示されます。次の図に、システムデータベースのバックアップカタログにおける SnapCenter ブロックの整合性チェックを示します。</block>
  <block id="b2a42e5ff741a7da520a61fe7e9287fc" category="paragraph">ブロック整合性チェックが成功すると、標準の SAP HANA データバックアップファイルが作成されます。SnapCenter は、ファイルベースのデータバックアップ処理に、 HANA データベースで設定されているバックアップパスを使用します。</block>
  <block id="b7f33e6f09f01af6baa6ea548172f22f" category="summary">SnapCenter では、一般に、各 HANA データベースのリソース保護構成で定義されたスケジュールを使用してデータベースのバックアップが実行されます。オンデマンドデータベースバックアップを実行するには、 SnapCenter GUI 、 PowerShell コマンドライン、または REST API を使用します。</block>
  <block id="89f8bb80ca1403422295c6ad48f8cac7" category="doc">データベースのバックアップ</block>
  <block id="db84dde0c00214d066c28c0fa6b20a78" category="paragraph">SnapCenter では、一般に、各 HANA データベースのリソース保護構成で定義されたスケジュールを使用してデータベースのバックアップが実行されます。</block>
  <block id="c87782e3691915e9f853696cf50b790c" category="paragraph">オンデマンドデータベースバックアップを実行するには、 SnapCenter GUI 、 PowerShell コマンドライン、または REST API を使用します。</block>
  <block id="d8827f346e1ca85b7ec57393df66f099" category="section-title">SAP HANA Studio での SnapCenter バックアップの識別</block>
  <block id="44ba2e7ca4f9ce6053a12b79d760defb" category="paragraph">SnapCenter のリソーストポロジには、 SnapCenter を使用して作成されたバックアップのリストが表示されます。次の図に、プライマリストレージ上のバックアップと、最新のバックアップを示します。</block>
  <block id="8e6a036c1dbfbcdd51099ba8e159a0f5" category="paragraph">SAP HANA MDC システムのストレージ Snapshot コピーを使用したバックアップを実行する場合は、データボリュームの Snapshot コピーが作成されます。このデータボリュームには、システムデータベースのデータおよびすべてのテナントデータベースのデータが含まれます。この物理アーキテクチャを反映するため、 SnapCenter によって Snapshot バックアップがトリガーされるたびに、 SAP HANA はシステムデータベースとすべてのテナントデータベースの統合バックアップを内部的に実行します。その結果、 SAP HANA のバックアップカタログに、システムデータベース用とテナントデータベース用に 1 つずつ、合計複数のバックアップエントリが作成されます。</block>
  <block id="d9e26498378f71d1e41de1f3066a6505" category="admonition">SAP HANA シングルコンテナシステムの場合、データベースボリュームにはデータベースが 1 つだけ格納され、 SAP HANA のバックアップカタログにはエントリが 1 つしかありません。</block>
  <block id="c78ea61a0643b5d1741ee698d73c8126" category="paragraph">SAP HANA のバックアップ・カタログでは、 SnapCenter のバックアップ名は「 Comment 」フィールドと「 External Backup ID （ EBID ）」フィールドとして保存されます。システムデータベースの次のスクリーンショットと、テナントデータベース SS1 のスクリーンショットに表示されています。どちらの図も、コメントフィールドに格納されている SnapCenter バックアップ名と EBID を示しています。</block>
  <block id="763aeabe1237091e11c223fcdb6e514b" category="inline-link"><block ref="763aeabe1237091e11c223fcdb6e514b" category="inline-link-rx"></block></block>
  <block id="017ad38ce328eda5e6b4e873a97fec93" category="admonition">Snapshot ベースのバックアップについては、 HANA 2.0 SPS4 （リビジョン 40 および 41 ）リリースでは常にバックアップサイズがゼロになっています。これは、リビジョン 42 で修正されました。詳細については、『 SAP ノート』を参照してください<block ref="0ede2af82d168becfa8e8e328919c93f" category="inline-link-rx"></block>。</block>
  <block id="f22d323a2a4ca6a837dc9be2a7ef9849" category="admonition">SnapCenter で認識されるのは、それ自体のバックアップだけです。SAP HANA Studio などで作成された追加のバックアップは、 SAP HANA のカタログには表示されますが、 SnapCenter には表示されません。</block>
  <block id="d97f26fcfcf75422cef96edd3166fe81" category="section-title">ストレージシステム上での SnapCenter バックアップの特定</block>
  <block id="0b1c6a89ad613ff0c9a5e72c1a7cb7f6" category="paragraph">ストレージレイヤのバックアップを表示するには、 NetApp OnCommand System Manager を使用して、 SVM のボリュームビューでデータベースボリュームを選択します。下部の Snapshot コピータブには、ボリュームの Snapshot コピーが表示されます。次のスクリーンショットは ' プライマリ・ストレージで使用可能なデータベース・ボリューム SS1_data_mnt00001 のバックアップを示しています強調表示されているバックアップは、前のイメージの SnapCenter と SAP HANA Studio に表示されているバックアップで、同じ命名規則が使用されています。</block>
  <block id="a31d79c67df8a2b4b434b686c3882bf6" category="paragraph">次のスクリーンショットは、セカンダリ・ストレージ・システムにあるレプリケーション・ターゲット・ボリューム「 hana_sa1_data_mnt00001_dest 」で使用可能なバックアップを示しています。</block>
  <block id="4cbe8448ed645bcd05c25b0ed05a2ffc" category="section-title">プライマリストレージでのオンデマンドのデータベースバックアップ</block>
  <block id="9a18d22e51d061ba9e29d3fea1cbb740" category="list-text">リソースビューでリソースを選択し、その行をダブルクリックしてトポロジビューに切り替えます。</block>
  <block id="162a41f8614e6637ad948db15ee7bbd1" category="paragraph">リソーストポロジビューには、 SnapCenter を使用して作成された、使用可能なすべてのバックアップの概要が表示されます。上部の領域には、プライマリストレージ上のバックアップ（ローカルコピー）と、オフサイトのバックアップストレージ（バックアップコピー）にあるバックアップ（バックアップコピー）が表示されます。</block>
  <block id="e12fe165bcaa4995a69a0109bbcbfa29" category="list-text">一番上の行で、 Back Up Now （今すぐバックアップ）アイコンを選択して、オンデマンドバックアップを開始します。ドロップダウン・リストから ' バックアップ・ポリシー LocalSnap を選択し '[Backup] をクリックして ' オンデマンド・バックアップを開始します</block>
  <block id="442b3eee32be51815a4de7d8303b7341" category="inline-link-macro">「リソース保護の設定」</block>
  <block id="c88c7279bb6dbd2ece99c6b6b75a95f7" category="admonition">トポロジビューを閉じてから再度開いて、更新されたバックアップリストを確認する必要があります。</block>
  <block id="495ca2710421cfca56ba2e36c09339ad" category="list-text">ジョブの詳細は、 [ アクティビティ ] 領域でジョブのアクティビティ行をクリックすると表示されます。ログの表示をクリックすると、詳細なジョブログを開くことができます。</block>
  <block id="121b846ed404f10227b94111cb571489" category="list-text">SAP HANA Studio では、バックアップカタログに新しいバックアップが表示されます。バックアップカタログのコメントフィールドと EBID フィールドには、 SnapCenter と同じバックアップ名が使用されます。</block>
  <block id="703c46332afd81e1946cb2ad4ce00c93" category="section-title">SnapVault レプリケーションを使用したオンデマンドのデータベースバックアップ</block>
  <block id="dae832cbcba7d155d4c6451f7ae9587c" category="list-text">一番上の行で [Backup Now] アイコンを選択して、オンデマンド・バックアップを開始します。ドロップダウン・リストから ' バックアップ・ポリシー LocalSnapAndSnapVault' を選択し '[Backup] をクリックして ' オン・デマンド・バックアップを開始します</block>
  <block id="8d17cf93c266a000706498696e3f4769" category="list-text">ジョブの詳細は、 [ アクティビティ ] 領域でジョブのアクティビティ行をクリックすると表示されます。</block>
  <block id="1bdd9de63a778c886f72fc6c55b69544" category="list-text">バックアップコピーを選択すると、セカンダリストレージのバックアップが表示されます。レプリケートされたバックアップの名前は、プライマリストレージのバックアップ名と同じです。</block>
  <block id="894658d23e64b14d31e2add33d4d053b" category="summary">非データボリュームのバックアップは、 SAP HANA プラグインに統合された機能です。データベースインストールリソースと必要なログが残っていれば、データベースデータボリュームを保護して特定の時点に SAP HANA データベースをリストアおよびリカバリするだけで十分です。</block>
  <block id="9c0fde1c8553ad85618db06581560bad" category="doc">データボリューム以外のバックアップ用の SnapCenter リソース固有の設定</block>
  <block id="0226c147f6eac3c1fdb31ee7abb85e96" category="paragraph">他のデータファイルのリストアが必要な状況からリカバリするには、 SAP HANA データベースのバックアップを補うために、データボリューム以外のボリュームに対する追加のバックアップ戦略を開発することを推奨します。固有の要件に応じて、非データボリュームのバックアップはスケジュールの頻度と保持の設定が異なる場合があります。また、非データファイルを変更する頻度も考慮する必要があります。たとえば、 HANA ボリューム「 /hana/shared 」には、実行可能ファイルと SAP HANA トレースファイルが格納されています。実行ファイルが変更されるのは SAP HANA データベースがアップグレードされた場合だけですが、 SAP HANA の問題を分析するためには、 SAP HANA のトレースファイルのバックアップ頻度を高くする必要があります。</block>
  <block id="701304aa41af17415df3aa7320be043b" category="paragraph">SnapCenter の非データボリュームバックアップを使用すると、関連するすべてのボリュームの Snapshot コピーを数秒で作成でき、 SAP HANA データベースのバックアップと同じスペース効率化を実現できます。両者の違いは、 SAP HANA データベースとの SQL 通信は不要なことです。</block>
  <block id="e3e1681bd8a3d45858ea0fdcd572f8e5" category="section-title">データボリューム以外のリソースの構成</block>
  <block id="e45b47ec2fca633e83f5c4385ac898c6" category="paragraph">この例では、 SAP HANA データベース SS1 の非データボリュームを保護します。</block>
  <block id="d042be8219183ec4120acc5277a44865" category="list-text">[ リソース ] タブで、 [ データボリュームではない ] を選択し、 [ SAP HANA データベースの追加 ] をクリックします。</block>
  <block id="538fffc9423ae34761ac6ba6b5841ad7" category="list-text">SAP HANA データベースの追加ダイアログのステップ 1 で、リソースタイプリストから非データボリュームを選択します。リソースの名前、およびリソースに使用する関連 SID と SAP HANA プラグインホストを指定し、 [ 次へ ] をクリックします。</block>
  <block id="dc6781ad4f01aa22d21a245f1e236533" category="list-text">SVM とストレージボリュームをストレージ容量として追加し、次へをクリックします。</block>
  <block id="d0ff85892412dd4108d91789963c7dbd" category="list-text">概要ステップで、完了をクリックして設定を保存します。</block>
  <block id="38a80b556382ff0e9195ad3f4496627e" category="list-text">必要なすべてのデータボリューム以外のボリュームについて、同じ手順を繰り返します。</block>
  <block id="2decee12cecb2bc677055dacd4cdfa2f" category="list-text">新しいリソースの保護設定に進みます。</block>
  <block id="ce9bd5c4898fb736dd8369e2b8af8944" category="admonition">非データボリュームリソースのデータ保護は、 SAP HANA データベースリソースのワークフローと同じで、個々のリソースレベルで定義できます。</block>
  <block id="8804d3973c80da008d6c4cfb33ee6f3a" category="paragraph">次の図に、設定されているデータボリューム以外のリソースのリストを示します。</block>
  <block id="769b718779fbe38c65b122b69e0271a3" category="section-title">リソースグループ</block>
  <block id="850f14cc800444f77599dc97d2941041" category="paragraph">リソースグループを使用すると、同じ保護ポリシーとスケジュールを必要とする複数のリソースの保護を定義できます。リソースグループの一部である単一のリソースは、個別のレベルで保護することができます。</block>
  <block id="dbd494d169ca51a674da2e3537496d92" category="paragraph">リソースグループには次の機能があります。</block>
  <block id="6110a61d0bf8e9160700218a475a6763" category="list-text">リソースグループには 1 つ以上のリソースを追加できます。すべてのリソースが同じ SnapCenter プラグインに属している必要があります。</block>
  <block id="2583a6cfabdb6e8659c1e0889ef7d32a" category="list-text">保護はリソースグループレベルで定義できます。リソースグループ内のすべてのリソースは、保護されている場合は同じポリシーとスケジュールを使用します。</block>
  <block id="c412b4321d55f6a6a2d2d6f807892920" category="list-text">SnapCenter リポジトリ内のすべてのバックアップとストレージ Snapshot コピーには、リソース保護に定義されているものと同じ名前が付けられます。</block>
  <block id="249a5378bf40f0180cd729e65e99b9c3" category="list-text">リストア処理は、リソースグループの一部としてではなく、単一のリソースレベルに適用されます。</block>
  <block id="e990b5c5b90ded5db7b3ca93365a81e5" category="list-text">SnapCenter を使用して、リソースグループレベルで作成されたリソースのバックアップを削除する場合、このバックアップはリソースグループ内のすべてのリソースについて削除されます。バックアップを削除する場合は、 SnapCenter リポジトリからバックアップを削除するか、ストレージ Snapshot コピーを削除します。</block>
  <block id="b565830d52dbf51243943462fb70fe59" category="list-text">リソースグループの主なユースケースは、 SnapCenter で作成したバックアップを使用して、 SAP Landscape Management でシステムをクローニングする場合です。これについては、次のセクションで説明します。</block>
  <block id="ba5da7a68f8cd5eca48e3df6086a98c0" category="section-title">SnapCenter と SAP ランドスケープ管理の併用</block>
  <block id="35e271fbf0a1d067faf29bb2e12cf833" category="paragraph">NetApp SSC と SAP LaMa は、 NetApp SSC を使用してオンデマンドで Snapshot コピーを直接作成できますが、 SnapCenter を使用して作成した Snapshot コピーを利用することもできます。SnapCenter バックアップをシステムのクローニング処理やコピー処理のベースとして SAP LaMa を使って実行するには、次の前提条件を満たしている必要があります。</block>
  <block id="55fb179ba0dbaef14f4ae67701ba967c" category="list-text">SAP LaMa では、すべてのボリュームをバックアップに含める必要があります。これには、 SAP HANA のデータ、ログ、共有ボリュームが含まれます。</block>
  <block id="a45b79d50cacf7594adf94e98d02fe12" category="list-text">ストレージの Snapshot 名はすべて同じにする必要があります。</block>
  <block id="af1c8995ec23e1bd0ae4ec3ca3543a2d" category="list-text">ストレージスナップショット名は VCM で始める必要がある。</block>
  <block id="090e02de1070460f7847450e0bfd801a" category="admonition">通常のバックアップ処理では、ログボリュームを含めることは推奨されません。バックアップからログボリュームをリストアすると、最後のアクティブな REDO ログが上書きされ、データベースを最後の最新状態にリカバリできなくなります。</block>
  <block id="650ee54724b128d5e2bf7913c16163cd" category="paragraph">SnapCenter リソースグループは、上記のすべての要件を満たしています。SnapCenter では、 3 つのリソースが構成されます。各リソースはデータボリューム用、ログボリューム用、および共有ボリューム用の 1 つです。リソースはリソースグループに追加され、保護はリソースグループレベルで定義されます。リソースグループ保護では、最初に VCM を使用してカスタムスナップショット名を定義する必要がある。</block>
  <block id="be212c956204f2d074911d5f5278a925" category="summary">このテクニカルレポートで使用するラボセットアップには、 5 つの SAP HANA 構成が含まれています。</block>
  <block id="ab37b0897f2b28bb348c68a2d7ab5a5e" category="paragraph">このテクニカルレポートで使用するラボセットアップには、次の 5 種類の SAP HANA 構成が含まれています。</block>
  <block id="0e03eebb552b07ee65c7abe3b9c7d6f7" category="list-text">* MS1.*</block>
  <block id="4d7bb2ec16ebf6c53a55efea4d621a37" category="list-text">SAP HANA マルチホスト MDC のシングルテナントシステム</block>
  <block id="0afd06c83e04fc2747bb37f58375e710" category="list-text">中央のプラグインホスト（ SnapCenter サーバ）で管理</block>
  <block id="0d93b800c7f4d39ad9b81b7892689db5" category="list-text">ストレージプロトコルとして NFS を使用します</block>
  <block id="0f439d9c9ee319da448b6e5a32327941" category="list-text">SAP HANA シングルホスト MDC のシングルテナントシステム</block>
  <block id="e0bb5e1697d1c4f5d7ae6d3feadaf0a3" category="list-text">HANA プラグインが HANA データベースホストにインストールされている状態で自動検出されます</block>
  <block id="611216ecfb30bfebaa14ef82ab1dd0ec" category="list-text">* SM1. *</block>
  <block id="ae25c66c27863e282312520ba5251cd5" category="list-text">SAP HANA シングルホスト MDC のマルチテナントシステム</block>
  <block id="9ba0be3ffab3d754569badf1804f8d3b" category="list-text">中央のプラグインホスト（ SnapCenter サーバ）で管理</block>
  <block id="abccdef464fcfbc9a938fd63247cb6bb" category="list-text">* SS3.*</block>
  <block id="92047fcc565cab594e47ad89009764bd" category="list-text">ストレージプロトコルとして Fibre Channel SAN を使用します</block>
  <block id="f87a3ba7778533e03af98316f9d823a4" category="paragraph">以降のセクションでは、設定、バックアップ、リストア、リカバリの各ワークフローについて説明します。概要 では、ローカル Snapshot バックアップに加え、 SnapVault を使用したバックアップストレージへのレプリケーションも実行できます。Storage Virtual Machine （ SVM ）は、プライマリストレージは「 HANA プライマリ」、オフサイトバックアップストレージは「 HANA プライマリ」です。</block>
  <block id="cc70c3f1cc797c2261fb179e7b87cbb2" category="paragraph">SnapCenter サーバは、 HANA システム MS1 および SS2 の中央 HANA プラグインホストとして使用されます。</block>
  <block id="a7bf2acab613e56927ca1ba4e586af30" category="paragraph">次の図は、ラボのセットアップを示しています。</block>
  <block id="94ff220590f3f56bf66ac697c81fc4cb" category="summary">このセクションでは、この解決策 で使用されているコンポーネント、サポートされている SAP HANA のリリースと構成、および SnapCenter 4.6 の拡張機能について説明します。</block>
  <block id="44f0406e0b65477e22abb0af2670c920" category="doc">SnapCenter SAP HANA Backup 解決策 の略</block>
  <block id="8dfec560491833edefc6c6f71aba9fdc" category="paragraph">SnapCenter Backup 解決策 for SAP HANA には、次の領域があります。</block>
  <block id="0173cafa1c2bd31312469cc22b2ee819" category="list-text">非データ・ボリューム（例： /hana/shared ）バックアップとストレージ・ベースの Snapshot コピー：</block>
  <block id="eabcd15fb0326cf97b04fef8a19fb538" category="list-text">オフサイトのバックアップまたはディザスタリカバリロケーションへのレプリケーション：</block>
  <block id="3e736a1d51f4a0ea0f4ad47be7bd944d" category="list-text">SAP HANA データの Snapshot バックアップ</block>
  <block id="9c6c79a2246055e9fdb39ae657f0f886" category="list-text">データボリューム以外のボリューム</block>
  <block id="a9a8799b9193796c46f7880c75fd190c" category="list-text">オフサイトのバックアップストレージに保持管理を設定</block>
  <block id="074c5a464474e4351975c84a84ba967c" category="list-text">ファイルベースのバックアップを使用したデータベースブロックの整合性チェック：</block>
  <block id="7191f8de9290c359fb8c544612f38cc8" category="list-text">SAP HANA マルチテナントデータベースコンテナ（ MDC ）システムを使用したシングルテナントのリストア処理</block>
  <block id="e4f5593c4f95fe01e9bb1e5a603a2e02" category="paragraph">データベースデータファイルのバックアップは、 SnapCenter と SAP HANA 向けプラグインを組み合わせて実行されます。このプラグインは、 SAP HANA データベースのバックアップ保存ポイントをトリガーして、プライマリストレージシステムで作成された Snapshot コピーが SAP HANA データベースの整合性のあるイメージに基づいて作成されるようにします。</block>
  <block id="caf2cabe6654a975ccb9710e8a344950" category="paragraph">SnapCenter では、 SnapVault または NetApp SnapMirror を使用して、整合性のあるデータベースイメージをオフサイトのバックアップまたはディザスタリカバリロケーションにレプリケートできます。フィーチャー（ Feature ）：通常は、プライマリストレージとオフサイトのバックアップストレージに異なる保持ポリシーが定義されます。SnapCenter はプライマリストレージでの保持を処理し、 ONTAP はオフサイトのバックアップストレージでの保持を処理します。</block>
  <block id="6469c7a56441c8b63be2ea158e884a33" category="paragraph">SnapCenter では、 SAP HANA 関連のすべてのリソースを完全にバックアップするために、ストレージベースの Snapshot コピーを使用して SAP HANA プラグインを使用し、データ以外のすべてのボリュームをバックアップすることもできます。非データ・ボリュームは、データベース・データ・バックアップとは別にスケジュール設定できるため、保持ポリシーや保護ポリシーを個別に設定することができます。</block>
  <block id="e78eed5ba72730da9f47adc11f3c54db" category="paragraph">SAP HANA データベースは、ログバックアップを自動的に実行します。目標復旧時点に応じて、ログ・バックアップの保存場所に関するいくつかのオプションがあります。</block>
  <block id="0604ebbb1e2ad7e740154a7c284f4b0c" category="list-text">ログバックアップは、 NetApp MetroCluster ハイアベイラビリティ（ HA ）およびディザスタリカバリストレージソフトウェアを使用してデータを別の場所に同期的にミラーリングするストレージシステムに書き込まれます。</block>
  <block id="d5f00838bababddfb43beb4465ebc0cd" category="list-text">ログバックアップのデスティネーションは、同じプライマリストレージシステムで設定し、 SnapMirror によって同期または非同期でセカンダリストレージにレプリケートできます。</block>
  <block id="c65f36922e2aff940a69761d8f5472f5" category="list-text">ログバックアップのデスティネーションは、 SnapVault を使用してデータベースバックアップをレプリケートする、同じオフサイトのバックアップストレージに設定できます。この構成では、オフサイトのバックアップストレージに、ログバックアップをオフサイトのバックアップストレージに書き込むことができるように、プライマリストレージと同様の可用性要件があります。</block>
  <block id="4a3326877edcb379877fb00b3c8e2c5c" category="paragraph">SAP では、ブロックの整合性チェックを実行するために、ストレージベースの Snapshot バックアップと週次ファイルベースのバックアップを組み合わせることを推奨しています。ブロック整合性チェックは、 SnapCenter 内から実行できます。設定可能な保持ポリシーに基づいて、 SnapCenter は、プライマリストレージでのデータファイルバックアップの削除、ログファイルバックアップ、および SAP HANA のバックアップカタログを管理します。</block>
  <block id="56ed3e5a0893311ac5bc95fbcc59accd" category="admonition">SnapCenter はプライマリストレージでの保持を処理し、 ONTAP はセカンダリバックアップの保持を管理します。</block>
  <block id="20a208d0c21644982025cf3c8b139920" category="paragraph">次の図に、データベースとログのバックアップ構成の概要を示します。この図では、ログバックアップがオフサイトのバックアップストレージの NFS マウントに書き込まれます。</block>
  <block id="1176d7039f3984c8be34b0ca0d74a052" category="paragraph">SnapCenter では、データボリューム以外のボリュームのストレージベースの Snapshot バックアップを実行する際に、次のタスクを実行します。</block>
  <block id="5c724f929ca6d43af26f240326be9c07" category="list-text">データボリューム以外のストレージ Snapshot コピーの作成。</block>
  <block id="17b1e1416624c8733a1c56a9f6e2bddf" category="list-text">データボリュームの SnapVault 更新または SnapMirror 更新の実行（設定されている場合）。</block>
  <block id="63243cdf5e6c964519f840e76038b854" category="list-text">定義された保持ポリシーに基づいて、プライマリストレージのストレージ Snapshot コピーを削除します。</block>
  <block id="3855d2073477072ba2b2abf3881501de" category="paragraph">SAP HANA データベースのストレージベースの Snapshot バックアップを実行する場合、 SnapCenter は次のタスクを実行します。</block>
  <block id="d2e57dc1dee012c030a253e5b13686c5" category="list-text">SAP HANA バックアップ保存ポイントを作成して、永続性レイヤに整合性のあるイメージを作成する。</block>
  <block id="d4878186e7d0a0eaebd235c358b6ea67" category="list-text">データボリュームのストレージ Snapshot コピーの作成。</block>
  <block id="9c7d518082c6163c486cb2ca4ae3715a" category="list-text">SAP HANA バックアップカタログへのストレージ Snapshot バックアップの登録。</block>
  <block id="1a8bab70f16abac5fec44eb4a5970da7" category="list-text">SAP HANA バックアップセーブポイントのリリース。</block>
  <block id="907c11e1227f2e092d437101f5d24b18" category="list-text">プライマリまたはオフサイトのバックアップストレージにバックアップが存在しなくなった場合は、 SAP HANA のバックアップカタログのエントリを削除します。</block>
  <block id="f81fa7e47b429a74f3c326ccbe7d623c" category="list-text">保持ポリシーに基づいてバックアップが削除された場合、または手動で削除された場合、 SnapCenter は最も古いデータバックアップよりも古いログバックアップをすべて削除します。ログバックアップは、ファイルシステムと SAP HANA のバックアップカタログから削除されます。</block>
  <block id="02ec85da7a34534916a8902ad64c7b67" category="paragraph">SnapCenter は、 NFS または FC 接続のネットアップストレージシステム（ AFF および FAS ）を使用した SAP HANA シングルホスト構成とマルチホスト構成、および NFS を使用した AWS 、 Azure 、 Google Cloud Platform 、 AWS FSX ONTAP で Cloud Volumes ONTAP を実行している SAP HANA システムをサポートしています。</block>
  <block id="d6ce387b294b25dfab0c447868f0594a" category="paragraph">SnapCenter は、次の SAP HANA アーキテクチャとリリースをサポートしています。</block>
  <block id="c4f41244d46b23a479a0201aa120364f" category="list-text">SAP HANA の単一コンテナ： SAP HANA 1.0 SPS12</block>
  <block id="52759939d5c34ced894a8edb15e47c21" category="list-text">SAP HANA マルチテナントデータベースコンテナ（ MDC ）のシングルテナント： SAP HANA 2.0 SPS3 以降</block>
  <block id="5b969ece692bee20925041517740d2fc" category="list-text">SAP HANA マルチテナントデータベースコンテナ（ MDC ）の複数のテナント： SAP HANA 2.0 SPS4 以降</block>
  <block id="6c176e9f73681cb91e72213cd5479748" category="section-title">SnapCenter 4.6 の機能強化</block>
  <block id="04c675594bfdb975329fb2cae491292b" category="inline-link">TR-4719 『 SAP HANA System Replication 、 Backup and Recovery with SnapCenter 』</block>
  <block id="72180d0307c0939e956b5a3f8f96bbcb" category="summary">このセクションでは、 SnapCenter の概念と、 SAP HANA のリソース構成と導入に関連するベストプラクティスについて説明します。</block>
  <block id="50414ea6d37e50fb2a4f48ddf4085157" category="doc">SnapCenter の概念とベストプラクティス</block>
  <block id="d14a18b64c59033d7b1fea72542be464" category="section-title">SAP HANA のリソース構成オプションと概念</block>
  <block id="2ae9740860217e61f2af98868b88c403" category="paragraph">SnapCenter では、 SAP HANA データベースのリソース構成を 2 つの異なるアプローチで実行できます。</block>
  <block id="3783f6b09890c5b4eb00a25d23136015" category="list-text">* リソースを手動で構成。 * HANA のリソースとストレージの設置面積に関する情報は、手動で提供する必要があります。</block>
  <block id="98230b8b5c2c209c0d5176357f522161" category="list-text">* HANA リソースの自動検出。 * 自動検出により、 SnapCenter での HANA データベースの設定が簡易化され、リストアとリカバリが自動化されます。</block>
  <block id="4019aefaa340ef7fe5c0a93f7b12da28" category="paragraph">SnapCenter では、自動検出された HANA データベースのリソースのみがリストアとリカバリの自動化を有効にしていることを理解しておくことが重要です。SnapCenter で手動で設定した HANA データベースリソースは、 SnapCenter でリストア処理を実行したあとに手動でリカバリする必要があります。</block>
  <block id="da161102bc2d2a20a78e55971ee5f20b" category="paragraph">一方、 SnapCenter による自動検出は、 HANA のすべてのアーキテクチャとインフラ構成でサポートされているわけではありません。そのため、 HANA 環境では、混在するアプローチが必要になる場合があります。一部の HANA システム（ HANA マルチホストシステム）では手動でリソース設定を行う必要があり、それ以外はすべて自動検出を使用して設定できます。</block>
  <block id="60e1cc0fa5d2d1b50385b6799389520a" category="paragraph">リストアとリカバリの自動検出は、データベースホストで OS コマンドを実行できるかどうかによって異なります。たとえば、ファイルシステムやストレージの設置面積の検出、アンマウント、マウント、 LUN 検出などの処理が該当します。これらの処理は、 HANA プラグインと自動的に導入される SnapCenter Linux プラグインを使用して実行されます。そのため、自動検出とリストアとリカバリを可能にするためには、データベースホストに HANA プラグインを導入する必要があります。データベースホストに HANA プラグインを導入したあとに、自動検出を無効にすることもできます。この場合、リソースは手動で設定されたリソースになります。</block>
  <block id="9d2c3ff1f6040a4a4183ab744b9bef22" category="paragraph">次の図は、依存関係をまとめたものです。HANA の導入オプションの詳細については、「 SAP HANA プラグインの導入オプション」を参照してください。</block>
  <block id="a368b07ff59cd175b67a373e61562ea4" category="admonition">HANA と Linux のプラグインは、現在、インテルベースのシステムでのみ使用できます。HANA データベースを IBM Power Systems で実行している場合は、中央の HANA プラグインホストを使用する必要があります。</block>
  <block id="f1de58e649fb073c26f220815a243372" category="section-title">自動検出と自動リカバリのためにサポートされている HANA アーキテクチャ</block>
  <block id="18719832c6436a8c008c212810bf15af" category="paragraph">SnapCenter では、ほとんどの HANA 構成で自動検出と自動リストア / リカバリがサポートされていますが、 HANA の複数ホストシステムでは手動構成が必要です。</block>
  <block id="a63dac7fa35a6351b0737c3a29e304aa" category="paragraph">次の表に、自動検出がサポートされる HANA 構成を示します。</block>
  <block id="c8661b037a46b69bbf45a2280dec701a" category="cell">HANA プラグインのインストール場所：</block>
  <block id="c192c3996f72271e911ec99b804d7ab5" category="cell">HANA のアーキテクチャ</block>
  <block id="e15f9fd62bf7801afcf46240c3232b3b" category="cell">HANA システム構成</block>
  <block id="cba4f4cee5c6a3e6d8be8da68fa1234e" category="cell">インフラ</block>
  <block id="a7042aff750c8ec91be377f3b217096b" category="cell">HANA データベースホスト</block>
  <block id="df426d2e22dc5f5b5ec6c042d5e2ab75" category="cell">シングルホスト</block>
  <block id="b9ece6356946c2ba01def7109c68c98c" category="list-text">HANA の単一コンテナ</block>
  <block id="52860ed3c38e42893b21ee81457714b9" category="list-text">シングルテナントまたは複数テナントの SAP HANA マルチテナントデータベースコンテナ（ MDC</block>
  <block id="b215ac6a1d54500ab9c42b936b0d6472" category="list-text">HANA システムレプリケーション</block>
  <block id="1bde3a6d97a53256ffdc32c2e60b19e4" category="list-text">NFS のベアメタル</block>
  <block id="bf846a752539e263277cce3a01b0ef3f" category="list-text">Linux の論理ボリュームマネージャ（ LVM ）の有無に関係なく、 XFS と FC を使用するベアメタル</block>
  <block id="fa52887bff899f429be7e34ba0aca30e" category="list-text">VMware ： OS を直接 NFS マウント</block>
  <block id="31d688c2c278ac8c6f2de5552c62c217" category="admonition">複数のテナントを持つ HANA MDC システムは自動検出がサポートされていますが、現在の SnapCenter リリースでの自動リストアとリカバリはサポートされていません。</block>
  <block id="0fdb80dd2021599e02f364aec1ce87e4" category="section-title">HANA の手動リソース構成でサポートされている HANA アーキテクチャ</block>
  <block id="df07af8094b3ee56eff56119390494b0" category="paragraph">HANA のリソースの手動構成は、すべての HANA アーキテクチャでサポートされていますが、 HANA の中央プラグインホストが必要です。中央のプラグインホストには、 SnapCenter サーバ自体、または独立した Linux または Windows ホストを使用できます。</block>
  <block id="f3324258b431b338f35b941a24e2a31d" category="inline-link-macro">"HANA プラグインホストで自動検出を無効にします。 "</block>
  <block id="10b043404a82561d5bb6534bc181007e" category="paragraph">次の表に、 HANA の手動リソース構成でサポートされる HANA 構成を示します。</block>
  <block id="74827600dad7156e5af8dc96abb8b6a3" category="cell">HANA プラグインのインストール場所：</block>
  <block id="b801de73bc166ed48262745796be6285" category="cell">中央プラグインホスト（ SnapCenter サーバまたは個別の Linux ホスト）</block>
  <block id="d9bdea226bac10381a1614e5013be7f0" category="cell">単一または複数のホスト</block>
  <block id="2dca46890aff26d950c7fbab0d4585ee" category="list-text">シングルテナントまたはマルチテナントの HANA MDC</block>
  <block id="34a4c443d5ac7ef4a84362a477d590cf" category="list-text">Linux LVM の有無に関係なく、 XFS と FC を使用するベアメタル</block>
  <block id="a0889af6f554ac5c1d81e82642a71c33" category="section-title">SAP HANA プラグインの導入オプション</block>
  <block id="44f6084a7d2f87d42ce54d7be3882603" category="paragraph">次の図は、 SnapCenter サーバと SAP HANA データベースの論理ビューと通信を示しています。</block>
  <block id="71ff2461408968609609ecb43a245384" category="paragraph">SnapCenter サーバは、 SAP HANA プラグインを介して SAP HANA データベースと通信します。SAP HANA プラグインは、 SAP HANA hdbsql クライアントソフトウェアを使用して、 SAP HANA データベースに対して SQL コマンドを実行します。SAP HANA の hdbuserstore は、 SAP HANA データベースにアクセスするためのユーザクレデンシャル、ホスト名、ポート情報を提供するために使用されます。</block>
  <block id="51756ae7050f110da1d8b09a97d32f4b" category="admonition">SAP HANA プラグインと SAP hdbsql クライアントソフトウェア（ hdbuserstore 設定ツールを含む）は、同じホストに一緒にインストールする必要があります。</block>
  <block id="d2a1ba656d3714dbdff0ddf861b3b8db" category="paragraph">ホストには、 SnapCenter サーバ自体、独立した中央プラグインホスト、または個々の SAP HANA データベースホストを使用できます。</block>
  <block id="05bc1a07fb1a47dcf559561811b1659e" category="section-title">SnapCenter サーバの高可用性</block>
  <block id="8246a42ad0b2b0b8e76f40dfeb35457e" category="paragraph">SnapCenter は 2 ノード HA 構成でセットアップできます。このような構成では、アクティブ / パッシブモードでロードバランサ（ F5 など）を使用し、アクティブ SnapCenter ホストを指す仮想 IP アドレスを使用します。SnapCenter リポジトリ（ MySQL データベース）は、 SnapCenter データが常に同期されるように、 2 つのホスト間で SnapCenter によってレプリケートされます。</block>
  <block id="54adf17a2b80b8860e6e1a390f90fede" category="inline-link">ネットアップのナレッジベースのページ</block>
  <block id="2eef76e2dc4ca626269410901e4bc5b0" category="paragraph">HANA プラグインが SnapCenter サーバにインストールされている場合、 SnapCenter サーバ HA はサポートされません。HA 構成で SnapCenter をセットアップする場合は、 SnapCenter サーバに HANA プラグインをインストールしないでください。SnapCenter HA の詳細については、こちらを参照してください<block ref="7f1dbdda8b67a128ec90d71e0b35b828" category="inline-link-rx"></block>。</block>
  <block id="a1ade406b963f3d6ec1b4f643a4cfcae" category="section-title">SnapCenter サーバを中央の HANA プラグインホストとして使用</block>
  <block id="9b2126abefe85b2533ee827e80b78fab" category="paragraph">次の図に、 SnapCenter サーバを中央プラグインホストとして使用する場合の設定を示します。SAP HANA プラグインと SAP hdbsql クライアントソフトウェアは、 SnapCenter サーバにインストールされています。</block>
  <block id="9c56d8a5ff7d27ff338da44c24238927" category="paragraph">HANA プラグインは、ネットワーク経由で hdbclient を使用して管理対象 HANA データベースと通信できるため、個々の HANA データベースホストに SnapCenter コンポーネントをインストールする必要はありません。SnapCenter では、管理対象データベースに対してすべてのユーザストアキーが設定された中央の HANA プラグインホストを使用して、 HANA データベースを保護できます。</block>
  <block id="1bdf62e1b5487a7dd7db72eb38852420" category="paragraph">一方、自動検出のワークフロー自動化の強化、リストアとリカバリの自動化、 SAP システムの更新処理を行う際には、データベースホストに SnapCenter コンポーネントをインストールする必要があります。中央の HANA プラグインホストを使用している場合、これらの機能は使用できません。</block>
  <block id="ae1e55a6af8942f681e076e6b04696a0" category="paragraph">また、 HANA プラグインが SnapCenter サーバにインストールされている場合、インビルドの HA 機能を使用した SnapCenter サーバの高可用性は使用できません。SnapCenter サーバが VMware クラスタ内の VM で実行されている場合は、 VMware HA を使用して高可用性を実現できます。</block>
  <block id="d9dafc00f08c99f6393297b3d1b983ca" category="section-title">ホストを中央の HANA プラグインホストとして分離</block>
  <block id="e9dbb0d4fc4947f637931ad9410ef98d" category="paragraph">次の図は、独立した Linux ホストを中央のプラグインホストとして使用した場合の構成を示しています。この場合、 SAP HANA プラグインと SAP hdbsql クライアントソフトウェアが Linux ホストにインストールされています。</block>
  <block id="c5507abd0c0561490ba4a8e034538a25" category="admonition">また、個別の中央プラグインホストを Windows ホストにすることもできます。</block>
  <block id="a8c9df7032e6000ae2f56966f3b52ce3" category="paragraph">前のセクションで説明した機能の可用性に関する同様の制限は、別の中央プラグインホストにも適用されます。</block>
  <block id="b9e255186906a3f1053b2bc79578cec3" category="paragraph">ただし、この導入オプションでは、 SnapCenter サーバに組み込みの HA 機能を設定できます。また、 Linux クラスタ解決策 などを使用して、中央のプラグインホストも HA である必要があります。</block>
  <block id="0852f3b4e2c4f30c1da041b7a6cbb8e9" category="section-title">HANA プラグインを個々の HANA データベースホストに導入</block>
  <block id="9df69c7673fc042e431370931c5527f4" category="paragraph">次の図は、 SAP HANA プラグインが各 SAP HANA データベースホストにインストールされた構成を示しています。</block>
  <block id="a46c7fbab71d45b271c59c0623549af4" category="paragraph">HANA プラグインを各 HANA データベースホストにインストールすると、自動検出やリストアとリカバリの自動化などのすべての機能を使用できるようになります。また、 SnapCenter サーバは HA 構成でセットアップできます。</block>
  <block id="3bab1e1695b59a134fd6c85c6900b00c" category="section-title">HANA 混在プラグイン環境をサポート</block>
  <block id="43dd12e51388565e1a7e3256290d13f0" category="paragraph">このセクションの冒頭で説明したように、マルチホストシステムなど、一部の HANA システム構成には、中央のプラグインホストが必要です。そのため、ほとんどの SnapCenter 構成では HANA プラグインを混在させる必要があります。</block>
  <block id="31c391cfa19f4e529aad8e9d4304322f" category="paragraph">自動検出がサポートされているすべての HANA システム構成に対して、 HANA プラグインを HANA データベースホストに導入することを推奨します。マルチホスト構成などの他の HANA システムは、中央の HANA プラグインホストで管理する必要があります。</block>
  <block id="ebfc18223a0e2c918bcdaaee89afe3bf" category="paragraph">次の 2 つの図に、 SnapCenter サーバまたは別の Linux ホストを中央プラグインホストとして使用したプラグインの混在環境を示します。どちらの構成の場合も、オプションの HA 構成だけが違います。</block>
  <block id="e0975370dd4a6ada2fcb1cbc16ba5346" category="section-title">まとめと推奨事項</block>
  <block id="8c0f51e6e3ddaf2d16c747d639bf6fb7" category="paragraph">一般に、使用可能なすべての SnapCenter HANA 機能を有効にし、ワークフローの自動化を強化するために、各 SAP HANA ホストに HANA プラグインを導入することを推奨します。</block>
  <block id="ea49e9eedab2cd5fc40ad3a270f323db" category="admonition">HANA と Linux のプラグインは、現在、インテルベースのシステムでのみ使用できます。HANA データベースを IBM Power Systems で実行している場合は、中央の HANA プラグインホストを使用する必要があります。</block>
  <block id="c93f3a94956cde8bfff88029a06934b7" category="paragraph">HANA マルチホスト構成など、自動検出がサポートされない HANA 構成では、追加の中央 HANA プラグインホストを設定する必要があります。VMware HA を SnapCenter HA に利用できる場合は、中央のプラグインホストを SnapCenter サーバにすることができます。SnapCenter の組み込みの HA 機能を使用する場合は、別の Linux プラグインホストを使用します。</block>
  <block id="cafaa0fef59b4334c5f9e83b6a6ec3fb" category="paragraph">次の表は、さまざまな導入オプションをまとめたものです。</block>
  <block id="338113d1d9bb30138663dfbe65b5a954" category="cell">導入オプション</block>
  <block id="896f4eaa4f12972b56ed9cdd9a90b949" category="cell">依存関係</block>
  <block id="158ab554bd198cf5eb6712352227ee0d" category="cell">SnapCenter サーバに中央 HANA プラグインホストプラグインがインストールされている</block>
  <block id="1e25b3e432a986250c9e36b20847a657" category="cell">長所： * シングル HANA プラグイン、中央 HDB ユーザストア構成 * 個別の HANA データベースホストに SnapCenter ソフトウェアコンポーネントは不要 * すべての HANA アーキテクチャのサポート * 手動リソース構成 * 手動リカバリ * シングルテナントリストアのサポートなし * 中央プラグインホストでのプリスクリプトとポストスクリプトの手順の実行 * インビルド SnapCenter ハイアベイラビリティはサポートされていません * SID とテナント名の組み合わせは、すべての管理対象 HANA データベースで一意である * ログ すべての管理対象 HANA データベースでバックアップ保持管理が有効 / 無効になっています</block>
  <block id="e467947c25a4c0cfa9c7160a5e4ea52b" category="cell">別々の Linux サーバまたは Windows サーバにインストールされた中央 HANA プラグインホストプラグイン</block>
  <block id="6c913ab6553fe3bff0293d92d17dc0d7" category="cell">長所： * シングル HANA プラグイン、中央 HDB ユーザストア構成 * 個別の HANA データベースホストに SnapCenter ソフトウェアコンポーネントは不要 * すべての HANA アーキテクチャのサポート * インビルド SnapCenter 高可用性サポートされる構成： * 手動リソース構成 * 手動リカバリ * シングルテナントリストアのサポートなし * 中央プラグインホストで実行されるプリスクリプトとポストスクリプトの手順 * SID とテナント名の組み合わせは、すべての管理対象 HANA データベースで一意である * ログバックアップの保持管理が有効 / 無効になっているすべての管理対象です HANA データベース</block>
  <block id="ad06c241b2be44672e9861be7573e369" category="cell">HANA データベースサーバに個別の HANA プラグインをインストール</block>
  <block id="fb0c19e084fab4e216faf2a038f47a4f" category="cell">長所： * HANA リソースの自動検出 * リストアとリカバリの自動化 * シングルテナントリストア * SAP システム更新のためのプレスクリプトとポストスクリプトの自動化 * インビルド SnapCenter 高可用性サポート * 各 HANA データベースのログバックアップ保持管理を有効 / 無効にできます。 * HANA のアーキテクチャによってはサポートされていません。HANA マルチホストシステムには、追加の中央プラグインホストが必要です。* HANA プラグインは、 HANA データベースの各ホストに導入する必要があります</block>
  <block id="5fc8b5e93f497b93c0162f3924292d57" category="paragraph">SnapCenter と SAP HANA プラグインを設定する前に、各種 SAP システムの RTO と RPO の要件に基づいてデータ保護戦略を定義する必要があります。</block>
  <block id="bb58cd0ced0eb681e1b03e006fcf14a7" category="paragraph">定義する必要があるパラメータは次のとおりです。</block>
  <block id="20c4f7e2184f40e0c70515cc13e74929" category="list-text">Snapshot バックアップを実行する頻度</block>
  <block id="a9790aa832bdfe05ae357e9742498021" category="list-text">Snapshot コピーバックアップをプライマリストレージシステムに保存する期間</block>
  <block id="d27abbb31946413047160ed17a49cef6" category="list-text">ブロック整合性チェックはどのくらいの頻度で実行する必要がありますか。</block>
  <block id="fb5978d888365df302c5a4d4ab45a6d0" category="list-text">プライマリバックアップをオフサイトのバックアップサイトにレプリケートする必要があるか。</block>
  <block id="15bb013c8042cd30e50b101536a819ac" category="list-text">バックアップをオフサイトのバックアップストレージに保管する期間</block>
  <block id="a76fbe238755f54f2cc8ad0ef1e50790" category="paragraph">次の表に、システムタイプの本番、開発、およびテストのデータ保護パラメータの例を示します。本番用システムでは、高いバックアップ頻度が定義されており、バックアップはオフサイトのバックアップサイトに 1 日に 1 回レプリケートされます。テスト用システムの要件は低く、バックアップのレプリケーションはありません。</block>
  <block id="4e92547e997fe98c132fd1cfb873bc65" category="cell">バックアップ頻度</block>
  <block id="336d382a0ace20046f30116decc1a58b" category="cell">プライマリの保持</block>
  <block id="0359f5661845e7cea5b46bee1591ba1f" category="cell">2 日</block>
  <block id="859dfafd0d5f98d972cbef18f555a178" category="cell">オフサイトのバックアップサイトへのレプリケーション</block>
  <block id="28187cfc0c9b8d99a69446b85d6836f9" category="cell">1 日に 1 回</block>
  <block id="9f671a43519ba35ba07e5cc7fd68ea1e" category="cell">オフサイトへのバックアップの保持</block>
  <block id="a9adf02fea7b0107b5a712a45e51076a" category="cell">2 週間</block>
  <block id="e681a3b45989b468533c4b90ee960bf9" category="cell">該当なし</block>
  <block id="d40d1bfa53df32e86debc960673d124c" category="paragraph">次の表に、データ保護パラメータに設定する必要があるポリシーを示します。</block>
  <block id="23b66e99cd6ba31940d72ec834e12a16" category="cell">PolicyLocalSnap というプロンプトに対して表示され</block>
  <block id="57d76f4b223551090681c2d3d087b612" category="cell">PolicyLocalSnapAndSnapVault</block>
  <block id="8086e83684ef6d0154834ccea000d123" category="cell">PolicyBlockIntegrityCheck 」を参照してください</block>
  <block id="eb5e64a6ddbc74a072fcf0bbf2472273" category="cell">Snapshot ベース</block>
  <block id="f65710a865ee85dd3e4b8394da061f2a" category="cell">スケジュール頻度</block>
  <block id="e23d3690726ce7e0baec7f3e456f2d11" category="paragraph">LocalSnapshot ポリシーは ' 本番システム ' 開発システム ' およびテスト・システムに使用され '2 日間の保持期間を持つローカル Snapshot バックアップをカバーします</block>
  <block id="aacaec8f3c328fa76a33359dd411858a" category="paragraph">リソース保護設定では、スケジュールはシステムタイプごとに異なります。</block>
  <block id="e443afc7dea88a72ac5d95deb950a430" category="list-text">* 製造 * 4 時間ごとにスケジュールを設定します。</block>
  <block id="258d77a49c4d5819dfead3dccee318a9" category="list-text">* 開発。 * 4 時間ごとにスケジュールを設定します。</block>
  <block id="2e743186e90f3e121e96136221ff58f5" category="list-text">* テスト * 4 時間ごとにスケジュールを設定します。</block>
  <block id="511f903aab4f11abd60bb71f0cb0a9c5" category="paragraph">「 LocalSnapAndSnapVault' 」ポリシーは、本番システムおよび開発システムで、オフサイトのバックアップストレージへの日次レプリケーションをカバーするために使用されます。</block>
  <block id="30eeb20f202457a8361e6337268b5d10" category="paragraph">リソース保護構成では、スケジュールは本番環境と開発環境に対して定義されます。</block>
  <block id="b8aa0eddba68c4b5a67e4b59d7c54dc1" category="list-text">* 生産。 * 毎日スケジュールを設定します。</block>
  <block id="f20f3a1d7e3572bd81183a3c1f9633d5" category="list-text">* 開発。 * 毎日スケジュールを設定します。</block>
  <block id="6b012e8cfab09dc8484b04ce2f914df2" category="paragraph">「 BlockIntegrityCheck 」ポリシーは、本番システムおよび開発システムで、ファイルベースのバックアップを使用した週次ブロック整合性チェックをカバーするために使用されます。</block>
  <block id="e8530a36631f0403c3fcc21b5cd70abc" category="list-text">* 生産。 * 毎週スケジュールを設定します。</block>
  <block id="2169c09d81c725a1f3131276107d3db2" category="list-text">* 開発。 * 毎週スケジュールを設定します。</block>
  <block id="8fef54544250744aa553b98687de9f40" category="paragraph">オフサイトのバックアップポリシーを使用する個々の SAP HANA データベースに対して、ストレージレイヤで保護関係を設定する必要があります。保護関係は、レプリケートされるボリュームとバックアップの保持をオフサイトのバックアップストレージで定義します。</block>
  <block id="8870e02513ebfc93b4625271f6e5eede" category="paragraph">この例では、本番用システムと開発用システムごとに、オフサイトのバックアップストレージに 2 週間のデータ保持期間を定義します。</block>
  <block id="a858d77b86373ca0b7cdae460153a0e8" category="admonition">この例では、 SAP HANA データベースのリソースと非データボリュームのリソースの保護ポリシーと保持方法は異なりますが、</block>
  <block id="51a5bb1295ec95e66a60bbb918690373" category="paragraph">SAP は、 HANA 2.0 SPS4 を使用する MDC のマルチテナントシステムの Snapshot バックアップをサポートするようになりました。SnapCenter は、複数のテナントを持つ HANA MDC システムの Snapshot バックアップ処理をサポートしています。SnapCenter は、 HANA MDC システムの 2 つの異なるリストア処理もサポートしています。システム全体、システム DB 、およびすべてのテナントをリストアすることも、テナントを 1 つだけリストアすることもできます。SnapCenter でこれらの処理を実行するための前提条件がいくつかあります。</block>
  <block id="4698c998854cf1f3f7f0982109f67d65" category="paragraph">MDC システムでは、テナント設定が静的であるとは限りません。テナントを追加したり、テナントを削除したりできます。SnapCenter は、 HANA データベースが SnapCenter に追加されたときに検出された構成に依存しません。バックアップ処理の実行時に使用可能なテナントを SnapCenter が把握しておく必要があります。</block>
  <block id="491c6a51dcb7a300a2eeff899d3420f0" category="paragraph">シングルテナントのリストア処理を有効にするには、各 Snapshot バックアップに含まれるテナントが SnapCenter に認識されている必要があります。また、 Snapshot バックアップに含まれる各テナントにどのファイルおよびディレクトリが属するかを把握しておく必要があります。</block>
  <block id="e8ab2d6ac8e55a17560a37dec1e4938f" category="paragraph">したがって、バックアップ処理を実行するたびに、テナント情報を取得する必要があります。これには、テナント名、および対応するファイルとディレクトリの情報が含まれます。シングルテナントのリストア処理をサポートできるようにするには、このデータを Snapshot バックアップのメタデータに格納する必要があります。次のステップは、 Snapshot バックアップ処理そのものです。この手順には、 HANA のバックアップセーブポイント、ストレージの Snapshot バックアップ、および SQL コマンドをトリガーして Snapshot 処理を終了する SQL コマンドが含まれています。close コマンドを使用すると、 HANA データベースがシステム DB と各テナントのバックアップカタログを更新します。</block>
  <block id="53f017ef2e2913c1affe326e6d58147d" category="paragraph">データバックアップの保持管理と HANA のバックアップカタログ管理のために、 SnapCenter では、最初の手順で特定されたシステムデータベースとすべてのテナントデータベースに対してカタログ削除処理を実行する必要があります。ログバックアップの場合と同様に、 SnapCenter ワークフローは、バックアップ処理の一部であった各テナントに対して実行する必要があります。</block>
  <block id="87d2bd3ffe470713cfe8f85f66872001" category="paragraph">SnapCenter では、次の順序で SAP HANA データベースがバックアップされます。</block>
  <block id="c431a2b730735975215b43173bf6d91e" category="list-text">SnapCenter が HANA データベースからテナントのリストを読み取ります。</block>
  <block id="bbaec7daa0b136f892a8e18b3c38d0f0" category="list-text">SnapCenter は、各テナントのファイルとディレクトリを HANA データベースから読み取ります。</block>
  <block id="fd4f9437bcf770e6f4b4b5b2c53ed88c" category="list-text">テナント情報は、このバックアップ処理の SnapCenter メタデータに格納されます。</block>
  <block id="388052672cabc52a6671bee667609de4" category="list-text">SnapCenter が SAP HANA のグローバル同期バックアップ保存ポイントをトリガーし、整合性が取れたデータベースイメージを永続性レイヤに作成します。</block>
  <block id="79cf1027a83c90d2e6216fec04575789" category="admonition">SAP HANA MDC のシングルまたはマルチテナントシステムの場合は、システムデータベースと各テナントデータベースの同期されたグローバルバックアップの保存ポイントが作成されます。</block>
  <block id="a61afd60d46e728ee82e2e6d96469475" category="list-text">SnapCenter は、リソースに対して設定されたすべてのデータボリュームのストレージ Snapshot コピーを作成します。このシングルホスト HANA データベースの例には、データボリュームが 1 つしかありません。SAP HANA マルチホストデータベースには、複数のデータボリュームがあります。</block>
  <block id="177edc528df877c70e8b0192fbc99b54" category="list-text">SnapCenter を使用して、ストレージ Snapshot バックアップが SAP HANA バックアップカタログに登録されます。</block>
  <block id="1f6807835340f29ecafd981b7a0921ab" category="list-text">SnapCenter によって、 SAP HANA のバックアップ保存ポイントが削除されます。</block>
  <block id="04f1db44df5ec237cae0e9c588ac120b" category="list-text">SnapCenter は、リソース内に設定されているすべてのデータボリュームに対して SnapVault または SnapMirror の更新を開始します。</block>
  <block id="2066b7a8e7b635126a83d5d0b7e1ef31" category="admonition">この手順は、選択したポリシーに SnapVault または SnapMirror のレプリケーションが含まれている場合にのみ実行されます。</block>
  <block id="f3a7fa0f01c591ef532e61f9aa267de5" category="list-text">SnapCenter は、プライマリストレージで定義されたバックアップの保持ポリシーに基づいて、データベース内のストレージ Snapshot コピーとバックアップエントリ、および SAP HANA のバックアップカタログを削除します。HANA のバックアップカタログ処理は、システムデータベースとすべてのテナントに対して実行されます。</block>
  <block id="bbd0b34cf66469256e79a07516383b10" category="admonition">バックアップがセカンダリストレージに残っている場合、 SAP HANA のカタログのエントリは削除されません。</block>
  <block id="30f926688a4ab105b79243923a23e688" category="list-text">SnapCenter は、ファイルシステムと SAP HANA のバックアップカタログにある、 SAP HANA のバックアップカタログにある最も古いデータバックアップよりも古いすべてのログバックアップを削除します。これらの処理はシステムデータベースおよびすべてのテナントに対して実行されます。</block>
  <block id="d7b12b1b6c96a142344e59506ea8eb16" category="admonition">この手順は、ログバックアップの不要ファイルの削除が無効になっていない場合にのみ実行します。</block>
  <block id="12dc7f50145a958b80895e61e0dc9d4e" category="paragraph">SnapCenter は、次の順序でブロック整合性チェックを実行します。</block>
  <block id="6499fcfd02abec50ac59cc0e7da2ac2b" category="list-text">SnapCenter は、システムデータベースと各テナントに対してファイルベースのバックアップ処理をトリガーします。</block>
  <block id="ac0e3469b6536d2a3f561f868db15f69" category="list-text">SnapCenter は、ブロック整合性チェック処理用に定義された保持ポリシーに基づいて、データベース、ファイルシステム、および SAP HANA のバックアップカタログからファイルベースのバックアップを削除します。ファイルシステムと HANA のバックアップカタログに関するバックアップの削除は、システムデータベースとすべてのテナントに対して実行されます。</block>
  <block id="ca5d71be6f3f63979efa5c8e27395b80" category="paragraph">データバックアップ保持管理とログバックアップの不要ファイルの削除は、次の保持管理を含む 5 つのメイン領域に分割できます。</block>
  <block id="90cb263080fdc60abfd71e3449e03aa2" category="list-text">プライマリストレージでのローカルバックアップ</block>
  <block id="d130f8b5cd745779ae15b9fb88645075" category="list-text">セカンダリストレージでバックアップを実行する</block>
  <block id="96716c544304319656c23d4bd613d02a" category="section-title">プライマリストレージでのローカルバックアップの保持管理</block>
  <block id="8ad39493f65893bc4270bde100245f14" category="paragraph">SnapCenter は、 SnapCenter バックアップポリシーに定義された保持設定に従って、プライマリストレージと SnapCenter リポジトリの Snapshot コピーを削除することで、 SAP HANA データベースのバックアップと非データボリュームのバックアップを削除します。</block>
  <block id="edd5176847fe9cdca52d5020294a02ad" category="admonition">SnapCenter では、スケジュールされたバックアップとオンデマンドバックアップの両方で保持管理を個別に処理できることに注意してください。</block>
  <block id="6e3969ad88d0fc23326c45dbf0aaa083" category="paragraph">プライマリストレージのローカルバックアップは、 SnapCenter で手動で削除することもできます。</block>
  <block id="0ca384dce310ffb08f5955561d1f27cf" category="paragraph">SnapCenter は、 SnapCenter バックアップポリシーに定義された保持設定に従ってファイルシステム上のバックアップを削除することで、ファイルベースのバックアップを削除します。</block>
  <block id="344a187b4604a60989c916b3113d9f35" category="admonition">スケジュールバックアップまたはオンデマンドバックアップでは、 SnapCenter で保持管理を個別に実行できることに注意してください。</block>
  <block id="4ccde41240784b8793e1a64b542f9ac3" category="section-title">セカンダリストレージでのバックアップの保持管理</block>
  <block id="1efb946fa11931ea4d152ed87661fa40" category="paragraph">セカンダリストレージでのバックアップの保持管理は、 ONTAP 保護関係に定義された保持設定に基づいて ONTAP によって処理されます。</block>
  <block id="79b3fea1775e45a010e1441bb92a4a7f" category="paragraph">SnapCenter リポジトリ内のセカンダリストレージでこれらの変更内容を同期するために、 SnapCenter ではスケジュールされたクリーンアップジョブを使用します。このクリーンアップジョブは、すべての SnapCenter プラグインとすべてのリソースについて、すべてのセカンダリストレージのバックアップを SnapCenter リポジトリと同期します。</block>
  <block id="98fdd1840e4c60a7aea08cc51e60e00c" category="paragraph">デフォルトでは、クリーンアップジョブは週に 1 回スケジュールされます。この週次スケジュールでは、 SnapCenter および SAP HANA Studio でのバックアップの削除は、セカンダリストレージですでに削除されているバックアップと比較して遅延します。この不整合を回避するために、 1 日に 1 回など、スケジュールを高い頻度に変更することができます。</block>
  <block id="6650411a4183dbf558fd1208e2c9841c" category="admonition">リソースのトポロジビューで更新ボタンをクリックして、個々のリソースのクリーンアップジョブを手動でトリガーすることもできます。</block>
  <block id="24bcff4ae11dafd8b12386259a025073" category="inline-link-macro">「オフサイトバックアップストレージとのバックアップ同期のスケジューリング頻度を変更します。」</block>
  <block id="40d811c159a7ac26c3d925c44e5f1b3b" category="paragraph">SnapCenter がバックアップ、ローカル Snapshot またはファイルベースを削除した場合、またはセカンダリストレージでバックアップの削除を特定した場合は、 SAP HANA のバックアップカタログからこのデータバックアップも削除されます。</block>
  <block id="480e97c8fce55ceacfe516da2b28e4b0" category="paragraph">SnapCenter は、プライマリストレージでローカル Snapshot バックアップの SAP HANA カタログエントリを削除する前に、セカンダリストレージにバックアップが残っているかどうかを確認します。</block>
  <block id="6c7719cbfa68d680a5f8e9eaf41834c0" category="paragraph">最新のデータバックアップよりも古いログバックアップはフォワードリカバリで不要になり、削除可能です。</block>
  <block id="0f8ca98038ea7609903b53ed9775429b" category="paragraph">SnapCenter は、ファイルシステムレベルおよび SAP HANA のバックアップカタログでの不要なログファイルバックアップの削除を次の手順で処理します。</block>
  <block id="b74aa809ad4d4bf579ac16558af9e82c" category="list-text">SnapCenter は、 SAP HANA のバックアップカタログを読み取り、成功した最も古いファイルベースバックアップまたは Snapshot バックアップのバックアップ ID を取得します。</block>
  <block id="77bca62e752a7e53551ce5ca4c0cc56e" category="list-text">SnapCenter は、 SAP HANA カタログ内のすべてのログバックアップと、このバックアップ ID よりも古いファイルシステムを削除します。</block>
  <block id="4fd7cb34c055677c7845e0e0eddb1866" category="admonition">SnapCenter では、 SnapCenter で作成されたバックアップの不要な削除のみが処理されます。SnapCenter の外部で追加のファイルベースのバックアップを作成する場合は、ファイルベースのバックアップがバックアップカタログから削除されていることを確認する必要があります。このようなデータバックアップがバックアップカタログから手動で削除されないと、最も古いデータバックアップになる可能性があります。また、このファイルベースのバックアップが削除されるまで、古いログバックアップは削除されません。</block>
  <block id="b95762f66ee55056931b793e886c1e3b" category="admonition">ポリシー設定でオンデマンドバックアップに対して保持が定義されていても、不要なファイルの削除は別のオンデマンドバックアップが実行されたときにのみ実行されます。そのため、通常、 SnapCenter でオンデマンドバックアップを手動で削除して、これらのバックアップが SAP HANA バックアップカタログからも削除され、ログバックアップの不要な削除が古いオンデマンドバックアップに基づいていないことを確認する必要があります。</block>
  <block id="197793c26e17cc5efd62568eaffb6624" category="paragraph">従来のデータベースの変更率と比較して、ストレージレイヤのブロック変更率が高いことを考慮する必要があります。列ストアの HANA テーブルのマージプロセスにより、テーブル全体が変更されたブロックだけでなくディスクに書き込まれます。</block>
  <block id="af3abf38f2c084a1935b333f9ba155b9" category="paragraph">1 日に複数の Snapshot バックアップを作成した場合、顧客ベースから得られるデータの日次変更率は 20~50% です。SnapVault ターゲットでレプリケーションを 1 日に 1 回しか実行しない場合、通常は日単位の変更率が小さくなります。</block>
  <block id="a9c5176056bc688c2b5d249e742fdf00" category="section-title">リストア処理とリカバリ処理</block>
  <block id="ff1aa6965291c159da72f82aca64bc82" category="section-title">SnapCenter を使用したリストア処理</block>
  <block id="9c9e0fed6239589a5da391c8e31d6e68" category="paragraph">HANA データベースに関しては、 SnapCenter は 2 つの異なるリストア処理をサポートしています。</block>
  <block id="45f0626024dd5af174d07f4f74d4aa7b" category="list-text">* リソース全体のリストア。 * HANA システムのすべてのデータがリストアされます。HANA システムに 1 つ以上のテナントがある場合は、システムデータベースのデータとすべてのテナントのデータがリストアされます。</block>
  <block id="9dd9f3619476df5c4a0c5a56c9bedbcb" category="list-text">* 単一テナントのリストア。 * 選択したテナントのデータのみがリストアされます。</block>
  <block id="a5e7df954560d21487e5fa2e03adaf43" category="paragraph">ストレージに関して言えば、上記のリストア処理は、使用するストレージプロトコル（ NFS またはファイバチャネル SAN ）、設定されているデータ保護（プライマリストレージにオフサイトのバックアップストレージがあるかどうかに関係なく）、それぞれ別の方法で実行する必要があります。 また、リストア処理に使用するバックアップを選択します（プライマリまたはオフサイトのバックアップストレージからリストアします）。</block>
  <block id="903b0347fbc98572431542d78c9c5054" category="section-title">プライマリストレージからのリソース全体のリストア</block>
  <block id="7aea2eb041f9eff72ead2cd294f80186" category="paragraph">プライマリストレージからリソース全体をリストアする場合、 SnapCenter では、リストア処理を実行するために 2 つの異なる ONTAP 機能がサポートされます。次の 2 つの機能から選択できます。</block>
  <block id="1cd3a846077636ddc693f619ce7088f0" category="list-text">* ボリューム・ベース SnapRestore 。 * ボリューム・ベースの SnapRestore は、ストレージ・ボリュームの内容を、選択した Snapshot バックアップの状態に戻します。</block>
  <block id="be41c2cd74a9f110ff20720143d3bf81" category="list-text">NFS を使用して自動検出されたリソースで利用可能なボリュームリバートチェックボックス。</block>
  <block id="e3ebff15becb67ef4948427fc7491f81" category="list-text">手動で構成されたリソースの [Complete Resource] オプションボタン。</block>
  <block id="534800278e6bf7ba0bef69f2122dfba8" category="list-text">* ファイル・ベースの SnapRestore * 単一ファイル SnapRestore とも呼ばれるファイル・ベースの SnapRestore は ' すべての個別ファイル（ NFS ）またはすべての LUN （ SAN ）をリストアします</block>
  <block id="dfaf64eeed2495c2699fc12771706533" category="list-text">自動検出されたリソースのデフォルトのリストア方法。NFS のボリュームリバートチェックボックスを使用して変更できます。</block>
  <block id="90e702706a64d8e3634ef3f8e3aaa1ac" category="list-text">手動で構成されたリソース用のファイルレベルオプションボタン。</block>
  <block id="85a98b4a30ff802cd7b2a3ba93cc0821" category="paragraph">次の表に、各種のリストア方式の比較を示します。</block>
  <block id="3f20050e38321d186cb4ef82c159cd57" category="cell">ボリュームベース SnapRestore</block>
  <block id="d739125500200d5a4441aaac492be125" category="cell">ファイルベースの SnapRestore</block>
  <block id="2e04633adac71ae9581b86c49821647c" category="cell">リストア処理の速度</block>
  <block id="a48a9c2e0ec922b419ab2b2d9f9da767" category="cell">ボリュームサイズに関係なく、非常に高速です</block>
  <block id="396bb30537b6cf03c5e8eb139b15ecc6" category="cell">リストア処理は非常に高速ですが、ストレージシステムでバックグラウンドコピージョブが使用されるため、新しい Snapshot バックアップの作成がブロックされます</block>
  <block id="56b5076d3adb0c7e2bc3d51a22eb96d7" category="cell">Snapshot バックアップ履歴</block>
  <block id="ce671637bb895c1d526f778b09f0658d" category="cell">古い Snapshot バックアップにリストアすると、新しい Snapshot バックアップがすべて削除されます。</block>
  <block id="a053bc35a63576c7a170f33ff67297f2" category="cell">影響はありません</block>
  <block id="a054e062f75a92a1754c560097c4fae7" category="cell">ディレクトリ構造のリストア</block>
  <block id="a9d00c75e7901626b56ba90d58b35a50" category="cell">ディレクトリ構造もリストアされます</block>
  <block id="35bae59ed941fa0c4d38db0eb565658f" category="cell">nfs ：個々のファイルのみをリストアし、ディレクトリ構造はリストアしません。ディレクトリ構造も失われた場合は、リストア処理の実行前に手動で作成する必要があります。 SAN ：ディレクトリ構造もリストアされます</block>
  <block id="49d21bd8b9bbd6ecf06a49b6bb034d75" category="cell">オフサイトのバックアップストレージにレプリケーションするように構成されたリソース</block>
  <block id="426c45e16d0b6c2ccc80cd5f47659d55" category="cell">ボリュームベースのリストアを、 SnapVault 同期に使用されている Snapshot コピーよりも古い Snapshot コピーバックアップには実行できません</block>
  <block id="877b742de992b43acf10192ba5e8f616" category="cell">Snapshot バックアップを選択できます</block>
  <block id="d8f15654a7ecfd80ce41d20cf09409ad" category="section-title">オフサイトのバックアップストレージから完全なリソースをリストア</block>
  <block id="cc813ee1ea3959cc775bcd6ae8201cfe" category="paragraph">オフサイトのバックアップストレージからのリストアは、必ず SnapVault リストア処理を使用して実行します。この場合、ストレージボリュームのすべてのファイルまたはすべての LUN が、 Snapshot バックアップの内容で上書きされます。</block>
  <block id="c65cfccc27dad897a6ee52d7f025e91d" category="section-title">単一テナントのリストア</block>
  <block id="29dcd697b97e7e87cd810ff0c0274566" category="paragraph">単一のテナントをリストアするには、ファイルベースのリストア処理が必要です。使用するストレージプロトコルに応じて、 SnapCenter で実行されるリストアワークフローは異なります。</block>
  <block id="7369fcede1216c5a449bffa4016f597a" category="list-text">NFS ：</block>
  <block id="91954bd3c94d4f4f72e4c3007d6d4c09" category="list-text">プライマリストレージ。ファイルベースの SnapRestore 処理は、テナントデータベースのすべてのファイルに対して実行されます。</block>
  <block id="341fc1f6fde1c01ceb9c0e121cb8aaee" category="list-text">オフサイトのバックアップストレージ： SnapVault リストア処理は、テナントデータベースのすべてのファイルに対して実行されます。</block>
  <block id="85e9e72057a18b950343000578489311" category="list-text">SAN ：</block>
  <block id="b3c57720ef183814a9674313373c9377" category="list-text">プライマリストレージ。LUN をクローニングしてデータベースホストに接続し、テナントデータベースのすべてのファイルをコピーします。</block>
  <block id="52e32a19625ab4545a5954161ac46893" category="list-text">オフサイトのバックアップストレージ。LUN をクローニングしてデータベースホストに接続し、テナントデータベースのすべてのファイルをコピーします。</block>
  <block id="43b75ec27fb52d4870e6f47cad818a7f" category="section-title">自動検出された HANA シングルコンテナおよび MDC シングルテナントシステムのリストアとリカバリ</block>
  <block id="27ae2d5fdcf3c08eb8f123d6c1b7eed0" category="paragraph">自動検出された HANA シングルコンテナシステムと HANA MDC シングルテナントシステムは、 SnapCenter を使用した自動リストアとリカバリが有効になります。これらの HANA システムについては、次の図に示すように、 SnapCenter では 3 種類のリストアとリカバリのワークフローがサポートされています。</block>
  <block id="a512c46a13eca7d22567426830119dbb" category="list-text">* シングルテナントで手動リカバリ * 。シングルテナントのリストア処理を選択すると、選択した Snapshot バックアップに含まれるすべてのテナントが SnapCenter に表示されます。テナントデータベースは手動で停止してリカバリする必要があります。SnapCenter でのリストア処理は、 NFS での単一ファイルの SnapRestore 処理、または SAN 環境でのクローニング、マウント、コピーの処理で行われます。</block>
  <block id="cfae0f5adb05d26e7f81eb470db45103" category="list-text">* 自動リカバリ機能を備えた完全なリソース。 * 完全なリソースのリストア操作と自動リカバリを選択した場合、 SnapCenter により完全なワークフローが自動化されます。SnapCenter では、最新の状態、ポイントインタイム、または特定のバックアップリカバリ処理がサポートされます。選択したリカバリ処理は、システムとテナントデータベースに使用されます。</block>
  <block id="203194d065313487cfd7ffa63c9ba2c0" category="list-text">* 手動リカバリを伴う完全なリソース。 * リカバリなしを選択すると、 SnapCenter は HANA データベースを停止し、必要なファイルシステム（アンマウント、マウント）およびリストア処理を実行します。システムデータベースとテナントデータベースを手動でリカバリする必要があります。</block>
  <block id="c162464cff3cb9771674cd84e513d789" category="section-title">自動検出された HANA MDC のマルチテナントシステムのリストアとリカバリ</block>
  <block id="05ec573421455228e9a6f35c31cc4d8b" category="paragraph">複数のテナントを持つ HANA MDC システムは自動的に検出されますが、自動リストアとリカバリは現在の SnapCenter リリースではサポートされていません。複数のテナントを持つ MDC システムの場合は、次の図に示すように、 SnapCenter では 2 つの異なるリストアとリカバリのワークフローがサポートされています。</block>
  <block id="ce9f584a687168c594173020f153bccb" category="list-text">シングルテナントと手動リカバリ</block>
  <block id="da2e94d85e230dc9ba2a260a5dab3781" category="list-text">手動リカバリでリソースを完全にリカバリ</block>
  <block id="66c227f4c6b143b23ab683bee1e2aa88" category="paragraph">ワークフローは、前のセクションで説明したものと同じです。</block>
  <block id="a648c0c28f1f9e0a64434fefbcc6a68f" category="section-title">手動で構成した HANA リソースのリストアとリカバリ</block>
  <block id="72758f6f86b5537b8bd7bd5417cd9bb2" category="paragraph">手動構成の HANA リソースは、リストアとリカバリの自動化が有効になっていません。また、シングルテナントまたは複数テナントの MDC システムでは、単一テナントのリストア処理はサポートされていません。</block>
  <block id="8d2b5d00efaa377631e838bf988ca953" category="paragraph">構成した HANA の手動リソースの場合、 SnapCenter では、次の図に示すように手動リカバリのみがサポートされます。手動リカバリのワークフローは、前のセクションで説明したものと同じです。</block>
  <block id="3cf5b4d5940056fb37b1db43a2f24a02" category="section-title">リストア処理とリカバリ処理の概要</block>
  <block id="9a363bf2d0172f00374a64753398a456" category="paragraph">次の表は、 SnapCenter の HANA リソース構成に応じたリストア処理とリカバリ処理をまとめたものです。</block>
  <block id="eafac937ca579dd3ce0b4dd532e2c8e3" category="cell">SnapCenter リソース構成</block>
  <block id="9abf603644887736e44b05da99235ce3" category="cell">リストアとリカバリのオプション</block>
  <block id="a743a25fccef3ac17ddcd779c402fdbd" category="cell">HANA データベースを停止します</block>
  <block id="874c3404431451fc560e43c2af62ff91" category="cell">マウント前にアンマウントし、リストア後にマウントします</block>
  <block id="9ca7026f0c05a889d43d668c61a8a1eb" category="cell">自動検出単一コンテナ MDC のシングルテナント</block>
  <block id="7e8db99e35f3a54c8dfa0a30be5f006b" category="list-text">どちらかを使用してリソースを完了します</block>
  <block id="fa1b1897eea412c9728e599e116e7c1c" category="list-text">デフォルト（すべてのファイル）</block>
  <block id="44127b3908ec00df1f97444914d5bce5" category="list-text">ボリュームのリバート（プライマリストレージからの NFS のみ）</block>
  <block id="a54c3b8a5e1c3a02d1b445d0e6a72b1b" category="list-text">自動リカバリが選択されました</block>
  <block id="4e6fc046b6021c44b0bc83312f59b2d4" category="cell">SnapCenter による自動化</block>
  <block id="cf458e0c5f16417e392686a3c916a31b" category="list-text">リカバリが選択されていません</block>
  <block id="e1ba155a9f2e8c3be94020eef32a0301" category="cell">手動</block>
  <block id="908b61fb2167f81e0a639da67ff266b5" category="list-text">テナントのリストア</block>
  <block id="25a8d668beb192aabdbff9bfeafd2ee7" category="cell">MDC の複数のテナントを自動検出</block>
  <block id="7a2c38503258c11c1a26b160c05baf30" category="list-text">自動リカバリはサポートされていません</block>
  <block id="f3b7e79bd9c82eafaec1c6c93745bc65" category="cell">すべての手動設定リソース</block>
  <block id="329b6d7a4d53380c2598ad10c6779f08" category="list-text">完全なリソース（ = ボリュームの復元、 NFS および SAN でプライマリストレージからのみ使用可能）</block>
  <block id="c6487658bd5c74c99c6b1ad10eda7e67" category="list-text">ファイルレベル（すべてのファイル）</block>
  <block id="0a3b81cd04b7ee3bbb79ae9a19dc8656" category="sidebar">SnapCenter を使用した SAP HANA のバックアップとリカバリ</block>
  <block id="d7ca353f8f69588ea48c2bafac41c0d7" category="sidebar">SnapCenter の初期設定</block>
  <block id="c50aa3f02a43d1792d7198bd3766142c" category="summary">このセクションでは、ONTAP ファイルシステムのFSXとピアSVMを作成する方法、ターゲットボリュームを作成する方法、SnapMirrorポリシーを作成する方法、SnapMirror関係を作成する方法、およびSnapMirrorを初期化する方法について説明します。</block>
  <block id="dbf9d2787d072a4fd34082b47aacfe77" category="doc">ONTAP ファイルシステムのレプリケーション関係をFSXに設定します</block>
  <block id="98651d7cc1c378d485ba8f375d4d7dbd" category="inline-link">SnapMirrorレプリケーションのワークフロー（netapp.com）</block>
  <block id="b5beb3cfb3b1b16081425e9d6e52d915" category="paragraph">SnapMirrorの設定オプションに関する追加情報 については、ONTAP のドキュメントを参照してください<block ref="a679b656ad5513b2e5948e853501b769" category="inline-link-rx"></block>。</block>
  <block id="35271451318f12e2f5cc52cc3a8a6d22" category="list-text">ONTAP ファイルシステムのソースFSX :`FSxId00fa9e3c784b6abb`</block>
  <block id="5936d785731bc7c4b4fb1addddd3c4ae" category="list-text">ソースSVM：「sapcc-sana-svm</block>
  <block id="83473822e15b41d9976df9e62816bf1e" category="list-text">ONTAP ファイル・システム用のターゲットFSX：FsxId05f7f00af49dc7a3e</block>
  <block id="184d9d97bac5976851f8d3d29c6eb7b3" category="list-text">ターゲットSVM：sapcc-backup-target-zone5`</block>
  <block id="13a408d84a52802ccb7fc9d194ec03a6" category="section-title">ONTAP ファイルシステム用のピアFSX</block>
  <block id="0b06a3f79e2e9507c1505d7e5ecbd420" category="admonition">「peer-addrs」は、デスティネーションクラスタのクラスタIPです。</block>
  <block id="bce6381c4cea64c81cbc9ed883116e79" category="section-title">SVMをピアリング</block>
  <block id="eb9a4a5509950dc1c19cc313a888ad57" category="section-title">ターゲットボリュームを作成します</block>
  <block id="78ba09c1e6974a1fb593d751fc2ae60f" category="paragraph">レプリケーションターゲットとしてフラグを設定するには、「dp」タイプのターゲットボリュームを作成する必要があります。</block>
  <block id="55d42bd9ef30094c89253387e26ced80" category="section-title">SnapMirror ポリシーを作成する</block>
  <block id="d26ad042aedd077c7d434fe094c98f8d" category="paragraph">SnapMirrorポリシーと追加ルールで保持とSnapMirrorラベルを定義し、レプリケートするSnapshotを特定します。あとでSnapCenter ポリシーを作成するときは、同じラベルを使用する必要があります。</block>
  <block id="4e9cf532300b4450e6f840b010b2f183" category="section-title">SnapMirror関係を作成</block>
  <block id="07cfc8eda6d55b5eb0fb5db40ea9fa3c" category="paragraph">これで、ソースボリュームとターゲットボリュームの関係に加え、XDPタイプと前の手順で作成したポリシーが定義されます。</block>
  <block id="c5d142fafd8837228c0357960c716915" category="section-title">SnapMirrorを初期化</block>
  <block id="3a30d9da07e9c53ea40e049da7fc7fdc" category="paragraph">このコマンドを使用すると、最初のレプリケーションが開始されます。これは、ソースボリュームからターゲットボリュームへのすべてのデータのフル転送です。</block>
  <block id="86a1f7ab04e42924fc2f5709b4b53d19" category="paragraph">レプリケーションのステータスは'snapmirror showコマンドを使用して確認できます</block>
  <block id="ab5c6d77e6be89dfafd62072722d1f8d" category="summary">このセクションでは、SnapCenter にバックアップSVMを追加する方法について説明します。</block>
  <block id="3e3ce5c2a6c9e71dd944b379b54040fc" category="doc">SnapCenter にバックアップSVMを追加</block>
  <block id="be7788774fa38e42c5b2c6ad478f7e0d" category="paragraph">SnapCenter にバックアップSVMを追加するには、次の手順を実行します。</block>
  <block id="69a827a353f1759f83d4d29038339b5e" category="list-text">SnapVault ターゲットボリュームが配置されているSVMをSnapCenter に設定します。</block>
  <block id="7ff3bfb984e16ba0e9ddeea3a9675aba" category="list-text">[その他のオプション]ウィンドウで、プラットフォームとして[すべてのFlash FAS ]を選択し、[セカンダリ]を選択します。</block>
  <block id="17a507a9ef1c4ff633b35e3f95052658" category="paragraph">これで、SVMをSnapCenter で使用できるようになります。</block>
  <block id="594405c63145846b5ef5da75637c651c" category="summary">ここでは、オンデマンドのSnapshotバックアップの作成方法と、オンデマンドのブロック整合性チェック処理について説明します。</block>
  <block id="ecc57313124902e4c42227ae61bb9bf1" category="doc">SnapCenter バックアップ処理</block>
  <block id="fd2e55c1e41efe9b784a15be371759b1" category="section-title">オンデマンドのSnapshotバックアップを作成します</block>
  <block id="7657283c697ca0582f3be9790868181b" category="paragraph">オンデマンドのSnapshotバックアップを作成するには、次の手順を実行します。</block>
  <block id="056e429fcb2f6a7c1a53fbbc544c6426" category="list-text">リソースビューで、リソースを選択し、行をダブルクリックしてトポロジビューに切り替えます。</block>
  <block id="2ac85cad7240f8f0669e69bab5c0fddc" category="paragraph">リソーストポロジビューには、SnapCenter を使用して作成された、使用可能なすべてのバックアップの概要が表示されます。上部には、プライマリストレージのバックアップ（ローカルコピー）と、オフサイトのバックアップストレージ（バックアップコピー）のバックアップトポロジが表示されます。</block>
  <block id="80ccdc0d27069c1ff7eda00fad9ce630" category="list-text">一番上の行で、 Back Up Now （今すぐバックアップ）アイコンを選択して、オンデマンドバックアップを開始します。</block>
  <block id="fd5d1357b318fbf4e649f0de7314c3f9" category="list-text">ドロップダウン・リストから'バックアップ・ポリシーLocalSnapを選択し'[Backup]をクリックして'オンデマンド・バックアップを開始します</block>
  <block id="25f3c4b4983c7aeeea861e3dbda6f2e4" category="paragraph">前の5つのジョブのログは、Topologyビューの下部にあるActivity領域に表示されます。</block>
  <block id="8748d7533b9ff0f8de956dca869cf164" category="list-text">ジョブの詳細は、 [ アクティビティ ] 領域でジョブのアクティビティ行をクリックすると表示されます。ログの表示をクリックすると、詳細なジョブログを開くことができます</block>
  <block id="0ba847d81f910709c3c09aa75fa0ad47" category="inline-link-macro">「HANAリソースを構成して保護する」</block>
  <block id="886f063ff3cbce042bd5354957ab45fe" category="paragraph">SAP HANA のバックアップ・カタログでは、 SnapCenter のバックアップ名は「 Comment 」フィールドと「 External Backup ID （ EBID ）」フィールドとして保存されます。次の図に、システムデータベースとテナントデータベースPFXの次の図を示します。</block>
  <block id="b0fea066e4357286d1022c0f348cda79" category="paragraph">ONTAP ファイルシステムのFSXでは、SVMのコンソールに接続してSnapshotバックアップを表示できます。</block>
  <block id="a8b02af2d15bda403394c0199a693bf0" category="section-title">オンデマンドのブロック整合性チェック処理を作成する</block>
  <block id="32b5fe8164d6968ffd17b6d1728e1103" category="paragraph">ポリシーBlockIntegrityCheckを選択すると、Snapshotバックアップジョブと同様にオンデマンドでブロック整合性チェック処理が実行されます。このポリシーを使用してバックアップをスケジュールすると、 SnapCenter によってシステムデータベースとテナントデータベース用の標準の SAP HANA ファイルバックアップが作成されます。</block>
  <block id="ba7aeca897359e25127ed4621d0fedba" category="paragraph">SAP HANA のバックアップカタログには、システムデータベースとテナントデータベースの両方のエントリが表示されます。次の図は、システムとテナントデータベースのバックアップカタログ内のSnapCenter ブロックの整合性チェックを示しています。</block>
  <block id="3453b83e04ff7c4b2293244874e7dd53" category="paragraph">ブロック整合性チェックが成功すると、標準の SAP HANA データバックアップファイルが作成されます。SnapCenter では、ファイルベースのデータバックアップ処理に、HANAデータベースで設定されたバックアップパスが使用されます。</block>
  <block id="fa8e9c099eedc452a4d7a73d21130c08" category="summary">このセクションでは、リソース保護にポリシーを追加する方法について説明します。</block>
  <block id="f6e2ee2d6349e048bf2c27a62ae4e46c" category="doc">リソースの保護にポリシーを追加します</block>
  <block id="1da64551d06b94d7b482063dbb2e35e1" category="paragraph">次の図に示すように、新しいポリシーをHANAのリソース保護構成に追加する必要があります。</block>
  <block id="8d6efb0dba912228a4f9680328b7569b" category="paragraph">セットアップでは、日次スケジュールを定義します。</block>
  <block id="8d672d6879c8db3a9c37e06acd4d7571" category="summary">このテクニカルレポートでは、Amazon FSX上でNetApp ONTAP とNetApp SnapCenter を使用したSAP HANAデータ保護のベストプラクティスについて説明します。このドキュメントでは、 SnapCenter の概念、設定に関する推奨事項、設定やバックアップ処理などの運用ワークフローについて説明します。 リストア処理とリカバリ処理を行うことができます。</block>
  <block id="042f7a2c227ce333d4132cb3d2f72c1a" category="doc">TR-4926：『SAP HANA on Amazon FSX for NetApp ONTAP - Backup and Recovery with SnapCenter 』</block>
  <block id="945a22530e2c0bc909fe7bd733744001" category="paragraph">今日の企業には、 SAP アプリケーションを中断なく継続的に利用できることが求められています。データ量が増え続け、システムバックアップなどの日常的な保守作業が必要になった場合に、一貫したパフォーマンスレベルが期待されます。SAPデータベースのバックアップは重要な作業であり、本番用SAPシステムのパフォーマンスに大きく影響する可能性があります。</block>
  <block id="22eb5cd58a9c358396971f25290eeb1e" category="paragraph">バックアップウィンドウは短くなっている一方で、バックアップするデータの量は増え続けています。そのため、バックアップを実行してもビジネスプロセスへの影響を最小限に抑えることができれば、時間を見つけることは困難です。本番環境と非本番環境のSAPシステムのダウンタイムは、ビジネスコストを削減するために最小化する必要があるため、SAPシステムのリストアとリカバリに要する時間は重要です。</block>
  <block id="a93f4cc43678f9ab3b805d2bb40079f2" category="summary">ベースのSnapCenter 構成とHANAリソースの保護については、このセクションの手順を実行する必要があります。</block>
  <block id="359afa6593b15e77c26003b8273f9004" category="section-title">設定手順の概要</block>
  <block id="0960b23dd4a17a6020075c6227b9232f" category="paragraph">ベースSnapCenter 構成とHANAリソースの保護について、次の手順を実行する必要があります。各手順の詳細については、以降の章で説明します。</block>
  <block id="caa4a49314502e7c0e18c5dab680cc2b" category="list-text">SAP HANAバックアップユーザとhdbuserstoreキーを設定します。hdbsqlクライアントでHANAデータベースにアクセスするために使用します。</block>
  <block id="feba79381e14c9bc7a08ea5d266dc327" category="list-text">SnapCenter でストレージを設定します。SnapCenter からONTAP SVMのFSXにアクセスするためのクレデンシャル</block>
  <block id="709b936bce2a1736edd0f031dc27af83" category="list-text">プラグイン導入のクレデンシャルを設定する。必要なSnapCenter プラグインをHANAデータベースホストに自動的に導入してインストールするために使用します。</block>
  <block id="21df4d6c65c5d1b22f73da36d70707b2" category="list-text">SnapCenter にHANAホストを追加します。必要なSnapCenter プラグインを導入してインストールします。</block>
  <block id="224a7e7662399b8780f32fdc84c2ae1b" category="list-text">ポリシーを設定する。バックアップ処理のタイプ（Snapshot、ファイル）、保持設定、およびSnapshotバックアップのオプションレプリケーションを定義します。</block>
  <block id="215c8d01e52220d94bfc06b2ff7c04f6" category="list-text">HANAのリソース保護を設定する。hdbuserstoreキーを入力し、HANAリソースにポリシーとスケジュールを適用します。</block>
  <block id="e55ff41af170b5ea45b9f0f5d18c388e" category="paragraph">次の図は、バックアップユーザの作成に使用できるSAP HANA Studioを示しています</block>
  <block id="81301f8e5191357519759b3297ce2d44" category="paragraph">必要な権限は、HANA 2.0 SPS5リリースで変更されています。backup admin、catalog read、database backup admin、およびdatabase recovery operator以前のリリースの場合は、バックアップ管理者とカタログの読み取りで十分です。</block>
  <block id="0fc753b520c4227f940435dc5b8f402a" category="paragraph">SAP HANA MDCシステムの場合は、システムデータベースにユーザを作成する必要があります。これは、システムデータベースとテナントデータベースのすべてのバックアップコマンドがシステムデータベースを使用して実行されるためです。</block>
  <block id="75cb7cd589bf636cc5ca574de687f7b2" category="paragraph">次のコマンドは'&lt;sid&gt;adm`ユーザを使用したユーザストア設定に使用されます</block>
  <block id="1d18928f61e38eb05e7e01ba72ddd5e3" category="paragraph">SnapCenter は、「 &lt;sid&gt;adm 」ユーザを使用して HANA データベースと通信します。したがって、ユーザストアキーは、データベースホスト上の&lt;%sid&gt;adm`ユーザを使用して設定する必要があります。通常、 SAP HANA hdbsql クライアントソフトウェアは、データベースサーバのインストールと一緒にインストールされます。そうでない場合は、先にhdbclientをインストールする必要があります。</block>
  <block id="47359db53576b27891d283bf529b35d5" category="paragraph">SAP HANA MDCの設定では、ポート「3&lt;instanceNo&gt;13」はシステムデータベースへのSQLアクセス用の標準ポートであり、hdbuserstoreの設定で使用する必要があります。</block>
  <block id="d73493837316727c01ae9815d9355939" category="paragraph">SAP HANA マルチホストを設定する場合は、すべてのホストにユーザストアキーを設定する必要があります。SnapCenter は指定された各キーを使用してデータベースへの接続を試みます。そのため、異なるホストへのSAP HANAサービスのフェイルオーバーとは独立して動作します。ラボのセットアップでは、システムPFXのユーザ「pfxadm」のユーザストアキーを設定しました。これは、シングルテナントのシングルホストHANA MDCシステムです。</block>
  <block id="92b9d3db3fdb1957b4c4d34e73939c5d" category="paragraph">キーを使用するHANAシステムデータベースへのアクセスは、「hdbsql」コマンドで確認できます。</block>
  <block id="fcc101f2c66262c23387819df7a461c8" category="paragraph">SnapCenter でストレージを設定するには、次の手順を実行します。</block>
  <block id="578d00099c13466294fdf336b017f275" category="list-text">SnapCenter UIで、ストレージシステムを選択します。</block>
  <block id="72ff7091ffb09be1df45aed0830b1c03" category="paragraph">ストレージシステムのタイプとして、ONTAP SVMまたはONTAP クラスタを選択できます。次の例では、SVM管理を選択しています。</block>
  <block id="8604e4985adf9ff19cf645c562016a2c" category="list-text">ストレージシステムを追加し、必要なホスト名とクレデンシャルを入力するには、Newをクリックします。</block>
  <block id="21de7574224c54d506a9f9f69185f1bd" category="paragraph">次の図に示すように、SVMユーザをvsadminユーザにする必要はありません。通常、ユーザは SVM 上で設定し、バックアップとリストアの処理を実行するために必要な権限を割り当てます。必要な権限については、を参照してください<block ref="7b715dbc2fecfcb275c5209e8e720c86" category="inline-link-rx"></block> 「 Minimum ONTAP Privileges Required 」の項を参照してください。</block>
  <block id="ac0a876fac34b08db6fd053849b9a61c" category="list-text">ストレージプラットフォームを構成するには、[その他のオプション]をクリックします。</block>
  <block id="eb29cb32fb88ca7c229236d5f25dce2a" category="list-text">ストレージシステムとしてAll Flash FAS を選択して、FSX for ONTAP に含まれているライセンスがSnapCenter で使用可能になっていることを確認します。</block>
  <block id="299439100d029701f59616597606d753" category="paragraph">SVM「sapcc-sana-svm」がSnapCenter で設定されました。</block>
  <block id="0572ed1f74a831bbe0d08a962826f1d9" category="section-title">プラグイン導入用のクレデンシャルを作成します</block>
  <block id="cfc5ece26f0c93a92ccccb43983e85df" category="paragraph">SnapCenter を有効にして必要なプラグインをHANAホストに導入できるようにするには、ユーザクレデンシャルを設定する必要があります。</block>
  <block id="200a5ea310bf58e32ff8608924910f7f" category="list-text">ラボのセットアップでは、プラグインの導入に使用されるHANAホストに新しいユーザー「SnapCenter 」を設定しました。次の図に示すように、sudo prvileeを有効にする必要があります。</block>
  <block id="1517d504e38dc374c8f101f4e81ef219" category="section-title">SAP HANAホストを追加します</block>
  <block id="c6c86914a12d68144f1f2b237b771ca3" category="paragraph">SAP HANAホストを追加すると、SnapCenter によって必要なプラグインがデータベースホストに導入され、自動検出処理が実行されます。</block>
  <block id="db0309ae0b66c918b50e10cf960adac6" category="paragraph">SAP HANA プラグインには、 Java 64 ビットバージョン 1.8 が必要です。ホストをSnapCenter に追加する前に、ホストにJavaをインストールする必要があります。</block>
  <block id="51a98b038742fddf88a6bf0cac86fe16" category="paragraph">OpenJDKまたはOracle JavaはSnapCenter でサポートされています。</block>
  <block id="f92f162575ca24726f81e3984b27fd2c" category="paragraph">SAP HANAホストを追加するには、次の手順を実行します。</block>
  <block id="e56209b057aa06956c0e0556d62be7c1" category="paragraph">HANAとLinuxプラグインのインストールが自動的に開始されます。インストールが完了すると、ホストのステータス列にConfigure VMware Plug-inと表示されます。SnapCenter は、 SAP HANA プラグインが仮想環境にインストールされているかどうかを検出します。これは、VMware環境か、パブリッククラウドプロバイダの環境です。この場合、SnapCenter はハイパーバイザーを設定するように警告を表示します。</block>
  <block id="01c8adc0940fc944d6bceb0a58335832" category="paragraph">この警告メッセージを削除するには、次の手順を実行します。</block>
  <block id="43511a4b3774fe4d02144fe4b86b3dd8" category="paragraph">画面にLinuxプラグインとHANAプラグインのステータスがrunningと表示されます。</block>
  <block id="ac4361253d885faaf895a0d0cd05c3d8" category="section-title">ポリシーを設定する</block>
  <block id="3988ca38d0149c3c196796f887611cb5" category="paragraph">ポリシーは通常、リソースとは別に設定され、複数のSAP HANAデータベースで使用できます。</block>
  <block id="f3583ef14178cc77a72623a9cd8acb5d" category="list-text">レプリケーションを行わずに1時間ごとのバックアップを行うためのポリシー：LocalSnap</block>
  <block id="2235861b5bc201f918f6b8a7947301ba" category="list-text">ファイル・ベースのバックアップを使用した週次ブロック整合性チェックのポリシー：BlockIntegrityCheck</block>
  <block id="2b07d6a7b5422b0cd9352398b1459ccc" category="paragraph">以降のセクションでは、これらのポリシーの設定について説明します。</block>
  <block id="e7e20c907bb0cf2de077b4f92cc87879" category="section-title">Snapshotバックアップのポリシー</block>
  <block id="270658685f14f40df5a97dcb443d187d" category="paragraph">Snapshotバックアップポリシーを設定するには、次の手順を実行します。</block>
  <block id="4e25858bd60001cd50bf9600bc16960f" category="paragraph">スケジュール自体は、あとでHANAのリソース保護構成で設定します。</block>
  <block id="aa785cec21110ee3100d934df3f27610" category="paragraph">これで新しいポリシーが設定されました。</block>
  <block id="2cb5b15e3797f553ddf112b4b3cd651d" category="section-title">ブロック整合性チェックのポリシー</block>
  <block id="1e4b633df036aab42607fbc95a2850e6" category="paragraph">ブロック整合性チェックポリシーを設定する手順は、次のとおりです。</block>
  <block id="882e8132f9d8c5b34f622bd048180933" category="list-text">バックアップタイプを「ファイルベース」に、スケジュール頻度を「毎週」に設定します。スケジュール自体は、あとでHANAのリソース保護構成で設定します。</block>
  <block id="587169b2c69633c66fc254ec91d39015" category="section-title">HANAリソースを構成して保護</block>
  <block id="36413444bdd59e22d0fe3054f9903db8" category="paragraph">プラグインのインストール後、 HANA リソースの自動検出プロセスが自動的に開始されます。[ リソース ] 画面で、新しいリソースが作成されます。このリソースは、赤い南京錠のアイコンでロックされていることが示されます。新しいHANAリソースを設定して保護するには、次の手順を実行します。</block>
  <block id="ba685f1a08fe226c2c3c7e97f7fd46c4" category="list-text">を選択し、リソースをクリックして設定を続行します。</block>
  <block id="2455bdad114eb0bbce54e418891ecb1c" category="paragraph">[リソースの更新]をクリックして、[リソース]画面で自動検出プロセスを手動で開始することもできます。</block>
  <block id="4e68ac8b42a88c9359693badb698d1d5" category="list-text">[リソース]タブで、リソースをダブルクリックしてリソース保護を構成します。</block>
  <block id="f3f2fb3a8df9cea2f8322063989dc4cf" category="paragraph">カスタムの Snapshot コピー名を使用して、どのバックアップがどのポリシーおよびスケジュールタイプで作成されたかを簡単に識別することを推奨します。Snapshot コピー名にスケジュールタイプを追加することで、スケジュールバックアップとオンデマンドバックアップを区別できます。オンデマンドバックアップの「スケジュール名」文字列は空ですが、スケジュールバックアップには「毎時」、「毎日」、または「毎週」という文字列が含まれます。</block>
  <block id="0ac613f5fa2d93f0cbc1cd158f2eaf95" category="list-text">リソースに追加するポリシーを選択してください。</block>
  <block id="27329ed143fb9e6ad1bec7a9798ec09a" category="list-text">ブロック整合性チェックポリシーのスケジュールを定義します。</block>
  <block id="bb679512107983b315a700d36f774e12" category="paragraph">この例では、週に1回に設定されています。</block>
  <block id="f6f370ad34b914bb9b3188cab95579f6" category="list-text">ローカルSnapshotポリシーのスケジュールを定義します。</block>
  <block id="01d64140a5b79b3220671ec24e5355a7" category="paragraph">この例では、6時間ごとに設定されています。</block>
  <block id="91f8b9395cad8e2a4e4239c12d3319b4" category="paragraph">HANAのリソース構成が完了し、バックアップを実行できるようになります。</block>
  <block id="de6dd6d03f10c361d7fa2eaeb8b1332b" category="summary">非データボリュームのバックアップは、SnapCenter とSAP HANAプラグインに統合された機能です。データベースインストールリソースと必要なログが残っていれば、データベースデータボリュームを保護して特定の時点にSAP HANAデータベースをリストアおよびリカバリするだけで十分です。</block>
  <block id="93f9c08757a13da54247af8b021689ae" category="doc">データボリューム以外のボリュームのバックアップ</block>
  <block id="63b3090ea38e707b917b2d7c7901b50f" category="section-title">データボリューム以外のリソースを設定</block>
  <block id="0c7ab37fcc2da596254c60c409d69fb1" category="paragraph">データボリューム以外のリソースを設定するには、次の手順を実行します。</block>
  <block id="cb13e36dbad0de46510e77982a0357c5" category="list-text">[リソース]タブで、[データボリュームではない]を選択し、[ SAP HANAデータベースの追加]をクリックします。</block>
  <block id="fd24b11ffe2f4e6437e44b159cc48068" category="list-text">SAP HANAデータベースの追加ダイアログのステップ1で、リソースタイプリストから非データボリュームを選択します。リソースの名前、およびリソースに使用する関連SIDとSAP HANAプラグインホストを指定し、[次へ]をクリックします。</block>
  <block id="d4a9e6880ccfcdaaffcc00b27a10adbc" category="list-text">設定を保存するには、概要手順で[完了]をクリックします。</block>
  <block id="4e92aeb0662fdfc2cddbde8f13e067b2" category="paragraph">これで、新しい非データボリュームがSnapCenter に追加されます。新しいリソースをダブルクリックして、リソースの保護を実行します。</block>
  <block id="56be9f03e68466dab79c0aec2f1a21f7" category="paragraph">リソースの保護は、HANAデータベースのリソースで前述した方法と同じ方法で行われます。</block>
  <block id="fac7e42fec45827c4ca846b9834a929d" category="list-text">[今すぐバックアップ]をクリックして、バックアップを実行できるようになりました。</block>
  <block id="a4035f853527d3ecaeb2ba0b5da4093d" category="list-text">ポリシーを選択し、バックアップ処理を開始します。</block>
  <block id="fbda5ff558f836b18d5d4e20f084fd07" category="paragraph">SnapCenter ジョブログには、個々のワークフロー手順が表示されます。</block>
  <block id="cd424c5779cf104249372c575c7dfa1d" category="paragraph">これで、新しいバックアップがデータボリューム以外のリソースのリソースビューに表示されます。</block>
  <block id="2ed820e22ac1859d1d70e21fb5f5db6d" category="section-title">リストアとリカバリ</block>
  <block id="309955e6ebf3cb366a5302796b9cf4aa" category="paragraph">SnapCenter では、単一テナントのHANAシングルホストMDCシステムに対して自動リストア処理とリカバリ処理がサポートされます。複数のテナントを持つマルチホストシステムまたはMDCシステムの場合は、SnapCenter はリストア処理のみを実行し、手動でリカバリを実行する必要があります。</block>
  <block id="1ddfdb636c7165392bd902ed21e074b0" category="list-text">リストア処理に使用するバックアップを選択します。</block>
  <block id="0e24c2d90fa54d4601108fb362e0b7c0" category="list-text">データベースがリストアされます。選択したリストアタイプに応じて、異なる処理が実行されます。</block>
  <block id="9898ecb46e5451d2bf61de3e6a37843c" category="list-text">ボリューム復元が選択されている場合、SnapCenter はボリュームをアンマウントし、ストレージレイヤのボリュームベースSnapRestore を使用してボリュームを復元し、ボリュームをマウントします。</block>
  <block id="175b25afe5701244ebfd4e3aef8a4a89" category="list-text">ボリュームリバートを選択しない場合、SnapCenter は、ストレージレイヤで単一ファイルのSnapRestore 処理を使用してすべてのファイルをリストアします。</block>
  <block id="8305b5f7e8f850be2950a98f0074e981" category="list-text">システムデータベースをリカバリする</block>
  <block id="6932a35ded8eb84abf9b46e82e789050" category="list-text">テナントデータベースをリカバリします</block>
  <block id="cb63172a234cdd6be152a658ab722417" category="list-text">HANAデータベースを起動しています</block>
  <block id="656b4cf8c72df02c9118b8b812768e29" category="paragraph">No Recoveryを選択すると、SnapCenter が終了し、システムとテナントデータベースのリストア処理を手動で実行する必要があります。</block>
  <block id="95e2f3ab294570e9b8011f00cff5422a" category="paragraph">手動でリストアを実行するには、次の手順を実行します。</block>
  <block id="813110ab7918deb5018070a177f6acea" category="inline-link">リストアとリカバリ（netapp.com）</block>
  <block id="1cfdcd6cdad2d50d440ba1078e2b38c2" category="list-text">オプションのリストア前のコマンドを入力します。</block>
  <block id="311b39381cb4c4ef0d982f67ce82c886" category="list-text">リストアおよびリカバリ操作を開始するには'[完了]をクリックします</block>
  <block id="354f6659b1577f8f6917db07330c0738" category="doc">SnapVault を使用したバックアップレプリケーション</block>
  <block id="bbde47426fa7874d15811aa09d0a9ca3" category="summary">このセクションでは、セカンダリストレージからリストアおよびリカバリする方法について説明します。</block>
  <block id="2d4a8328bc7032e3e3d3f8b982312d2d" category="doc">セカンダリストレージからリストアおよびリカバリする</block>
  <block id="addd18eb81f4ef4def30d433ebedffac" category="paragraph">セカンダリストレージからリストアおよびリカバリするには、次の手順を実行します。</block>
  <block id="ad39bf07e2f0970a49e91b6d7bc08b73" category="paragraph">セカンダリストレージ上のすべてのバックアップのリストを取得するには、SnapCenter トポロジビューでVault Copies（ヴォールトコピー）をクリックし、バックアップを選択してRestore（復元）をクリックします。</block>
  <block id="c320657b7f9ae00d117b826103a60570" category="paragraph">リストアダイアログにセカンダリの場所が表示されます。</block>
  <block id="d66def06f615a91837537eafad25ce09" category="paragraph">さらに、リストアとリカバリの手順は、プライマリストレージにあるSnapshotバックアップでこれまで説明されていた手順と同じです。</block>
  <block id="9b7e589c27568a1ba1e20a07bd4bf384" category="summary">SnapCenter は、アプリケーションと整合性のあるデータ保護を実現する拡張性に優れたユニファイドプラットフォームです。SnapCenter では一元的な管理と監視が可能ですが、一方で、アプリケーション固有のバックアップ、リストア、クローニングのジョブの管理を各ユーザに委譲することができます。SnapCenter を使用すれば、データベース管理者やストレージ管理者は、さまざまなアプリケーションやデータベースのバックアップ、リストア、クローニングの処理を 1 つのツールで管理できます。SnapCenter は、ネットアップのデータファブリック内のすべてのエンドポイントのデータを管理します。</block>
  <block id="a3e2fc88c7b51a05fbb9c57347e8b0e7" category="paragraph">SnapCenter には、SnapCenter サーバ、SnapCenter Plug-in Package for Windows、およびSnapCenter Plug-in Package for Linuxが含まれています。各パッケージには、さまざまなアプリケーションやインフラコンポーネント用の SnapCenter へのプラグインが含まれています。</block>
  <block id="b48d82447a4abda007d79854b3f6646a" category="list-text">バックアップ処理、スケジュール設定、保持の管理</block>
  <block id="fbb95408c5973fc141dcf2b7b46bd0ec" category="list-text">ストレージベースのSnapshotコピーを使用したSAP HANAデータのバックアップ</block>
  <block id="3d270926656ce5648382eaa1719bf92d" category="list-text">ストレージ・ベースのSnapshotコピーを使用した非データ・ボリューム・バックアップ（例：/hana/shared）</block>
  <block id="ce7f855add0a7ede117b2101e9828d12" category="list-text">ファイルベースのバックアップを使用したデータベースブロックの整合性チェック</block>
  <block id="b576b60679bf39b7899eedc0ff5dafd1" category="list-text">オフサイトのバックアップまたはディザスタリカバリロケーションへのレプリケーション</block>
  <block id="e44df3eb7c1e201337b8ee7ea6f5aafd" category="list-text">HANAデータのバックアップ（Snapshotとファイルベース）</block>
  <block id="ae56dd7000a0b955a430ea3ff10dd48d" category="list-text">HANAのログバックアップ</block>
  <block id="6f359fd609acebab5d18f381e4c19f39" category="list-text">SAP HANA（MDC）システムのシングルテナントのリストア処理</block>
  <block id="bea1b4e87998a4b25b42721d198aacd7" category="paragraph">データベースデータファイルのバックアップは、 SnapCenter と SAP HANA 向けプラグインを組み合わせて実行されます。このプラグインは、SAP HANAデータベースのバックアップ保存ポイントをトリガーして、プライマリストレージシステムで作成されたSnapshotコピーがSAP HANAデータベースの整合性のあるイメージに基づいて作成されるようにします。</block>
  <block id="20a189b6aeebb9db007cacab85408f24" category="paragraph">SnapCenter では、SnapVault またはSnapMirror機能を使用して、整合性のあるデータベースイメージをオフサイトのバックアップまたはディザスタリカバリロケーションにレプリケートできます。通常は、プライマリストレージとオフサイトのバックアップストレージに異なる保持ポリシーが定義されます。SnapCenter はプライマリストレージでの保持を処理し、 ONTAP はオフサイトのバックアップストレージでの保持を処理します。</block>
  <block id="bf9380471a3b02146d5e51719d0940b1" category="paragraph">SnapCenter では、SAP HANA関連のすべてのリソースを完全にバックアップするために、ストレージベースのSnapshotコピーにSAP HANAプラグインを使用して、データ以外のすべてのボリュームをバックアップすることもできます。非データボリュームをデータベースデータバックアップとは別にスケジュール設定して、個別の保持ポリシーや保護ポリシーを有効にすることができます。</block>
  <block id="0541043f71b51f3409fd5ad4a1cbec95" category="paragraph">SAP では、ブロックの整合性チェックを実行するために、ストレージベースの Snapshot バックアップと週次ファイルベースのバックアップを組み合わせることを推奨しています。SnapCenter 内からブロック整合性チェックを実行できます。設定された保持ポリシーに基づいて、SnapCenter は、プライマリストレージでのデータファイルバックアップの削除、ログファイルのバックアップ、およびSAP HANAのバックアップカタログの管理を行います。</block>
  <block id="44492b7c8fce340f84cc4ee3e74208ea" category="paragraph">SnapCenter はプライマリストレージで保持を処理し、FSX for ONTAP はセカンダリバックアップの保持を管理します。</block>
  <block id="866f9a05b82b0824f1a0e87ecde3fb71" category="paragraph">次の図は、SnapCenter のバックアップおよび保持の管理処理の概要を示しています。</block>
  <block id="bebd9be6fafde148cc61bd43c11e27e9" category="list-text">SAP HANAのバックアップ保存ポイントを作成し、永続性レイヤに整合性のあるイメージを作成します。</block>
  <block id="a745daee4619d54f16ae0f1c2d0962f8" category="list-text">データボリュームのストレージベースのSnapshotコピーを作成します。</block>
  <block id="527348cba8a7343779b6f59ba4c06ce9" category="list-text">ストレージベースのSnapshotバックアップをSAP HANAバックアップカタログに登録します。</block>
  <block id="f6357d7d7209510612ac9d41b805083f" category="list-text">SAP HANAのバックアップ保存ポイントを解放します。</block>
  <block id="53d1d7d25d4bf41a740607083db85f90" category="list-text">データ・ボリュームに対してSnapVault またはSnapMirrorの更新を実行します（設定されている場合）。</block>
  <block id="f26d0e3da2e083562d626efdb0a80db1" category="list-text">定義された保持ポリシーに基づいて、プライマリストレージのストレージSnapshotコピーを削除します。</block>
  <block id="297347c174657fe437156fe1d919b49d" category="list-text">プライマリまたはオフサイトのバックアップストレージにバックアップが存在しなくなった場合は、SAP HANAのバックアップカタログのエントリを削除します。</block>
  <block id="5d63204692887e644e79ad4f6fa6c268" category="list-text">保持ポリシーに基づいてバックアップが削除された場合、または手動で削除された場合、SnapCenter は、最も古いデータバックアップよりも古いすべてのログバックアップも削除します。ログバックアップは、ファイルシステムと SAP HANA のバックアップカタログから削除されます。</block>
  <block id="76cc02267bf656e283d3a17bcd99260e" category="section-title">本ドキュメントの内容</block>
  <block id="434c79c7fab66fb3f1020892b6f3be08" category="inline-link">SnapCenter の概念とベストプラクティス（netapp.com）</block>
  <block id="625979e29cea5b42dff162a508041627" category="inline-link">Amazon FSX for ONTAP （netapp.com）の詳細</block>
  <block id="befc1f68b82fd5acedbe7594e276b75a" category="paragraph">このドキュメントでは、Amazon Web Services（AWS）コンソールとFSX for ONTAP CLIを使用して、ストレージレイヤで必要な設定手順を実行します。また、NetApp Cloud Managerを使用してONTAP 向けのFSXを管理することもできますが、これは本ドキュメントの対象外です。ONTAP でのFSXに対するNetApp Cloud Managerの使用については、を参照してください<block ref="d44e3137c0d20662e292194c800b788f" category="inline-link-rx"></block>。</block>
  <block id="352f3d46cad062540fff3f31dc5869fb" category="paragraph">次の図は、FSX for ONTAP 上のSAP HANAの一般的なバックアップアーキテクチャを示しています。HANAシステムは、AWSアベイラビリティゾーン1にあり、同じアベイラビリティゾーン内でONTAP ファイルシステム用のFSXを使用しています。Snapshotバックアップ処理は、HANAデータベースのデータと共有ボリュームに対して実行されます。3～5日間保持されるローカルSnapshotバックアップに加えて、バックアップは長期保存用にオフサイトのストレージにもレプリケートされます。オフサイトバックアップストレージは、別のAWSアベイラビリティゾーンに配置されたONTAP ファイルシステム用の2番目のFSXです。HANAデータと共有ボリュームのバックアップは、SnapVault を使用して2番目のONTAP ファイルシステムのFSXにレプリケートされ、2~3週間保持されます。</block>
  <block id="d9a905f2855845662704261034b8e519" category="paragraph">SnapCenter を設定する前に、各種SAPシステムのRTOとRPOの要件に基づいてデータ保護戦略を定義する必要があります。</block>
  <block id="c96aeaa3bbed44a4eb6e491bd825b114" category="paragraph">次のパラメータを定義する必要があります。</block>
  <block id="add54c6c694f1dea873fa725229c4ff6" category="paragraph">次の表に、本番、開発、テストの各システムタイプのデータ保護パラメータの例を示します。本番用システムでは、高いバックアップ頻度が定義されており、バックアップはオフサイトのバックアップサイトに 1 日に 1 回レプリケートされます。テスト用システムの要件は低く、バックアップのレプリケーションはありません。</block>
  <block id="d784a4ef3efe213e4ffce2a3b8aab638" category="cell">ポリシーLocalSnapです</block>
  <block id="cf95b8ba53e47289df481c76a0fc1e7c" category="cell">ポリシーLocalSnapAndSnapVault</block>
  <block id="b651fe1ef6a54eadfe7ec046c5fb3610" category="cell">ポリシーブロック整合性チェック</block>
  <block id="4470d7231c03ea61b48270dd4e89c7c2" category="list-text">プロダクション：4時間ごとにスケジュールを設定します。</block>
  <block id="8756cc378f32be7606a311cc58e42116" category="list-text">開発：4時間ごとにスケジュールを設定</block>
  <block id="3f16a4dae07b31412bf1f7d6fd53fb55" category="list-text">Test：4時間ごとにスケジュールを設定します。</block>
  <block id="1d3a5ab2affa87cd97d667df12d08f19" category="list-text">本番：毎日スケジュールを設定します。</block>
  <block id="cc77ff8683600a5f70dc5c80c8a4112c" category="list-text">開発：毎日スケジュールを設定します。本番システムおよび開発システムでは、ファイルベースのバックアップを使用して、週単位のブロック整合性チェックをカバーするために「BlockIntegrityCheck」ポリシーを使用します。</block>
  <block id="22356469ac5ca8aeafb4a4cd5aaa2346" category="list-text">プロダクション：毎週スケジュールを設定します。</block>
  <block id="68b554bfef8312da6a9ba9bba23937d5" category="list-text">開発：毎週スケジュールを設定します。</block>
  <block id="cb6a15450e2fa9cea2ea31aa4a510c0d" category="paragraph">オフサイトのバックアップポリシーを使用する個々のSAP HANAデータベースに対して、ストレージレイヤで保護関係を設定する必要があります。保護関係は、レプリケートされるボリュームとバックアップの保持をオフサイトのバックアップストレージで定義します。</block>
  <block id="9d0b24c01af3a2a587574b46fceb72d3" category="paragraph">次の例では、本番用システムと開発用システムごとに、オフサイトのバックアップストレージに2週間の保持を定義します。</block>
  <block id="0197c9098f672a502b8fb0ea4af8c88a" category="paragraph">この例では、SAP HANAデータベースのリソースと非データボリュームのリソースの保護ポリシーと保持方法は異なります。</block>
  <block id="38a5161bfaecb6377c969b8c970a6677" category="section-title">ラボのセットアップ例</block>
  <block id="4acdc8775ab5d93ca83720de28826682" category="paragraph">このあとのセクションでは、以下のラボ環境の設定例を使用しました。</block>
  <block id="2edcc43e604ebe03c9e589e03ad59509" category="paragraph">HANAシステムPFX：</block>
  <block id="e246c6ca2a43b0011a7139e737f72e94" category="list-text">シングルテナントのシングルホストMDCシステム</block>
  <block id="11da4dfde153724b26d00bd0b8eef4c1" category="list-text">HANA 2.0 SPS 6リビジョン60</block>
  <block id="c07320955ae27fabbb4794368ec16c12" category="list-text">SLES for SAP 15SP3』を参照してください</block>
  <block id="18d457f56413972c18dd88f5456dedd9" category="paragraph">SnapCenter ：</block>
  <block id="50c86c9536ac5a750f7b41adb4073361" category="list-text">バージョン4.6</block>
  <block id="906753eafa96e59604253afc13b16762" category="list-text">HANAデータベースホストに導入されたHANAとLinuxのプラグイン</block>
  <block id="27dd1f0ad2cb3dde55ff3aaa438b942f" category="paragraph">ONTAP ファイルシステムのFSx：</block>
  <block id="f656ee2a8422f6074720c983ae791ddb" category="list-text">ONTAP ファイルシステム用のFSX 2（単一のStorage Virtual Machine（SVM））</block>
  <block id="a1ac29fe64b1ca0654c85b2f60b211a1" category="list-text">異なるAWSアベイラビリティゾーンにあるONTAP システムの各FSX</block>
  <block id="48eba9fd649acf4be2ae35cea201d48a" category="list-text">ONTAP ファイルシステム用の2番目のFSXにHANAデータボリュームがレプリケートされます</block>
  <block id="b7868c33a653d5e8748fca10e512fdc7" category="summary">このラボ環境では、2つ目のAWSアベイラビリティゾーンでFSX for ONTAP ファイルシステムを2つ目にして、HANAデータボリュームのバックアップレプリケーションを紹介します。</block>
  <block id="95ea3387767393eddc1336a2154175d9" category="doc">概要- SnapVault によるバックアップレプリケーション</block>
  <block id="86aba40e8759c5f3a79b7b6b23617ed9" category="inline-link-macro">「データ保護戦略」</block>
  <block id="8913ab6041dfb8e85d12eddd1acaa5ca" category="section-title">設定手順の概要</block>
  <block id="07f30226d3c2baca5e7519c8b103a270" category="paragraph">FSX for ONTAP レイヤで実行する必要がある設定手順はいくつかあります。これは、NetApp Cloud ManagerまたはONTAP コマンドラインのFSXで実行できます。</block>
  <block id="81641f60f8074d2777e22d31d1d5477e" category="list-text">ONTAP ファイルシステム用のピアFSX。ONTAP ファイルシステムのFSXは、相互のレプリケーションを許可するためにピア関係を設定する必要があります。</block>
  <block id="04f9fb453a5b3f03dcfa9eb4b47daca4" category="list-text">SVMをピアリングSVM間のレプリケーションを許可するには、SVM間にピア関係を設定する必要があります。</block>
  <block id="62318a8b11e534add7ef07b26c1ace60" category="list-text">ターゲットボリュームを作成します。ターゲットSVMにボリュームタイプ「DP」を指定してボリュームを作成します。レプリケーション・ターゲット・ボリュームとして使用するには'DP'タイプが必要です</block>
  <block id="f3db679e572cae36c0e32cb0946bc5b9" category="list-text">SnapMirrorポリシーを作成する。これは' vaultタイプのレプリケーションのポリシーを作成するために使用されます</block>
  <block id="001de0baa772b4eb02137ea1838ecbad" category="list-text">ポリシーにルールを追加します。このルールには、セカンダリサイトでのバックアップのSnapMirrorラベルと保持に関する情報が含まれています。このラベルが含まれているソースボリュームにSnapCenter によってSnapshotバックアップが作成されるように、SnapCenter ポリシーの後半で同じSnapMirrorラベルを設定する必要があります。</block>
  <block id="dd1b188f97236bc65d266b713b0a2c3c" category="list-text">SnapMirror関係を作成ソースボリュームとターゲットボリュームの間のレプリケーション関係を定義し、ポリシーを適用します。</block>
  <block id="33ff9e19a0a8c2a53edafdfe10646c3d" category="list-text">SnapMirrorを初期化最初のレプリケーションが開始され、ソースのすべてのデータがターゲットボリュームに転送されます。</block>
  <block id="caed6b5eec6c8a3a2d223a3896adeebc" category="paragraph">ボリュームレプリケーションの設定が完了したら、SnapCenter で次のようにバックアップレプリケーションを設定する必要があります。</block>
  <block id="12ed731fe0ebb2ea71878d5e9c029f69" category="list-text">ターゲットSVMをSnapCenter に追加します。</block>
  <block id="02b70400ae992d29c68f4e654dee405e" category="list-text">SnapshotバックアップとSnapVault レプリケーション用に新しいSnapCenter ポリシーを作成します。</block>
  <block id="650e26d413499d7020a3e2e477999428" category="list-text">HANAのリソース保護にポリシーを追加します。</block>
  <block id="9505d7775b4aa534ceeeb23744ed09e7" category="list-text">新しいポリシーを使用してバックアップを実行できるようになりました。</block>
  <block id="4b7d520e2b58478a0dd3736b31c461d8" category="paragraph">以降の章では、個々の手順について詳しく説明します。</block>
  <block id="af6c6acd72965555d34e33c0b507962b" category="summary">このセクションでは、レプリケーションを使用してバックアップを作成する方法について説明します。</block>
  <block id="1975e970c6735fe42f83f63430773bce" category="doc">レプリケーションを使用してバックアップを作成します</block>
  <block id="fe963cc53fa6ca91332135a0fdf394ce" category="paragraph">バックアップは、ローカルSnapshotコピーと同じ方法で作成します。</block>
  <block id="220f06985b74a5091aad99541552d38f" category="paragraph">レプリケーションを伴うバックアップを作成するには、バックアップレプリケーションを含むポリシーを選択し、バックアップをクリックします。</block>
  <block id="873a3b33f12dee6fcd571bc7c855da4e" category="paragraph">SnapCenter ジョブログには、SnapVault 更新処理を開始するセカンダリアップデートステップが表示されます。レプリケーションによって変更されたブロックがソースボリュームからターゲットボリュームにレプリケートされます。</block>
  <block id="bd72bb66cc1f6c0274f2b9a01b88f988" category="paragraph">ONTAP ファイル・システムのFSXでは、SnapCenter ポリシーで設定されているように、SnapMirrorラベル「SnapCenter 」を使用してソース・ボリューム上のSnapshotが作成されます。</block>
  <block id="ca557f776bfcc035900f10add0a5a68f" category="paragraph">ターゲットボリュームに、同じ名前のSnapshotコピーが作成されます。</block>
  <block id="913ca500d383f0ef7e31451f47e06ba9" category="paragraph">HANAのバックアップカタログにも新しいSnapshotバックアップが表示されます。</block>
  <block id="536d39b1788aafe77a33dea12db6f000" category="paragraph">SnapCenter では、トポロジビューのバックアップコピーをクリックして、レプリケートされたバックアップのリストを表示できます。</block>
  <block id="46f7f3d3c0b3afe7e5a1e026b2079c7d" category="summary">このセクションでは、バックアップレプリケーションのポリシーを設定する方法について説明します。</block>
  <block id="b950bdfd30a0ab3d80a5aba7d93af29e" category="doc">バックアップレプリケーション用の新しいSnapCenter ポリシーを作成します</block>
  <block id="3025c1bc51ebfd7060cc53e320af06b3" category="paragraph">バックアップレプリケーションのポリシーは次のように設定する必要があります。</block>
  <block id="8b8b965fb7ffc307bea22e16dc282653" category="list-text">ポリシーの名前を指定します。</block>
  <block id="255926c246407f59e63874cdf162bfe1" category="list-text">Snapshotバックアップとスケジュール頻度を選択します。通常、Dailyはバックアップのレプリケーションに使用されます。</block>
  <block id="a509d11a422413094074cecbf0366aca" category="list-text">Snapshotバックアップの保持期間を選択します。</block>
  <block id="d8d1327fe7287b0a0153e98b18253c34" category="paragraph">これは、プライマリストレージで作成された日単位のSnapshotバックアップの保持です。SnapVault ターゲットでのセカンダリバックアップの保持設定は、ONTAP レベルでadd ruleコマンドを使用してすでに設定されています。「ONTAP ファイルシステムのFSXでのレプリケーション関係の構成」（xref）を参照してください。</block>
  <block id="0f3c758f3ba480dbff88c44bceab01e8" category="list-text">Update SnapVault フィールドを選択し、カスタムラベルを指定します。</block>
  <block id="8f610812cd49bd366c9638bef3fce744" category="paragraph">このラベルは、「add rule」コマンドでONTAP レベルで指定されたSnapMirrorラベルと一致する必要があります。</block>
  <block id="ec5c19062711162507c65806ea542ac5" category="paragraph">これで新しいSnapCenter ポリシーが設定されました。</block>
  <block id="2c0b1092a288f5d67050f3fbf404d5f8" category="list-text">『FSX for NetApp ONTAP user guide—What is Amazon FSX for NetApp ONTAP ？』</block>
  <block id="d82c21a48349085e4fd93fb6712e3789" category="paragraph"><block ref="d82c21a48349085e4fd93fb6712e3789" category="inline-link-rx"></block></block>
  <block id="3306e00cec668497714eaadcd7aa6ac8" category="list-text">SnapCenter のリソースページ</block>
  <block id="7608e75619cff3eeb4e8bce40481b456" category="list-text">SnapCenter ソフトウェアのドキュメント</block>
  <block id="7a3492bffc26e95ce3669b39a1f14422" category="list-text">TR-4667：『Automating SAP HANA System Copy and Clone Operations with SnapCenter 』</block>
  <block id="3c191542e46a4ce9d7eb2f662380cb07" category="list-text">TR-4719：『SAP HANA System Replication—Backup and Recovery with SnapCenter 』</block>
  <block id="baaebabde318c3efac57f4b4eaf80541" category="summary">NetApp Snapshotテクノロジを使用すれば、データベースのバックアップを数分で作成できます。Snapshot コピーではストレージプラットフォーム上の物理データブロックは移動されないため、 Snapshot コピーの作成に要する時間はデータベースのサイズに左右されません。</block>
  <block id="a72020b2f4b19541a1ec28f5c06dd28d" category="doc">Amazon FSX for ONTAP を使用したバックアップとリカバリ</block>
  <block id="2025d4d57c2a7727e45b8c27669d1766" category="paragraph">Snapshot コピーは、リストア処理とリカバリ処理にも大きなメリットがあります。NetApp SnapRestore テクノロジを使用すると、データベース全体またはデータベースの一部を、現在使用可能なSnapshotコピーに基づいて任意の時点にリストアすることができます。このようなリストアプロセスは、データベースのサイズに関係なく数秒で完了します。オンラインのSnapshotバックアップは1日に複数作成できるため、リカバリプロセスに要する時間は、従来の1日1回のバックアップ方式に比べて大幅に短縮されます。24時間以内ではなく数時間前のSnapshotコピーを使用してリストアできるため、フォワードリカバリで適用するトランザクションログの数を少なくします。そのため、従来のストリーミングバックアップでは数時間かかるのに対し、RTOが数分に短縮されます。</block>
  <block id="a2a3e9da861c9ea2a98377b12083c9dd" category="paragraph">Snapshot コピーバックアップは、アクティブなオンラインデータと同じディスクシステムに格納されます。セカンダリストレージへのバックアップに代わる手段としてではなく、補助的な用途で使用することを推奨します。リストア処理とリカバリ処理のほとんどは、プライマリストレージシステムでSnapRestore を使用して管理されます。セカンダリストレージからのリストアが必要になるのは、 Snapshot コピーが格納されているプライマリストレージシステムが損傷している場合のみです。プライマリロケーションで使用できなくなったバックアップをリストアする必要がある場合は、セカンダリロケーションも使用できます。</block>
  <block id="8dcd926cbf875d3253a284078f4d4d97" category="paragraph">セカンダリストレージへのバックアップは、プライマリストレージに作成された Snapshot コピーがベースとなります。そのため、プライマリストレージシステムから直接データが読み取られ、 SAP データベースサーバに負荷は生成されません。プライマリストレージは、セカンダリストレージと直接通信し、NetApp SnapVault 機能を使用してバックアップデータをデスティネーションにレプリケートします。</block>
  <block id="5b20f618fc45fa395c10c6521e4740bb" category="paragraph">SnapVault には、従来のバックアップに比べて大きな利点があります。最初のデータ転送でソースからデスティネーションにすべてのデータが転送されると、以降のバックアップコピーでは、変更されたブロックだけがセカンダリストレージに移動されます。そのため、プライマリストレージシステムへの負荷およびフルバックアップに要する時間が大幅に削減されます。SnapVault では変更されたブロックだけがデスティネーションに格納されるため、データベースのフルバックアップを追加するとディスクスペースの消費量を大幅に削減できます。</block>
  <block id="cba657bc8a28e8aa3d4ccf36fee09f3d" category="section-title">Snapshotバックアップおよびリストア処理の実行時間</block>
  <block id="f2d966c4c76183b95a2dd4aab1cc183f" category="paragraph">次の図に、Snapshotバックアップ操作を使用したお客様のHANA Studioを示します。図に示すように、HANAデータベース（約4TBのサイズ）は、Snapshotバックアップテクノロジを使用して1分20秒以内にバックアップされ、ファイルベースのバックアップ処理を実行して4時間以上経過しています。</block>
  <block id="c7e7d45d7e845928548b3e543ca10436" category="paragraph">全体的なバックアップワークフローランタイムの最大の部分は、HANAのバックアップ保存ポイント処理を実行するために必要な時間です。この手順は、HANAデータベースの負荷によって異なります。ストレージ Snapshot バックアップ自体は、数秒で完了します。</block>
  <block id="193fec5a460def18c358af628c0b33be" category="paragraph">ここでは、ファイルベースとストレージベースのSnapshotバックアップのRecovery Time Objective（RTO；目標復旧時間）を比較します。RTOは、データベースのリストア、リカバリ、および起動に必要な時間の合計によって定義されます。</block>
  <block id="7beb9f884b7fd71d5e5a785cdeb855ae" category="paragraph">ファイルベースのバックアップでは、リストア時間はデータベースのサイズとバックアップインフラによって異なり、リストア速度は 1 秒あたりのメガバイト数で定義されます。たとえば、インフラで250MBpsの高速なリストア処理がサポートされている場合、4 TBのデータベースを永続性を維持した状態でリストアするには約4.5時間かかります。</block>
  <block id="a743491c215755ced1d249728d4c59cf" category="paragraph">ストレージSnapshotコピーバックアップでは、リストア時間はデータベースのサイズに左右されず、常に数秒の範囲になります。</block>
  <block id="beb19f37eae3085fec5f4641f0033384" category="paragraph">データベースの開始時間は、データベースのサイズと、データをメモリにロードするのに必要な時間によって異なります。次の例では、データを1000Mbpsでロードできると仮定しています。4TBのメモリをメモリに装着するには、約1時間10分かかります。開始時間は、ファイルベースおよびSnapshotベースのリストア処理とリカバリ処理の場合と同じです。</block>
  <block id="2c68d79a149075de78266c5882a42d2d" category="paragraph">Snapshotバックアップは通常、SAP HANAデータベースのパフォーマンスに影響しないため、頻繁にスケジュールされます。たとえば、Snapshotバックアップが6時間ごとにスケジュールされている場合、最悪の場合、ファイルベースのバックアップに関しては、リカバリ時間の4分の1（6時間/24時間=.25）になります。</block>
  <block id="43f14ff1b246267a64206adbdba0de5d" category="paragraph">次の図に、リストア処理とリカバリ処理の比較を示します。毎日のファイルベースのバックアップとSnapshotバックアップでスケジュールが異なります。</block>
  <block id="30073284d63b6f33c78286326400021c" category="paragraph">最初の2つのバーは、1日に1つのSnapshotバックアップを作成した場合でも、Snapshotバックアップからのリストア処理の速度が原因で、リストアとリカバリが43%に削減されることを示しています。1日に複数のSnapshotバックアップを作成すると、フォワードリカバリで適用するログが少なくなるため、ランタイムがさらに短縮されます。</block>
  <block id="0d381e697a62c19da0662e14a0677b91" category="paragraph">また、次の図では、1日に4~6つのSnapshotバックアップを作成することを推奨しています。頻度を高くしても、全体的な実行時間に大きな影響はありません。</block>
  <block id="f098f2578c0983f1b7aa54ffbce45c14" category="section-title">バックアップとクローニング処理の高速化のユースケースと価値</block>
  <block id="e7a11550e1b499ff6585bb500fe016d4" category="paragraph">バックアップの実行は、あらゆるデータ保護戦略に欠かせない要素です。バックアップは定期的にスケジュールされ、システム障害からリカバリできます。これは最も分かりやすいユースケースですが、SAPライフサイクル管理タスクにはバックアップとリカバリの高速化が不可欠なものもあります。</block>
  <block id="d7b2a02b60c22dabdbb3d85e7896c825" category="paragraph">SAP HANAシステムのアップグレードは、たとえば、アップグレード前のオンデマンドバックアップと、アップグレードが失敗した場合のリストア処理が計画的停止全体に大きく影響する例です。4TBのデータベースの例を使用すると、Snapshotベースのバックアップおよびリストア処理を使用して、計画的なダウンタイムを8時間短縮できます。</block>
  <block id="3771b614a6d8a93c16146fea5ac011a7" category="paragraph">別のユースケース例としては、一般的なテストサイクルが挙げられます。このテストサイクルでは、異なるデータセットまたはパラメータを使用して複数のイテレーションを行ってテストを実施する必要があります。高速バックアップおよびリストア操作を利用すると、テストサイクル内にセーブポイントを簡単に作成し、テストに失敗した場合やテストを繰り返す必要がある場合に、システムをこれらの以前のセーブポイントのいずれかにリセットできます。これにより、テストを早期に完了させることも、より多くのテストを同時に実行してテスト結果を改善することもできます。</block>
  <block id="9b0edbbb4b880bc3149ad74e530b34e3" category="paragraph">Snapshotバックアップを実装したら、HANAデータベースのコピーを必要とするその他の複数のユースケースに対応できます。FSX for ONTAP を使用すると、使用可能な任意のSnapshotバックアップの内容に基づいて新しいボリュームを作成できます。この処理は、ボリュームのサイズに関係なく数秒で実行されます。</block>
  <block id="664899847ba43249fa67d3faf26a8593" category="paragraph">最も一般的なユースケースはSAPシステムの更新です。本番用システムのデータをテストシステムまたはQAシステムにコピーする必要があります。FSX for ONTAP クローニング機能を利用すると、本番用システムの任意のSnapshotコピーから、わずか数秒でテストシステム用のボリュームをプロビジョニングできます。その後、新しいボリュームをテストシステムに接続し、HANAデータベースをリカバリする必要があります。</block>
  <block id="b87a6bb157820948a8a8c214af4e0062" category="paragraph">2つ目のユースケースは、リペアシステムを作成したもので、本番システムでの論理的な破損に対処するために使用されます。この場合、本番用システムの古いSnapshotバックアップを使用して修復システムが開始されます。これは、破損が発生する前のデータと同一の、本番システムのクローンです。その後、リペアシステムを使用して問題を分析し、破損する前に必要なデータをエクスポートします。</block>
  <block id="c7b35ad7f0a4691a80ff05970187ddeb" category="paragraph">最後のユースケースは、レプリケーションを停止することなくディザスタリカバリのフェイルオーバーテストを実行できるため、ディザスタリカバリの設定のRTOとRecovery Point Objective（RPO；目標復旧時点）に影響を及ぼすことなく、FSX for ONTAP NetApp SnapMirrorレプリケーションを使用してデータをディザスタリカバリサイトにレプリケートすると、本番用Snapshotバックアップをディザスタリカバリサイトでも使用できるようになり、ディザスタリカバリテスト用の新しいボリュームを作成できるようになります。</block>
  <block id="0a6bfe5423e343fa9ae1504fcfa72370" category="sidebar">Amazon FSX上のSAP HANA for NetApp ONTAP - SnapCenter を使用したバックアップとリカバリ</block>
  <block id="4918362f7575b370dea00cbbd262d325" category="doc">SnapCenter を使用したSAPシステムのクローニングワークフローの概要</block>
  <block id="093ee2daaf21be64a5bb2ed4343fb467" category="list-text">SAP HANAサービスを開始します。</block>
  <block id="369cc9284a0690b16f7e5e6fc7eedd89" category="paragraph">システムが不要になった場合は、次の手順でクリーンアッププロセスを実行します。</block>
  <block id="d220a66485a5f2da02d8844477577f2d" category="list-text">SAP HANAサービスを停止します。</block>
  <block id="babe89dd8942b06138b66c6f4c3f3fff" category="inline-link-macro">「SnapCenter を使用したSAPシステムのクローン作成」</block>
  <block id="5567a4429aece8d2bfac765da9d65e55" category="doc">SnapCenter を使用したSAPシステムの更新ワークフローの概要</block>
  <block id="2398bee7e215208312bd1fd15c402a64" category="list-text">ターゲットシステムの初期インストールと準備を1回だけ行います。</block>
  <block id="0056927d09a94ad9d99ae19f1ae65777" category="admonition">FlexCloneボリュームをスプリットすると、SnapCenter はターゲットシステムに作成されたすべてのバックアップを削除します。</block>
  <block id="8aebb15edb2abfa5d96c34de17486875" category="list-text">SnapCenter クローンの作成ワークフロー</block>
  <block id="2f02093c9e2d7667a513ad0bebeed79c" category="admonition">以前にスプリットされていた古いデータボリュームは、ストレージシステムで手動で削除する必要があります。</block>
  <block id="bf2ace2832642b55dc83b6716197376d" category="inline-link-macro">「SnapCenter でSAP HANAシステムを更新」</block>
  <block id="dc5972f4834e498bc24fcfa79ab4832e" category="summary">このセクションでは、SAPシステムのクローニング処理の手順ごとの概要 を示します。このを使用して、論理的な破損に対処するための修復システムをセットアップできます。</block>
  <block id="91e262c7cc6612696dc2e8b343ccd3fa" category="doc">SnapCenter によるSAPシステムのクローニング</block>
  <block id="52f78b138165376783e782c4e6583ca9" category="section-title">前提条件および制限事項</block>
  <block id="3722e4213a96d42e9f9a969b7f28bf9c" category="paragraph">使用したソフトウェアバージョンは次のとおりです。</block>
  <block id="629a677a12d5ce146953ce7f089d9494" category="inline-link">NFSを使用したNetApp AFF システムでのSAP HANA</block>
  <block id="311d495fe9e684d64927a5a6c5ea754b" category="section-title">ターゲットホストの準備</block>
  <block id="45bdd686062a6e366f360ed4be35e2d6" category="paragraph">ここでは、システムクローンターゲットとして使用するサーバで必要な準備手順について説明します。</block>
  <block id="b69071a45ad28f853ea645b7bdce7c78" category="admonition">ターゲットサーバが他のシステムと通信できないように、ターゲットサーバの適切なフェンシングを確立する必要があります。適切なフェンシングが設定されていないと、クローニングされた本番用システムは他の本番用システムとデータを交換する可能性があります。</block>
  <block id="d47c82608e9c54c2177ab011e592cd3a" category="admonition">このラボ環境では、ターゲットシステム側から見て、ターゲットシステムのホスト名を内部的にのみ変更しました。ホストの外部からは、ホスト名として「HANA -7」を使用してアクセスできました。ホストにログインすると、ホスト自体がHANAです。</block>
  <block id="11ba9045ace190d52590b95322ebbe99" category="section-title">ログとログのバックアップボリュームを準備</block>
  <block id="c3dc73ef5b64395a593922e549e1489c" category="paragraph">ログボリュームをソースシステムからクローニングする必要はなく、clear logオプションを使用してリカバリを実行するため、空のログボリュームをターゲットホストで準備しておく必要があります。</block>
  <block id="3480283b2df2bb5abbf5fc8dc0d3334c" category="paragraph">ソースシステムには独立したログバックアップボリュームが設定されているため、空のログバックアップボリュームを準備し、ソースシステムと同じマウントポイントにマウントする必要があります。</block>
  <block id="f589ee4577bcd9213118347f1cc22d38" category="paragraph">ログボリュームhdb*内では、ソース・システムと同じ方法でサブディレクトリを作成する必要があります。</block>
  <block id="83706c0c7217c1bc161fae80897bb12f" category="paragraph">ログバックアップボリュームには、システムとテナントデータベースのサブディレクトリを作成する必要があります。</block>
  <block id="b0801fc20ca88c457d0193f04f91045f" category="paragraph">データおよび共有ボリュームのマウントポイントを準備しておく必要があります。</block>
  <block id="7a509a4c06e4915ff64b195bf2803fb5" category="section-title">HANA共有ボリュームのクローニング</block>
  <block id="8ae991813efd55da49ac68bbc88f63ba" category="list-text">必要なコマンドラインオプションを指定して、マウントスクリプトを入力します。</block>
  <block id="cc896021fb024f9f0a119749d16f42c6" category="list-text">SnapCenter のジョブ詳細画面に処理の進捗状況が表示されます。</block>
  <block id="fb14d9cdc6b29f21dde7c843415b0e30" category="list-text">SnapCenter では、クローニングされたボリュームの新しいリソースが表示されます。</block>
  <block id="e75e233d1a0d5dfc08414007ca9b4ddb" category="section-title">追加のSAPアプリケーションサービスのクローニング</block>
  <block id="2184a1291c65d3b3b536d54f7d596a25" category="section-title">データボリュームのクローニングとHANAデータベースのリカバリ</block>
  <block id="bc4fe2352063642d68529f2aa0ca7ca3" category="list-text">ネットアップの製品マニュアル</block>
  <block id="fa4af55c3fdbce23e96d2cf73261fa5b" category="inline-link"><block ref="fa4af55c3fdbce23e96d2cf73261fa5b" category="inline-link-rx"></block></block>
  <block id="2e85fc867cab94d246e0bf6043b361cd" category="paragraph"><block ref="2e85fc867cab94d246e0bf6043b361cd" category="inline-link-rx"></block></block>
  <block id="14eeebfaf0a3f6c3f31d03561a918d1d" category="doc">SAPシステムのコピー、更新、クローニングのシナリオ</block>
  <block id="63d77ab1313f4f81998ac664534d61f8" category="paragraph">SAPシステムの更新、SAPシステムのコピー、SAPシステムのクローニングの3つのプロセスの同義語としてよく使用されます。ワークフローとユースケースはそれぞれ異なるため、異なる処理を区別することが重要です。</block>
  <block id="2524d9452b0a981704b4a6ee5d325ae9" category="list-text">* SAPシステムの更新。* SAPシステムの更新は、ソースSAPシステムのデータを使用した既存のターゲットSAPシステムの更新です。ターゲットシステムは、通常、品質管理システムなどのSAP転送環境の一部であり、本番用システムのデータで更新されます。ソース・システムとターゲット・システムでは、ホスト名、インスタンス番号、およびSIDが異なります。</block>
  <block id="70163042bd4905ce5700fc7a0ebfb1ab" category="list-text">* SAPシステムのコピー。* SAPシステムのコピーとは、ソースSAPシステムのデータを含む新しいターゲットSAPシステムのセットアップを指します。たとえば、本番用システムのデータを含む追加のテストシステムを新しいターゲットシステムとして使用できます。ソース・システムとターゲット・システムでは、ホスト名、インスタンス番号、およびSIDが異なります。</block>
  <block id="9d987abf3f9fb4867efa110ffee16b77" category="list-text">* SAPシステムのクローン。* SAPシステムのクローンは、ソースSAPシステムの同一クローンです。SAPシステムクローンは、一般に論理的な破損に対処したり、ディザスタリカバリのシナリオをテストしたりするのに使用されます。システムのクローニング処理では、ホスト名、インスタンス番号、およびSIDの値は変更されません。そのため、本番環境と通信できないように、ターゲットシステムの適切なネットワークフェンシングを設定することが重要です。</block>
  <block id="bf71c2f30ce593737e5676b615d679b7" category="summary">このセクションでは、LSCをNetApp SnapCenter に統合する方法について説明します。LSCとSnapCenter の統合では、SAPでサポートされるすべてのデータベースがサポートされます。ただし、SAP HANAはSAP AnyDBでは使用できない中央通信ホストを提供するため、SAP AnyDBとSAP HANAを区別する必要があります。</block>
  <block id="1a69541a93d21817ebaad2102f643fb1" category="doc">LSCおよびSnapCenter でSAP HANAシステムが更新されます</block>
  <block id="d6a68c1e93d6606c28c5465a88d436c9" category="paragraph">このセクションでは、LSCをNetApp SnapCenter に統合する方法について説明します。LSCとSnapCenter の統合では、SAPでサポートされるすべてのデータベースがサポートされます。ただし、SAP HANAはSAP AnyDBでは使用できない中央通信ホストを提供するため、SAP AnyDBとSAP HANAを区別する必要があります。</block>
  <block id="deb112a96121fb1b1188979dcbf067d3" category="paragraph">SAP AnyDB用のデフォルトのSnapCenter エージェントとデータベースプラグインのインストールは、データベースサーバ用の対応するデータベースプラグインに加えて、SnapCenter エージェントからのローカルインストールです。</block>
  <block id="a6013c0e984d4c44e03b3e7a74e5aeb0" category="paragraph">このセクションでは、例として、LSCとSnapCenter の統合についてSAP HANAデータベースを使用して説明します。前述したSAP HANAの場合、SnapCenter エージェントとSAP HANAデータベースプラグインのインストール方法は2つあります。</block>
  <block id="bcbedc871164d34fd83bbf2db3afbfbe" category="list-text">*標準のSnapCenter エージェントとSAP HANA Plug-inのインストール。*標準のインストールでは、SnapCenter エージェントとSAP HANAプラグインはSAP HANAデータベースサーバにローカルでインストールされます。</block>
  <block id="c4e5652d7c6756098b7fa87e73bd054c" category="list-text">*中央通信ホストを使用するSnapCenter のインストール。*中央通信ホストは、SnapCenter エージェント、SAP HANAプラグイン、および複数のSAP HANAシステムのSAP HANAデータベースのバックアップとリストアに必要なすべてのデータベース関連操作を処理するHANAデータベースクライアントとともにインストールされます。したがって、中央通信ホストに完全なSAP HANAデータベースシステムをインストールする必要はありません。</block>
  <block id="a0e8a8955d20c8fc657e47b2296ed8c1" category="paragraph">次の項では、標準インストールまたは中央通信ホストを使用したLSCとSnapCenter の統合の違いについて説明します。特に、インストールオプションと使用するデータベースに関係なく、強調表示されない設定手順はすべて同じです。</block>
  <block id="2859fee4a02ffd846470095dc466260c" category="paragraph">次の図に、LSCを使用しないSnapCenter によるSAPシステムの更新ライフサイクルの一般的なワークフローを示します。</block>
  <block id="052eec788d8241d56e540b703047914e" category="list-text">手動前処理（ライセンス、ユーザー、プリンターなどのエクスポート）。</block>
  <block id="7e1b2dbe7aeb5bb0dae54646fc7b068f" category="list-text">必要に応じて、ターゲットシステム上の既存のクローンを削除します。</block>
  <block id="1ec54762821f370d94ab59973a242731" category="list-text">ソースシステムの既存のSnapshotコピーを、SnapCenter によって実行されるターゲットシステムにクローニングすること。</block>
  <block id="a2f01cea3186adcc7a8299f963129bef" category="list-text">SAP後処理の手動操作（ライセンスのインポート、ユーザー、プリンタ、バッチジョブの無効化など）。</block>
  <block id="15ede771c76a381ce180a8a5b016a9e5" category="list-text">その後、システムをテストシステムまたはQAシステムとして使用できます。</block>
  <block id="0b1431f9973ec538c4929da23ef2df09" category="list-text">新しいシステムの更新が要求されると、手順2でワークフローが再開されます。</block>
  <block id="dad719ad8230b28731f943672a4d5160" category="paragraph">SAPをご利用のお客様は、次の図に示す手動の手順が緑で表示されているため、時間がかかり、ミスが発生しやすくなっています。LSCとSnapCenter の統合を使用する場合、これらの手動手順は、信頼性の高い反復可能な方法でLSCを使用して実行されます。この方法では、内部および外部の監査に必要なすべてのログが使用されます。</block>
  <block id="a1ac4d20408e8685f13f991ede187151" category="paragraph">次の図は、SnapCenterベースのSAPシステム更新手順 の概要を示しています。</block>
  <block id="dfafb60fecb9c84a71b2f57e43572aa4" category="paragraph">次の前提条件を満たしている必要があります。</block>
  <block id="e6dc24f83de456eb68d52ebe06229756" category="list-text">SnapCenter をインストールする必要があります。ソースシステムとターゲットシステムは、標準インストールまたは中央通信ホストを使用して、SnapCenter で設定する必要があります。Snapshotコピーはソースシステム上に作成できます。</block>
  <block id="4030bd38003569b0aa03679aacb58d03" category="list-text">次の図に示すように、SnapCenter でストレージバックエンドが正しく設定されている必要があります。</block>
  <block id="783367908b6fad41041132e4e731f814" category="paragraph">次の2つの図は、SnapCenter エージェントとSAP HANAプラグインが各データベースサーバでローカルにインストールされる標準インストールを示しています。</block>
  <block id="716491e046b3f9f90b117da16c013072" category="paragraph">SnapCenter エージェントと適切なデータベースプラグインをソースデータベースにインストールする必要があります。</block>
  <block id="f57e5828892c745a8a32aaeda8baade2" category="paragraph">SnapCenter エージェントと適切なデータベースプラグインをターゲット・データベースにインストールする必要があります。</block>
  <block id="6263b2edbc1c1dcb7a51621051498083" category="paragraph">次の図は、SnapCenter エージェント、SAP HANAプラグイン、およびSAP HANAデータベースクライアントが一元化されたサーバ（SnapCenter サーバなど）にインストールされ、ランドスケープ内の複数のSAP HANAシステムを管理する、中央通信ホスト環境を示しています。</block>
  <block id="cb782b8498178806c8212caf20778a66" category="paragraph">SnapCenter エージェント、SAP HANAデータベースプラグイン、およびHANAデータベースクライアントが、中央の通信ホストにインストールされている必要があります。</block>
  <block id="eef8c7a6c890ac29bbfadeef31ec706a" category="paragraph">Snapshotコピーを正常に作成できるように、SnapCenter でソースデータベースのバックアップが適切に設定されている必要があります。</block>
  <block id="370b67a38ee79201ffeff4eeef17db78" category="paragraph">LSCマスターおよびLSCワーカーがSAP環境にインストールされている必要があります。この展開では、SnapCenter サーバにLSCマスターをインストールし、ターゲットのSAPデータベースサーバにLSCワーカーをインストールします。このサーバは更新する必要があります。詳細については、「」を参照してください<block ref="c48fa9372da5e679296fa19c382bd1c1" category="inline-xref-macro-rx"></block>」</block>
  <block id="de1921a90d14a58282dcb74904bfbc87" category="paragraph">ドキュメント：</block>
  <block id="c804e38e267ab7e08a61f3e791e5a99a" category="inline-link">SnapCenter ドキュメントセンター</block>
  <block id="5f238be6282547752bdf3926f1af44c2" category="list-text"><block ref="5f238be6282547752bdf3926f1af44c2" category="inline-link-rx"></block></block>
  <block id="550ff411af842971b5bef45c5d9d1a59" category="inline-link">TR-4700 ：『 SnapCenter Plug-in for Oracle Database 』</block>
  <block id="2c7b4a7cfd7910e959b3899cdd539867" category="list-text"><block ref="2c7b4a7cfd7910e959b3899cdd539867" category="inline-link-rx"></block></block>
  <block id="4d0488fb3017f2f14273ce8765843a99" category="list-text"><block ref="4d0488fb3017f2f14273ce8765843a99" category="inline-link-rx"></block></block>
  <block id="56f5eeda3975435c8530355bc5441429" category="inline-link">TR-4769：『SnapCenter Best Practices and Sizing Guidelines』</block>
  <block id="025547de09dae9dc145b97701e1b973f" category="list-text"><block ref="025547de09dae9dc145b97701e1b973f" category="inline-link-rx"></block></block>
  <block id="6be1ed7d0e35cab2dd490a58f13d3761" category="inline-link">SnapCenter 4.6コマンドレットリファレンスガイド</block>
  <block id="76f3b0f8b6a51710bcff71e212056376" category="list-text"><block ref="76f3b0f8b6a51710bcff71e212056376" category="inline-link-rx"></block></block>
  <block id="6273877c694f4875c4ab83bf5ef28e30" category="paragraph">このセクションでは、デモデータセンターでセットアップされたアーキテクチャの例について説明します。セットアップは、標準的なインストールと、中央の通信ホストを使用したインストールに分かれています。</block>
  <block id="e0090e5eeb1da23a2924e8a8913a9bf8" category="section-title">標準インストール</block>
  <block id="18500288570633595d57fbe40cf00d2d" category="paragraph">次の図に、SnapCenter エージェントとデータベースプラグインが、ソースおよびターゲットのデータベースサーバ上にローカルにインストールされた標準インストールを示します。このラボ環境では、SAP HANA Plug-inをインストールしました。また、ターゲットサーバにLSCワーカーもインストールされています。簡素化と仮想サーバ数の削減のために、SnapCenter サーバにLSCマスターをインストールしました。次の図は、各種コンポーネント間の通信を示しています。</block>
  <block id="007661ea1b3047cae7c25cb610ab167c" category="section-title">セントラルコミュニケーションホスト</block>
  <block id="404683c0fc052e1bb3f98c2e3b837701" category="paragraph">次の図に、中央通信ホストを使用した設定を示します。この構成では、SnapCenter エージェントとSAP HANA Plug-inおよびHANAデータベースクライアントを専用サーバにインストールしました。このセットアップでは、SnapCenter サーバを使用して中央通信ホストをインストールしました。さらに、LSCワーカーが再びターゲットサーバにインストールされました。簡素化と仮想サーバ数の削減のため、SnapCenter サーバにLSCマスターもインストールすることにしました。次の図に、異なるコンポーネント間の通信を示します。</block>
  <block id="37e133ea70387ff2d153dfd4610277a9" category="section-title">Libelle SystemCopyの初期1回限りの準備手順</block>
  <block id="e2a4a6c5862a5dd11da8456a71cb4213" category="paragraph">LSCインストールには、次の3つの主要コンポーネントがあります。</block>
  <block id="239ee2a2c55f17e70845f88c9c4b5dcc" category="list-text">*LSC master.*という名前が示すように、Libelleベースのシステムコピーの自動ワークフローを制御するマスターコンポーネントです。デモ環境では、LSCマスターがSnapCenter サーバにインストールされています。</block>
  <block id="4126f3ecfcea5aa9990a2aa8cd1332ef" category="list-text">* LSCワーカー。* LSCワーカーは、通常はターゲットSAPシステムで実行されるLibelleソフトウェアの一部であり、自動システムコピーに必要なスクリプトを実行します。デモ環境では、ターゲットのSAP HANAアプリケーションサーバにLSCワーカーがインストールされています。</block>
  <block id="5e6c40f175398bcd638cb9750798878a" category="list-text">* LSC衛星。* LSC衛星は、それ以降のスクリプトを実行する必要があるサードパーティシステム上で実行されるLibelleソフトウェアの一部です。LSCマスターは、LSCサテライトシステムの役割も同時に果たすことができます。</block>
  <block id="fc732f49b72c2472c6b8643d5353f2ec" category="list-text">* 172.30.15.35.* SAPソースシステムとSAP HANAソースシステムのIPアドレス。</block>
  <block id="9179a1ee6a75d729452f54f714900f9d" category="list-text">*172.30.15.3.*この構成のLSCマスターおよびLSCサテライトシステムのIPアドレス。SnapCenter サーバにLSCマスターをインストールしたため、SnapCenter サーバのインストール時にインストールされたSnapCenter 4.x PowerShellコマンドレットは、このWindowsホストですでに使用できます。そのため、このシステムに対してLSCサテライトロールを有効にし、このホストですべてのSnapCenter PowerShellコマンドレットを実行することにしました。別のシステムを使用する場合は、SnapCenter のマニュアルに従って、このホストにSnapCenter PowerShellコマンドレットをインストールしてください。</block>
  <block id="f2e8e2175c9da79f9518268cae7290b7" category="list-text">*172.30.15.36* SAPデスティネーションシステム、SAP HANAデスティネーションシステム、およびLSCワーカーのIPアドレス。</block>
  <block id="9dbe0511fc1dcc2f05099fa37692c272" category="paragraph">IPアドレス、ホスト名、完全修飾ドメイン名の代わりに使用することもできます。</block>
  <block id="f6ec8e3f7e5bd6f3e424a8845be503ac" category="paragraph">次の図は、マスタ、ワーカー、サテライト、SAPソース、SAPターゲットのLSC構成を示しています。 ソースデータベースおよびターゲットデータベース。</block>
  <block id="b79cd6f4ffb52ea19abfc129a1113b1f" category="paragraph">メイン統合のためには、設定手順を標準インストールと中央通信ホストを使用したインストールに再度分ける必要があります。</block>
  <block id="f79c000ff76c1c3fcccfde48d40ae022" category="paragraph">このセクションでは、SnapCenter エージェントと必要なデータベースプラグインがソースシステムとターゲットシステムにインストールされている標準インストールを使用する場合に必要な設定手順について説明します。標準インストールを使用する場合は、クローンボリュームのマウントおよびターゲットシステムのリストアとリカバリに必要なすべてのタスクが、サーバ自体のターゲットデータベースシステムで実行されているSnapCenter エージェントから実行されます。これにより、SnapCenter エージェントの環境変数を使用して、クローン関連の詳細情報にアクセスできるようになります。したがって、LSCコピーフェーズでは、追加のタスクを1つだけ作成する必要があります。このタスクでは、ソース・データベース・システムでSnapshotコピーの処理を実行し、ターゲット・データベース・システムでクローンおよびリストアおよびリカバリの処理を実行します。SnapCenter に関連するすべてのタスクは、LSCタスク「NTAP_SYSTEM_CLONE」に入力されたPowerShellスクリプトを使用してトリガーされます。</block>
  <block id="ffdc08e8ba0dbaa69cfc632f5ee35d2d" category="paragraph">次の図は、コピーフェーズのLSCタスクの設定を示しています。</block>
  <block id="7247a3044be0984304dbbf83efd3d439" category="paragraph">次の図は'NTAP_SYSTEM_CLONEプロセスの構成を示していますPowerShellスクリプトを実行するため、このWindows PowerShellスクリプトはサテライトシステム上で実行されます。この場合、これは、サテライトシステムとしても機能する、インストールされたLSCマスターを持つSnapCenter サーバです。</block>
  <block id="d290af93396c45593291e7d4ffdddab8" category="paragraph">LSCは、Snapshotコピー、クローニング、およびリカバリ処理が成功したかどうかを認識する必要があるため、少なくとも2つの戻りコードタイプを定義する必要があります。次の図に示すように、1つのコードはスクリプトを正常に実行するためのもので、もう1つのコードはスクリプトの実行に失敗するためのものです。</block>
  <block id="14dfdadc5a95fdee64c51fc0968f9aa3" category="list-text">実行が成功した場合は、スクリプトから標準出力に「LSC：OK」を書き込む必要があります。</block>
  <block id="cf6b0a784c583f2e4731ee8103199cbf" category="list-text">実行に失敗した場合は、スクリプトから標準出力に「LSC：error」を書き込む必要があります。</block>
  <block id="2d7a6e0aa948c67c2dfbc5d04b2f328d" category="paragraph">次の図は、ソースデータベースシステムでSnapshotベースのバックアップを実行し、ターゲットデータベースシステムでクローンを実行する、PowerShellスクリプトの一部です。このスクリプトは、完全なものではありません。このスクリプトでは、LSCとSnapCenter の統合がどのように表示されるか、および設定がどの程度簡単かを示します。</block>
  <block id="54895eed2981e39cc9de40355230f8a2" category="paragraph">スクリプトはLSCマスター（サテライトシステムでもある）上で実行されるため、SnapCenter サーバ上のLSCマスターは、SnapCenter でバックアップおよびクローニング操作を実行するための適切な権限を持つWindowsユーザとして実行する必要があります。ユーザに適切な権限があるかどうかを確認するには、SnapCenter UIでSnapshotコピーとクローンを実行できる必要があります。</block>
  <block id="d99842a2f1f1c478453bfb614fad5f06" category="paragraph">SnapCenter サーバ自体でLSCマスターおよびLSCサテライトを実行する必要はありません。LSCマスターおよびLSCサテライトは、任意のWindowsマシンで実行できます。LSCサテライトでPowerShellスクリプトを実行するための前提条件は、SnapCenter PowerShellコマンドレットがWindowsサーバにインストールされていることです。</block>
  <block id="473556daf85d0d3ed30051948502a319" category="paragraph">中央通信ホストを使用してLSCとSnapCenter の間で統合する場合、コピーフェーズで実行する必要がある調整のみが実行されます。Snapshotコピーとクローンは、中央通信ホスト上のSnapCenter エージェントを使用して作成されます。したがって、新しく作成されたボリュームに関するすべての詳細情報は、ターゲットデータベースサーバではなく、中央通信ホストでのみ使用できます。ただし、これらの詳細は、クローンボリュームをマウントしてリカバリを実行するために、ターゲットデータベースサーバ上に必要です。これは、コピーフェーズで追加のタスクが2つ必要になる理由です。1つのタスクが中央通信ホストで実行され、1つのタスクがターゲットデータベースサーバで実行されます。これら2つのタスクを次の図に示します。</block>
  <block id="6a89e29d4743cfea15787c6664a35855" category="list-text">* NTAP _ SYSTEM_CLONE_CP。このタスクでは、中央通信ホストで必要なSnapCenter 機能を実行するPowerShellスクリプトを使用して、Snapshotコピーおよびクローンを作成します。したがって、このタスクはLSCサテライト上で実行されます。この場合、このインスタンスはWindows上で実行されるLSCマスターです。このスクリプトは、クローンおよび新しく作成されたボリュームに関するすべての詳細を収集し、2番目のタスク「NTAP_Mnt_RECOVER_CP」に渡します。このタスクは、ターゲットデータベースサーバで実行されるLSCワーカーで実行されます。</block>
  <block id="943cadb1083368f2707a68ed586e7923" category="list-text">* NTAP_Mnt_RECOVER_CP。*このタスクは、ターゲットSAPシステムとSAP HANAデータベースを停止し、古いボリュームをアンマウントして、前のタスク「NTAP_SYSTEM_CLONE_CP」から渡されたパラメータに基づいて、新しく作成されたストレージクローンボリュームをマウントします。その後、ターゲットのSAP HANAデータベースがリストアおよびリカバリされます。</block>
  <block id="cf6d8bd1cac77f539772c0247b9b04d9" category="paragraph">次の図は'タスク'NTAP_SYSTEM_CLONE_CP'の構成を示していますこれは、サテライトシステムで実行されるWindows PowerShellスクリプトです。この場合、サテライトシステムは、インストールされたLSCマスターを持つSnapCenter サーバになります。</block>
  <block id="22285bc33a6c217be29249f174091652" category="paragraph">LSCは、Snapshotコピーおよびクローニング処理が成功したかどうかを認識する必要があるため、次の図に示すように、少なくとも2つの戻りコードタイプを定義する必要があります。スクリプトを正常に実行するには1つの戻りコードタイプ、スクリプトの実行に失敗するにはもう1つの戻りコードタイプです。</block>
  <block id="62ebeb472f2a01a7c37858ef5040ad0e" category="list-text">実行に失敗した場合は、スクリプトから標準出力に「LSC：error」を書き込む必要があります。</block>
  <block id="1fc5d3b1a8e8ad8e070bac1db2755b14" category="paragraph">次の図は、中央通信ホスト上のSnapCenter エージェントを使用してSnapshotコピーとクローンを実行するために実行する必要があるPowerShellスクリプトの一部を示しています。このスクリプトは完了することを意図したものではありません。代わりに、スクリプトを使用して、LSCとSnapCenter の統合がどのように見えるか、および設定がどの程度簡単かを示します。</block>
  <block id="82a941dabf24a9e7993a0dfd0b019266" category="paragraph">前述したように、クローンボリュームの名前を次のタスク「NTAP_Mnt_RECOVER_CP」に渡して、ターゲットサーバでクローンボリュームをマウントする必要があります。クローン・ボリュームの名前（ジャンクション・パスとも呼ばれます）は変数「$JunctionalPath」に格納されます。後続のLSCタスクへの引き渡しは、カスタムのLSC変数によって行われます。</block>
  <block id="49e000ffe321ceb1a70d82ea78d0c6bd" category="paragraph">スクリプトはLSCマスター（サテライトシステムでもある）上で実行されるため、SnapCenter サーバ上のLSCマスターは、SnapCenter でバックアップおよびクローニング操作を実行するための適切な権限を持つWindowsユーザとして実行する必要があります。適切な権限があるかどうかを確認するには、ユーザがSnapCenter GUIでSnapshotコピーとクローンを実行できる必要があります。</block>
  <block id="ea8d68751393b58709f3ea40ba70acb6" category="paragraph">次の図は'NTAP_Mnt_RECOVER_CP'タスクの構成を示していますLinuxシェルスクリプトを実行するため、これはターゲットデータベースシステムで実行されるコマンドスクリプトです。</block>
  <block id="c4b5d16f882636f7442e3048f2324b72" category="paragraph">LSCは、クローンボリュームのマウントを認識し、ターゲットデータベースのリストアとリカバリが成功したかどうかを確認する必要があるため、少なくとも2つの戻りコードタイプを定義する必要があります。1つはスクリプトを正常に実行するためのコードで、1つはスクリプトの実行に失敗したコードです。次の図に示します。</block>
  <block id="2e3f585a020dfdc63a988e48a87104dd" category="paragraph">次の図に、Linux Shellスクリプトの一部を示します。このスクリプトでは、ターゲットデータベースの停止、古いボリュームのアンマウント、クローンボリュームのマウント、ターゲットデータベースのリストアとリカバリを行います。前のタスクでは、ジャンクションパスがLSC変数に書き込まれました。次のコマンドはこのLSC変数を読み取り、値をLinuxシェルスクリプトの「$JunctionalPath」変数に格納します。</block>
  <block id="732504ea297afd88dd03368c58912f84" category="paragraph">ターゲットシステム上のLSCワーカーは「&lt;sidaadm&gt;`」として実行されますが、マウントコマンドはrootユーザとして実行する必要があります。したがって'central_plugin_host_wrapper_script.shを作成する必要がありますスクリプト「central_plugin_host_wrapper_script.sh」は、「sudo」コマンドを使用して「NTAP_Mnt_recovery_CP」タスクから呼び出されます。スクリプトは'sudoコマンドを使用してUID 0で実行され'古いボリュームのアンマウント'クローンボリュームのマウント'ターゲット・データベースのリストアとリカバリなど'以降のすべての手順を実行できますsudoを使用してスクリプト実行を有効にするには'/etc/sudoers'に次の行を追加する必要があります</block>
  <block id="8194823b374a03595ee2ee92861dfa5c" category="section-title">SAP HANAシステムの更新処理</block>
  <block id="fd4570f5dbab54ff8215f97356cef84a" category="paragraph">LSCとNetApp SnapCenter の間の必要な統合タスクがすべて実行されたので、完全に自動化されたSAPシステム更新を開始するのはワンクリックタスクです。</block>
  <block id="cc5747bb54ae81e815234f4894e61642" category="paragraph">次の図は'標準インストールにおけるNTAP `_`SYSTEM`_CLONE」タスクを示していますこの出力からわかるように、Snapshotコピーとクローンを作成し、クローンボリュームをターゲットデータベースサーバにマウントし、ターゲットデータベースのリストアとリカバリには約14分かかりました。SnapshotとNetApp FlexCloneテクノロジを使用すれば、ソースデータベースのサイズに関係なく、このタスクの所要時間はほぼ同じです。</block>
  <block id="7ae2a6447550be2b8594e4607e4a7453" category="paragraph">次の図に、セントラル通信ホストを使用する場合の「NTAP_SYSTEM_CLONE_CP」と「NTAP_Mnt_RECOVERY_CP」の2つのタスクを示します。この出力からわかるように、Snapshotコピー、クローン、ターゲットデータベースサーバへのクローンボリュームのマウント、ターゲットデータベースのリストアとリカバリには約12分かかりました。これは、標準インストールを使用する場合に、これらの手順を実行するのに必要な時間と同じか、それより短くなります。繰り返しになりますが、SnapshotとNetApp FlexCloneテクノロジを使用すれば、ソースデータベースのサイズに関係なく、これらのタスクを短時間で一貫して実行できます。</block>
  <block id="3f50f7ed267e090adcfbab165f2e5c47" category="list-text">TR-4436：『SAP HANA on NetApp All Flash FAS Systems with Fibre Channel Protocol』</block>
  <block id="abb522bb2ca57b2c5746580a64109029" category="list-text">TR-4435：『SAP HANA on NetApp All Flash FAS Systems with NFS』</block>
  <block id="856228be68913d2211ee02f22a38e8e9" category="paragraph">今日のダイナミックなビジネス環境では、企業は継続的なイノベーションを提供し、変化する市場に迅速に対応する必要があります。このような競争の激しい状況下で、業務プロセスの柔軟性を高める企業は、市場の需要に効果的に対応できます。</block>
  <block id="3f764a0345ec7999f352204a5b3fdddd" category="paragraph">従来のSAPライフサイクル管理アプローチでは、このようなシステムは主に手動プロセスに基づいてプロビジョニングされます。このような手動プロセスは、ミスを避けられず、時間もかかることが多く、イノベーションの遅れやビジネス要件への対応の遅れにつながります。</block>
  <block id="a401037b1fd939681f3b1d35a4cf1871" category="section-title">オフサイトバックアップやディザスタリカバリのデータレプリケーションを実行できます</block>
  <block id="081ba012afe11bcd1b8a6bd63696006b" category="paragraph">ネットアップのテクノロジとソフトウェアの統合により、ソースシステムのSnapshotバックアップを利用してSAPシステムのコピーやクローニングを実行することができます。このSnapshotバックアップは、SAP本番用システムと同じストレージ、オフサイトのバックアップ用ストレージ、またはディザスタリカバリサイトのストレージから選択できます。この柔軟性により、必要に応じて開発用システムとテスト用システムを本番用システムと分離し、ディザスタリカバリサイトでのディザスタリカバリのテストなど、さまざまなシナリオに対応することができます。</block>
  <block id="9a44f200391ceb970e5a7d2117387553" category="section-title">統合による自動化</block>
  <block id="56d0fbc6603d3792bb6ace3eeba4640c" category="paragraph">SAPテストシステムのプロビジョニングにはさまざまなシナリオとユースケースがあり、自動化のレベルに関してもさまざまな要件が存在する場合があります。ネットアップのSAP向けソフトウェア製品は、SAPのデータベースやライフサイクル管理製品と統合されているため、さまざまなシナリオや自動化のレベルに対応できます。</block>
  <block id="9faeb8f5b5338bf989de461d80bdda01" category="paragraph">NetApp SnapCenter とSAP HANA向けプラグインを使用して、アプリケーションと整合性のあるSnapshotバックアップに基づいて必要なストレージボリュームをプロビジョニングし、開始されたSAP HANAデータベースまで、必要なホストおよびデータベースのすべての処理を実行します。SAPシステムのコピー、システムクローン、システムの更新、SAPのポストプロセスなどの追加の手動手順が必要になる場合があります。詳細については、次のセクションで説明します。</block>
  <block id="51804259bd2554b5e3aed937261760cc" category="summary">本ドキュメントでは、SnapCenter クローンの作成処理とクローンの削除処理をさらに自動化するために、2つのスクリプトを使用しています。</block>
  <block id="d648af91bd5d8a9bfbf67955f22a64fc" category="doc">自動化スクリプトの例</block>
  <block id="1895adf39b38ef18443a63aa503d8314" category="section-title">スクリプトsc-system-refresh.sh</block>
  <block id="9f44c7e376181d4ca0921e1d3a50fda8" category="section-title">サポートされているテナントリカバリ処理</block>
  <block id="8d56fe5a88639964171b4bbd96f2e00a" category="paragraph">ターゲットシステムで別のテナント名が必要な場合は、リカバリ処理後にテナントの名前を手動で変更する必要があります。</block>
  <block id="004c7f829dcf842443fd006747d3de9f" category="cell">MDCのシングルテナント</block>
  <block id="c71db1f0ff2bac482804f98b63405342" category="cell">ソースのテナント名がソースのSIDと同じです</block>
  <block id="d929ba5e22f3284a57126c2edcb90be7" category="cell">ターゲットテナント名はターゲットSIDと同じです</block>
  <block id="fa8fc5ef8247db89b09a5feb3ba454cd" category="cell">ソーステナント名がソースSIDと同じではありません</block>
  <block id="7f0af4df67950a3197c9553be6bc7ba8" category="cell">ターゲットテナント名はソーステナント名と同じです</block>
  <block id="78872edb0be427b181e6e8e7190de742" category="cell">MDCの複数のテナント</block>
  <block id="82a6e1233b922d8cab83fc7d0256ab6a" category="cell">任意のテナント名</block>
  <block id="9ba220b8314947bfb807aaa20db482fa" category="section-title">SnapCenter 環境変数</block>
  <block id="c05a52fae37942af7adad0d02ba87fee" category="paragraph">SnapCenter には、ターゲットホストで実行されるスクリプト内で使用可能な一連の環境変数が用意されています。スクリプトはこれらの変数を使用して、関連する構成設定を決定します。</block>
  <block id="3e88016e64c25f9d19a24a1f021ac09a" category="section-title">スクリプトsc-mount-volume.sh</block>
  <block id="29e2dd6e9c1ba11d2dd4b2729177f644" category="list-text">「cloned_volume_mount_path」環境変数から派生したものです。</block>
  <block id="14d04d54afbe1cbf1d1c652d03b4ab5b" category="section-title">SnapCenter 環境変数を取得するスクリプト</block>
  <block id="f849fc808040266d8c8e8176608047f5" category="paragraph">自動化スクリプトを使用せず、手順を手動で実行する必要がある場合は、FlexCloneボリュームのストレージシステムのジャンクションパスを把握しておく必要があります。ジャンクションパスはSnapCenter 内では表示されないため、ストレージシステムで直接ジャンクションパスを検索するか、ターゲットホストにSnapCenter 環境変数を提供する単純なスクリプトを使用する必要があります。このスクリプトは、SnapCenter のクローン作成処理にマウント処理スクリプトとして追加する必要があります。</block>
  <block id="19cc491dd4ab0c0c23981caff6da1749" category="paragraph">「env-from-ssc.txt」ファイル内で、変数「cloned_volume_mount_path」を検索して、FlexCloneボリュームのストレージシステムのIPアドレスとジャンクションパスを取得します。</block>
  <block id="d1d283ed469f9cbb4c4f40ee4c2c78d0" category="summary">SAPのライフサイクル管理を最適化するネットアップのソリューションは、SAP AnyDBとSAP HANAデータベースに統合されています。さらに、ネットアップは、アプリケーションと統合された効率的なデータ保護と、SAPテストシステムの柔軟なプロビジョニングを組み合わせた、SAPのライフサイクル管理ツールに統合しています。</block>
  <block id="8133b664c0921de8f7cfeb9e67c3402e" category="doc">TR-4929：Libelle SystemCopyによるSAPシステムのコピー処理の自動化</block>
  <block id="6581ea45f3bd063045396c433f8b8673" category="paragraph">Holger Zecha、Tobias Brandl、ネットアップFranz Diegruber、Libelle</block>
  <block id="dd2d3355ce822b7021e69bb9d84e81f9" category="paragraph">市場ニーズの変化は、企業のSAP環境にも影響を及ぼし、定期的な統合、変更、更新が必要になります。IT部門は、これらの変更を、より少ないリソースでより短い期間で実装する必要があります。変更を導入する際のリスクを最小限に抑えるには、本番環境の実際のデータを使用するSAPシステムを追加で必要とする、テストとトレーニングを徹底的に実施する必要があります。</block>
  <block id="512e1d819a2e72bd976007357739c04d" category="paragraph">SAPのライフサイクル管理を最適化するネットアップのソリューションは、SAP AnyDBとSAP HANAデータベースに統合されています。さらに、ネットアップは、アプリケーションと統合された効率的なデータ保護と、SAPテストシステムの柔軟なプロビジョニングを組み合わせた、SAPのライフサイクル管理ツールに統合しています。</block>
  <block id="85843ef1a579ba31f7d2d08eee1f3767" category="inline-link">SAP同種システムのコピーガイド</block>
  <block id="2ff1b2a382b2aaf88d7989c339b64c0c" category="inline-link">Libelle</block>
  <block id="5ef992ffc6cb882658d3affca1d6a660" category="inline-link">Libelle SystemCopy (LSC)</block>
  <block id="577e0778dbb772e991e1ef7491d4a63d" category="inline-link">完全なエンドツーエンドの自動システムコピーを、記録的な時間で作成します</block>
  <block id="cb542b2dfbc4144e32b4ad8589d73ce9" category="paragraph">このようなネットアップのソリューションは、大規模なデータベースでも膨大なデータを効率的に管理するという問題 を解決しますが、SAPシステムの完全なエンドツーエンドのコピーおよび更新処理には、ソースSAPシステムのIDをターゲットシステムに完全に変更するためのコピー前処理とコピー後処理が含まれている必要があります。SAPでは、で必要なアクティビティについて説明します<block ref="0de971f1438283e76a91316d0d3300a0" category="inline-link-rx"></block>。ネットアップのパートナー様は、手動プロセスの回数をさらに減らし、SAPシステムのコピープロセスの品質と安定性を高めるために<block ref="afdd381059116a8c46ab98bfde7cbd99" category="inline-link-rx"></block> を開発しました<block ref="733635162e915754a49ad8c2e771a2c5" category="inline-link-rx"></block> ツール。Libelleと共同で、SAPシステムコピー用のネットアップソリューションをLSCに統合して提供しています<block ref="08c74391aa9b631b71159d2b8e7655b7" category="inline-link-rx"></block>。</block>
  <block id="d9693233c8bb371afd0a7faaa0c944bb" category="section-title">アプリケーションに統合されたSnapshotコピー処理</block>
  <block id="df1fdb1abc84b3d20f88397c73bba7ce" category="inline-link">Microsoft Azure Application Consistent Snapshotツール</block>
  <block id="2550d042e773faa90e9c72382941e7ca" category="paragraph">アプリケーションと整合性のあるNetApp Snapshotコピーをストレージレイヤに作成する機能は、本ドキュメントで説明するシステムコピー処理とシステムクローン処理の基盤となります。ストレージベースのSnapshotコピーは、ネットアップのSnapCenter Plug-in for SAP HANAまたはSAPのネイティブONTAP システム上の任意のDBを使用して作成されます<block ref="c71ed82ea3bb1854004aa6a0fd6774ad" category="inline-link-rx"></block> （AzAcSnap）、およびMicrosoft Azureで実行されるSAP HANAとOracleデータベースによって提供されるインターフェイス。SAP HANAを使用している場合は、SnapCenter とAzAcSnapがSnapshotコピーをSAP HANAバックアップカタログに登録することで、リストアとリカバリ、およびクローニング処理に使用できます。</block>
  <block id="c92c24a3b359481ce49bb324a8332db9" category="paragraph">アプリケーションと整合性のあるSnapshotコピーは、ストレージレイヤから、オンプレミスのSnapCenter で制御されるオフサイトのバックアップサイトやディザスタリカバリサイトにレプリケートできます。レプリケーションはブロック変更に基づいているため、スペースと帯域幅を効率的に使用できます。クロスリージョンレプリケーション（CRR）機能を使用してAzureリージョン間でAzure NetApp Files ボリュームを効率的にレプリケートすることで、AzureでAzure NetApp Files 実行されているSAP HANAシステムとOracleシステムにも同じテクノロジが使用されます。</block>
  <block id="d92849d4de6a2769ac5847c9d79a1640" category="section-title">SAPシステムのコピー処理やクローニング処理には、任意のSnapshotコピーを使用できます</block>
  <block id="789d2cc69d2afb78e02f72d73b164988" category="paragraph">ネットアップのテクノロジとソフトウェアの統合により、ソースシステムの任意のSnapshotコピーを使用してSAPシステムのコピーやクローニングを実行できます。このSnapshotコピーは、SAP本番用システムと同じストレージ、オフサイトのバックアップに使用するストレージ（AzureのAzure NetApp Files バックアップなど）、またはディザスタリカバリサイトのストレージ（Azure NetApp Files CRRターゲットボリューム）のいずれかから選択できます。この柔軟性により、必要に応じて開発用システムとテスト用システムを本番用システムと分離し、ディザスタリカバリサイトでのディザスタリカバリのテストなど、さまざまなシナリオに対応することができます。</block>
  <block id="77b7177c9e95eb53f805c69f8b7a862d" category="paragraph">SAPテストシステムのプロビジョニングにはさまざまなシナリオとユースケースがあり、自動化のレベルに関してもさまざまな要件が存在する場合があります。ネットアップのSAP向けソフトウェア製品は、SAPなどのサードパーティベンダーが提供するデータベースやライフサイクル管理製品（Libelleなど）と統合されており、さまざまなシナリオや自動化のレベルをサポートします。</block>
  <block id="bb8dcc59de9078f53fc58de9c2f7cee5" category="paragraph">SAP HANAとSAP AnyDBまたはAzure上のAzAcSnap向けのプラグインを備えたNetApp SnapCenter を使用して、アプリケーションと整合性のあるSnapshotコピーに基づいて必要なストレージボリュームのクローンをプロビジョニングし、開始されたSAPデータベースまで、必要なホストとデータベースのすべての処理を実行できます。SAPシステムのコピー、システムクローン、システムの更新、SAPのポストプロセスなどの追加の手動手順が必要になる場合があります。詳細については、次のセクションで説明します。</block>
  <block id="8851fd3c41521c43b8872d5844987d90" category="paragraph">完全に自動化されたエンドツーエンドのSAPテストシステムのプロビジョニングまたは更新は、Libelle SystemCopy（LSC）自動化を使用して実行できます。SnapCenter またはAzAcSnapのLSCへの統合については、このドキュメントで詳しく説明します。</block>
  <block id="31f2fe4efe97c6c07f6792cf857596b8" category="section-title">Libelle SystemCopy</block>
  <block id="3d3d7012f3fc84e162e820c211555de4" category="paragraph">Libelle SystemCopyは、完全に自動化されたシステムコピーとランドスケープコピーを作成するフレームワークベースのソフトウェア解決策 です。ボタンを口頭で操作することで、QAおよびテストシステムを新しい本番データで更新できます。Libelle SystemCopyは、従来のすべてのデータベースとオペレーティングシステムをサポートし、すべてのプラットフォームに独自のコピーメカニズムを提供しますが、同時にバックアップ/リストア手順や、NetApp SnapshotコピーやNetApp FlexCloneボリュームなどのストレージツールを統合します。システムのコピー中に必要なアクティビティは、SAP ABAPスタックの外部から制御されます。そのため、SAPアプリケーションでは転送などの変更は必要ありません。一般に、システムコピー手順 を正常に完了するために必要な手順は、次の4つに分類できます。</block>
  <block id="1088566a14cfbaeba677e0abd83c10d5" category="list-text">*確認フェーズ。*関係するシステム環境を確認してください。</block>
  <block id="56a32c0278a7c01b44ab4ea945a636a0" category="list-text">*プリフェーズ*システムコピーのターゲット・システムを準備します。</block>
  <block id="5b615fbc78e5d6145480840d167efffc" category="list-text">*コピーフェーズ*ソースからターゲット・システムに実際の本番データベースのコピーを提供します</block>
  <block id="7fa823cd52bf8b21a23eb54e78e7926b" category="list-text">*ポスト・フェーズ*：コピー後のすべてのタスクで同機種システムのコピー手順 を完了し'ターゲット・システムを更新します</block>
  <block id="bd6d85bfbf8eed33fcd6d6195ba63e05" category="paragraph">コピーフェーズでは、NetApp SnapshotとFlexCloneの機能を使用して、最大のデータベースであっても、必要な時間を数分に短縮できます。</block>
  <block id="b950f3bf7751b53e112aa6665a1e0e31" category="paragraph">チェックフェーズ、プリフェーズ、およびポストフェーズの場合、LSCには、一般的な更新操作の95%をカバーする450以上の事前設定されたタスクが付属しています。その結果、LSCはSAP標準に従って自動化を推進します。LSCはソフトウェアで定義されるため、システム更新プロセスを簡単に調整および拡張して、お客様のSAP環境固有のニーズに対応できます。</block>
  <block id="d79a0116ae6180c79075dda925087409" category="section-title">SAPシステムの更新とクローニングのユースケース</block>
  <block id="f1615122fe3ee987c5398359f2dca8a8" category="paragraph">ソースシステムのデータをターゲットシステムで使用できるようにする必要があるシナリオは複数あります。</block>
  <block id="b0b38c4cc3e591b6cdab5040cd71f242" category="list-text">品質保証およびテストおよびトレーニングシステムの定期的な更新</block>
  <block id="d88297c655f3ff29d2a1ec937fdd33a7" category="list-text">論理的な破損に対処するために、システム環境の障害修復または修復を行う</block>
  <block id="a70c7e060a3886f8f55acde979d98f33" category="list-text">ディザスタリカバリのテストシナリオ</block>
  <block id="0a2e09fa683bd368c81839911e03b708" category="paragraph">このドキュメントの残りの部分は、2つの部分に分かれています。最初のパートでは、オンプレミスのNetApp ONTAP システムで実行されているSAP HANAシステムとSAP AnyDBシステム向けのNetApp SnapCenter とLibelle SystemCopyの統合について説明します。2番目のパートでは、Microsoft Azureで実行されているSAP HANAシステム用のLSCと、提供されているAzure NetApp Files とのAzAcSnapの統合について説明します。ONTAP テクノロジの基盤は同じですが、Azure NetApp Files は、ネイティブONTAP インストールとは異なるインターフェイスとツールの統合（AzAcSnapなど）を提供します。</block>
  <block id="3af0a07313f24e03257baf4f77dca35c" category="summary">テストやトレーニングの目的で、ソースシステムのデータをターゲットシステムで使用できるようにする必要があるシナリオは複数あります。テストおよびトレーニング用のシステムは、ソースシステムのデータで定期的に更新し、現在のデータセットでテストとトレーニングが実行されていることを確認する必要があります。</block>
  <block id="8632014b0a82d2a229bc13ad57a2ac7e" category="doc">システムの更新とクローニングのユースケース</block>
  <block id="00b4ead5541ced0624c52fdc64a84c14" category="inline-link-macro">「SnapCenter でSAP HANAシステムを更新」</block>
  <block id="c93a3b395dcad6d7d4701c7ae95fc9d7" category="section-title">論理的破損に対処する</block>
  <block id="af5083b35bb63e06e5abf6eb41bc6a64" category="paragraph">論理的破損は、ソフトウェアエラー、人為的エラー、破壊行為などが原因で発生する可能性があります。残念ながら、論理的破損は、標準的な高可用性ソリューションやディザスタリカバリソリューションでは対処できないことがよくあります。その結果、論理的な破損が発生したレイヤ、アプリケーション、ファイルシステム、またはストレージによっては、ダウンタイムを最小限に抑え、データ損失を最大化するための要件を満たすことができない場合があります。</block>
  <block id="a57853f44c435f203fab190cb2f37b09" category="paragraph">最悪のケースは、SAPアプリケーションが論理的に破損した場合です。SAP アプリケーションは多くの場合、異なるアプリケーションが相互に通信してデータを交換する環境で動作します。このため、論理的な破損が発生した SAP システムはリストアとリカバリを実行しないことを推奨します。破損が発生する前の時点にシステムをリストアすると、データが失われます。また、 SAP ランドスケープは同期されず、さらにポストプロセスが必要になります。</block>
  <block id="40d7615d00f208b51b1e36048899ef14" category="paragraph">SAPシステムをリストアする代わりに、別の修復システムで問題を分析して、システム内の論理エラーを修正する方法を推奨します。ルート原因分析には、ビジネスプロセスやアプリケーション所有者の関与が必要です。このシナリオでは、論理的破損が発生する前に格納されたデータに基づいて、修復システム（本番用システムのクローン）を作成します。リペアシステム内では、必要なデータをエクスポートし、本番システムにインポートできます。このアプローチでは、本番用システムを停止する必要はなく、最良のシナリオでは、データの損失だけでなく、ごくわずかなデータの損失も発生します。</block>
  <block id="3d7345edeeb5411d19faf37f4b0c3c2b" category="inline-link-macro">「SnapCenter を使用したSAPシステムのクローン作成」</block>
  <block id="5286abcb37bc2a905758c905666d0e5d" category="paragraph">効果的なディザスタリカバリ戦略を策定するには、必要なワークフローをテストする必要がテストでは、戦略が機能するかどうか、および内部ドキュメントで十分かどうかを検証します。また、管理者は必要な手順をトレーニングできます。</block>
  <block id="f693601db2c33356395c1020a3b09d61" category="paragraph">SnapMirrorを使用したストレージレプリケーションでは、RTOとRPOをリスクにさらすことなく、ディザスタリカバリのテストを実行できます。ディザスタリカバリテストは、データレプリケーションを中断することなく実行できます。</block>
  <block id="f4ee3b1ed515524d4ecf1ed0eb6009df" category="paragraph">非同期SnapMirrorと同期SnapMirrorのディザスタリカバリテストでは、ディザスタリカバリターゲットでSnapshotバックアップとFlexCloneボリュームを使用します。</block>
  <block id="ed6366424ce9a66f8fb6ed2d75c90f8a" category="doc">SAP HANAシステムをSnapCenter で更新</block>
  <block id="b28e3552f08f48399d98c4e3f2ebf170" category="paragraph">次のセクションでは、SAP HANAデータベースのさまざまなシステム更新処理オプションについて、ステップバイステップの概要 を示します。</block>
  <block id="ca6901d32a1871c68df005c11893ef03" category="paragraph">このセクションでは、次のシナリオについて説明します。</block>
  <block id="2a995a569260d18dbea0c475b32b5070" category="list-text">クローンスプリット処理を実行せずにSAP HANAシステムが更新されます。</block>
  <block id="f5dda657758ce85749d3b1d78126301c" category="list-text">クローンの削除処理</block>
  <block id="eec94e3f3d2ba5db3a1e72117c9ba511" category="list-text">SAP HANAシステムがクローンスプリット処理で更新されます</block>
  <block id="25c0305dfdc1e02814116467a7b1157d" category="list-text">クローンスプリット処理</block>
  <block id="bdb9d4569afec846fc12c6671235c013" category="list-text">ONTAP 9.7P7.</block>
  <block id="f730f78b62e0154b1968bf5a9cfaa272" category="section-title">最初の1回限りの準備手順</block>
  <block id="c339e6217e1e3820b4e0049fdf784407" category="paragraph">初期インストールの準備が完了してから、次の手順で最初のSAPシステムの更新処理を実行します。</block>
  <block id="d15ae9c4b3386df38b1c8b39d279b83b" category="section-title">テナント名をSIDと同じにしてプライマリストレージからクローニングする</block>
  <block id="bf53d2bd10de0b4d63b8b4e5961de63a" category="paragraph">このワークフローは、次の手順で構成されます。</block>
  <block id="3341903edb9816045da3c0ee4d66d7c0" category="list-text">システムデータベースのリカバリ。</block>
  <block id="b60470565d8fe8651182cb2c066bac7d" category="list-text">テナント名= QS1でのテナントデータベースのリカバリ</block>
  <block id="c5ba90ff83ae13b97d609a49e54c1ae6" category="paragraph">以下のスクリーンショットは、必要な手順を示しています。</block>
  <block id="2beea213cf9a65bc8a70c66c0f77391d" category="list-text">ターゲットシステムQS1がインストールされているホストを選択します。ターゲットSIDとして「QS1」と入力します。NFSエクスポートのIPアドレスは、ターゲットホストのストレージネットワークインターフェイスである必要があります。</block>
  <block id="0b5d0b2bad6c93484f679ba8419a784f" category="list-text">SnapCenter ジョブが完了すると、ソースシステムのトポロジビューにクローンが表示されます。</block>
  <block id="3a6409fe6b4d53ff3f6b240aac5341a9" category="paragraph">新しいSAP HANAシステムの更新処理を開始するには、SnapCenter のクローンの削除処理を使用してターゲットシステムをクリーンアップします。</block>
  <block id="fd3b9e0c6370bb8b1bc50684358716e2" category="list-text">必要なコマンドラインオプションを使用して、クローニング前スクリプトとアンマウント後スクリプトを入力します。</block>
  <block id="651c5cde8d72dbd0c53ab15e99678b9b" category="list-text">SnapCenter のクローン作成処理を使用して、SAP HANAの更新処理を再開できるようになりました。</block>
  <block id="eefd7414dd589e4a4133686b9fc64373" category="section-title">クローンスプリット処理を使用したSAP HANAシステムの更新</block>
  <block id="0760f364c123ffeb65230ca87dd8d091" category="paragraph">SnapCenter のクローンスプリットのワークフローは、クローンを選択してクローンスプリットをクリックすることで、ソースシステムのトポロジビューで開始されます。</block>
  <block id="0bb89be537550b86187cea5cf67ac2da" category="paragraph">次の画面には、スプリットボリュームに必要な容量に関する情報がプレビューで表示されます。</block>
  <block id="32da2ef1aadc17a0c37d725aa68059c6" category="paragraph">SnapCenter ジョブログには、クローンスプリット処理の進捗状況が表示されます。</block>
  <block id="955fc654ce08874287363442ae3a05e7" category="list-text">SnapCenter クローニング処理。</block>
  <block id="76a5308fe89a8e782a72010d9a7ee852" category="section-title">PowerShellスクリプトによるSnapCenter ワークフロー自動化</block>
  <block id="c0ff26b620598b6000a1bcf255a128c6" category="paragraph">前のセクションでは、SnapCenter UIを使用してさまざまなワークフローを実行し、PowerShellスクリプトまたはREST API呼び出しを使用してすべてのワークフローを実行することもできるため、さらなる自動化が可能です。以降のセクションでは、以降のワークフローの基本的なPowerShellスクリプトの例について説明します。</block>
  <block id="2021b3b77c933e0e9fc9d56a3a552caf" category="list-text">クローンを作成します</block>
  <block id="12ed4152d6bd08ebcd4e8d515069f7a5" category="list-text">クローンを削除します</block>
  <block id="37ba622841aed0dc2e49254702244420" category="admonition">このサンプルスクリプトは現状のまま提供されており、ネットアップではサポートしていません。</block>
  <block id="2cbd77b31c264f22e56a266062e0b76e" category="paragraph">すべてのスクリプトはPowerShellコマンドウィンドウで実行する必要があります。スクリプトを実行する前に'Open-SmConnection'コマンドを使用してSnapCenter サーバへの接続を確立する必要があります</block>
  <block id="81040d6711353f30feae62b8255cac0a" category="paragraph">以下の簡単なスクリプトは、PowerShellコマンドを使用してSnapCenter クローン作成処理を実行する方法を示しています。SnapCenter の「New-SmClone」コマンドは、ラボ環境に必要なコマンドライン・オプションと、前述した自動化スクリプトを使用して実行します。</block>
  <block id="f01358f0b3c6557b9a0d6ca899e3caeb" category="paragraph">画面出力には、クローン作成PowerShellスクリプトの実行状況が表示されます。</block>
  <block id="60af87a36f879c4e11b6fe3ca1c7243f" category="paragraph">以下の簡単なスクリプトは、PowerShellコマンドを使用してSnapCenter クローンの削除処理を実行する方法を示しています。SnapCenter のRemove-SmCloneコマンドは'実習環境に必要なコマンド・ライン・オプションと'前に説明した自動化スクリプトを使用して実行します</block>
  <block id="1ac85619672d3775188dd5a646cde2e7" category="summary">Azure NetApp Files for SAP HANA、Oracle、DB2 on Azureを使用すると、NetApp ONTAP の高度なデータ管理機能とデータ保護機能をMicrosoft Azure NetApp Files の標準サービスで利用できます。</block>
  <block id="7795765c3d2e54c77f3ddad7877f93e2" category="doc">LSC、AzAcSnap、およびAzure NetApp Files を使用してSAP HANAシステムが更新されます</block>
  <block id="fa93527877c31a5c6e9ce20800f4865c" category="inline-link">Azure NetApp Files for SAP HANAの略</block>
  <block id="e55759cd3f81e064f2a8f339a6c05115" category="inline-link">AzAcSnap</block>
  <block id="09f21139c961e6762596c00d8a70ff85" category="paragraph">を使用します<block ref="e44e132e965fcb8ded073c9571f6e761" category="inline-link-rx"></block>、Oracle、DB2 on Azureを利用すると、NetApp ONTAP の高度なデータ管理機能とデータ保護機能をMicrosoft Azure NetApp Files 標準サービスで利用できます。<block ref="5970ce2e45a53257e469b102e0b782c9" category="inline-link-rx"></block> は、SAPシステムの更新処理を高速化して、SAP HANAシステムとOracleシステムのNetApp Snapshotコピーをアプリケーションと整合性のあるものにするための基盤です（DB2は現在AzAcSnapではサポートされていません）。</block>
  <block id="46218e7d3d10ced22363fc51163a8631" category="paragraph">Snapshotコピーのバックアップは、オンデマンドで作成することも、バックアップ戦略の一環として定期的に作成することもでき、効率的に新しいボリュームにクローニングして、ターゲットシステムを迅速に更新することができます。AzAcSnapは、バックアップを作成して新しいボリュームにクローンを作成するために必要なワークフローを提供します。一方、Libelle SystemCopyは、完全なエンドツーエンドのシステム更新に必要な、前処理と後処理の手順を実行します。</block>
  <block id="eaa4caa91e8a756ac88c72f7fa40f7ef" category="paragraph">この章では、SAP HANAを基盤データベースとして使用したAzAcSnapおよびLibelle SystemCopyを使用したSAPシステムの自動更新について説明します。AzAcSnapはOracleでも利用できるため、AzAcSnap for Oracleを使用して同じ手順 を実装することもできます。その他のデータベースは、今後AzAcSnapによってサポートされる可能性があります。この場合、LSCおよびAzAcSnapを使用してこれらのデータベースのシステムコピー操作が有効になります。</block>
  <block id="f37683b4ee88357da8b8ff8d55aa1304" category="paragraph">次の図は、AzAcSnapおよびLSCを使用したSAPシステム更新ライフサイクルの一般的なワークフローを示しています。</block>
  <block id="5802128cf27d5a7bd20d04ed131c4bb6" category="list-text">LSCによって実行されるSAP前処理操作。</block>
  <block id="134d7bd893793f6cd5c99330d7b3504d" category="list-text">AzAcSnapで実行されるターゲットシステムへのソースシステムの既存のSnapshotコピーのリストア（またはクローニング）。</block>
  <block id="099f06a764be7ee4654b26209cb55657" category="list-text">LSCによって実行されるSAP後処理操作。</block>
  <block id="4b34b0d40dff8a07be6ef92392bacaea" category="paragraph">システムはテストシステムまたはQAシステムとして使用できます。新しいシステムの更新が要求されると、手順2でワークフローが再開されます。残りのクローンボリュームは手動で削除する必要があります。</block>
  <block id="5d254ff3f488e6288f82f4fec056f63a" category="paragraph">次の前提条件を満たしている必要があります。</block>
  <block id="f67cde57713136eea461365a6e071ca0" category="section-title">AzAcSnapがインストールされ、ソースデータベース用に設定されている</block>
  <block id="a652e1055f4eb346a05a0a8ae89ccf80" category="paragraph">一般に、AzAcSnapには次の図に示すように、2つの導入オプションがあります。</block>
  <block id="ad0fea35a0ba8f00a3f79747ff581fe9" category="paragraph">AzAcSnapは、すべてのDB構成ファイルが一元的に格納されている中央のLinux VMにインストールして実行できます。AzAcSnapは、すべてのデータベースに（hdbsqlクライアントを介して）すべてのデータベースと、これらすべてのデータベースに設定されたHANAユーザストアキーにアクセスできます。分散型の展開では、AzAcSnapは各データベースホストに個別にインストールされ、通常はローカルデータベースのDB構成のみが格納されます。どちらの展開オプションもLSC統合でサポートされています。ただし、このドキュメントのラボセットアップではハイブリッドアプローチを採用しました。AzAcSnapは、すべてのDB構成ファイルとともに中央のNFS共有にインストールされました。この中央インストール共有は、「/mnt/software/AZACSNAP/snapshot-tool」の下のすべてのVMにマウントされました。その後、このツールはDB VM上でローカルに実行され、</block>
  <block id="3473bf6ac226ea97187d11de4c036254" category="section-title">Libelle SystemCopyがソースおよびターゲットのSAPシステム用にインストールおよび設定されていること</block>
  <block id="6d4c9a9ee647a3bb91c46c91c618bbd0" category="paragraph">Libelle SystemCopyの展開は、次のコンポーネントで構成されています。</block>
  <block id="569de98db8273c0914828fb03d807225" category="list-text">*LSC Master.*という名前が示すように、これはLibelleベースのシステムコピーの自動ワークフローを制御するマスターコンポーネントです。</block>
  <block id="13b1b9bc69152de535f089e6aa2557fa" category="list-text">* LSC Worker。* LSCワーカーは通常、ターゲットSAPシステム上で実行され、自動システムコピーに必要なスクリプトを実行します。</block>
  <block id="f827b8d117bc460f3b9c2612535f7e04" category="list-text">* LSC Satellite。* LSCサテライトは、追加のスクリプトを実行する必要があるサードパーティシステムで実行されます。LSCマスターは、LSCサテライトシステムの役割も果たします。</block>
  <block id="6ad330317942586b738ce4d07b4d04dd" category="paragraph">Libelle SystemCopy（LSC）GUIが適切なVMにインストールされている必要があります。この実習セットアップでは、LSC GUIは別のWindows VMにインストールされていますが、LSCワーカーとともにDBホストでも実行できます。LSCワーカーは、少なくともターゲットDBのVMにインストールする必要があります。選択したAzAcSnap展開オプションによっては、LSCワーカーの追加インストールが必要な場合があります。AzAcSnapが実行されるVMにLSCワーカーインストールが必要です。</block>
  <block id="6118b8c345b5bb01238a53ac29f93c35" category="paragraph">LSCをインストールした後、ソースおよびターゲットデータベースの基本設定をLSCガイドラインに従って実行する必要があります。次の図は、このドキュメントのラボ環境の構成を示しています。ソースとターゲットのSAPシステムおよびデータベースの詳細については、次のセクションを参照してください。</block>
  <block id="0f57aa4795f7dfe2ad4752c161b57833" category="paragraph">また、SAPシステムに適した標準のタスクリストを設定する必要があります。LSCのインストールおよび設定の詳細については、LSCインストールパッケージの一部であるLSCユーザマニュアルを参照してください。</block>
  <block id="482723983a4f2af954e36ff41e567451" category="section-title">既知の制限</block>
  <block id="582de1e52b4b4b8c43afd9e2901bb386" category="paragraph">ここで説明するAzAcSnapとLSCの統合は、SAP HANAのシングルホストデータベースでのみ機能します。SAP HANAマルチホスト（またはスケールアウト）配置もサポートできますが、このような配置では、コピーフェーズおよびアンダーレイアウトスクリプトのLSCカスタムタスクをいくつか調整または拡張する必要があります。このような機能強化については、本ドキュメントでは説明していません。</block>
  <block id="d5fd1a217e57fc0be1c5b301de253791" category="paragraph">SAPシステムの更新機能が統合される際には、ソースシステムのSnapshotコピーが最新で正常に作成され、ターゲットシステムの更新が実行されます。他の古いSnapshotコピーを使用する場合は、の対応するロジックを指定します <block ref="2af3f1688ba1a6519fca5748b63691bc" category="inline-xref-macro-rx"></block> カスタムタスクを調整する必要があります。このプロセスについては、本ドキュメントでは説明しません。</block>
  <block id="ef0b4c849c8032326f9a09dbcac2c1aa" category="paragraph">このラボ環境は、ソースのSAPシステムとターゲットのSAPシステムで構成され、どちらもSAP HANAのシングルホストデータベースで実行されます。</block>
  <block id="ac070aa5e6a10e38f43a73ecc6d42841" category="paragraph">次の図は、ラボのセットアップを示しています。</block>
  <block id="6b0375a968afca58417a6ccc5db74398" category="paragraph">このボリュームには、次のシステム、ソフトウェアバージョン、およびAzure NetApp Files ボリュームが含まれています。</block>
  <block id="49777ec13a778673605c9e33fe4d84de" category="list-text">* P01。* SAP HANA 2.0 SP5データベース。ソースデータベース、シングルホスト、シングルユーザテナント</block>
  <block id="8be862122af4c9837175fbad21e59c86" category="list-text">* PN1.* SAP NetWeaver ABAP 7.51ソースのSAPシステム：</block>
  <block id="6bda167dc65db3a371fbd8355cb7bc59" category="list-text">* VM-P01。* SLES 15 SP2、AzAcSnapがインストールされている場合。ソースVMでP01とPN1をホストしています。</block>
  <block id="63ed1d491719254b5f3c455a5f911ae5" category="list-text">* QL1.* SAP HANA 2.0 SP5データベース。ターゲットデータベース、シングルホスト、シングルユーザテナントのシステム更新</block>
  <block id="32da3b0f0447a0ec3ab62e03e5eb84ee" category="list-text">* QN1.* SAP NetWeaver ABAP 7.51システム更新の対象となるSAPシステム：</block>
  <block id="c8ae9af9ad689cb19e7af7e97a1887ae" category="list-text">* VM-QL1.* LSCワーカーがインストールされたSLES 15 SP2。ターゲットのVMでQL1とQN1をホストしています。</block>
  <block id="9e018e4a68d1463bc5db2d746d1acb7f" category="list-text">LSCマスターバージョン9.0.0.052。</block>
  <block id="f25f13481e770cb30d45d52a5d67617c" category="list-text">* VM-LSC-MMASTER.* Windows Server 2016。LSCマスターおよびLSC GUIをホストします。</block>
  <block id="067614b5d11d65ce10a3c3c952fea380" category="list-text">専用DBホストにマウントされたP01とQL1のデータ、ログ、共有のAzure NetApp Files ボリューム。</block>
  <block id="4f53adf1b17bd4d8d6121ec5aba2a189" category="list-text">スクリプト、AzAcSnapのインストール、すべてのVMにマウントされた構成ファイル用のCentral Azure NetApp Files ボリューム。</block>
  <block id="7586e39c6c4f8cbe63f3b66c1b9e3faa" category="paragraph">最初のSAPシステムの更新を実行する前に、AzAcSnapで実行されるAzure NetApp Files のSnapshotコピーおよびクローニングベースのストレージ処理を統合する必要があります。また、データベースの起動と停止、およびAzure NetApp Files ボリュームのマウントまたはアンマウントを実行する補助スクリプトも実行する必要があります。必要なすべてのタスクは、コピーフェーズの一部としてLSCでカスタムタスクとして実行されます。次の図は、LSCタスクリスト内のカスタムタスクを示しています。</block>
  <block id="46d4412b24c36c75d9f3d4767b465cdc" category="paragraph">5つのコピー・タスクの詳細については'以下を参照してくださいこれらのタスクの一部では、サンプルスクリプト「sc-system-refresh.sh」を使用して、必要なSAP HANAデータベースのリカバリ処理と、データボリュームのマウントおよびアンマウントをさらに自動化します。スクリプトは、LSCに対する実行が成功したことを示すために、システム出力で「LSC:SUCCESS」メッセージを使用します。カスタムタスクおよび使用可能なパラメータの詳細については、LSCユーザマニュアルおよびLSC開発者ガイドを参照してください。このラボ環境のすべてのタスクは、ターゲットDB VMで実行されます。</block>
  <block id="3c3eb031881af72bbc2cd35d51f73ec5" category="admonition">サンプルスクリプトは現状のまま提供されており、ネットアップではサポートしていません。スクリプトは、mailto：ng-sapcc@netapp.com [ ng-sapcc@netapp.com ^]にEメールで送信できます。</block>
  <block id="d5588a980e081e89a600221efeb98b75" category="section-title">Sc-system-refresh.sh構成ファイル</block>
  <block id="fb57465e538291ad6aa0cd830ca9bf3b" category="paragraph">前述したように、補助スクリプトを使用して、データベースの起動と停止、Azure NetApp Files ボリュームのマウントとアンマウント、およびSnapshotコピーからのSAP HANAデータベースのリカバリを行います。スクリプト「sc-system-refresh.sh」は中央NFS共有に格納されます。スクリプトでは、ターゲットデータベースごとに構成ファイルが必要です。このファイルは、スクリプト自体と同じフォルダに格納する必要があります。コンフィギュレーションファイルには、「sc-system-refresh-&lt;target DB SID&gt;.cfg」という名前（この実習環境では「sc-system-refresh-ql1.cfg」など）を付ける必要があります。ここで使用する構成ファイルでは、固定/ハードコーディングされたソースDB SIDを使用します。いくつかの変更により、スクリプトと構成ファイルを拡張して、ソースDB SIDを入力パラメータとして取得できます。</block>
  <block id="f6c6e1dc96f073e737f971bc3de9bf27" category="paragraph">特定の環境に応じて、次のパラメータを調整する必要があります。</block>
  <block id="c225d666b6830be01af89c21fb5b7663" category="section-title">ZSCCOPYSHUTDOWN</block>
  <block id="d2a4d4fa2135bbe64765a848486bf0e3" category="paragraph">このタスクは、ターゲットのSAP HANAデータベースを停止します。このタスクの[コード]セクションには、次のテキストが含まれています。</block>
  <block id="66e8ad725021919d88a78f141636e9e9" category="paragraph">スクリプト「sc-system-refresh.sh」は'shutdownコマンドとDB SIDの2つのパラメータを取り'sapcontrolを使用してSAP HANAデータベースを停止しますシステム出力は標準のLSCログファイルにリダイレクトされます。前述のように、「lsc：success」メッセージは、正常に実行されたことを示します。</block>
  <block id="a0148c02de1fd7114f8aff04fbc1d77e" category="section-title">ZSCCOPYUMOUNT</block>
  <block id="a188fa865cb93fe9e4fe446df15457ab" category="paragraph">このタスクでは、ターゲットのDBオペレーティングシステム（OS）から古いAzure NetApp Files データボリュームをアンマウントします。このタスクのコードセクションには、次のテキストが含まれています。</block>
  <block id="b0f77d682c2a17e5fb5645acd2be9ad9" category="paragraph">前のタスクと同じスクリプトが使用されます。渡される2つのパラメータは'umount'コマンドとDB SIDです</block>
  <block id="f1ffbb80b33a17caf09dab5d5759da18" category="section-title">ZAZACSNAPRESORE</block>
  <block id="893ecde8f8b221085cc1f80173cf2a6f" category="paragraph">このタスクでは、AzAcSnapを実行して、ソースデータベースの最新の成功したSnapshotコピーを、ターゲットデータベースの新しいボリュームにクローニングします。この処理は、従来のバックアップ環境でのバックアップのリダイレクトリストアに相当します。ただし、Snapshotコピーとクローニング機能を使用すれば、最大のデータベースであっても数秒でこのタスクを実行できます。従来のバックアップでは、このタスクに数時間かかることもありました。このタスクのコードセクションには、次のテキストが含まれています。</block>
  <block id="d2d41dd98a152a7ea8b159ca20e4ab02" category="inline-link">Azure Application Consistent Snapshotツールを使用してリストア</block>
  <block id="62ee4a8664a0e46bebbe8a72cd8dbcab" category="paragraph">AzAcSnapの'restore'コマンド・ライン・オプションに関する完全なドキュメントはAzureのドキュメントを参照してください<block ref="c5fde8728491d75aa1afef4669aa2a0d" category="inline-link-rx"></block>。この呼び出しでは、ソースDBのJSON DB構成ファイルが、「azacsnap -&lt;source DB SID&gt;」という命名規則に従って中央のNFS共有にあることが前提となります。JSON形式（このラボ環境では'azacsnap-p0P01 JSONなど）</block>
  <block id="82c163596353a5052a29181bedeaa772" category="admonition">AzAcSnapコマンドの出力は変更できないため、このタスクにはデフォルトの「LSC:SUCCESS」メッセージを使用できません。そのため'AzAcSnap出力の文字列'Example mount instructionsが'成功した戻りコードとして使用されます5.0 GAバージョンのAzAcSnapでは、この出力はクローニングプロセスが成功した場合にのみ生成されます。</block>
  <block id="ec16e54e6d69802cf5c8689992d032ca" category="paragraph">次の図に、新しいボリュームへのAzAcSnapリストア成功メッセージを示します。</block>
  <block id="1c7e35fce098356ccba33d52f38b9ede" category="section-title">ZSCCOPYMOUNT</block>
  <block id="064b2926edf3b035dc0bcd3f7a1fc7bb" category="paragraph">このタスクでは、ターゲットDBのOSに新しいAzure NetApp Files データボリュームをマウントします。このタスクのコードセクションには、次のテキストが含まれています。</block>
  <block id="6a2a3f49299c67baa45c92224d7eff0e" category="paragraph">sc-system-refresh.shスクリプトが再び使用され'mountコマンドとターゲットDB SIDが渡されます</block>
  <block id="f64b75a1baf8c4281e01d865f1c874e5" category="section-title">ZSCCOPYRECOVER</block>
  <block id="730fe24ed3ef0ef3bd0be5dd1af0f3af" category="inline-link">ボリュームクォータの動的な増減</block>
  <block id="f2f5edcd956f2ae9e108055b0188a470" category="paragraph">このタスクでは、リストア（クローン）されたSnapshotコピーに基づいて、システムデータベースとテナントデータベースのSAP HANAデータベースのリカバリを実行します。ここで使用するリカバリ・オプションは、フォワード・リカバリに適用される特定のデータベース・バックアップ（追加ログなしなど）を対象としています。したがって、リカバリ時間は非常に短くなります（最大で数分）。この処理の実行時間は、リカバリプロセス後に自動的に実行されるSAP HANAデータベースの起動によって決まります。起動時間を短縮するために、必要に応じて、次のAzureのドキュメントに従ってAzure NetApp Files データボリュームのスループットを一時的に向上させることができます。<block ref="e891566aaa8094b6e6bbfcb7652af128" category="inline-link-rx"></block>。このタスクのコードセクションには、次のテキストが含まれています。</block>
  <block id="b8d42515ee80a358d1c946f1ccf838dc" category="paragraph">このスクリプトは'recover'コマンドとターゲットDB SIDとともに再び使用されます</block>
  <block id="4bd56b391b93afbc4de82fc45017847a" category="paragraph">このセクションでは、ラボシステムの更新処理のサンプルとして、このワークフローの主な手順を記載します。</block>
  <block id="b63b967fbfcc2b625ffd8c4e6d742f78" category="paragraph">バックアップカタログに記載されたP01ソースデータベースの定期的なSnapshotコピーとオンデマンドSnapshotコピーが作成されている。</block>
  <block id="44d822623a67b202b6fcd5653ee5c4f1" category="paragraph">更新処理には、3月12日の最新バックアップが使用されています。バックアップの詳細セクションに、このバックアップの外部バックアップID（EBID）が表示されます。次の図に示すように、Azure NetApp Files データボリューム上の、対応するSnapshotコピーバックアップのSnapshotコピー名を指定します。</block>
  <block id="01d15505073ca5412063edc35cf07b35" category="paragraph">更新操作を開始するには、LSC GUIで正しい設定を選択し、[実行の開始]をクリックします。</block>
  <block id="62021ea8e70f699321bf7b3de6ecce87" category="paragraph">LSCは、チェックフェーズのタスクの実行を開始し、プリフェーズの設定済みタスクを実行します。</block>
  <block id="adafee97abc781243b6b647f8ffc7ddd" category="paragraph">移行前フェーズの最後のステップとして、移行先のSAPシステムが停止します。次のコピーフェーズでは、前のセクションで説明したステップが実行されます。まず、ターゲットのSAP HANAデータベースが停止し、古いAzure NetApp Files ボリュームがOSからアンマウントされます。</block>
  <block id="4778404c5c2a6cb13b27028a13e6ec62" category="paragraph">次に、ZAZACSNAPRESTOREタスクで、P01システムの既存のSnapshotコピーからクローンとして新しいボリュームを作成します。次の2つの図は、LSC GUIでのタスクのログ、およびAzureポータルでのクローンAzure NetApp Files ボリュームを示しています。</block>
  <block id="ac8d5bfc0cf9544d6cc1869d7061a604" category="paragraph">その後、この新しいボリュームがターゲットDBホストとシステムデータベースにマウントされ、テナントデータベースが、包含するSnapshotコピーを使用してリカバリされます。リカバリが完了すると、SAP HANAデータベースが自動的に起動します。このSAP HANAデータベースの起動は、コピーフェーズのほとんどの時間を占めています。残りの手順は、データベースのサイズに関係なく、通常数秒で終了します。次の図は、SAPが提供するPythonリカバリスクリプトを使用してシステムデータベースをリカバリする方法を示しています。</block>
  <block id="bb19e82722621ce22f94d846c584a966" category="paragraph">コピーフェーズ後、LSCはPostフェーズで定義されたすべてのステップで継続します。システムの更新プロセスが完了すると'ターゲット・システムは再び稼働し'完全に使用可能になりますこのラボシステムでは、SAPシステムの更新に必要な合計実行時間は約25分でした。このうち、コピーフェーズで消費される時間は5分未満です。</block>
  <block id="aed4be0abac71ea3a4ee20b172e42949" category="sidebar">Libelle SystemCopyによるSAPシステムのコピー処理の自動化</block>
  <block id="8293eb8037b07e6a99273e0e69a21b6f" category="paragraph">SUSE Linux Enterprise Server 12 SP1 以降、カーネルパラメータは /etc/sysctl.d` ディレクトリの構成ファイルで設定する必要があります。たとえば、「 91-NetApp-/hana.conf 」という名前の構成ファイルを作成する必要があります。</block>
  <block id="aeb3b72555ced42ccaba566af6824c8b" category="paragraph">生産性の高いSAP HANAシステムを実現するための前提条件と推奨事項の詳細については、次のリソースを参照してください。</block>
  <block id="e7f295e915bb11e75ddb24aa294f7351" category="paragraph">本番用SAP HANAシステムの前提条件と推奨事項の詳細については、次のSAPリソースを参照してください。</block>
  <block id="1ad4402d015b30446fdee11f5a31f55b" category="paragraph">本番用SAP HANAシステムの前提条件と推奨事項の詳細については、次のリソースを参照してください。</block>
  <block id="537754f62b9e3072d7b143e82ea96f51" category="admonition">これらの値は、 SLES for SAP OS のバージョンに含まれている saptune を使用して設定できます。詳細については、を参照してください<block ref="c8345b27d24ece14a320acdc31cc02d7" category="inline-link-rx"></block> （ SAP ログインが必要です）。</block>
  <block id="64de99f49b55f96ef81b9f1d7d3ef301" category="admonition">Red Hat Enterprise Linuxバージョン8.6以降では、RHEL System Roles for SAP（Ansible）を使用して設定を適用することもできます。を参照してください<block ref="c8345b27d24ece14a320acdc31cc02d7" category="inline-link-rx"></block> （ SAP ログインが必要です）。</block>
  <block id="a02f77a47cb5c9004f19c8c78d662cd5" category="admonition">SAP OS バージョン用の SLES に含まれている Saptune を使用してこれらの値を設定できます。を参照してください<block ref="c8345b27d24ece14a320acdc31cc02d7" category="inline-link-rx"></block> （ SAP ログインが必要です）。</block>
  <block id="b35bcba907dc97a5b6020488961f3307" category="admonition">ONTAP 9.8およびSUSE SLES15SP2以降、またはRed Hat RHEL 8.4以降では、ネットアップはNFSv4.1のnConnectオプションもサポートしています。追加情報については、 Linux ベンダーのマニュアルを参照してください。</block>
  <block id="dbe18498a47f8eb26e80012f0c049b0d" category="paragraph">次の例は、 SID=NF2 で、 NFSv3 を使用し、書き込みの場合は NFS 転送サイズが 1MB 、読み取りの場合は 256K の、シングルホスト SAP HANA データベースを示しています。/etc/fstab 構成ファイルを使用してシステムのブート中にファイル・システムをマウントするには ' 次の手順を実行します</block>
  <block id="afd4f67ca3483f6b519e8ebc2a53dcea" category="admonition">Red Hat Enterprise Linuxバージョン8.6以降では、RHEL System Roles for SAP（Ansible）を使用してこれらの設定を適用することもできます。を参照してください<block ref="c8345b27d24ece14a320acdc31cc02d7" category="inline-link-rx"></block> （ SAP ログインが必要です）。</block>
  <block id="e7a66fb065da642109c3abf1481bfcd0" category="paragraph">NFSのバージョンとONTAP のリリースに応じて、異なるマウントオプションが使用されます。次のファイルシステムをホストにマウントする必要があります。</block>
  <block id="6f7cbdc39f9acbcde843e913e06a5bd8" category="summary">クローンシステムの運用を停止するには、運用を停止し、準備を事前に完了しておく必要があります。その後、システムの破棄ワークフローを開始できます。</block>
  <block id="7c4bf45739108965dce4dca9b396f39d" category="doc">SAP LaMaによるワークフローのプロビジョニング解除-システムの破壊</block>
  <block id="ce5e3f676f90c441971cc56d6dffe08e" category="paragraph">次の図は、system destroyワークフローで実行する主な手順を示しています。</block>
  <block id="fa37114811e0a6c252384710fd555989" category="inline-image-macro">この図は、システムの破棄ワークフローの概要を示しています。システムの停止、システムの準備解除、ストレージクローンの削除、システム構成の削除の手順が含まれています。</block>
  <block id="326db1dde007554a6fc6a7f35a558d15" category="inline-image-macro">この図には、システムで前述のワークフロー手順が発生する場合のアーキテクチャ図とその手順が含まれています。</block>
  <block id="cd1551a21e8c953f9daec26871057a76" category="list-text">この例では、前に作成したシステムに対してsystem destroyワークフローを実行します。システムビュー*画面でシステムを選択し、*破棄プロセス*でシステム破棄ワークフローを開始します。</block>
  <block id="d34819d82542a5e53e6821ec5e4db0e4" category="list-text">プロビジョニングフェーズで維持されたすべてのマウントポイントが表示され、システムの削除ワークフロープロセス中に削除されます。</block>
  <block id="b6d7ae1d25c1ed56190634cbcb9f9b20" category="inline-image-macro">このスクリーンショットは、Destroy Storage Volumes（ストレージボリュームの破棄）タブのDestroy System（システムの破棄）画面とすべてのマウントポイントを表示したものです。</block>
  <block id="c55590507c7a5987bf4a4f7b1d810243" category="paragraph">仮想ホスト名はDNSを通じて管理され、自動的に割り当てられているため、削除されません。</block>
  <block id="47667892836644d0cd83d17b4917dc35" category="inline-image-macro">このスクリーンショットは、ホスト名の削除タブのシステムの破棄画面を示しています。ホスト名は表示されません。</block>
  <block id="bbd7a36bba667209844b03f241994057" category="list-text">実行ボタンをクリックすると、処理が開始されます。</block>
  <block id="99ed6ae4a60e41a6306ef4ca90f88b38" category="inline-image-macro">このスクリーンショットは、ストレージボリュームの破棄の概要ページを示しています。</block>
  <block id="4ccc4170b3fa1543f818c336ac8fe5f3" category="paragraph">ボリュームクローンを削除し、そのクローンシステムの設定を削除する処理がSAP LaMaから実行されます。</block>
  <block id="3c4c4cc2b32a212b8dfdcb531f7833dc" category="list-text">クローンワークフローの進行状況は、* Monitoring *メニューで監視できます。</block>
  <block id="048eec815017fa246a747d2da0febba7" category="inline-image-macro">このスクリーンショットは、システムの破棄ワークフローの進行状況をリアルタイムで示しています。</block>
  <block id="2f0172893615db7f6217f8aea9f5d77c" category="list-text">「* Delete NetAppClone *」タスクを選択すると、その手順の詳細ログが表示されます。Ansibleプレイブックの実行方法を以下に示します。ご覧のように、Ansibleプレイブックもご覧いただけます<block ref="02f575c9a42953c46d6832e43305b6fd" prefix=" " category="inline-code"></block> は、HANAデータベースのボリューム、データ、ログ、および共有ごとに実行されます。</block>
  <block id="4354252a68eb4bbcfdd68b6514d4c26f" category="inline-image-macro">このスクリーンショットは、システムの破棄ワークフローのログページを示しています。</block>
  <block id="b9b81059c0673276efc1c1e439881f55" category="summary">Ansibleなどの最新の自動化フレームワークがSAP LaMaプロビジョニングワークフローに統合されているため、柔軟な解決策 を利用して、標準的なインフラや複雑なインフラ要件に対応できます。</block>
  <block id="6f8b794f3246b0c1e1780bb4d4d5dc53" category="doc">まとめ</block>
  <block id="261f5cfcc4c662ad4bdb40d9718a5735" category="list-text">NetAppネームスペース内のコレクション</block>
  <block id="95b860ff1d3414d84c1d0dd66c71beb5" category="inline-link"><block ref="95b860ff1d3414d84c1d0dd66c71beb5" category="inline-link-rx"></block></block>
  <block id="c7d87c9780b4892d37181cf021e638e2" category="paragraph"><block ref="c7d87c9780b4892d37181cf021e638e2" category="inline-link-rx"></block></block>
  <block id="1371cf980b833fe3e01808264a214fa5" category="list-text">AnsibleとAnsibleのPlaybookのサンプルに関するドキュメント</block>
  <block id="17d0c87f7f769c8ea7ac812812ebd6d5" category="inline-link"><block ref="17d0c87f7f769c8ea7ac812812ebd6d5" category="inline-link-rx"></block></block>
  <block id="854bcd8220ccda1e905303668e3793ab" category="paragraph"><block ref="854bcd8220ccda1e905303668e3793ab" category="inline-link-rx"></block></block>
  <block id="1bc1c7499928cd5f0942064dd37f54f2" category="list-text">Ansibleとネットアップの統合</block>
  <block id="d7b64d94b2b9e3dbbe93b80934086220" category="inline-link"><block ref="d7b64d94b2b9e3dbbe93b80934086220" category="inline-link-rx"></block></block>
  <block id="a71e2ab189cc2e25539ceb7f9c4ced72" category="paragraph"><block ref="a71e2ab189cc2e25539ceb7f9c4ced72" category="inline-link-rx"></block></block>
  <block id="54ec5aa26742228ba1f9e4024c4d73ac" category="list-text">SAP LaMaとAnsibleの統合に関するブログ</block>
  <block id="3da5f444c1b02ebe424e80c245333bf1" category="inline-link"><block ref="3da5f444c1b02ebe424e80c245333bf1" category="inline-link-rx"></block></block>
  <block id="b6a1e2104cef9312a7e1e31c53499350" category="paragraph"><block ref="b6a1e2104cef9312a7e1e31c53499350" category="inline-link-rx"></block></block>
  <block id="abf2ed748dab1316ba3962b6eacbe747" category="list-text">SAP Landscape Management 3.0, Enterprise Edition Documentation</block>
  <block id="137cdbd940ab5580ba6f97a90cdc49d7" category="inline-link"><block ref="137cdbd940ab5580ba6f97a90cdc49d7" category="inline-link-rx"></block></block>
  <block id="c9d90f3898ea1626d1c3a9a148fd4de1" category="paragraph"><block ref="c9d90f3898ea1626d1c3a9a148fd4de1" category="inline-link-rx"></block></block>
  <block id="2358274d65c1630d9cc77d20a679ca78" category="list-text">SAP LaMaのドキュメント–プロバイダの定義</block>
  <block id="aa594a5bd07b5bc43679c6743f5318cc" category="inline-link"><block ref="aa594a5bd07b5bc43679c6743f5318cc" category="inline-link-rx"></block></block>
  <block id="76ff1106df915feb26c63a2d10f8ed76" category="paragraph"><block ref="76ff1106df915feb26c63a2d10f8ed76" category="inline-link-rx"></block></block>
  <block id="cf584bec369b5b183362b23e3b48c171" category="list-text">SAP LaMaドキュメント-カスタムフック</block>
  <block id="a449378b07182beacf1e06df0157fb1a" category="inline-link"><block ref="a449378b07182beacf1e06df0157fb1a" category="inline-link-rx"></block></block>
  <block id="29786d40f149d2b6bde83fc7b3b8d311" category="paragraph"><block ref="29786d40f149d2b6bde83fc7b3b8d311" category="inline-link-rx"></block></block>
  <block id="82f583fbca7e52c75cf724100fceeb87" category="list-text">SAP LaMaドキュメント-「Configuring SAP Host Agent Registered Scripts</block>
  <block id="a42ebcc58d97420fee4c785861bdf4d3" category="inline-link"><block ref="a42ebcc58d97420fee4c785861bdf4d3" category="inline-link-rx"></block></block>
  <block id="b837152d68eb7f96b0f885c89e076a13" category="paragraph"><block ref="b837152d68eb7f96b0f885c89e076a13" category="inline-link-rx"></block></block>
  <block id="41bf842c374d0fd4ab82ce0e6079a372" category="list-text">SAP LaMaドキュメント-カスタム運用とカスタムフックのパラメータ</block>
  <block id="ef2b3fe29f808573588186cae37d62c0" category="inline-link"><block ref="ef2b3fe29f808573588186cae37d62c0" category="inline-link-rx"></block></block>
  <block id="a8fc83992fa48ceb04a6dd0a40ec951e" category="paragraph"><block ref="a8fc83992fa48ceb04a6dd0a40ec951e" category="inline-link-rx"></block></block>
  <block id="ac28a244d6bbc68fc735b6d8e78c406f" category="list-text">SAP LaMaドキュメント-アダプティブデザイン</block>
  <block id="c3c9babca9a3c4755fc4fc97aab15698" category="inline-link"><block ref="c3c9babca9a3c4755fc4fc97aab15698" category="inline-link-rx"></block></block>
  <block id="062786b87b67b615196261414e684e55" category="paragraph"><block ref="062786b87b67b615196261414e684e55" category="inline-link-rx"></block></block>
  <block id="3cd8b5fe5ca94a9fdb5caaf96875ef7e" category="inline-link"><block ref="3cd8b5fe5ca94a9fdb5caaf96875ef7e" category="inline-link-rx"></block></block>
  <block id="6bfac05f3cc2c0adace9c385ef708fd9" category="paragraph"><block ref="6bfac05f3cc2c0adace9c385ef708fd9" category="inline-link-rx"></block></block>
  <block id="30216ab76baa66d9e857660c909822e7" category="summary">この章では、システムクローンのワークフローと入力画面の違いについて簡単に説明します。</block>
  <block id="50cca7f997c3211915cd57a3bb04b29c" category="doc">SAP LaMaプロビジョニングワークフロー-コピーシステム</block>
  <block id="072f81464e5d856a8d5a7f8883a36632" category="paragraph">次の図は、システムコピーワークフローで実行する主な手順を示しています。</block>
  <block id="01b76581a904a061a13aac9f12d95640" category="inline-image-macro">この図は、System Copyワークフローのタイムラインを示しています。ストレージクローニング、システムの準備、分離のアクティブ化、システムの名前変更、システムの起動の各手順を記載しています。構成のインポート、コピー後の自動化、システムの非アクティブ化を行います。</block>
  <block id="266de5c670b51a2300bfff08eadf3f83" category="paragraph">この章では、システムクローンのワークフローと入力画面の違いについて簡単に説明します。次の図に示すように、ストレージワークフローは変更されていません。</block>
  <block id="3f9896a740ccd028335e64982c037d5a" category="inline-image-macro">この図は、ワークフロー内の各ステップがどこで実行されるかを示すオーバーレイされたステップを含むアーキテクチャ図を示しています。</block>
  <block id="c46bd11826f2315cf0610d409ffd537e" category="list-text">システムの準備が整ったら、システムコピーワークフローを開始できます。これは、この設定に関する特定のタスクではなく、詳細な説明も行いません。詳細については、SAP LaMaのドキュメントをご覧ください。</block>
  <block id="4233ffb48a1b0153e20c92c0f6c40e0c" category="inline-image-macro">このスクリーンショットは、［システム］タブの［プロビジョニングシステム］ビューを示しています。2つのシステムが表示され、[Copy System]ドロップダウンが強調表示されます。</block>
  <block id="083716145cee33ff2046c406370b2405" category="list-text">コピーワークフローの実行中、最初の画面で指定する必要があるのと同様に、システムの名前が変更されます。</block>
  <block id="bc347213ce1c3f1d2438267811473b15" category="inline-image-macro">このスクリーンショットは、システムIDとHANA SIDのボックスが強調表示されたシステムのコピーページを示しています。</block>
  <block id="6c469dd99db5fe4f2cdd41a2240beab2" category="list-text">ワークフロー中にインスタンス番号を変更することができます。</block>
  <block id="4deccc9f34577d008d9c3b2b0c99aec4" category="inline-image-macro">このスクリーンショットは、SAPインスタンスの番号タブとデータ用の3つのボックスを示しています。</block>
  <block id="7803f3d937daa0d08bcf01b401c1f147" category="admonition">インスタンス番号の変更はテストされていないため、プロバイダスクリプトの変更が必要になる場合があります。</block>
  <block id="f5ad1b268b7a64d86910e1ae4182ef29" category="list-text">前述のように、* Custom Clone *画面はクローニングワークフローとは異なりません。</block>
  <block id="d5dc66f7bd8c1011c81ddc3e66057ee0" category="inline-image-macro">このスクリーンショットは、カスタムのクローン情報と処理パラメータが設定されたシステムのコピーページを示しています。</block>
  <block id="54ca6a630ee4f94a5198fac13397bd58" category="list-text">すでに説明したように、残りの入力マスクは標準とは異なるので、ここではそれ以上のマスクには入りません。最後の画面に概要が表示され、実行を開始できます。</block>
  <block id="e0543801e3151d1c0326270020101b9a" category="inline-image-macro">このスクリーンショットは、基本情報とホストのリストを含むシステムのコピー画面を示しています。右下にある[Execute]ボタンをクリックします。</block>
  <block id="e3ae308e52556fdb623ce663f313b439" category="paragraph">コピープロセスの完了後、カスタムのクローニングプロセスでターゲットインスタンスが有効になりません。</block>
  <block id="f25336d3bf88cbd451a163c97ac17567" category="inline-image-macro">このスクリーンショットは、LaMa Systemsの画面とシステムの詳細を示しています。</block>
  <block id="8da564d2ce3424e459494f5a0676b5fe" category="paragraph">拘束が設定されて実行を妨げるため'システム破壊プロセス中にプフックステップを実行するには'手動で採用する必要があります</block>
  <block id="ccca928b2a7d8dd76d677eb328f1da6f" category="inline-image-macro">このスクリーンショットは、LaMa Systemsの画面とシステムの詳細を示しており、「カスタム処理プロセスを使用」チェックボックスがオンになっています。</block>
  <block id="c4da05fb7cdd8766abc25fbafbea5a65" category="summary">このドキュメントの導入例とワークフローの実行時には、次のプロバイダ構成ファイル、実行スクリプト、およびAnsibleプレイブックを使用します。</block>
  <block id="d53d04a1ea080883183470ec02c16fdd" category="doc">プロバイダスクリプトの設定とAnsibleのプレイブック</block>
  <block id="f23e38be71134dd193343d810430ee13" category="admonition">このサンプルスクリプトは現状のまま提供されており、ネットアップではサポートしていません。スクリプトの最新バージョンは、mailto：ng-sapcc@netapp.com [ng-sapcc@netapp.com ^]にEメールでリクエストできます。</block>
  <block id="9feebf1712ffdf30142ff1038f2355ff" category="section-title">プロバイダ構成ファイルNetApp_clone.conf</block>
  <block id="15d4f6de10e85918b52fcdf3fa78b2a5" category="paragraph">構成ファイルは、の説明に従って作成されます<block ref="840230e2b210400caa403b3aab40b668" category="inline-link-rx"></block>。この構成ファイルは、SAPホストエージェントがインストールされているAnsibleコントロールノードに配置する必要があります。</block>
  <block id="d0813c701ba6b269a96b838cf74abedc" category="paragraph">設定されているos-user<block ref="24a29401ac4c9ae51f6da9510e56b6ab" prefix=" " category="inline-code"></block> スクリプトおよび呼び出されたAnsibleプレイブックを実行するための適切な権限が必要です。このスクリプトは共通のスクリプトディレクトリに配置できます。SAP LaMaは、スクリプトを呼び出す際に複数のパラメータを提供します。</block>
  <block id="a0104975cac3e4d943107b138472b95f" category="inline-link">SAP LaMaのドキュメント</block>
  <block id="fe04f70c92d468b41a00ac721c2baa57" category="paragraph">カスタムパラメータに加えて、<block ref="d4dd8a053b8921e0c97c9fad320ec6c2" prefix=" " category="inline-code"></block>、<block ref="5272e959f6dcee40a765dfc5b7c078e4" prefix=" " category="inline-code"></block>、<block ref="d4dd8a053b8921e0c97c9fad320ec6c2" prefix=" " category="inline-code"></block>および<block ref="5272e959f6dcee40a765dfc5b7c078e4" prefix=" " category="inline-code"></block>に示されているように、他の多くは手渡されることができる<block ref="7af1e5ad564c38fa8886e29ffc9fd522" category="inline-link-rx"></block>。</block>
  <block id="cf0f4d3b8cdc69ccc8949ccb49435a5a" category="section-title">プロバイダスクリプトnetapp_clone.sh</block>
  <block id="2ba17681023aebd89534577dad86560b" category="paragraph">プロバイダスクリプトはに保存する必要があります<block ref="7d2dc603b61f4a1874bc1ce662075b91" prefix=" " category="inline-code"></block> プロバイダの構成ファイルで設定されているとおりです。</block>
  <block id="03df896fc71cd516fdcf44aa699c4933" category="section-title">変数（ variables ）</block>
  <block id="bc01539c93d17a2b0f783e4f71b90e40" category="paragraph">次の変数はスクリプトでハードコードされており、適宜変更する必要があります。</block>
  <block id="f6cd53bc6bdc52ffc68b4d7d70bd2983" category="list-text"><block ref="5c02ab368b8fc3928b534dac33254332" prefix="" category="inline-code"></block>&lt;hostname of netapp cluster&gt;</block>
  <block id="c2d8140083809cc5b28989c192c7583b" category="list-text"><block ref="e24726c77a4b5dec5edaf5bac725b89f" prefix="" category="inline-code"></block>&lt;SVM name where source system volumes are stored&gt;</block>
  <block id="05b0a54c6c43fd11d9f8332bcfff94aa" category="inline-link">NetApp Ansibleモジュール- ONTAP を準備</block>
  <block id="0438110aaa77dc44bccb1ddfe89b0d28" category="paragraph">証明書ファイル<block ref="5697de2afb62d59b2877f2a7351ecff8" prefix=" " category="inline-code"></block> および<block ref="03af5d39699563e8a0e5f65d820a4f9c" prefix=" " category="inline-code"></block> の説明に従って指定する必要があります<block ref="3af2b6d20ca12a9d04bef18f3151e29e" category="inline-link-rx"></block>。</block>
  <block id="9ab689b3746aba13d2b0d80a43a23582" category="admonition">それぞれのSAPシステムで異なるクラスタやSVMが必要な場合は、SAP LaMaプロバイダ定義のパラメータとして追加できます。</block>
  <block id="18d821c99fe3d5876a94747ea97ee786" category="section-title">機能：インベントリファイルを作成する</block>
  <block id="8bd40edd8c06fc2cce652993a0e9b88e" category="paragraph">Ansibleプレイブックをより動的に実行するために、を使用します<block ref="5041a4494e62ffcb13cfe23041ebc270" prefix=" " category="inline-code"></block> その場でファイルが作成されます。一部の静的値は変数セクションで設定され、一部は実行中に動的に作成されます。</block>
  <block id="576eb476f089a96bcd4354951241757b" category="section-title">関数：Ansibleプレイブックを実行する</block>
  <block id="ce8914401ecb3769fce4ddc4e1ced2e8" category="paragraph">この関数は、Ansibleプレイブックと動的に作成されるを実行するために使用します<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> ファイル。プレイブックの命名規則はです<block ref="a6d1d971f71d0033c54dd886792835e2" prefix=" " category="inline-code"></block>。の値<block ref="11f852efb3bc8ae7dac506ad959a0820" prefix=" " category="inline-code"></block> LaMaの運用に依存し、LaMaをコマンドラインパラメータとして引き継ぎます。</block>
  <block id="bd5cc661e59e91681d4af8d42f266b60" category="section-title">セクションMain</block>
  <block id="8008be4d646729fc2b2eacc341248378" category="paragraph">ここでは、主な実行計画について説明します。変数<block ref="11f852efb3bc8ae7dac506ad959a0820" prefix=" " category="inline-code"></block> LaMaの代替手順の名前が含まれ、スクリプトが呼び出されるとLaMaによって提供されます。</block>
  <block id="ee18f05f19fdfaeb9188e25812655d93" category="list-text">システムクローンとシステムコピーのプロビジョニングワークフローを使用した値：</block>
  <block id="5bc5a2b2e92b316952f792fccde81bfc" category="list-text">CloneVolumes</block>
  <block id="fa4194159c5a4ad6ef8927aa7d748906" category="list-text">CloneVolumes</block>
  <block id="924718ea3d11b3fab6f774ae0dc5d993" category="list-text">system destroyワークフローを使用した値：</block>
  <block id="2b566d405e2ccbecac2cf005770047cb" category="list-text">ServiceConfigRemovalサービス構成の削除</block>
  <block id="65c7a43c3cc81a55199e705b073e6c04" category="list-text">システムの更新ワークフローによる値：</block>
  <block id="ddb34f7875ee414d57c52d7f6b1532c0" category="list-text">ClearMountConfigの場合</block>
  <block id="b7a8d056647cd4547e218c04d0f035da" category="section-title">HookOperationName=CloneVolumes</block>
  <block id="d84f8c0ddcc3d73f02cf17eccbacb6e2" category="paragraph">この手順では、Ansibleプレイブックが実行され、Snapshotコピーとクローニングの処理が開始されます。ボリューム名とマウント設定は、変数で定義されたXMLファイルを使用してSAP LaMaによって引き継がれます<block ref="e0a24edf8af93d34591b84a3ba4c60ca" prefix=" " category="inline-code"></block>。このファイルは、あとで手順で使用するために保存されます<block ref="de1ba36294d8c3bc57e5d9df81711f9e" prefix=" " category="inline-code"></block> 新しいマウントポイント設定を作成します。ボリューム名がXMLファイルから抽出され、各ボリュームに対してAnsibleのクローニングプレイブックが実行されます。</block>
  <block id="c80bb2258a3a0e1a34ad0ba8971ad5d7" category="admonition">この例では、ASインスタンスと中央サービスは同じボリュームを共有します。したがって、ボリュームクローニングはSAPインスタンス番号でのみ実行されます <block ref="14ba4a6ef0dc47790ff7704515344fff" prefix="(" category="inline-code"></block>）はではありません<block ref="96a3be3cf272e017046d1b2674a52bd3" prefix=" " category="inline-code"></block>。これは他の環境とは異なる場合があるため、変更する必要があります。</block>
  <block id="ef6e9f1dd886e5d5363a05e4d08cecc6" category="section-title">HookOperationName=PostCloneVolumes</block>
  <block id="223edcc0773a44e4b34959031a80f42f" category="paragraph">このステップでは、ユーザー定義プロパティを指定します<block ref="58df34e81d3ebd3108d3cd89e9ed8c5d" prefix=" " category="inline-code"></block> および<block ref="8f2c6579709285c9a24c1233a19b7518" prefix=" " category="inline-code"></block> また、ターゲットシステムのマウントポイント設定が保持されます。</block>
  <block id="7ade54baca7712e1446f7644e2b63881" category="paragraph">カスタムプロパティは、あとでででの運用停止時に入力として使用されます<block ref="2b566d405e2ccbecac2cf005770047cb" prefix=" " category="inline-code"></block> または<block ref="ddb34f7875ee414d57c52d7f6b1532c0" prefix=" " category="inline-code"></block> フェーズ：システムのプロビジョニングワークフローで指定されたカスタムパラメータの設定を保持するように設計されています。</block>
  <block id="f6e52e9107b3ac6aa07d820f3587c7e7" category="paragraph">この例で使用されている値はです<block ref="bdb47fed0d313262c9d3c7d41c894201" prefix=" " category="inline-code"></block> および<block ref="85e7e9424d29538746c1b1b2cbb86003" prefix=" " category="inline-code"></block>。</block>
  <block id="7beba9ba634960c6d652b856b7fa9af7" category="paragraph">ボリューム<block ref="feb928da308850091372edc73ab231a4" prefix=" " category="inline-code"></block>は、動的に作成されるAnsibleファイルに次の値が含まれています。<block ref="74570c0ba8bed87fb108923b85e1c86e" prefix=" " category="inline-code"></block>：<block ref="feb928da308850091372edc73ab231a4" prefix=" " category="inline-code"></block>、<block ref="ab8c0f3f510441dfbf6832e5c66506cb" prefix=" " category="inline-code"></block>および<block ref="404f3f40c3094f27edaf2e379e807d19" prefix=" " category="inline-code"></block>。</block>
  <block id="39637c1bfac2481530e7f976d2404f57" category="paragraph">これにより、ボリュームHN9_SAP上のSnapshot名に変換されます<block ref="a929b360dff8b79736d40929f007faec" prefix=" " category="inline-code"></block> 作成されたボリュームクローンの名前も表示されます<block ref="2f11b298ad59bd8dfd88c2aadbbf81e8" prefix=" " category="inline-code"></block>。</block>
  <block id="b199cb39ab8949193c27458fe7923308" category="admonition">カスタムプロパティを使用すると、プロビジョニングプロセスで使用されるパラメータを保持できます。</block>
  <block id="17b57d511dca01dac6e1f3d0eea8591e" category="inline-link">SAPノート1889590</block>
  <block id="37bfe2d6c630cd8dce994786cedb88f1" category="paragraph">マウントポイントの設定は、でLaMaに引き継がれたXMLファイルから抽出されます<block ref="c76dd551d0df4615489f4840c234db4e" prefix=" " category="inline-code"></block> ステップ。。<block ref="58df34e81d3ebd3108d3cd89e9ed8c5d" prefix=" " category="inline-code"></block> がボリューム名に追加され、デフォルトのスクリプト出力でLaMaに返信されます。機能については、を参照してください<block ref="f917bd775336e1bab012a560d990f292" category="inline-link-rx"></block>。</block>
  <block id="96552086a9a139af05ca83c2b608b1f5" category="admonition">この例では、ストレージシステム上のqtreeを、単一のボリュームに異なるデータを配置する一般的な方法として使用します。例：<block ref="feb928da308850091372edc73ab231a4" prefix=" " category="inline-code"></block> のマウントポイントを保持します<block ref="602440fe8fe65977e9574638f9a2c511" prefix=" " category="inline-code"></block>、<block ref="10fba32c279114a49cdfd03372e1e02e" prefix=" " category="inline-code"></block>および<block ref="238092ea5275b74b281dd99d812a95eb" prefix=" " category="inline-code"></block>。サブディレクトリも同様に機能します。これは他の環境とは異なる場合があるため、変更する必要があります。</block>
  <block id="346a028f600790fffe377b01a2b9981c" category="section-title">HookOperationName = ServiceConfigRemoval</block>
  <block id="53a8b34c26f167a4b06e6eec25b55427" category="paragraph">この手順では、ボリュームクローンの削除を実行するAnsibleプレイブックを使用します。</block>
  <block id="5ac066717b22e8c02f8bffb6a8ddcd96" category="paragraph">ボリューム名は、マウント構成ファイルとカスタムプロパティを通じてSAP LaMaから引き継がれます<block ref="58df34e81d3ebd3108d3cd89e9ed8c5d" prefix=" " category="inline-code"></block> および<block ref="8f2c6579709285c9a24c1233a19b7518" prefix=" " category="inline-code"></block> は、システムプロビジョニングワークフローで最初に指定されたパラメータの値を渡すために使用します（の注を参照）<block ref="ef6e9f1dd886e5d5363a05e4d08cecc6" prefix=" " category="inline-code"></block>）。</block>
  <block id="e8065accf11ce1a2b63e42eec427fd63" category="paragraph">ボリューム名がXMLファイルから抽出され、各ボリュームに対してAnsibleのクローニングプレイブックが実行されます。</block>
  <block id="81ad9d04ab6444acadad9192d00a12c0" category="admonition">この例では、ASインスタンスと中央サービスは同じボリュームを共有します。そのため、ボリュームの削除はSAPインスタンス番号がの場合にのみ実行されます <block ref="14ba4a6ef0dc47790ff7704515344fff" prefix="(" category="inline-code"></block>）はではありません<block ref="96a3be3cf272e017046d1b2674a52bd3" prefix=" " category="inline-code"></block>。これは他の環境とは異なる場合があるため、変更する必要があります。</block>
  <block id="92f6f8cba070fb9e27767dd5551e768b" category="section-title">HookOperationName=ClearMountConfig</block>
  <block id="4a4f44bf22d06f8fafafadd3fd090a90" category="paragraph">この手順では、システムの更新ワークフロー中にボリュームクローンを削除するAnsibleプレイブックを実行します。</block>
  <block id="d58b54d2e52ca8489cc7248ba854ae21" category="paragraph">ボリューム名は、マウント構成ファイルとカスタムプロパティを通じてSAP LaMaから引き継がれます<block ref="58df34e81d3ebd3108d3cd89e9ed8c5d" prefix=" " category="inline-code"></block> および<block ref="8f2c6579709285c9a24c1233a19b7518" prefix=" " category="inline-code"></block> は、システムプロビジョニングワークフローで最初に指定されたパラメータの値を渡すために使用します。</block>
  <block id="8886a6fe82aff5197d15c38da5b592fd" category="paragraph">ボリューム名がXMLファイルから抽出され、各ボリュームに対してAnsibleのクローニングプレイブックが実行されます。</block>
  <block id="8d58923ab8b9151914bc816648b0875d" category="admonition">この例では、ASインスタンスと中央サービスは同じボリュームを共有します。そのため、ボリュームの削除はSAPインスタンス番号がの場合にのみ実行されます <block ref="14ba4a6ef0dc47790ff7704515344fff" prefix="(" category="inline-code"></block>）はではありません<block ref="96a3be3cf272e017046d1b2674a52bd3" prefix=" " category="inline-code"></block>。これは他の環境とは異なる場合があるため、変更する必要があります。</block>
  <block id="1943d0253ccc5d45e36df0227dd4793e" category="section-title">Ansible Playbook：NetApp_LaMa _CloneVolume.yml</block>
  <block id="d370af02588316b01d589655a107cbbc" category="inline-link">NetApp Ansibleモジュール- YAMLファイル</block>
  <block id="06a69040885f67ea75f8c71bd26cdfdf" category="paragraph">LaMaシステムのクローニングワークフローのCloneVolumesの手順で実行されるPlaybookは、を組み合わせたものです<block ref="3e3c61f048949537d0dfdcc5a1db6ce2" prefix=" " category="inline-code"></block> および<block ref="bf70df0c372967b21792d4176664f064" prefix=" " category="inline-code"></block> （を参照）<block ref="ae5d962151a417d9f49d9333a90e0f3c" category="inline-link-rx"></block>）。このプレイブックは、セカンダリからのクローニング処理やクローンスプリット処理など、他のユースケースにも簡単に対応できます。</block>
  <block id="455e5b157968d37a4203a9f3779b384a" category="section-title">Ansible Playbook：NetApp_LaMa _ServiceConfigRemoval.yml</block>
  <block id="ce2acc94df9bd91ff47fc72ecf404031" category="paragraph">実行されるプレイブック<block ref="2b566d405e2ccbecac2cf005770047cb" prefix=" " category="inline-code"></block> LaMaシステムの破棄ワークフローのフェーズは、のフェーズです<block ref="35dd0b5421b741dfd4e373d5f4d1e4d1" prefix=" " category="inline-code"></block> および<block ref="8e983ebe58c49099839bfd3bb1b83f41" prefix=" " category="inline-code"></block> （を参照）<block ref="ae5d962151a417d9f49d9333a90e0f3c" category="inline-link-rx"></block>）。の実行ステップに合わせて調整する必要があります<block ref="1f06042fc02f2e855ea461c7817d81a4" prefix=" " category="inline-code"></block> Playbook：</block>
  <block id="bd68c303edefacbfbb91261b59a4e9ac" category="section-title">Ansible Playbook：NetApp_LaMa _ClearMountConfig.yml</block>
  <block id="ff0f6a8ce2fcd64cebec6e1d9151cfce" category="paragraph">プレイブックは、の実行時に指定します<block ref="219f5b01b91b2ed6147264d0df5f9c07" prefix=" " category="inline-code"></block> LaMaシステムの更新ワークフローのフェーズは、のフェーズです<block ref="35dd0b5421b741dfd4e373d5f4d1e4d1" prefix=" " category="inline-code"></block> および<block ref="8e983ebe58c49099839bfd3bb1b83f41" prefix=" " category="inline-code"></block> （を参照）<block ref="ae5d962151a417d9f49d9333a90e0f3c" category="inline-link-rx"></block>）。の実行ステップに合わせて調整する必要があります<block ref="1f06042fc02f2e855ea461c7817d81a4" prefix=" " category="inline-code"></block> Playbook：</block>
  <block id="85e6de7723c608b48d8483e8f080d82e" category="section-title">Ansibleのinventory.ymlの例</block>
  <block id="13618afb34e29ee98ce78d61d6dd1f2c" category="paragraph">このインベントリファイルは、ワークフローの実行時に動的に作成されます。このファイルは、説明のためにのみここに表示されています。</block>
  <block id="b606dabc2c3e184086b564adb1940f56" category="doc">SAPシステムのクローニング、コピー、更新のシナリオ</block>
  <block id="3e2c20ce79434cedb498fc7527d30dbe" category="paragraph">SAPシステムのコピーという用語は、SAPシステムのクローニング、SAPシステムのコピー、SAPシステムの更新の3つのプロセスを表す同義語としてよく使用されます。ワークフローとユースケースはそれぞれ異なるため、異なる処理を区別することが重要です。</block>
  <block id="43767cf21d4b8f31f9dcdee8e59adb69" category="paragraph">次の図に、システムのクローン、システムのコピー、またはシステムの更新の各処理で実行する必要がある主な手順を示します。紫のボックスは、ネットアップストレージ機能を統合できる手順を示しています。3つの運用はすべて、SAP LaMaを使って完全に自動化できます。</block>
  <block id="596b75e644e7872d4337d48a315dd53d" category="inline-image-macro">この図は、システムクローン、システムコピー、およびシステム更新の3つのプロセスタイムラインを示しています。</block>
  <block id="10f22ce6f0d2560d2593dccd1c7a2cac" category="summary">SAP Landscape Management（LaMa）を使用すると、SAPシステム管理者は、SAPシステムのエンドツーエンドのクローニング、コピー、更新などのSAPシステム運用を自動化できます。</block>
  <block id="f0e2318cd32c61c7c602d5745e21791b" category="doc">TR-4953：『NetApp SAP Landscape Management Integration using Ansible』</block>
  <block id="f130ce1e1c7d90310044ef7daf088f2e" category="paragraph">ネットアップは、SAP LaMa対応の各種Ansibleモジュールを搭載しており、SAP LaMaのAutomation Studioを通じて、NetApp SnapshotやFlexCloneなどのテクノロジにアクセスできます。これらのテクノロジを使用することで、SAPシステムのクローニング、コピー、更新の処理を簡易化、高速化できます。</block>
  <block id="d2c4fa04492deec7383fc3a48fb61fcc" category="paragraph">この統合は、ネットアップのストレージソリューションをオンプレミスで運用しているお客様や、Amazon Web Services、Microsoft Azure、Google Cloud Platformなどのパブリッククラウドプロバイダでネットアップのストレージサービスを使用しているお客様が利用できます。</block>
  <block id="e95a257ceffab9c7ca49cb69ae38d9d7" category="paragraph">このドキュメントでは、Ansibleによる自動化を使用して、SAPシステムのコピー、クローニング、更新の処理に対応するネットアップのストレージ機能を利用したSAP LaMaの設定について説明します。</block>
  <block id="1549d8a91814eafffd1bb350b7956ad9" category="summary">更新ワークフロー中に、ストレージクローンを削除する必要があります。システム破棄ワークフローにも同じAnsibleプレイブックを使用できます。ただし、カスタムフックは別の手順に定義されるため、プレイブックの名前も適宜変更されます。クローンのプロセス手順に違いはありません。</block>
  <block id="7949afbae2a9d5fd15f7b4c7f7a05fa4" category="doc">SAP LaMaプロビジョニングワークフロー-システムの更新</block>
  <block id="7f4f2ac27cfdf79058d0e50de2e9742d" category="paragraph">次の図は、システムの更新ワークフローで実行する主な手順を示しています。</block>
  <block id="481edeab724446585cba31c21c5c303b" category="inline-image-macro">この図は、システム更新ワークフローの各手順を示したタイムラインです。エクスポート設定、システムの停止、システムの準備解除、ストレージクローンの削除、ストレージクローニング、システムの準備、隔離の有効化、システム名の変更、システムの起動、構成のインポートコピー後の自動化と分離の非アクティブ化</block>
  <block id="271d28463c63d7fd4374acd04ad1d970" category="paragraph">更新ワークフロー中に、ストレージクローンを削除する必要があります。システム破棄ワークフローにも同じAnsibleプレイブックを使用できます。ただし、カスタムフックは別の手順に定義されるため、プレイブックの名前も適宜変更されます。クローンのプロセス手順に違いはありません。</block>
  <block id="9e5091c63ff2962a881841af91e2823c" category="inline-image-macro">この図は、このワークフローの手順を含むアーキテクチャ図を示しています。</block>
  <block id="d1a447a92da11b77de2544fbcfe43acf" category="paragraph">更新ワークフローは、コピーしたシステムのプロビジョニング画面から開始できます。</block>
  <block id="5d395370196d6d4e376fe46b17b57d79" category="inline-image-macro">このスクリーンショットは、Provisioning systemビューのRefresh systemドロップダウンが強調表示された状態を示しています。</block>
  <block id="8cfad5ce51e7271ce19cce7c6b114c91" category="paragraph">繰り返しますが、入力画面と標準画面では何も異なりません。ワークフローの実行は概要画面から開始できます。</block>
  <block id="29fc636c559035fd7df8a518d41d0ce2" category="inline-image-macro">このスクリーンショットは、更新するシステムの基本データやターゲットシステムのホスト選択など、システムの更新画面を示しています。</block>
  <block id="3174e9fa49f311c5e00e12e71a3b5b98" category="summary">システムとストレージのセットアップでは多数のオプションを使用できるため、システムの個 々 のセットアップと設定の要件をテンプレートとして使用する必要があります。</block>
  <block id="22b2b5c6aa3ef83ba384074fa4b1f70b" category="doc">実装例</block>
  <block id="218856d6f0f5481bf616ccd68aa42cba" category="section-title">検証済みの構成と制限事項</block>
  <block id="ead08ec5c8fd39a74fa185810bb7521e" category="paragraph">以下の原則はサンプル導入に適用されており、お客様のニーズに合わせて調整する必要がある場合があります。</block>
  <block id="da30655d4bed2647c2fec11ec1ee095a" category="list-text">マネージドSAPシステムは、NFSを使用してネットアップストレージボリュームにアクセスし、アダプティブデザインの原則に基づいてセットアップしました。</block>
  <block id="a606bd07766c70874c1247221e4b6920" category="list-text">NetApp Ansibleモジュール（ZAPIとREST API）でサポートされているすべてのONTAP リリースを使用できます。</block>
  <block id="8a13407d32dabdb45cd5b99a37d3658d" category="list-text">1つのネットアップクラスタとSVMのクレデンシャルが、プロバイダスクリプトの変数としてハードコードされました。</block>
  <block id="62479efe2da12c69ae8fead43ad2a41c" category="list-text">ストレージクローニングは、ソースSAPシステムで使用されていたのと同じストレージシステムで実行しました。</block>
  <block id="2822fed36861cecbea9530e16c3dc549" category="list-text">ターゲットのSAPシステムのストレージボリュームの名前は、付録のソースと同じです。</block>
  <block id="45d18080d1d1501f967a6234b8e9c807" category="list-text">セカンダリストレージ（SV / SM）でのクローニングは実装されていません。</block>
  <block id="a2c82d2d1a8c3fa26f5d24f153350b67" category="list-text">FlexCloneスプリットを実装できませんでした。</block>
  <block id="295940074fec313c1941e256113f0e88" category="list-text">インスタンス番号は、ソースとターゲットのSAPシステムで同じです。</block>
  <block id="92b9b9bba1ad0383940e73178d2d2b1f" category="inline-link">アダプティブデザイン</block>
  <block id="694793abedab052f0f8fe31c7ed5d468" category="inline-link">NetApp ONTAP 向けのAnsibleプレイブック</block>
  <block id="e3f6982f9a27e912e8c722adde3efd24" category="paragraph">次の図は、ラボのセットアップを示しています。システムのクローニングに使用されるソースのSAPシステムHN9では、データベースH09、SAP CS、およびSAP ASサービスが、がインストールされた同じホスト（sap-lnx32）で実行されています<block ref="0f7e6b0bf7b6b1239b509159ab784efd" category="inline-link-rx"></block> 有効。に従ってAnsibleコントロールノードが準備されました<block ref="2b2330f758d35be084c542c192f2a4aa" category="inline-link-rx"></block> ドキュメント</block>
  <block id="440bd2077d1dc4268b805695e517765a" category="inline-link-macro">「付録：プロバイダスクリプトの設定」</block>
  <block id="b66c6a3a7edc45e35e3ddf6c05273c2e" category="paragraph">ホスト<block ref="0e4bb0c252ec92e9686dfba6c8df0076" prefix=" " category="inline-code"></block> SAP LaMaクローニング運用のターゲットとして使用し、隔離に対応した機能を設定しました。</block>
  <block id="83b45fa496284bbb2f02b9bded901b86" category="paragraph">システムのコピーおよび更新には、さまざまなSAPシステム（ソースとしてHNA、ターゲットとしてHN2）が使用されました。これは、Post Copy Automation（PCA）が有効になっているためです。</block>
  <block id="dfa47107ed64e58579a060d20cca230a" category="inline-image-macro">この図は、SAPホストエージェントのさまざまな例と、NFSマウントを使用したネットアップストレージの操作方法を示しています。SAP LaMaインスタンスも表しています。</block>
  <block id="9d50189ad22fa1f80dd4993b241fa520" category="paragraph">ラボ環境では、次のソフトウェアリリースを使用しました。</block>
  <block id="b4cd99983baacefc54875fd2de6c03d4" category="list-text">SAP LaMa Enterprise Edition 3.00 SP23_2</block>
  <block id="7bdc9b8c3e894f5a2369e5c3b8a133e4" category="list-text">SAP HANA 2.00.052.00.1599235305</block>
  <block id="d550cc442fbc5ea03e42ba86d0cfeb03" category="list-text">SAP 7.77パッチ27（S/4 HANA 1909）</block>
  <block id="f6297e2394a4dfe959fc0dace04882a1" category="list-text">SAPホストエージェント7.22パッチ56</block>
  <block id="780c1fbb148682140e46cccca790b4ff" category="list-text">SAPACEXT 7.22パッチ69</block>
  <block id="bded4cce06ec88cd16a823fa44159118" category="list-text">Linux SLES 15 SP2</block>
  <block id="8271f798ae4ae5f28efaa3a9eaf06233" category="list-text">Ansible 2.13.7.</block>
  <block id="4b0373c99a4c85c6b0f82b56d8c42730" category="list-text">NetApp ONTAP 9.8P8</block>
  <block id="70cc2142e75ab6a0289b10c66ef4448a" category="section-title">SAP LaMa設定</block>
  <block id="97604b3e0820bd1474b9e6fae5edb42d" category="section-title">SAP LaMaプロバイダによる定義</block>
  <block id="cdde8d4b44ba034030a4e67f7cd1355c" category="paragraph">プロバイダの定義は、次のスクリーンショットに示すように、SAP LaMaのAutomation Studio内で実行されます。この例の実装では、前に説明したように、異なるカスタムプロビジョニングステップと操作フックに使用される単一のプロバイダ定義を使用します。</block>
  <block id="1746e76929a022aece9b6dfb14dae7f4" category="inline-image-macro">SAP LaMa GUIを使用したSAPプロバイダの定義を示すスクリーンショット</block>
  <block id="4f341f0e5eb3b1f46991cea35272fcf1" category="paragraph">プロバイダ<block ref="f66a8619ee48b9a9e3c50bb78492093d" prefix=" " category="inline-code"></block> スクリプトとして定義されます<block ref="e43ee3b6f349861a2a2c82d22b32d52e" prefix=" " category="inline-code"></block> SAPホストエージェントに登録されている。SAPホストエージェントは、中央のホストで実行されます<block ref="b364ceeb78cb4529181c9ca2c288a0f4" prefix=" " category="inline-code"></block>Ansibleコントロールノードとしても機能します。</block>
  <block id="64435bf2455f95dd405db3790145406d" category="inline-image-macro">Generalタブの個 々 のプロバイダ定義であるNetApp_cloneのスクリーンショットに、Summaryセクション、Used - forセクション、およびOptionsセクションを示します。</block>
  <block id="0534b8ad7bf71ef8b710dad564e0cd7a" category="paragraph">[*で使用（* Used in *）]タブには、プロバイダーが使用されるカスタムオペレーションが表示されます。カスタムプロビジョニング* NetAppClone *およびカスタムフック* Delete NetAppClone *および* Delete NetAppClone Refresh *の構成は、次の章で説明します。</block>
  <block id="a340f1bceb05f0cd1b147b9f672ba8d2" category="inline-image-macro">使用済みセクションのスクリーンショット。定義を使用するカスタム処理のリストを示しています。この例では、「NetAppCloneの削除」、「NetAppClone更新の削除」、「NetAppClone」と表示されています。</block>
  <block id="7a0ae7f1897ba065a4175f0a031d40ca" category="paragraph">プロビジョニングワークフローの実行中にパラメータ* ClonePostFix *および* SnapPostFix *が要求され、SnapshotとFlexCloneボリュームの名前に使用されます。</block>
  <block id="e9f68f9346bf37c4d5361a06a77f7922" category="inline-image-macro">「パラメータ」セクションのスクリーンショット。「CLonePostFix」と「SnapPostFix」の2つのパラメータのリストです。</block>
  <block id="f75575994c2d652cc4c91f3475946ddd" category="section-title">SAP LaMaカスタムプロビジョニング</block>
  <block id="71f3f2d0ca1eb7593b6ccbae27d47630" category="paragraph">SAP LaMaのカスタムプロビジョニング設定で、前述したお客様のプロバイダを使用して、プロビジョニングワークフローの手順* Clone Volumes *と* PostCloneVolumes *を置き換えます。</block>
  <block id="9f86a21de7693c92ea6e20ccf4b6bfed" category="inline-image-macro">カスタムプロビジョニングの設定画面のスクリーンショット。CloneVolumesとFinalizeCloneVolumesのプロセスが表示されます。</block>
  <block id="9e1240b3666e6094668a9e44b93b1aaf" category="section-title">SAP LaMaカスタムフック</block>
  <block id="fc234b36f71d0a48d49f813690e499d5" category="paragraph">システムの削除ワークフロー時にシステムを削除した場合は、フック* Delete NetAppClone *を使用してプロバイダ定義が呼び出されます<block ref="f66a8619ee48b9a9e3c50bb78492093d" prefix=" " category="inline-code"></block>。インスタンスは実行中も保持されるため、システムの更新ワークフロー中は* Delete NetApp Clone Refresh *フックが使用されます。</block>
  <block id="1214fb9ed85a47de9908cb172d861fb9" category="inline-image-macro">カスタムフックのスクリーンショット。カスタムフックのリストを示します。NetAppClone Refresh and Delete NetAppCloneを削除します。</block>
  <block id="0c3cf1c76c18bb4fefa6e023a411ffc4" category="paragraph">SAP LaMaがマウントポイント設定の情報をプロバイダに提供できるように、カスタムフックに「データマウントXML *を使用」を設定することが重要です。</block>
  <block id="98f4e317bbaa784645b3288ba01b74c6" category="paragraph">カスタムプロビジョニングワークフローを使用してシステムを作成したときにのみカスタムフックが使用および実行されるようにするために、次の制約がそのフックに追加されます。</block>
  <block id="ec60f21e7cd865823a756b683438922a" category="inline-image-macro">NetAppClone ConstraintsページのスクリーンショットCustom clone process name（Static；カスタムクローンプロセス名）という単一の制約が含まれています。</block>
  <block id="251b0d3699e5721f1881283a4fca406a" category="paragraph">カスタムフックの使用方法の詳細については、を参照してください<block ref="cccebfd04b7323b5c9d595ca9e1a8202" category="inline-link-rx"></block>。</block>
  <block id="8e28a1dc58486d267cf25af39d6a11e6" category="section-title">SAPソースシステムでカスタムのプロビジョニングワークフローを有効にします</block>
  <block id="113da349476dc9377bcc12b4a0257c93" category="paragraph">ソースシステムのカスタムプロビジョニングワークフローを有効にするには、その設定を該当するものにする必要があります。[カスタムプロビジョニングプロセスを使用する*]チェックボックスをオンにして、対応するカスタムプロビジョニング定義を選択する必要があります。</block>
  <block id="9d9c41126d52bd5f1a379e53bd0752f3" category="summary">このセクションでは、HANAデータベースH09を使用するソースのSAPシステムHN9に基づく、SAP LaMaシステムの完全なクローニングワークフローを紹介します。次の図は、ワークフロー中に実行される手順の概要を示しています。</block>
  <block id="2080b046fbab316052bf3cd004fba2c1" category="doc">SAP LaMaプロビジョニングワークフロー-クローンシステム</block>
  <block id="f928bd8b1ecd05387cc712d7a46bf18c" category="paragraph">次の図は、システムのクローニングワークフローで実行する主な手順を示しています。</block>
  <block id="f796aa70006aac29ee5eb4b2ed23ba95" category="inline-image-macro">ストレージクローニング、システムの準備、隔離のアクティブ化、およびシステムの開始の手順を示すワークフロー図。</block>
  <block id="fdf5d8e6fccfdfce632b92c3e93acaf7" category="inline-image-macro">この図は、Create cloned System Configuration、Create Storage Snapshot and Clone、Create Mount Point Configuration、Set Custom Properties、およびPrepare and start systemなど、ワークフロー中に実行される手順を示しています。</block>
  <block id="bcda724368fccf9bf6be920fc775e707" category="list-text">クローニングワークフローを開始するには、メニューツリーで* Provisioning *を開き、ソースシステム（この例ではHN9）を選択します。次に、* Clone System *ウィザードを起動します。</block>
  <block id="320b2524f93a492ce1312bd5ae04746a" category="inline-image-macro">このスクリーンショットは、プロビジョニングシステムビューを示しています。2つのシステムが含まれています。</block>
  <block id="26f307d1b32126e9ef74d6d94d34593a" category="list-text">必要な値を入力します。ウィザードの画面1で、クローニングしたシステムのプール名を入力するように求められます。このステップでは、クローニングされたシステムを起動するインスタンス（仮想または物理）を指定します。デフォルトでは、システムはターゲットシステムと同じプールにクローニングされます。</block>
  <block id="28e2a407caa32a2e6d85a365fc6137ee" category="inline-image-macro">クローンシステムウィザードの画面1で、ターゲットシステムの基本データを指定します。</block>
  <block id="93097e472af50d9306626ab3c2ad088c" category="list-text">ウィザードの画面2で、新しいSAPインスタンスを起動するターゲットホストを指定するよう求められます。このインスタンスのターゲットホストは、前の画面で指定したホストプールから選択できます。各インスタンスまたはサービスは、別 々 のホストで開始できます。この例では、3つのサービスがすべて同じホスト上で実行されています。</block>
  <block id="d45437922cbadac03e555f9396029c52" category="inline-image-macro">クローンシステムウィザード画面2では、ターゲットシステムのホストを選択できます。</block>
  <block id="dbbb3c208933ad8e73912e8b71c8cfe9" category="list-text">画面3で要求された情報を入力します。この情報は、仮想ホスト名とネットワークを要求します。通常、ホスト名はDNSで管理されるため、IPアドレスもそれに応じて事前に入力されます。</block>
  <block id="1e0378f2db383a2474acde3e5f6c08c4" category="inline-image-macro">システムのクローンウィザードの画面3では、仮想ホスト名とネットワークを指定できます。</block>
  <block id="45f39a262ef1deb0ae56818de7b8012c" category="list-text">画面4に、カスタムのクローン処理が表示されます。クローン名と* SnapPostfix *名を指定した場合、この名前は、FlexCloneボリュームとSnapshot名に対するストレージのクローン処理でそれぞれ使用されます。これらのフィールドを空のままにしておくと、プロバイダスクリプトの変数セクションで設定されたデフォルト値になります<block ref="e43ee3b6f349861a2a2c82d22b32d52e" prefix=" " category="inline-code"></block> を使用します。</block>
  <block id="9dd8edfbceb76bf22d88c7fd9447943b" category="inline-image-macro">Clone System Wizard（クローンシステムウィザード）画面4では、カスタムクローンオプションがオペレーションパラメータとして表示されます。</block>
  <block id="0eca4f9874b4bf56a3688acd75704009" category="list-text">画面5では、データベース整合性オプションが選択されています。この例では、「* Online：Clone running DB *」を選択しました。</block>
  <block id="31680669fa3034c6e5659a85a5154f00" category="inline-image-macro">Clone System Wizard（クローンシステムウィザード）画面5では、Online：Clone running DB Selected（オンライン：クローン実行中のDBが選択された状態）のデータベース整合性オプションが表示</block>
  <block id="625f6568780e6e1c8d04b941df9248ef" category="list-text">画面6では、テナントのクローンを実行する場合にのみ入力する必要があります。</block>
  <block id="47abcfee5b22144e9b3b60e685c63dc6" category="inline-image-macro">クローンシステムウィザードの画面6では、テナントのクローンを実行する場合、ユーザ名とパスワードを指定できます。</block>
  <block id="64606b6bd8cb0c32c15e338b0756702c" category="list-text">画面7では、システムの隔離を構成できます。</block>
  <block id="31d6011ed5b7611543fb146a48f8b7ec" category="inline-image-macro">Clone System Wizard（クローンシステムウィザード）画面7では、システムを分離するために、許可された発信接続を定義できます。</block>
  <block id="d5be567f5a60baa8d0255d467375bfb9" category="list-text">画面8では、ワークフローを開始する前の最終確認のためのすべての設定が概要ページに表示されます。[*Execute*]をクリックして'ワークフローを開始します</block>
  <block id="632b59e47eba1c14746c6f4bb3c38289" category="inline-image-macro">Clone System Wizard（クローンシステムウィザード）画面8には、入力した情報の概要が表示されます。</block>
  <block id="93cefbf94e2762da32c6ca08f9ea4841" category="paragraph">SAP LaMaが、設定に記載されたすべてのアクションを実行します。具体的には、ストレージボリュームのクローンとエクスポートの作成、ターゲットホストへのマウント、分離のためのファイアウォールルールの追加、HANAデータベースとSAPサービスの開始です。</block>
  <block id="e214579b1ef23c2afaf6095e9e34f58f" category="inline-image-macro">t "HISスクリーンショットは、システムクローンプロセスの監視画面を示しています。"</block>
  <block id="c2cc1ea5bc6c9297f5c6cb7ff1096618" category="paragraph">詳細ログには、* Clone Volume *および* ModifyマウントポイントとAdd Custom Properties *の処理がAnsibleノード、で実行されます<block ref="b364ceeb78cb4529181c9ca2c288a0f4" prefix=" " category="inline-code"></block> ホスト：以下の手順は、各サービス、HANAデータベース、SAP中央サービス、およびSAPサービスに対して実行します。</block>
  <block id="3df6b54174cd2a42f59a8dbd7cbc813a" category="inline-image-macro">このスクリーンショットは、詳細なログに示されたさまざまな処理を示すシステムのクローン画面を示しています。</block>
  <block id="f63912439c7fa06d095f53e9e3e4b864" category="list-text">Clone Volumes *タスクを選択すると、そのステップの詳細ログが表示され、Ansible Playbookの実行状況が表示されます。Ansibleプレイブックも確認できます<block ref="c9a20dd023079737355442f70666f77f" prefix=" " category="inline-code"></block> は、HANAデータベースのボリューム、データ、ログ、および共有ごとに実行されます。</block>
  <block id="ca31c500f57ebe381bd2273516bebe25" category="inline-image-macro">この画面は、ボリュームクローンの詳細を示すログを示しています。</block>
  <block id="857f308602f7ba1d17c9bcd529db65a0" category="list-text">マウントポイントの変更とカスタムプロパティの追加の手順*マウントポイントの詳細ビューには、マウントポイントと、実行スクリプトによって渡されたカスタムプロパティに関する情報が表示されます。</block>
  <block id="b030ac3d8ad8890898d0e771a32c477b" category="inline-image-macro">詳細なログ情報</block>
  <block id="22bfd63c8b4d3df02dbc6b174c65b0f1" category="paragraph">ワークフローが完了すると、クローニングしたSAPシステムの準備が完了し、使用できる状態になります。</block>
  <block id="ac8a75fedf05fbee71814a271251285f" category="summary">この統合アプローチでは、SAP LaMaのカスタムプロビジョニングと運用のフックを、ネットアップストレージ管理のAnsibleプレイブックと組み合わせて使用します。次の図は、LaMa側の設定の概要と、実装例の対応するコンポーネントを示しています。</block>
  <block id="3a05a4cf01114d4fe10b4485ddee4278" category="doc">Ansibleを使用して、NetApp SAP LaMaを統合</block>
  <block id="198b2bd9b00943bcedf9ecdd177e1c38" category="inline-image-macro">これは非常に複雑なイメージで、SAP LaMa、Ansibleの制御ノード、ネットアップのストレージという3つのボックスを備えています。各ボックスには、各レベルで実行されるそれぞれのプロセスステップが含まれています。</block>
  <block id="b9e659c463a2a678f0e611704e512f86" category="paragraph">Ansible制御ノードとして機能する中央ホストは、SAP LaMaからの要求を実行し、Ansibleプレイブックを使用してネットアップストレージの運用を開始するために使用されます。ホストをSAP LaMaへの通信ゲートウェイとして使用できるように、SAPホストエージェントコンポーネントをこのホストにインストールする必要があります。</block>
  <block id="638982755cb7864b186283043849388f" category="paragraph">LaMa Automation Studioでは、AnsibleホストのSAPホストエージェントに登録されたプロバイダが定義されます。ホストエージェント構成ファイルは、要求された処理に応じて、一連のコマンドラインパラメータを使用してSAP LaMaによって呼び出されるシェルスクリプトを指します。</block>
  <block id="68dcf0e282674b14fed37a5be8c28905" category="paragraph">LaMa Automation Studioでは、カスタムプロビジョニングとカスタムフックを定義して、プロビジョニング時にストレージのクローニング処理を実行し、システムがプロビジョニング解除されたときにクリーンアップ処理を実行します。その後、Ansible制御ノード上のシェルスクリプトによって、対応するAnsibleプレイブックが実行されます。これにより、SnapshotとFlexCloneの処理およびプロビジョニング解除ワークフローを使用したクローンの削除がトリガーされます。</block>
  <block id="dae3fc22ee8211dc76b1b10604d664bf" category="paragraph">NetApp AnsibleモジュールとLaMaプロバイダの定義の詳細については、以下をご覧ください。</block>
  <block id="0041533e713a78228719d821d293dcd4" category="inline-link">NetApp Ansibleモジュール</block>
  <block id="9f56dd7786268026308d6c101b3d76c4" category="list-text"><block ref="9f56dd7786268026308d6c101b3d76c4" category="inline-link-rx"></block></block>
  <block id="d57e5b07e6dad93c13ff5947c9e556e5" category="inline-link">SAP LaMaのドキュメント-プロバイダ定義</block>
  <block id="b961383b57c9b01bb96a93facf9ff473" category="list-text"><block ref="b961383b57c9b01bb96a93facf9ff473" category="inline-link-rx"></block></block>
  <block id="4159d7c81405c1d9cd6ccf2d2dc39862" category="summary">テストやトレーニングの目的で、ソースシステムのデータをターゲットシステムで使用できるようにする必要があるシナリオは複数あります。テストおよびトレーニング用のシステムは、ソースシステムのデータで定期的に更新し、現在のデータセットでテストとトレーニングが実行されていることを確認する必要があります。このシステム更新処理は、インフラ、データベース、アプリケーションの各レイヤ上で実行される複数のタスクで構成されます。自動化のレベルによっては、数日かかる場合があります。</block>
  <block id="f57f410c06dab6a60fe8e6a28770509d" category="doc">システムの更新、コピー、クローニングのユースケース</block>
  <block id="56d5fedf8fc8bf63d4174389cb19f7ed" category="inline-image-macro">この図は、主な開発環境から、一時的なプロジェクト分割、修理システム、トレーニングシステム、およびsanboxシステムまでの環境ワークフローを示しています。ここには、システム更新、システムコピー、およびシステムクローンがこれらのさまざまな目的にどのように使用されているかが表示されます。</block>
  <block id="3e7487fffc42c7f8a2aeaa0819e630a4" category="paragraph">SAP LaMaとネットアップのクローニングワークフローを使って、インフラレイヤとデータベースレイヤで必要なタスクを高速化し、自動化できます。SAP LaMaは、バックアップをソースシステムからターゲットシステムにリストアする代わりに、NetApp SnapshotコピーとNetApp FlexCloneテクノロジを使用して、起動したHANAデータベースまでの必要なタスクを、次の図に示すように数時間ではなく数分で実行します。クローニングプロセスに要する時間はデータベースのサイズに左右されないため、非常に大規模なシステムでも数分で作成できます。また、オペレーティングシステムとデータベースレイヤ、およびSAPの後処理側でタスクを自動化することにより、ランタイムをさらに削減できます。</block>
  <block id="5250c15aaf7bc535777e729ee215e00a" category="inline-image-macro">この図は、NetApp Snapshotコピーを使用する場合と使用しない場合のクローニングプロセスの比較、およびNetApp FlexCloneテクノロジの比較を示しています。これにより、処理速度が大幅に向上します。</block>
  <block id="f18de1d998f8c83fe7b43b1fe738c842" category="paragraph">論理的破損は、ソフトウェアエラー、人為的エラー、破壊行為などが原因で発生する可能性があります。残念ながら、論理的破損は、標準的な高可用性ソリューションやディザスタリカバリソリューションでは対処できないことがよくあります。その結果、論理的な破損が発生したレイヤ、アプリケーション、ファイルシステム、またはストレージによっては、ダウンタイムを最小限に抑え、データ損失要件を許容できる範囲で満たすことができない場合があります。</block>
  <block id="fe74c6bc72a7cff471befb07d7218feb" category="paragraph">SAPシステムをリストアする代わりに、別の修復システムで問題を分析して、システム内の論理エラーを修正する方法を推奨します。ルート原因分析には、ビジネスプロセスやアプリケーション所有者の関与が必要です。このシナリオでは、論理的破損が発生する前に格納されたデータに基づいて、修復システム（本番用システムのクローン）を作成します。リペアシステム内では、必要なデータをエクスポートし、本番システムにインポートできます。このアプローチでは、本番用システムを停止する必要はなく、最良のシナリオでは、データの損失だけでなく、ごくわずかなデータの損失も発生します。</block>
  <block id="ff74c5a8991cf91e9cf124b189bc2877" category="paragraph">リペアシステムを設定する際には、柔軟性とスピードが不可欠です。ネットアップのストレージベースのSnapshotバックアップでは、複数の整合性のあるデータベースイメージを使用し、NetApp FlexCloneテクノロジを使用して本番用システムのクローンを作成できます。ファイルベースのバックアップからリダイレクトされたリストアを使用して修復システムを設定する場合、FlexCloneボリュームは数時間ではなく数秒で作成できます。</block>
  <block id="7b0ea79aabb35accd10a6389af9d0d3b" category="inline-image-macro">この図は、FlexCloneテクノロジを使用してクローニングシステムから修復システムを作成する、ステップバイステップのプロセスを示しています。</block>
  <block id="7a11ff2d89142afadf2fbe0a94ecc400" category="paragraph">SnapMirrorを使用したストレージレプリケーションでは、RTOとRPOをリスクにさらすことなく、ディザスタリカバリのテストを実行できます。ディザスタリカバリテストは、データレプリケーションを中断することなく実行できます。非同期SnapMirrorと同期SnapMirrorのディザスタリカバリテストでは、ディザスタリカバリターゲットでSnapshotバックアップとFlexCloneボリュームを使用します。</block>
  <block id="ecec150056053bbf2793c30155015e60" category="paragraph">SAP LaMaは、テスト手順 全体のオーケストレーションに使用でき、ネットワークの遮断やホストのメンテナンスなどにも対応します。</block>
  <block id="cf485594ca520eaab221d7e9f1c35741" category="inline-image-macro">この図は、プライマリデータセンター、ローカルDRデータセンター、およびリモートDRデータセンターのネットアップストレージシステムの関係を示しています。同期SnapMirror関係と非同期SnapMirror関係の両方で接続されます。</block>
  <block id="2e979feafadb9bbdb7932ab43f8d549c" category="sidebar">Ansibleを使用したNetApp SAP Landscape Managementの統合</block>
  <block id="e2aad9960e8d21643cd0c96d6d0231cc" category="cell">nfsvers = 3、nolock、</block>
  <block id="9bb4ef49da8c49be50e8756f6e99e5fa" category="cell">nfsvers = 4.1、ロック</block>
  <block id="dae81ce43b95196ee53c797d1ddda090" category="cell">nfsvers = 3、nolock</block>
  <block id="fcb7778cf38a196128c87d1b6e20281e" category="paragraph">NetApp AFF AシリーズおよびAFF Cシリーズ製品ファミリーは、Tailored Data Center Integration（TDI；テーラードデータセンター統合）プロジェクトでSAP HANAとの使用が認定されています。</block>
  <block id="326f77b6d7cda2b57e0f8e89a8f89959" category="admonition">NetApp AFF CシリーズにはNetApp ONTAP 9.13.1以降が必要です</block>
  <block id="f7d09d43174d21d3203d6472d2543dc2" category="section-title">NetAppボリュームとアグリゲートの暗号化</block>
  <block id="381cfdf4e70ff7173296a764c78e97ae" category="paragraph">SAP HANAでは、NetApp Volume Encryption（NVE）とNetApp Aggregate Encryption（NAE）の使用がサポートされています。</block>
  <block id="5d10dd356a9d8604eaed291a9dfeb67e" category="section-title">NetAppボリュームとアグリゲートの暗号化</block>
  <block id="2976619a79e897d24427ec6796aa4a70" category="paragraph">ホストの自動フェイルオーバーを備えたSAP HANAマルチホストシステムを使用している場合は、<block ref="46649585ec21482ae2e5fcac30c7dcae" prefix=" " category="inline-code"></block> 次の表を参照してください。
これらのセクション内では、デフォルトの再試行間隔（10秒）を維持してください。</block>
  <block id="73d4ace7e434b8709f5a930ad845d6d6" category="paragraph">ホストの自動フェイルオーバーを備えたSAP HANAマルチホストシステムを使用している場合は、<block ref="46649585ec21482ae2e5fcac30c7dcae" prefix=" " category="inline-code"></block> 次の表を参照してください。これらのセクションでは、デフォルトの再試行間隔を 10 秒に設定します。</block>
  <block id="ba7dc8a883957fda819c429f468dc4d0" category="admonition">NetApp AFFおよびASA CシリーズにはNetApp ONTAP 9.13.1以降が必要です</block>
  <block id="b5816060ccee493fc8a2946c9d33de20" category="paragraph">NetApp Snapshotテクノロジを使用すれば、データベースのバックアップを数分で作成できます。</block>
  <block id="5cd519503ff0d358e76b5be6e9b7d14e" category="paragraph">Snapshot コピーではストレージプラットフォーム上の物理データブロックは移動されないため、 Snapshot コピーの作成に要する時間はデータベースのサイズに左右されません。また、 Snapshot テクノロジを使用しても、稼働中の SAP システムのパフォーマンスには影響しません。そのため、対話形式またはバッチでのアクティビティのピーク期間を考慮せずに、 Snapshot コピーの作成をスケジュールできます。SAPとネットアップのお客様は、通常、複数のオンラインSnapshotバックアップを1日に行うようにスケジュールを設定します。たとえば、一般的には6時間おきにバックアップを作成します。作成されたSnapshotバックアップは、通常、長期間保持するために低コストのストレージに移動したり、削除される前にプライマリストレージシステムに3~5日間保持されています。</block>
  <block id="30fb58b3c8613fe4e4ee034a17cad743" category="paragraph">オンデマンドのSnapshotバックアップ処理とオンデマンドのブロック整合性チェック処理を作成できます。</block>
  <block id="a3e7070d87d49d386e093fcdc7b5d5bd" category="paragraph">ディザスタリカバリの設定によっては（ログバックアップレプリケーションを使用するかどうかに関係なく）、 Snapshot バックアップに基づいて 2 つまたは 3 つの新しいボリュームを作成する必要があります。どちらの場合も、データの新しいボリュームと HANA 共有ボリュームを作成する必要があります。</block>
  <block id="fcdcb3404b408a63e224eaddd9d4da66" category="paragraph">ログバックアップデータもレプリケートする場合は、ログバックアップボリュームの新しいボリュームを作成する必要があります。この例では、データとログバックアップボリュームがディザスタリカバリサイトにレプリケートされています。以下の手順では、 Azure Portal を使用します。</block>
  <block id="5a6f556f9dd0e6d4a51b71e1c8e0c4c5" category="paragraph">SnapCenter は、アプリケーションと整合性のあるデータ保護を実現する拡張性に優れたユニファイドプラットフォームです。SnapCenter では一元的な管理と監視が可能ですが、一方で、アプリケーション固有のバックアップ、リストア、クローニングのジョブの管理を各ユーザに委譲することができます。SnapCenter を使用すれば、データベース管理者やストレージ管理者は、さまざまなアプリケーションやデータベースのバックアップ、リストア、クローニングの処理を 1 つのツールで管理できます。</block>
  <block id="7205bef5fdf399d26803842e613171b9" category="paragraph">SnapCenter は、ネットアップのデータファブリック内のすべてのエンドポイントのデータを管理します。SnapCenter を使用して、オンプレミス環境間、オンプレミス環境とクラウド間、およびプライベートクラウド、ハイブリッドクラウド、パブリッククラウド間でデータをレプリケートできます。</block>
  <block id="99aee71b2e977cb3ae318b3974922009" category="paragraph">非データボリュームのバックアップは、SnapCenter とSAP HANAプラグインに統合された機能です。</block>
  <block id="b9ddafc817b66c2009ab0b655b47ffdb" category="paragraph">データベースインストールリソースと必要なログが残っていれば、データベースデータボリュームを保護して特定の時点にSAP HANAデータベースをリストアおよびリカバリするだけで十分です。</block>
  <block id="6f785e59ccbb0faf46940f1b40c97679" category="paragraph">SnapCenter は、ネットアップのデータファブリック内のすべてのエンドポイントのデータを管理します。SnapCenterを使用して、オンプレミス環境間、オンプレミス環境とクラウド間、プライベートクラウド、ハイブリッドクラウド、パブリッククラウド間でデータをレプリケートできます。</block>
  <block id="e2922c15d6a12ab190ba48a18a884e5b" category="paragraph">ストレージコネクタは、フェイルオーバー機能を備えたマルチホスト環境でのみ必要です。マルチホスト構成では、 SAP HANA に高可用性機能が提供されるため、 SAP HANA データベースホストはスタンバイホストにフェイルオーバーできます。</block>
  <block id="e7e858cb5e5ec45f7483826c4922e4a2" category="paragraph">この場合、障害が発生したホストの LUN には、スタンバイホストからアクセスして使用されます。ストレージコネクタは、一度に 1 つのデータベースホストだけがストレージパーティションにアクティブにアクセスできるようにするために使用されます。</block>
  <block id="db25c2a4ae3ce67c8d33eb9795cd39de" category="paragraph">SAP HANA 2.0 SPS4 以降では、追加のデータボリュームパーティションを設定できます。これにより、 SAP HANA テナントデータベースのデータボリュームに 2 つ以上のボリュームを構成することができます。単一ボリュームのサイズやパフォーマンスの制限を超えて拡張することもできます。</block>
  <block id="bc30fa07361c376b0079c00d85091f1e" category="paragraph">SAP HANA ホストは、冗長 10GbE 以上のネットワークインフラを使用して、ストレージコントローラに接続されます。SAP HANA ホストとストレージコントローラ間のデータ通信は、 NFS プロトコルに基づいています。</block>
  <block id="1ffe19554e4db8e2355d91449e77fa5a" category="paragraph">スイッチまたはネットワークインターフェイスカード（ NIC ）に障害が発生した場合に、耐障害性に優れた SAP HANA ホスト / ストレージ接続を実現するために、冗長スイッチングインフラを推奨します。スイッチは、ポートチャネルを使用して個々のポートのパフォーマンスを集約し、ホストレベルでは単一の論理エンティティとして認識される場合があります。</block>
  <block id="93f305eb7fa597fc876f2e0744abf06b" category="paragraph">このシステム更新処理は、インフラ、データベース、アプリケーションの各レイヤ上で実行される複数のタスクで構成されます。自動化のレベルによっては、数日かかる場合があります。</block>
  <block id="b7de930c0dd2d22c43e147a8da62d970" category="admonition">パフォーマンステストによると、<block ref="6ad27604f562c1a2600540bd7f1094d4" prefix=" " category="inline-code"></block> 特にデータボリュームに対して良好な読み取り結果が得られます。ログへの書き込みは、次のようなセッション数が少ないことでメリットが得られる場合があります。<block ref="b3e16d81f1f84d087c55c1815a58a64c" prefix=" " category="inline-code"></block>。「nConnect」オプションを使用すると、共有ボリュームにもメリットがあります。NFS サーバからの最初のマウント（ IP アドレス）では、使用されるセッションの量が定義されることに注意してください。同じIPアドレスにさらにマウントしても、nConnectに別の値が使用されていても、この値は変更されません。</block>
  <block id="d7d1e0b01aa98fdaaa388843234520d5" category="admonition">ONTAP 9.8およびSUSE SLES15SP2以降、またはRed Hat RHEL 8.4以降では、ネットアップはNFSv4.1のnConnectオプションもサポートしています。</block>
  <block id="075d23786d3ed7499b8d563bd41298ef" category="admonition">。<block ref="68727786e22b015e3091f141273c8e9a" prefix=" " category="inline-code"></block> ファイルシステムはデータベースホストごとに異なります。次の例は、<block ref="7b5a8b70c72ff791a6c938600aa48468" prefix=" " category="inline-code"></block>。</block>
  <block id="61dc8147d5af95ff65e5beeeceb8d669" category="cell">NFSv4.xセッションスロットの数を変更する
  任意。</block>
  <block id="3a61ec547beefb69b89d0843ea4c03bd" category="cell">詳細設定
nfs modify -vserver hana-v4.x -session-num-slots &lt;value&gt;
管理者を設定</block>
  <block id="7de8b31e6597c345c3a3966bd41f80a2" category="admonition">パフォーマンステストによると、<block ref="6ad27604f562c1a2600540bd7f1094d4" prefix=" " category="inline-code"></block> データボリュームの読み取り結果が良好です。ログへの書き込みは、次のようなセッション数が少ないことでメリットが得られる場合があります。<block ref="b3e16d81f1f84d087c55c1815a58a64c" prefix=" " category="inline-code"></block>。共有ボリュームには、「nConnect」オプションを使用することもできます。NFS サーバからの最初のマウント（ IP アドレス）では、使用されるセッションの量が定義されることに注意してください。同じIPアドレスにさらにマウントしても、nConnectに別の値が使用されていても、この値は変更されません。</block>
  <block id="093a45d87b6b8692e6c9a73c1a04c137" category="doc">追加情報およびバージョン履歴の参照先</block>
  <block id="e66b5a3c6799dcc5dd4039a58085fb38" category="cell">2017年9月</block>
  <block id="3258056add985fc8ba4192b41052b298" category="list-text">「高度な設定とチューニング」の項を追加しました。</block>
  <block id="0974990f1aa38ac1b1e2c8f4400eccac" category="list-text">微修正。</block>
  <block id="74620215d33d2f9ad06a873cdf9e8acc" category="cell">2018年3月</block>
  <block id="1a2873a5ec0a90d66c68fa26956cbcbd" category="list-text">SnapCenter 4.0を対象としたアップデート：
新しいデータボリュームリソース
Single File SnapRestore処理の向上</block>
  <block id="d835981d77534f5f20446d4648ad7e5b" category="cell">2020年1月</block>
  <block id="26d5841054625c4dbc06dd193b24fcb1" category="list-text">「 SnapCenter の概念とベストプラクティス」の項を追加。</block>
  <block id="bc72571f701d3a6cec52ab446894c3c2" category="list-text">SnapCenter 4.3を対象としたアップデート：
自動検出
リストアとリカバリの自動化
HANA MDCの複数テナントをサポート
タンイツテナントノリストアシヨリ</block>
  <block id="ca82c7bf0a12e1bd7623c916688916ff" category="cell">2020 年 7 月</block>
  <block id="519da123e1e4d0cb2656dd6dc21b7cda" category="list-text">マイナーな更新と修正：
SnapCenter 4.3.1でのNFSv4のサポート
SSL通信の設定
IBM Power上でのLinux用の中央プラグインの導入</block>
  <block id="0e347c50a0d60b8f46cb8c37cd3b5088" category="cell">2020年11月</block>
  <block id="1ec08d2f146139e95c0cb9a18141800f" category="list-text">HANA 2.0 SPS5 に必要なデータベースユーザー権限を追加。</block>
  <block id="0933d4dd2ad52707372be6b67b620890" category="cell">2021年5月</block>
  <block id="e43d99222de98514f5024501d09b7a47" category="list-text">SSL hdbsql 設定セクションを更新しました。</block>
  <block id="2e7bd301fd3aa711e492f5d75ba83f00" category="list-text">Linux LVM のサポートが追加されました。</block>
  <block id="248f830b158797f9c038ea35ea266b89" category="cell">2021年8月</block>
  <block id="0c8b3ad778d3f01ad1babbee4416272f" category="list-text">自動検出を無効にする設定の概要 が追加されました。</block>
  <block id="9209b4ae424c71673a607557c64f7eb8" category="cell">2022年2月</block>
  <block id="4528f584aae52b626f3142db1586b578" category="list-text">SnapCenter 4.6 に対応したマイナーアップデートと、 HANA システムレプリケーション対応 HANA システムの自動検出サポート。</block>
  <block id="b56a5394775a9f077c12cb3e770d913c" category="cell">2022年5月</block>
  <block id="abb14d21829ba186172f6e1d0b64b55b" category="cell">2023年1月</block>
  <block id="dfd02aef9802f4824ead7c08b8f81f1f" category="cell">初版リリース</block>
  <block id="36098c0d1c3de71d8727b1543bace633" category="cell">2022年4月</block>
  <block id="95798f037b7bacec7599a19423a6bb64" category="cell">2018 年 2 月</block>
  <block id="8e070ffcf4d959eabcd3559b9bb17ec6" category="sidebar">追加情報 およびバージョン履歴の参照先</block>
  <block id="2c7a6a1ad3b3855b3dd5766cc2c1b15c" category="summary">このセクションでは、BlueXPを使用してSAP HANAのバックアップをリストアする方法について説明します。</block>
  <block id="8513aa8ec75c0057744a444420581eac" category="doc">SAP HANA BlueXPのバックアップのリストア</block>
  <block id="630146410475bf00902dbc3588f48b64" category="paragraph">バックアップからのリストアは、オンプレミスのNetApp ONTAPベースのストレージシステムまたはクラウド内のNetApp CVOに対してのみ実行できます。リストアを実行するには、次の手順を実行します。</block>
  <block id="ae9c703fb18f8c682d52518823ea9112" category="list-text">BlueXP UIで 、*[保護]  *&gt;  *[バックアップとリカバリ]*&gt;*[アプリケーション]*をクリックし、[ハイブリッド]を選択します。</block>
  <block id="16365f9a8d0b7866f7271510a28d1db2" category="list-text">[Filter by]  *フィールドで、フィルタ* Type *を選択し 、ドロップダウンから * HANA *を選択します。</block>
  <block id="47abe672471325a3aa63fcd85f6e3367" category="list-text">NAS環境の場合は、オブジェクトストアからリストアするボリュームのエクスポート先となるホストのFQDNまたはIPアドレスを指定します。</block>
  <block id="831b20d8b0ff4f1e50aecadcdcdc885d" category="list-text">SAN環境の場合、オブジェクトストアからリストアするボリュームのLUNをマッピングするホストのイニシエータを指定します。</block>
  <block id="eee7cd91c87d431eb526192fb8d8f8fa" category="list-text">スナップショットがアーカイブストレージにある場合は、アーカイブストレージからデータをリストアする優先度を選択します。</block>
  <block id="c309fef296cf37f3a835cb24529d8905" category="list-text">ソースストレージに十分なスペースがないか、ソースストレージが停止している場合は 、*[ストレージの場所を変更]*を選択します。</block>
  <block id="7d7bd9e2f6791a41e19d3f4c2cfbd112" category="list-text">[ストレージの場所の変更]*を選択した場合は、デスティネーションボリュームにサフィックスを追加できます。このチェックボックスをオンにしていない場合、デフォルトでは  デスティネーションボリュームに*_restore *が追加されます。  [次へ]*をクリックします。</block>
  <block id="09fbcde15932165bde251a10dbf240e4" category="list-text">[ストレージの場所を変更]を選択した場合は、オブジェクトストアからリストアするデータを格納する代替ストレージの場所の詳細を[ストレージマッピング]ページで指定し、*[次へ]*をクリックします。</block>
  <block id="e5c7ac753b7a6121d9687b3fc4c66f25" category="summary">このセクションでは、作業環境のセットアップ方法、SnapCenterの設定方法、およびBlueXPでSAP HANAバックアップを設定してアクティブ化する方法について説明します。</block>
  <block id="bba044fc5fd2c6b6b93f83b61a607e30" category="doc">BlueXP Backup and Recovery for SAP HANAの設定</block>
  <block id="84e76e0953f8a5f72d754729d1eaf1ae" category="section-title">BlueXPの作業環境の作成</block>
  <block id="210e8952dc88c73e56d56a168cfe0616" category="list-text">左側のメニューで、*[ストレージ]*&gt;*[キャンバス]*&gt;*[マイ作業環境]を選択します。</block>
  <block id="6689e50f5e4a08328fa676a7ebb07f17" category="section-title">オンプレミスのストレージシステムとオブジェクトストレージバケット間の関係を作成</block>
  <block id="eab79ca7fb49f80130fae7b1656f7ebc" category="inline-link">Amazon S3のゲートウェイエンドポイント- Amazon Virtual Private Cloud</block>
  <block id="4513d4d932152177142c02ca2a383afc" category="paragraph">最初のボリュームのバックアップを作成するには、次の手順を実行します。</block>
  <block id="690e7cac4bb20bc16d03d9e8c2976d36" category="section-title">SnapCenterでのSAP HANAシステムリソースの設定</block>
  <block id="522c073cfbc968ed21bb5b8292358b24" category="section-title">BlueXP作業環境へのSnapCenterの追加</block>
  <block id="63cebe46588c644def8c8d7ad33d7579" category="list-text">左側のメニューで、*[保護]*-&gt;*[バックアップとリカバリ]*-&gt;*[アプリケーション]*を選択します。</block>
  <block id="5a367c49e14aa13d1f3d9dbbc659e2ae" category="section-title">アプリケーションバックアップのバックアップポリシーの作成</block>
  <block id="01f80398f488785a735c649b98cb461b" category="section-title">Cloud Backup for ApplicationsによるSAP HANAデータベースの保護</block>
  <block id="a0e8aadf9440319ad134e14b8cd7944e" category="paragraph">環境によっては、SnapMirrorソースの既存のスケジュール設定を削除しなければならない場合があります。そのためには、ソースONTAPシステムで次のコマンドを実行します。_snapmirror modify -destination-path &lt;hana-cloud-svm&gt;：&lt;SID_data_mnt00001&gt;_ copy -schedule ""_。</block>
  <block id="3b6e263c9f3e6b5ae82e2961e7499aa8" category="summary">このテクニカルレポートでは、NetApp BlueXP Backup NAD Recovery for Applicationを使用したSAP HANAのデータ保護のベストプラクティスを紹介します。このドキュメントでは、概念、構成に関する推奨事項、処理のワークフロー（設定、バックアップ処理など）について説明します。 およびリストア処理</block>
  <block id="b9a6a76ee21e4b2e63f002e8171e92cb" category="doc">BlueXP Backup and Recovery for SAP HANA -バックアップ先としてのクラウドオブジェクトストレージ</block>
  <block id="b5810ff76e2c858c26eb34fd554d4cd5" category="paragraph">このドキュメントでは、NetApp BlueXPを使用してオンプレミスからクラウドベースのオブジェクトストアへのデータ保護のためにSAP HANAをセットアップおよび設定する方法について説明します。このコースでは、解決策のBlueXPのバックアップとリカバリについて説明します。この解決策は、NetApp Snap Centerを使用してオンプレミスのSAP HANAバックアップ解決策を強化したもので、コスト効率に優れた方法でSAP HANAバックアップをクラウドベースのオブジェクトストレージに長期アーカイブできます。また、オブジェクトストレージをAWS Glacier/Deep Glacierなどのアーカイブストレージに階層化するオプションも用意されています。 Microsoft Azure Blob Archive、GCP Archive Storageの略。</block>
  <block id="efabc7b5ad8cc75eaf149a7744db8028" category="inline-link">TR-4614：『SAP HANA backup and recovery with SnapCenter』（netapp.com）</block>
  <block id="c81a8bcb625915f9445bc27152702a6c" category="section-title">BlueXPのバックアップとリカバリのアーキテクチャ</block>
  <block id="b2bf2bbf7e6b4629b50b4af1483af0ba" category="section-title">インストールと設定の手順の概要</block>
  <block id="f3cf1278a15cf0b578a48d8ef6a60523" category="inline-link">SnapCenterの設定（netapp.com）</block>
  <block id="a63540c81089e8aba203a4ec3fca1e34" category="list-text">NetApp BlueXPコンポーネントのインストールと設定</block>
  <block id="60cb8be07c4c55cabf60de71b7a9b4b2" category="paragraph">データ保護解決策の初期セットアップ時に1回実行する必要があります。</block>
  <block id="d695b2f7d2eff56585ac33b59ae50cde" category="list-text">NetApp SnapCenterでの準備手順</block>
  <block id="6d95f48ab62edee63c2cc9fda6615760" category="paragraph">保護が必要なSAP HANAデータベースごとに実行する必要があります。</block>
  <block id="c24f27d2fb45abb4ddc4c6dac6b3f9b9" category="list-text">BlueXPのバックアップとリカバリの設定手順</block>
  <block id="0e7839906008338e5f608eca614e1cc7" category="section-title">NetApp BlueXPハイブリッドアプリケーションバックアップのインストールと設定</block>
  <block id="9293673edeb2321146de2dbe903787cc" category="inline-link">オンプレミスアプリケーションデータの保護| NetAppドキュメント</block>
  <block id="1b21781469d6b56757c78d09d90f83be" category="paragraph">NetApp BlueXPのコンポーネントのインストールと設定については、を参照してください<block ref="36b413e5ecd6dd30fe4575aa917373d9" category="inline-link-rx"></block>。</block>
  <block id="c3c6e6b1d05fc3c3c73b5ab9af3ea3ee" category="list-text">BlueXPにサインアップし、次のURLでNetAppアカウントを設定してください：<block ref="7dd2072632295c5a9abd61523c46bd40" category="inline-link-rx"></block>。</block>
  <block id="44de63d2b4a3805e8a143a8425e912c6" category="inline-link">コネクタの詳細| NetAppのドキュメント</block>
  <block id="bc9a4ad171b5071191568c8006c63dc6" category="list-text">BlueXP Connectorを環境に導入します。概要は、<block ref="a6131392110983029d1dff188cde678b" category="inline-link-rx"></block>。</block>
  <block id="6691a23f272bb7c1d702c8963a326dc0" category="list-text">BlueXPでCloud Backupライセンスを追加/購入：<block ref="57c4a53c7a746551566c6506aa924ffc" category="inline-link-rx"></block>。</block>
  <block id="d497834786aa54c08eaf2f867588d576" category="list-text">SnapCenterでSAP HANAシステムリソースを設定します。</block>
  <block id="465f4a123cd3df663bb4b5d781e3755f" category="list-text">作業環境にSnap Centerを追加します。</block>
  <block id="87a323c396d1f0b11c5c63017a081d0a" category="list-text">環境に応じたポリシーを作成します。</block>
  <block id="a33d9e49823debc4eac9a3f6fed5ed4f" category="list-text">SAP HANAシステムを保護</block>
  <block id="b1708148488f2ff73841c4df62f35be1" category="doc">追加情報とバージョン履歴</block>
  <block id="5d2dace1bbb099eb2c0c668ec3e8c3b6" category="list-text">NetApp BlueXPバックアップ/リカバリの製品ドキュメント+
<block ref="2337d886e4f2f876275339e16f80eafd" category="inline-link-rx"></block></block>
  <block id="d7a15f16d93378f9428254d47703abd2" category="cell">2024年3月</block>
  <block id="c9dd6bad4c7d561872f2e2d498a990bf" category="inline-link">Interoperability Matrix Tool （ IMT ）</block>
  <block id="c5358f17fd6fd13a64169fc38a03495f" category="paragraph">を参照してください<block ref="2a186a9053db553d8a98e2d5f86d7002" category="inline-link-rx"></block> NetApp Support Siteで、本ドキュメントに記載されている製品や機能のバージョンがお客様の環境でサポートされるかどうかを確認してください。NetApp IMT には、ネットアップがサポートする構成を構築するために使用できる製品コンポーネントやバージョンが定義されています。サポートの可否は、お客様の実際のインストール環境が公表されている仕様に従っているかどうかによって異なります。</block>
  <block id="ca996b238b1f32bd7d6b941eb3464b17" category="sidebar">BlueXP Backup and Recovery for SAP HANA -概要</block>
  <block id="deac54b4ceeb072a80124bd022d78294" category="sidebar">SAP HANA BlueXPのバックアップのリストア</block>
  <block id="1605c9a8e838f67f2b16a4053e1e045d" category="paragraph">このテクニカルレポートでは、AWS S3オブジェクトストレージを使用したBlueXPのSAP HANA向けバックアップ/リカバリ機能を使用して、オンプレミスのSnapCenterベースのSAP HANAバックアップ/リカバリ解決策を強化する方法のみを説明します。AWS S3ではなくMicrosoft AzureとGCPオブジェクトストレージを使用したセットアップと設定は似ていますが、本ドキュメントでは説明しません。</block>
  <block id="dce65a9e030d5dbde345a046d948f2bf" category="paragraph">BlueXPのバックアップとリカバリは、NetAppオンプレミスストレージで実行されるアプリケーションにクラウドでデータ保護機能を提供するSaaS解決策です。NetAppストレージを使用して、アプリケーションと整合性のある効率的なポリシーベースのSAP HANA保護を実現します。さらに、BlueXPのバックアップとリカバリ機能では、一元的な管理と監視が可能になると同時に、アプリケーション固有のバックアップとリストア処理の管理もユーザに委譲できます。</block>
  <block id="ef7bad3edebf99f3bb50f4d8bbaa37d6" category="paragraph">BlueXPのバックアップとリカバリは、NetApp BlueXP内でSaaSとして実行され、フレームワークとUIを活用します。BlueXP作業環境フレームワークを使用して、NetApp ONTAPベースのオンプレミスストレージとNetApp SnapCenterサーバのクレデンシャルを設定、管理します。</block>
  <block id="284528a6422c1ab87246e51dcb6b3ae5" category="paragraph">BlueXP Connectorは、お客様の仮想ネットワーク内に導入する必要があります。サイト間VPN接続など、オンプレミス環境とクラウド環境を接続する必要があります。NetApp SaaSコンポーネントとお客様の環境の間の通信は、コネクタを介してのみ行われます。コネクタは、ONTAPおよびSnapCenter管理APIを使用してストレージ処理を実行しています。</block>
  <block id="3df2c2f8f80654c02cea27e8354aee2a" category="paragraph">オンプレミスストレージとクラウドバケット間のデータ転送は、保存中のAES 256ビット暗号化、転送中のTLS / HTTPS暗号化、顧客管理キー（CMK）のサポートによってエンドツーエンドで保護されます。[+]
バックアップされたデータは、書き換えや削除が不可能なWORM状態で保存できます。オブジェクトストレージからデータにアクセスする唯一の方法は、NetApp CVOを含むNetApp ONTAPベースのストレージにデータをリストアすることです。</block>
  <block id="6cb139093b769a68f6abbb55400df4d8" category="list-text">オンプレミスストレージを追加して、BlueXPでNetAppオンプレミス環境とクラウドデスティネーションの作業環境を作成します。</block>
  <block id="49d37c51268190a8f072cf6f400be18f" category="list-text">オンプレミスストレージの新しいオブジェクトストア関係をAWS S3バケットに作成します。</block>
  <block id="6cf9c506a56175d20b049edfdc810cec" category="paragraph">社内ストレージシステムを作業環境に追加します。</block>
  <block id="35fb81d7bc669beabd5887c5308a5374" category="paragraph">オンプレミスストレージとS3バケットの関係は、ボリュームのバックアップを作成するか、アプリケーションのバックアップをアクティブ化することで確立されます。既存のサイト間VPNを使用してオンプレミスからS3へデータを転送する場合は、VPCエンドポイントを使用する必要があるため、ボリュームバックアップを使用してオンプレミスストレージとS3バケット間の関係を作成する必要があります。[+]
このドキュメントの作成時、アプリケーションバックアップワークフローでは、S3バケットにアクセスするためのVPCエンドポイントの選択は提案されていません。[+]
を参照してください<block ref="7f3b31b88f0e42104578f538777bc3e6" category="inline-link-rx"></block> VPC内でS3のVPCエンドポイントをセットアップする方法</block>
  <block id="9c485d8d0a0f2d60633001b05d342eed" category="doc">『SAP HANA on NetApp FAS systems with NFS Configuration Guide』</block>
  <block id="b7bda169ccba06e8cbcf02ba0fab5928" category="doc">『SAP HANA on NetApp FAS Systems with Fibre Channel Protocol』構成ガイド</block>
  <block id="a56f5f8ccd94f38be4e8a0f1faf81823" category="doc">『SAP HANA on NetApp AFF Systems with NFS』-構成ガイド</block>
  <block id="a004afbb2c9ff596c570f05cacd1d651" category="section-title">NetApp FlexGroupボリューム</block>
  <block id="cfb6b0dd52bfc75b4646448807e41154" category="paragraph">NetApp FlexGroup Volumeの使用はSAP HANAではサポートされていません。SAP HANAのアーキテクチャ上、FlexGroup Volumeを使用してもメリットはなく、パフォーマンスの問題が発生する可能性があります。</block>
  <block id="db5a8e62a598aa08b2923f3210fec1a3" category="summary">本ドキュメントでは、NetApp®Snapshot™およびFlexClone®テクノロジをAlpaca自動化ワークフローに統合する方法について説明します。</block>
  <block id="e7ffc6df7629952bee1f92657458fbac" category="doc">SB-4293：AlpacaとNetApp SnapCenterによるSAPシステムのコピー、更新、クローニングのワークフローの自動化</block>
  <block id="c0c4b60d27032c028c91440e9d3be949" category="section-title">解決策の概要</block>
  <block id="86418a2229dc17869377db8ccf58db56" category="paragraph">SAPのシステムとソリューションの運用は非常に複雑です。ただし、SAPを使用している企業では、システムとサービスがビジネスプロセスの中心となります。SAPシステム管理者は、システムのコピーや更新などの日常的な運用タスクを自動化することで、より多くのシステムをより少ない労力で管理し、再現可能な結果を生み出し、人為的ミスを減らすことができます。</block>
  <block id="fbcecadd64701c98813e5bc5accb7a85" category="paragraph">ランドスケープをプロアクティブに自動化—Cloud and Anywhere（Alpaca）スイートは、SAPランドスケープ全体にわたる詳細な監視と監視を可能にする包括的な管理インターフェイスです。Alpacaは、SAPインフラの運用を合理化、迅速化し、最適な可用性と透明性を確保します。インフラを含む環境全体を管理するための包括的なツールを提供し、サービスの中断、ジョブの停止、輻輳などの異常をプロアクティブに通知します。このスイートは、マルチクラウドシナリオを含め、オンプレミス、ハイブリッド、オールクラウドの各環境でシームレスに動作し、あらゆるインフラへの適応性を確保するように設計されています。このモジュールベースのフレームワークは、SAPの標準的な管理タスクと通常の管理タスク、および停止時のフェイルオーバーなどの複雑なシナリオを自動化します。 管理者/専門家、オペレーター、マネージャーは、高度な制御と自動化をこれらの専門家に提供します。</block>
  <block id="9d632cae336dd853f201c88c832e2cb7" category="inline-image-macro">Alpacaプラットフォームの図</block>
  <block id="7323cb77cd037c30e7a9a2a0dc1eacb9" category="paragraph">このドキュメントでは、Snapshotベースのバックアップのオーケストレーション、リストアの実行、FlexCloneボリュームの作成を行うツールであるNetApp SnapCenter®とAlpacaをどのように統合するかについて説明します。この統合により、SAP管理者は、SAPシステムの日常的な運用タスクを大幅に高速化できます。NetAppのSnapshot、FlexClone、SnapRestore®テクノロジは、ポインタベースのストレージテクノロジであるため、バックアップ、リストア、クローニングの処理を高速化します。このアプローチは高速であり、（既存データではなく）新規データや変更されたデータだけをストレージメディアに書き込む必要があるため、クローン処理中のストレージオーバーヘッドも削減されます。これは、オンプレミスのNetAppストレージシステムであっても、大手クラウドプロバイダ3社のいずれかにあるNetAppストレージソリューションであっても当てはまります。</block>
  <block id="bf8dd94f74c5878ba969abeeef0286d1" category="section-title">対象者</block>
  <block id="a34a4fdc22dc4d566081e48a846fbf5a" category="paragraph">このドキュメントは、SAPシステムのコピーを手動で実行したことがあり、Alpacaを使用してこの作業を自動化したいSAPシステム管理者を対象としています。NetApp SnapCenterによってオーケストレーションされたNetAppのSnapshotテクノロジとFlexCloneテクノロジをAlpacaのワークフローと組み合わせることで、SAPシステムのコピーを完全に自動化する時間を短縮できます。</block>
  <block id="3d308ecb8420d2579b7d359b7ad94bb5" category="paragraph">SAPシステムのコピーは、SAPシステムのクローニング、SAPシステムのコピー、SAPシステムの更新という3つのプロセスの同義語としてよく使用されます。ワークフローとユースケースが異なるため、これらの処理を区別することが重要です。</block>
  <block id="622b88e8f99c2f21460dccf5dc97f1d7" category="list-text">* SAPシステムのクローン*。SAPシステムクローンは、ソースSAPシステムの同一のクローンです。SAPシステムクローンは、一般に論理的な破損に対処したり、ディザスタリカバリのシナリオをテストしたりするのに使用されます。システムのクローニング処理では、ホスト名、インスタンス番号、およびSecure Identifier（SID；セキュア識別子）は同じままです。そのため、ターゲットシステムに適切なネットワークフェンシングを確立して、本番環境と通信しないようにすることが重要です。</block>
  <block id="da4f81a65278754f8234bd6f906c0e40" category="inline-image-macro">SAPシステムのクローンを示す図</block>
  <block id="c363bfedad13dec17e913676bcbc4371" category="list-text">* SAPシステムのコピー*。SAPシステムのコピーは、ソースSAPシステムのデータを使用して新しいターゲットSAPシステムをセットアップすることです。たとえば、本番システムのデータを含む追加のテストシステムを新しいターゲットシステムにすることができます。ホスト名、インスタンス番号、SIDは、ソースシステムとターゲットシステムで異なります。 新しいシステムはソースシステムから分離されていません。</block>
  <block id="0317fd7042e1a3bbd1897d5d7f7a2cc6" category="inline-image-macro">SAPシステムのコピーを示す画像</block>
  <block id="0820369f4405acedd8305fd09350a9e9" category="list-text">* SAPシステムの更新*。SAPシステムの更新とは、既存のターゲットSAPシステムをソースSAPシステムのデータで更新することです。ターゲットシステムは通常、サンドボックスシステムなどのSAPトランスポート環境の一部であり、本番システムのデータで更新されます。ソース・システムとターゲット・システムでは、ホスト名、インスタンス番号、およびSIDが異なります。</block>
  <block id="a5c1cb5f56a681e17c4285d9eccac7b1" category="inline-image-macro">SAPシステムの更新を示す図</block>
  <block id="444724efd6db7acaf8cd0d5c32fcfd71" category="paragraph">これらは3つの異なるユースケースですが、データ管理プロセスは変わりません。3つのユースケースでは、同じデータ管理テクノロジ、NetApp SnapshotとFlexCloneを使用しています。</block>
  <block id="8f4c7939e8a42e023939df947aba54f6" category="section-title">解決策テクノロジ</block>
  <block id="e664b92ee975da28ca5e768b9a88dd26" category="paragraph">ソリューション全体は、次の主要コンポーネントで構成されています。</block>
  <block id="2a4c6f6c82937e9f31385452f76b0a8d" category="list-text">SnapCenterエージェントとSnapCenterデータベースプラグインがインストールされたSAPソースシステム</block>
  <block id="eafc29f547c05517926b01ee4b438905" category="list-text">SnapCenterエージェントとSnapCenterデータベースプラグインがインストールされたSAPターゲットシステム</block>
  <block id="9ab707fdba87d81c6d7c3e949c63b277" category="list-text">SAPソースシステムとSAPターゲットシステムが構成されたAlpacaシステム</block>
  <block id="ee9a1ac4f9e7a6bec1deed8ff9c2f8fb" category="list-text">NetApp SnapCenter Server</block>
  <block id="5d0a666f7f8f7d38d3fc377ab72d2ac5" category="list-text">NetAppストレージシステム：</block>
  <block id="55e0c6f2677f63db92df47ec0b324167" category="list-text">オンプレミスの物理ハードウェア：AFF-A、AFF-C、ASA-A、ASA-C、FASシリーズ</block>
  <block id="251aab5f02e944d9704621e71f85578b" category="list-text">オンプレミスのSoftware-Defined Storage：ONTAP®Select</block>
  <block id="f01a2a485dbdb94ed94e78580907767c" category="list-text">NetAppクラウドストレージ：</block>
  <block id="9a5b3a6c19cc79e8803fb4a381f09917" category="list-text">Cloud Volumes ONTAP for AWS、Google Cloud、Azure</block>
  <block id="7450cfde7058dc5e1f7909d0280fd7ae" category="list-text">Azure NetApp Files</block>
  <block id="4d82a1ec1af02725042c8c785564ee7a" category="list-text">NetApp ONTAP 対応の Amazon FSX</block>
  <block id="12237a5e9a92287b4283682895d22d2f" category="paragraph">次の図は、Alpacaサーバ、NetApp SnapCenterサーバ、NetAppストレージシステム、SAPソースシステム、SAPターゲットシステムを示しており、すべてがどのように統合されているかを示しています。その目的は、SnapCenter REST APIを使用して統合を可能な限り柔軟にし、既存のコンポーネント内ですでに行われている設定作業を最大限に再利用できるようにすることです。</block>
  <block id="bf9bdab57c82171f2cc9bcebdc37b2c2" category="section-title">ユースケースの概要</block>
  <block id="ae1c63d0fd8dbf1fb4e91fd0923187d9" category="paragraph">テストやトレーニングを目的として、ソースシステムのデータをターゲットシステムで利用できるようにする必要があるシナリオはいくつかあります。これらのテストシステムとトレーニングシステムは、ソースシステムのデータで定期的に更新して、テストとトレーニングが最新のデータセットで確実に実行されるようにする必要があります。このようなシステム更新処理は、インフラ、データベース、アプリケーションの各レイヤでの複数のタスクで構成され、自動化のレベルによっては数日かかることがあります。</block>
  <block id="18636c25be7e0e796a8ec39fe4f0c60e" category="paragraph">運用を高速化し、タスクを自動化し、インフラ、データベース、アプリケーションレベルでの人為的ミスを排除するために、Alpaca Workflowsを使用できます。この統合では、ソースシステムからターゲットシステムにバックアップをリストアするのに時間がかかり、リソースを大量に消費しますが、その代わりにNetAppのSnapshotテクノロジとFlexCloneテクノロジを使用します。データベースのスピンアップに必要なすべてのタスクが、数時間ではなく数分で完了します。クローニングプロセスに要する時間はデータベースのサイズに左右されないため、非常に大規模なシステムでも数分で作成できます。Alpacaは、SAPの後処理側だけでなく、オペレーティングシステムやデータベースのレベルでもタスクを自動化することで、実行時間をさらに短縮します。</block>
  <block id="8ca12d6eeda659345e54817d871b4153" category="paragraph">次の図は、自動化を使用すると運用効率が向上する可能性があることを示しています。</block>
  <block id="19a6f9f39008e36ec42310a1697de210" category="inline-image-macro">自動化を使用すると運用効率が向上する可能性があることを示す画像</block>
  <block id="5005b13528d942f6d5a5d831e88ad106" category="section-title">テクノロジコンポーネントの統合</block>
  <block id="3b6949e0ff3c710337d9cd603b9c2515" category="paragraph">AlpacaワークフローへのSnapCenterの実際の統合は、シェルスクリプトを使用してNetApp SnapCenter REST APIにアクセスすることで構成されています。このREST APIベースの統合では、SAPソースシステムのSnapshotコピーが作成され、FlexCloneボリュームが作成されてSAPターゲットシステムにマウントされます。ストレージ管理者やSAP管理者は、SnapCenterによってトリガーされ、SnapCenterエージェントによって実行されるスクリプトを開発して、日常的な運用タスクを自動化する方法を知っています。シェルスクリプトを介してSnapCenterタスクをトリガーするこの疎結合アーキテクチャにより、Alpacaをエンドツーエンドの自動化のワークフローエンジンとして使用することで、既存の自動化手順を再利用して目的の結果を迅速に達成することができます。</block>
  <block id="3ca92e57dea12993b0c6ac16e5820353" category="paragraph">AlpacaとNetAppのデータ管理テクノロジを組み合わせることで、SAPシステム管理に関連する最も複雑で時間のかかるタスクに必要な時間と労力を大幅に削減できる強力なソリューションを提供します。また、この組み合わせは、人為的ミスがシステム間で引き起こす構成のずれを回避するのにも役立ちます。</block>
  <block id="6bf71f730c6c54b2134e90f286791cc7" category="paragraph">システムの更新、コピー、クローン、ディザスタリカバリのテストは非常に機密性の高い手順であるため、このようなソリューションを実装することで貴重な管理時間を節約できます。また、基幹業務担当者がSAPシステム管理者に持つ信頼を強化することもできます。トラブルシューティングにかかる時間をどれだけ節約できるか、テストやその他の目的でシステムをコピーするのがどれだけ簡単かがわかります。これは、ソースシステムとターゲットシステムの運用場所（オンプレミス、パブリッククラウド、ハイブリッドクラウド、ハイブリッドマルチクラウド）に関係なく当てはまります。</block>
  <block id="9c87573265b253410a84d81b471a29e1" category="paragraph">このドキュメントに記載されている情報の詳細については、次のドキュメントおよびWebサイトを参照してください。</block>
  <block id="7c80105b450d2a7097856f0c1a47f684" category="inline-link-macro">アルパカ</block>
  <block id="daf59c2df9bdef54e4fcbfb2596f3319" category="list-text"><block ref="daf59c2df9bdef54e4fcbfb2596f3319" category="inline-link-macro-rx"></block></block>
  <block id="2115d0e1d828c5a28a9742411342fc04" category="inline-link-macro">SnapCenter ServerとプラグインでサポートされるREST API</block>
  <block id="36ac9e3e7c1dda5e31be15c68d614e8a" category="list-text"><block ref="36ac9e3e7c1dda5e31be15c68d614e8a" category="inline-link-macro-rx"></block></block>
  <block id="c2668ce859de558fa49ef70b7eacbb3b" category="cell">バージョン0.1</block>
  <block id="338602028883e3e3e93d7fad17905696" category="cell">04.2024</block>
  <block id="d40cd11c66986e96040133cd69280e6a" category="cell">第1稿。</block>
  <block id="96d7dc7b222d6abde2ea184b5e0fc02b" category="cell">バージョン0.2</block>
  <block id="b61612a45af76461f6f16d12a1e3a473" category="cell">06.2024</block>
  <block id="8d6c86885133ff76b8d68daf86e29551" category="cell">HTML形式に変換</block>
  <block id="2190de7e3e03ad3aa87d37ce1d799634" category="summary">このドキュメントでは、AvantraとNetApp SnapCenter®プラットフォームの統合方法について説明します。</block>
  <block id="fc437f8a9ad8cff38c5229c700d66600" category="doc">SB-4294：AvantraとNetApp SnapCenterによるSAPシステムのコピー、更新、クローニングのワークフローの自動化</block>
  <block id="e85e6812e10c0d3ed470223879ee4a2e" category="paragraph">SAPシステムとソリューションの運用は非常に複雑です。ただし、SAPを使用している企業では、これらのシステムとサービスがビジネスプロセスの中心となります。SAPシステム管理者は、システムのコピーや更新などの日常的な運用タスクを自動化することで、より多くのシステムをより少ない労力で管理し、再現可能な結果を生み出し、人為的ミスを減らすことができます。</block>
  <block id="6b040b255b68d643f860cc0c42d60c26" category="paragraph">このドキュメントでは、NetApp®Snapshot™およびFlexClone®テクノロジをAvantra自動化ワークフローに統合する方法について説明します。Avantraは、IT運用とサービスの自動管理に重点を置いたIT管理プラットフォームです。ITインフラを監視、自動化、管理するためのソリューションを提供し、ITシステムの効率と信頼性を向上させます。Avantraを使用すると、企業はIT環境をプロアクティブに監視し、問題を早期に検出し、トラブルシューティングやシステムパフォーマンスの最適化のための自動アクションを実行できます。通常、このプラットフォームは他のIT管理ツールと統合されており、クラウド、オンプレミス、ハイブリッドインフラなどのさまざまな環境に導入できます。</block>
  <block id="9290f6edd05ab74ce976da8a1bd79627" category="paragraph">このドキュメントでは、AvantraとNetApp SnapCenter®プラットフォームの統合方法について説明します。NetApp SnapCenterは、Snapshotベースのバックアップのオーケストレーション、リストアの実行、およびFlexCloneボリュームの作成を行うためのツールです。この統合により、SAP管理者はNetAppの手法を使用して、SAPシステムの日常的な運用タスクを大幅にスピードアップできます。Snapshot、FlexClone、NetApp SnapRestore®ソフトウェアはポインタベースのNetAppストレージテクノロジであるため、バックアップ、リストア、クローニングの処理を高速化できます。このアプローチは速いです。また、オンプレミスのNetAppストレージシステムであるか、大手クラウドプロバイダ3社のいずれかにあるNetAppストレージソリューションであるかに関係なく、新規データや変更されたデータのみがストレージメディアに書き込まれるため、クローン処理時のストレージオーバーヘッドも削減されます。</block>
  <block id="d62c5e03ce9e8ec0422f7decd2dfd9bf" category="paragraph">このドキュメントは、以前にSAPシステムのコピーを手動で実行したことがあり、Avantraを使用してこの作業を自動化したいSAPシステム管理者を対象としています。NetApp SnapCenterによってオーケストレーションされたNetApp SnapshotとFlexCloneテクノロジをAvantraのワークフローと組み合わせる目的は、SAPシステムのコピーを完全に自動化することで高速化することです。</block>
  <block id="75c0f54f014e4ab6e3f22f5cd507650c" category="paragraph">SAPシステムのコピーという用語は、多くの場合、SAPシステムのクローニング、SAPシステムのコピー、SAPシステムの更新の3つのプロセスを総称して使用されます。ワークフローとユースケースが異なるため、処理を区別することが重要です。</block>
  <block id="ed89e0187c6fe54d2628ba3c924c9c94" category="list-text">* SAPシステムのクローン*。SAPシステムクローンは、ソースSAPシステムの同一のクローンです。SAPシステムクローンは、一般に論理的な破損に対処したり、ディザスタリカバリのシナリオをテストしたりするのに使用されます。システムのクローニング処理では、ホスト名、インスタンス番号、およびSecure Identifier（SID；セキュア識別子）は同じままです。そのため、本番環境と通信できないように、ターゲットシステムの適切なネットワークフェンシングを設定することが重要です。</block>
  <block id="29fa3c48f12e6309c32da9e61f69bd28" category="inline-image-macro">SAPシステムのクローンを示す図</block>
  <block id="b587c7fd00a525678062695450301092" category="list-text">* SAPシステムのコピー*。SAPシステムのコピーは、ソースSAPシステムのデータを使用して新しいターゲットSAPシステムをセットアップすることです。たとえば、本番システムのデータを含む追加のテストシステムをターゲットシステムにすることができます。ホスト名、インスタンス番号、SIDは、ソースシステムとターゲットシステムで異なります。 新しいシステムはソースシステムから分離されていません。</block>
  <block id="16638dad50a76bca5e7a86dc7294fc2c" category="inline-image-macro">SAPシステムのコピーを示す画像</block>
  <block id="fbd198ef31d57ae3a5f9b9fb5639e948" category="list-text">* SAPシステムの更新。*SAPシステムの更新とは、既存のターゲットSAPシステムをソースSAPシステムのデータで更新することです。ターゲットシステムは通常、サンドボックスシステムなどのSAPトランスポート環境の一部であり、本番システムのデータで更新されます。ホスト名、インスタンス番号、SIDはソースシステムとターゲットシステムで異なります。</block>
  <block id="a7d281aa380b84143ba85c264cace3d9" category="inline-image-macro">SAPシステムの更新を示す図</block>
  <block id="59159350e4004274c8676b9d48b16a41" category="paragraph">3つのユースケースがありますが、データ管理プロセスは変わりません。3つのユースケースでは、基盤となるデータ管理テクノロジであるNetApp SnapshotとFlexCloneが活用されています。</block>
  <block id="9f502a9c7a5bc34e196821573f56b625" category="list-text">SnapCenterエージェントとSnapCenterデータベースプラグインがインストールされたSAPソースシステム</block>
  <block id="03c806031b59c42ed3e4c7683d699982" category="list-text">SnapCenterエージェントとSnapCenterデータベースプラグインがインストールされたSAPターゲットシステム</block>
  <block id="14472d6a98b6c5946fee1bdeaaa9d46d" category="list-text">SAPソースシステムとSAPターゲットシステムが構成されたAvantraシステム</block>
  <block id="c287b1e946c387c0a7339a652e03b5ce" category="list-text">オンプレミスの物理ハードウェア：NetApp AFF Aシリーズ、AFF Cシリーズ、ASA Aシリーズ、ASA Cシリーズ、またはFASシリーズ</block>
  <block id="b0904b80e0af825ba00610ce914a3ac9" category="list-text">オンプレミスのSoftware-Defined Storage：NetApp ONTAP®Select</block>
  <block id="f61f14ca64e865d9739d260389f4af92" category="list-text">NetApp Cloud Volumes ONTAP®をAWS、Google Cloud、Azureに導入</block>
  <block id="842a4e33040fe08e0af52e5aaf27c55f" category="list-text">Amazon FSx for NetApp ONTAP（AWS）</block>
  <block id="fd559ee283f10c8dbc8f698f620ac779" category="paragraph">次の図は、Avantraサーバ、NetApp SnapCenterサーバ、NetAppストレージシステム、SAPソースシステムとSAPターゲットシステム、およびすべての統合方法を示しています。その目的は、既存のコンポーネント内ですでに行われている設定作業を最大限に再利用できるように、SnapCenter REST APIを使用して統合を可能な限り柔軟にすることでした。</block>
  <block id="3086cba5137fd0545d778e498d9cd6e2" category="paragraph">時間を短縮し、運用タスクを自動化し、インフラストラクチャ、データベース、アプリケーションレベルで人的エラーを排除するために、Avantraワークフローを使用できます。この統合では、ソースシステムからターゲットシステムにバックアップをリストアする（時間がかかり、リソース消費量も多い）代わりに、NetApp SnapshotとFlexCloneテクノロジを使用します。データベースのスピンアップに必要なすべてのタスクが、数時間ではなく数分で完了します。クローニングプロセスに要する時間はデータベースのサイズに左右されないため、非常に大規模なシステムでも数分で作成できます。Avantraは、SAPの後処理側だけでなく、オペレーティングシステムおよびデータベースレベルでもタスクを自動化することで、実行時間をさらに短縮します。</block>
  <block id="6a3fec98537c549a047e819f8599d98d" category="paragraph">次の図は、自動化を使用すると運用効率が向上する可能性があることを示しています。</block>
  <block id="7d8c66dbd94dc77e4312c93bd7586097" category="section-title">さまざまなテクノロジコンポーネントの統合</block>
  <block id="878da1642730c1593c6b76bdb0d9fda8" category="paragraph">AvantraワークフローでのSnapCenterの実際の統合は、JavaScriptを使用してNetApp SnapCenter REST APIにアクセスすることで構成されています。このREST APIベースの統合では、SAPソースシステムのSnapshotコピーが作成され、FlexCloneボリュームが作成されてSAPターゲットシステムにマウントされます。</block>
  <block id="f07c14433779a55a296b481246a75c8e" category="paragraph">ストレージ管理者やSAP管理者は、SnapCenterによってトリガーされ、SnapCenterエージェントによって実行されるスクリプトを開発して、毎日繰り返される運用タスクを自動化するための時間とノウハウを投入してきました。JavaScriptを使用してSnapCenterタスクをトリガーするこの疎結合アーキテクチャを使用すると、既存の自動化手順を再利用して、エンドツーエンドの自動化のワークフローエンジンとしてAvantraを使用して、目的の結果を迅速に達成できます。</block>
  <block id="08d13577d2c770db53482bcfe9f627e4" category="paragraph">AvantraとNetAppのデータ管理テクノロジーを組み合わせることで、SAPシステム管理に関連する最も複雑で時間のかかるタスクに必要な時間と労力を大幅に削減できる強力なソリューションを提供します。また、この組み合わせは、人為的ミスがシステム間で引き起こす構成のずれを回避するのにも役立ちます。</block>
  <block id="cf3525ddd7a64e1adddcca6e929f690e" category="paragraph">システムの更新、コピー、クローン、ディザスタリカバリのテストは非常に機密性の高い手順であるため、このようなソリューションを実装することで貴重な管理時間を節約できます。また、基幹業務のスタッフがSAPシステム管理者に持つ信頼を強化することもできます。トラブルシューティングにかかる時間をどれだけ節約できるか、テストやその他の目的でシステムをコピーするのがどれだけ簡単かを確認できます。このソリューションには、ソースシステムとターゲットシステムがオンプレミス、パブリッククラウド、ハイブリッドマルチクラウド環境、ハイブリッドマルチクラウド環境のどこで運用されているかに関係なく、これらのメリットがあります。</block>
  <block id="bf0f42271b1628d48d24ff9e96c0a40d" category="paragraph">このドキュメントに記載されている情報の詳細については、以下のドキュメントや Web サイトを参照してください。</block>
  <block id="b97f5ca6428e5b00c71db4299dfc3d6f" category="inline-link-macro">アバントラ</block>
  <block id="2fc4f84f847c8ac3075ea580dfac45a1" category="list-text"><block ref="2fc4f84f847c8ac3075ea580dfac45a1" category="inline-link-macro-rx"></block></block>
  <block id="bf51eb5d79e16ead1ceda527dda582b6" category="inline-link-macro">SnapCenter ServerとプラグインでサポートされるREST API</block>
  <block id="857bb4eb3e8e725c7b53c4c49b9f8f61" category="list-text"><block ref="857bb4eb3e8e725c7b53c4c49b9f8f61" category="inline-link-macro-rx"></block></block>
  <block id="9d04f10ec6d5f74dbca6cec4d7147125" category="cell">03.2024</block>
  <block id="313d8d29b054407c3e1bee8fe2e46793" category="cell">NetAppの同僚からのフィードバックの統合。</block>
  <block id="fb4990156c52dedabc6397ade7e76401" category="cell">バージョン0.3</block>
  <block id="21a718b5ebef012a391d552cfaa4536e" category="cell">要求された変更を統合してNetAppブランディングに準拠</block>
  <block id="420d57080e1f02fbdb40396ad217482c" category="cell">バージョン0.4</block>
  <block id="e6fe0ae39ed3c7447d6a4da5d99ea3a2" category="summary">本ドキュメントでは、NetApp®ストレージシステムをオンプレミス、パブリッククラウドインフラサービス（IaaS）環境、ハイブリッドクラウドのいずれで運用している場合でも、Ansible Playbookとカスタムスクリプトを使用して、SAP Landscape Management（LaMa）に統合する方法について説明します。</block>
  <block id="566e3b562a12b1ef1896ee777b47ed0c" category="doc">SB-4292：AnsibleによるSAP自動化</block>
  <block id="1dc246d1e2dc4afc0e866ed9c1e00b34" category="paragraph">本ドキュメントでは、NetApp®ストレージシステムをオンプレミス、パブリッククラウドインフラサービス（IaaS）環境、ハイブリッドクラウドのいずれで運用している場合でも、Ansible Playbookとカスタムスクリプトを使用して、SAP Landscape Management（LaMa）に統合する方法について説明します。</block>
  <block id="375a68bbd8b09c30759cb49ee66744c6" category="paragraph">SAPシステムは非常に複雑です。しかし、SAPを使用している企業では、これらのシステムがビジネスプロセスの中心となっています。SAPシステム管理者は、日常的な運用タスクを自動化することで、より多くのシステムをより少ない労力で管理し、再現可能な結果を生み出し、人為的ミスを減らすことができます。</block>
  <block id="a54e766cb8511b4b8768f1ba8fef2b0b" category="paragraph">本ドキュメントでは、NetApp®ストレージシステムをオンプレミス、パブリッククラウドインフラサービス（IaaS）環境、ハイブリッドクラウドのいずれで運用している場合でも、Ansible Playbookとカスタムスクリプトを使用して、SAP Landscape Management（LaMa）に統合する方法について説明します。この統合により、SAP管理者は、NetApp Snapshot™およびNetApp FlexClone®テクノロジを使用して、SAPシステムの更新タスクを高速化できます。</block>
  <block id="3ed6d491000fa37ba8451c450195b4d8" category="paragraph">本ドキュメントは、Ansibleの自動化にあまり経験がない（またはまったく経験がない）SAPシステム管理者を対象としています。Ansibleの使用を開始し、最初のプレイブックを実行し、SAP LaMaベースの最初のシステム更新処理を設定して実行するのに役立ちます。</block>
  <block id="0bd125fc3eb80484cd714efb009c33da" category="paragraph">SAPシステムのコピーは、SAPシステムのクローニング、SAPシステムのコピー、SAPシステムの更新という3つのプロセスの同義語としてよく使用されます。ワークフローとユースケースが異なるため、処理を区別することが重要です。</block>
  <block id="984d103d2ea6cdfaf50c6458b93d5060" category="list-text">* SAPシステムのクローン*。SAPシステムクローンは、ソースSAPシステムの同一のクローンです。SAPシステムクローンは、一般に論理的な破損に対処したり、ディザスタリカバリのシナリオをテストしたりするのに使用されます。システムのクローニング処理では、ホスト名、インスタンス番号、およびSecure Identifier（SID；セキュア識別子）は同じままです。そのため、本番環境と通信できないように、ターゲットシステムの適切なネットワークフェンシングを設定することが重要です。</block>
  <block id="a06496f6b8f5d994759b94c9bc228c07" category="list-text">* SAPシステムのコピー*。SAPシステムのコピーは、ソースSAPシステムのデータを使用して新しいターゲットSAPシステムをセットアップすることです。たとえば、本番システムのデータを含む追加のテストシステムを新しいターゲットシステムにすることができます。ソース・システムとターゲット・システムでは、ホスト名、インスタンス番号、およびSIDが異なります。</block>
  <block id="a4806533200f7204846fc0516880a512" category="list-text">* SAPシステムの更新*。SAPシステムの更新とは、既存のターゲットSAPシステムをソースSAPシステムのデータで更新することです。ターゲットシステムは通常、品質管理システムなどのSAPトランスポート環境の一部であり、本番用システムのデータで更新されます。ソース・システムとターゲット・システムでは、ホスト名、インスタンス番号、およびSIDが異なります。</block>
  <block id="9e5ec677b1b1648311e97cf94e0b2d0e" category="paragraph">次の図はNetApp、SAPシステムのLaMaストレージに関連するクローニング、コピー、更新の各ワークフローの手順を示しています。</block>
  <block id="f74def37972ee4394be8cad5651663f7" category="inline-image-macro">NetAppstorageに関連するSAPシステムのLaMaのクローニング、コピー、更新の各ワークフロー手順を示す図</block>
  <block id="54881e79c7640a505cefd7ba1f3b20cc" category="list-text">SAP LaMaシステム</block>
  <block id="4eebc5ed40ce93bfc87d749fb237b7a3" category="list-text">NetAppストレージシステム</block>
  <block id="0bbb1b0fa380975becacfe2ebad8efcb" category="list-text">SAPホストエージェントがインストールされたAnsibleコントロールノード。Red Hat Ansible Automation Platformを使用することを推奨します。Red Hat Ansible Automation Platformには次のようなメリットがあります。</block>
  <block id="3a02ab6c19eb5b6b13f624909cbdd908" category="list-text">AIを使用して自動化タスクに関するコードの推奨事項を生成</block>
  <block id="9ed57c8ba167159dadbe28961386f0ee" category="list-text">イベントドリブンな自動化で手動タスクを削減</block>
  <block id="585e67e2ba5c513b961c51dd9ccc25fd" category="list-text">定義され、一貫性があり、移植性が高い</block>
  <block id="c2348bd887e6c8f4e4cb3e1ecc4c7168" category="list-text">環境全体で自動化を拡張</block>
  <block id="ba9d2fdcf1098320fd5ab8e8940c1d46" category="list-text">事前パッケージ化されたコンテンツで自動化を加速</block>
  <block id="ea936622c0742d5330429e7e68527d8a" category="list-text">豊富なレポート機能とオブザーバビリティ指標による自動化の追跡と管理</block>
  <block id="4db35d276f281c64f50cfa4e820ff070" category="list-text">タスク、モジュール、プレイブックの作成</block>
  <block id="352646e3f8da3248d7552209da6eab5f" category="paragraph">次の図は、SAPホストエージェントから実行されたシェルスクリプトによってトリガーされる、SAP LaMaストレージシステムとNetAppストレージシステムが、専用のAnsibleホスト上のAnsible Playbookを介してどのように統合されるかを示しています。</block>
  <block id="a4afd73c26d98d43a41848b904c8e361" category="inline-image-macro">SAP LaMaストレージシステムとNetAppストレージシステムが、専用のAnsibleホスト上のAnsible Playbookを介して統合される様子を示す画像。SAPホストエージェントから実行されたシェルスクリプトによってトリガーされます。</block>
  <block id="385f57610e19e7eac92f41a1dc35251b" category="paragraph">インフラレイヤとデータベースレイヤで必要なタスクを高速化、自動化するには、SAP LaMaとNetAppのクローニングワークフローを使用します。SAP LaMaでは、ソースシステムからターゲットシステムにバックアップをリストアする代わりに、NetApp SnapshotとFlexCloneテクノロジを使用しているため、次の図に示すように、データベースを起動するために必要なタスクを数時間ではなく数分で実行できます。クローニングプロセスに要する時間はデータベースのサイズに左右されないため、非常に大規模なシステムでも数分で作成できます。オペレーティングシステムとデータベースレイヤ、およびSAPのポストプロセス側のタスクを自動化することで、実行時間をさらに短縮できます。</block>
  <block id="4babb6cd725c24c36d2e3770f6a5f825" category="inline-image-macro">自動化を使用すると運用効率が向上する可能性があることを示す画像</block>
  <block id="1b99d3bbfb2ea06147cee599d13b4d4d" category="paragraph">Ansibleを使用してSAP LaMaをNetAppストレージシステムと統合するには、Ansible Playbookを実行できるノードが必要です。Ansible Automation Platformの使用を推奨します。SAP LaMaから起動したこのホストでシェルスクリプトとAnsible Playbookを実行するには、このサーバでSAPホストエージェントを実行する必要があります。SAP Host AgentはSAP LaMaとの双方向通信を引き継ぎ、実際のプレイブックをトリガーするシェルスクリプトを実行します。</block>
  <block id="a1350e44a1de9e3b2a31107d1a80273c" category="paragraph">この疎結合アーキテクチャにより、SAP LaMaだけでなく、SAP LaMa外からもワークフローを自由に開始できます。プレイブックと対応するロジックは1回だけ設定する必要があり、さまざまなシナリオやユースケースで使用できます。</block>
  <block id="992397c8c640ca562524a875b68a5b54" category="paragraph">NetApp、SAP LaMa、Ansible自動化プラットフォームを組み合わせることで、SAPシステム管理に関連する最も複雑で時間のかかるタスクに必要な時間と労力を大幅に削減できる強力なソリューションを提供します。また、この組み合わせは、人為的ミスがシステム間で引き起こす構成のずれを回避するのにも役立ちます。</block>
  <block id="c28874e4beb098c91d1e1c3be126df41" category="paragraph">システムの更新、コピー、クローン、ディザスタリカバリのテストは非常に機密性の高い手順であるため、このようなソリューションを実装すると、貴重な管理時間を節約できます。また、SAPシステム管理者に対する組織の他の組織の信頼を強化することもできます。テストなどの目的でシステムをコピーするのがどれだけ簡単か、トラブルシューティングにかかる時間をどれだけ節約できるかがわかります。</block>
  <block id="8aadfa67c47b74f799fb7a826a48ba03" category="inline-link-macro">NetApp ONTAP®向けAnsible Playbookを使用した運用の自動化</block>
  <block id="9f642d22ffdfa2b795d80b29088d3fb0" category="list-text"><block ref="9f642d22ffdfa2b795d80b29088d3fb0" category="inline-link-macro-rx"></block></block>
  <block id="3ddd20790842649d51a5cc4b6f01db26" category="inline-link-macro">NetApp固有のAnsibleドキュメント</block>
  <block id="f12dd99ccfdacc7ea0c21003056e4741" category="list-text"><block ref="f12dd99ccfdacc7ea0c21003056e4741" category="inline-link-macro-rx"></block></block>
  <block id="fef9e784fccd2c3b2ebf4bfcd80e0305" category="inline-link-macro">NetApp ONTAP Ansibleモジュールと完全なドキュメント</block>
  <block id="0603ed1da71fc41c57bbabf1699bdbde" category="list-text"><block ref="0603ed1da71fc41c57bbabf1699bdbde" category="inline-link-macro-rx"></block></block>
  <block id="bdbdb20cc2fc78414e07344a2494b8a4" category="inline-link-macro">Red Hat Ansible自動化プラットフォーム</block>
  <block id="b4da856a893c686c8e2e2539db5024fe" category="list-text"><block ref="b4da856a893c686c8e2e2539db5024fe" category="inline-link-macro-rx"></block></block>
  <block id="16734dca3a95bfa535c02733aff6eba1" category="cell">03.2023</block>
  <block id="8badbfef801c8224f9c3f8be1ed7b075" category="cell">01.2024</block>
  <block id="30f75d5b61876317b00ce9486a8a0160" category="cell">見直しと若干の修正</block>
  <block id="411b5f626e19bcfe479b7a04afe0a756" category="sidebar">AnsibleとNetApp SnapCenterによるSAP自動化</block>
  <block id="286f4dd45534d6e8839dc5cb0fc36cee" category="sidebar">AlpacaとNetApp SnapCenterによるSAP自動化</block>
  <block id="314dcde42b7b98639a9e719950095987" category="sidebar">AvantraとNetApp SnapCenterによるSAP自動化</block>
  <block id="15a34eec6990a710b230cba1946c00f5" category="admonition">NFSバージョン3または4.1のみがサポートされます。NFSバージョン1、2、4.0、4.2はサポートされていません。</block>
  <block id="d566ef5684ce668e2e233d4eaf1bc9bc" category="summary">SAPのライフサイクル管理を最適化するNetAppソリューションは、SAP HANAデータベースとライフサイクル管理ツールに統合されており、効率的なアプリケーション統合データプロテクションと、SAPテストシステムの柔軟なプロビジョニングが組み合わされています。</block>
  <block id="336f9054ed6c40bfa87995259d52c441" category="list-text">script.shは<block ref="d8eec050302627350eb082c264bec8f6" prefix=" " category="inline-code"></block>、システム更新とシステムクローニングのワークフローでSAP HANAデータベースのリカバリ処理とシャットダウン処理を実行するために使用します。</block>
  <block id="aa0032fd81eb09be326e909e196e2530" category="list-text">このスクリプトは<block ref="7475fe06dd4f4cf4edc0c5536fb55aa4" prefix=" " category="inline-code"></block> 、システムクローンワークフローでSAP HANA共有ボリュームのマウントとアンマウントの処理を実行するために使用します。</block>
  <block id="49ca516bb882e077657e5caf44f5554c" category="admonition">このサンプルスクリプトは現状のまま提供されており、ネットアップではサポートしていません。スクリプトは、ng-sapcc@netapp.com宛てにEメールでリクエストできます。</block>
  <block id="ec86531daff86121e81aad761a9a2690" category="paragraph">このスクリプト例は<block ref="3b7212a09a85af46251eb075db2a1a3f" prefix=" " category="inline-code"></block> 、リカバリ処理とシャットダウン処理を実行するために使用します。このスクリプトは、次の図に示すように、SnapCenterワークフローのclone createおよびclone deleteで特定のコマンドラインオプションを指定して呼び出されます。</block>
  <block id="6fb4e29ab144b52fbcda87e4d76c8e72" category="paragraph">このスクリプトは汎用的で、SIDなどの必要なすべてのパラメータをターゲットシステムから読み取ります。このスクリプトは、システム更新処理のターゲットホストで使用できる必要があります。ターゲットシステムのユーザ&lt;SID&gt; admに対してhdbユーザストアキーが設定されている必要があります。このキーには、SAP HANAシステムデータベースへのアクセスを許可し、リカバリ処理の権限を付与する必要があります。キーには&lt;TARGET-SID&gt;キーという名前が必要です。</block>
  <block id="3c014f6281927540111102bce68d0558" category="paragraph">スクリプトは、実行されるディレクトリと同じディレクトリにログファイルを書き込み<block ref="c05a8d917e2f24fc448cfc8148b37936" prefix=" " category="inline-code"></block>ます。</block>
  <block id="a080c4899461aaff7b3f15fee991c3ee" category="admonition">現在のバージョンのスクリプトは、シングルホストシステムMDCのシングルテナント構成、またはMDCのマルチテナント構成をサポートしています。SAP HANAマルチホストシステムはサポートされていません。</block>
  <block id="cb110c7da4ff7c2a06badbb62ec1653b" category="paragraph">セクション「ストレージSnapshotを使用したSAP HANAシステムの更新処理のワークフロー」で説明したように、ターゲットシステムで想定されるテナントリカバリ処理は、ソースシステムのテナント構成によって異なります。このスクリプト<block ref="3b7212a09a85af46251eb075db2a1a3f" prefix=" " category="inline-code"></block> では、次の表に示すように、すべてのテナントリカバリ処理がサポートされます。これらの処理はソースシステムの構成によって可能です。</block>
  <block id="1ef2b56ddfcd99f390770f6561dd39eb" category="cell">SAP HANAシステム</block>
  <block id="eb2c4fe5704d6239af3e788b691acb39" category="cell">テナント構成+ソースシステム</block>
  <block id="be1cf788ffbccce8c3a6384d5c26bda3" category="cell">変更後のテナント構成+をターゲットシステムに配置</block>
  <block id="007b28be8cfeffaa18a794ecdfc270ce" category="cell">すべてのテナントがリカバリされ、ソーステナントと同じ名前になります。</block>
  <block id="86fdcb026a68ce13c9b6d32c97d35e44" category="paragraph">このスクリプト例で<block ref="7475fe06dd4f4cf4edc0c5536fb55aa4" prefix=" " category="inline-code"></block> は、任意のボリュームのマウントとアンマウントを実行しています。このスクリプトは、SAP HANAシステムのクローニング処理でSAP HANA共有ボリュームをマウントするために使用されます。このスクリプトは、次の図に示すように、SnapCenterワークフローのclone createおよびclone deleteで特定のコマンドラインオプションを指定して呼び出されます。</block>
  <block id="c5b136d95c05fafb00b08d1b6de1298f" category="admonition">このスクリプトは、NFSをストレージプロトコルとして使用するSAP HANAシステムをサポートします。</block>
  <block id="b09246e75feeec9e487b59536bd8a9f6" category="list-text">スクリプト変数<block ref="39bd1f4447a9d2f7774d0f0e74e3bdbf" prefix=" " category="inline-code"></block> はマウント処理に使用されます。</block>
  <block id="fc4b53712edbb1a5d2bb0efb910def4f" category="list-text"><block ref="0ac10a7b46d56b5cde60023a9baed25b" prefix="" category="inline-code"></block></block>
  <block id="f59340f31d7d375c72c0b4a9b1d9742d" category="list-text">例：<block ref="558125a9317a2a85b66f3a4e57d5f2a6" prefix=" " category="inline-code"></block></block>
  <block id="05ebd5b68d560730417ec3a7cebf8f0c" category="paragraph">例：<block ref="d3214244532fad50dea7d8ad9dd48289" prefix=" " category="inline-code"></block></block>
  <block id="d8936b3ac6f55edd9850b165b9222bd3" category="doc">ストレージSnapshotバックアップを使用したSAP HANAシステムの更新処理に関する考慮事項</block>
  <block id="99a19cb6edc6f11b19ea813ec205ff66" category="section-title">ターゲットシステムのテナント名</block>
  <block id="57ae5f35f217b1a419a04e5d9c231880" category="paragraph">SAP HANAシステムの更新を実行する手順は、次の図に示すように、ソースシステムのテナント構成とターゲットシステムで必要なテナント名によって異なります。</block>
  <block id="2272aa1a0ba3525f3f73d9547239e789" category="paragraph">システムデータベースにはテナント名が設定されているため、システムデータベースのリカバリ後にターゲットシステムでもソースシステムのテナント名を使用できます。そのため、ターゲットシステムのテナントは、オプション1に示すように、ソーステナントと同じ名前でしかリカバリできません。ターゲットシステムでテナント名を異なる名前にする必要がある場合は、最初にソーステナントと同じ名前でテナントをリカバリし、必要なターゲットテナント名に変更する必要があります。これはオプション2です。</block>
  <block id="81eb74990998ec7670788a4b5d26b6d5" category="paragraph">ただし、テナント名がシステムのSIDと同じであるシングルテナントのSAP HANAシステムは例外です。これは、SAP HANAの初回インストール後のデフォルトの設定です。この特定の構成は、SAP HANAデータベースによってフラグ付けされます。この場合、ターゲットシステムでのテナントリカバリは、ターゲットシステムのテナント名を使用して実行できます。この名前は、ターゲットシステムのシステムSIDと同じである必要もあります。このワークフローをオプション3に示します。</block>
  <block id="62b2eae75a95f0f95105ee2a3dd86456" category="admonition">この設定フラグは、テナントの作成、名前変更、削除処理がソースシステムで実行されるとすぐにSAP HANAデータベースによって削除されます。したがって、構成をTenant = SIDの状態に戻しても、フラグは使用できなくなり、ワークフロー3でのテナントのリカバリに関する例外は実行できなくなります。この場合、必要なワークフローはオプション2です。</block>
  <block id="590a83044f8275cb44757e91bd9c3b98" category="section-title">SAP HANAの暗号化を有効にしたシステム更新ワークフロー</block>
  <block id="ed0497f02ad9f417117b309a43ded20a" category="paragraph">SAP HANAの永続性暗号化を有効にしている場合は、ターゲットシステムでSAP HANAデータベースをリカバリする前に追加の手順が必要です。</block>
  <block id="6b8ec54bea4ea8f350ee72bf85d3197e" category="paragraph">ソースシステムで、システムデータベースおよびすべてのテナントデータベースの暗号化ルートキーのバックアップを作成する必要があります。リカバリ処理を実行する前に、バックアップファイルをターゲットシステムにコピーし、ルートキーをバックアップからインポートする必要があります。</block>
  <block id="04237ca9906c07207034914aa0a28d82" category="paragraph">も参照してください<block ref="359a6667f10cfbec6ec52789f37c6e2a" category="inline-link-rx"></block>。</block>
  <block id="886ad05cbab7f831b411778c068cf8fe" category="section-title">ルートキーのバックアップ</block>
  <block id="cd171c61a6c45e294f3c2dacc7604931" category="paragraph">ルートキーに変更があった場合は、常にルートキーのバックアップが必要です。backupコマンドでは、CLIパラメータとしてDBIDを指定する必要があります。DBIDは、次のSQLステートメントを使用して識別できます。</block>
  <block id="3ce4fd31388596ecdf4aa9f1d9a0dbc4" category="inline-link">ルートキーのバックアップ| SAPヘルプポータル</block>
  <block id="f282798b107e6bd69bc9acc72b3efd4f" category="paragraph">SQLステートメントおよびその他のドキュメントについては、『SAP HANA Admin Guide』を参照してください。<block ref="d8ff24c5498b932cc400dcdc7a192184" category="inline-link-rx"></block> 以下の手順は、シングルテナントSS1を使用するHANAシステムに必要な処理を示しており、ソースシステムで実行されます。</block>
  <block id="336adde13fb7bcd7ee2cc8512c4e28c1" category="list-text">システムおよびテナント（SS1）データベースのバックアップパスワードを設定します（まだ設定していない場合）。</block>
  <block id="52a807914c4090676f1da43186acbb62" category="list-text">システムおよびテナント（SS1）データベースのルートキーのバックアップを作成します。</block>
  <block id="6c6f42bf225663c8095edb7191abafeb" category="list-text">ルートキーのバックアップの検証（オプション）</block>
  <block id="af9e006c18dd68581986b528bd3587ed" category="section-title">ターゲットシステムでのルートキーのインポート</block>
  <block id="da9228e0010f7027b69ecf2177e4e0df" category="paragraph">最初のシステム更新処理では、最初にルートキーをインポートする必要があります。ソースシステムでルートキーが変更されていない場合は、追加のインポートは必要ありません。importコマンドでは、CLIパラメータとしてDBIDを指定する必要があります。DBIDは、ルートキーのバックアップと同じ方法で識別できます。</block>
  <block id="e11644d1968838d5f12339cef8291bb4" category="list-text">このセットアップでは、ルートキーがソースシステムからNFS共有にコピーされます。</block>
  <block id="3c23689c9bd2b975721e1135bd6927a6" category="list-text">これで、hdbnsutilを使用してルートキーをインポートできるようになりました。コマンドでは、システムおよびテナントデータベースのDBIDを指定する必要があります。バックアップパスワードも必要です。</block>
  <block id="9a35e9fdafa89a1bf9716ff9ad8fae50" category="section-title">ルートキーのインポート（ターゲットにDBIDが存在しない場合）</block>
  <block id="2af112c8b5eb82cec7858ff26e1c8899" category="paragraph">前の章で説明したように、DBIDは、システムおよびすべてのテナントデータベースのルートキーをインポートするために必要です。システムデータベースでは常にDBID=0ですが、テナントデータベースでは異なるDBIDを使用できます。</block>
  <block id="f04f1954909c57195f4a0f8986e0190c" category="paragraph">上の出力は、DBID=3、DBID=4の2つのテナントを示しています。ターゲットシステムがDBID=4のテナントをまだホストしていない場合、ルートキーのインポートは失敗します。その場合は、まずシステムデータベースをリカバリしてから、DBID=4のテナントのキーをインポートする必要があります。</block>
  <block id="3733c3274128a83f463e1febad4cb73a" category="paragraph">次の図に示すように、SAP HANAデータベースとライフサイクル管理ツールにSAPのライフサイクル管理を最適化するネットアップのソリューションが統合されています。効率的なアプリケーション統合データプロテクションに、SAPのテストシステムを柔軟にプロビジョニングすることができます。これらのソリューションは、オンプレミスのSAP HANAにも、Azure NetApp Files（ANF）やAmazon FSx for NetApp ONTAP（FSx for ONTAP）のクラウドで実行されているSAP HANAにも対応しています。</block>
  <block id="253f7d7cde63d67097785efdf27d8e0c" category="section-title">*アプリケーションと統合されたSnapshotバックアップ処理*</block>
  <block id="f695e91ee04884971f5a7436b91e4be8" category="paragraph">アプリケーションと整合性のあるSnapshotバックアップをストレージレイヤで作成する機能は、本ドキュメントで説明するシステムコピー処理とシステムクローニング処理の基盤となります。ストレージベースのSnapshotバックアップは、SAP HANA用のNetApp SnapCenter プラグインと、SAP HANAデータベースが提供するインターフェイスを使用して作成します。SnapCenter は、SnapshotバックアップをSAP HANAバックアップカタログに登録して、リストアやリカバリ、クローニング処理に使用できるようにします。</block>
  <block id="291d1a2808e806584ab1c34cbb1a18c0" category="section-title">*オフサイトのバックアップおよび/または災害復旧データのレプリケーション*</block>
  <block id="70919c30c9aaacd076b6aad76e43d879" category="paragraph">アプリケーションと整合性のあるSnapshotバックアップを、ストレージレイヤから、SnapCenter の制御下にあるオフサイトのバックアップサイトやディザスタリカバリサイトにレプリケートします。レプリケーションは変更されたブロックと新しいブロックに基づいて行われるため、スペースと帯域幅の効率が向上します。</block>
  <block id="ba9e50e0a1abcf0eeed3341c8d182a39" category="section-title">*任意のSnapshotバックアップをSAPシステムのコピーやクローン処理に使用*</block>
  <block id="1400c6c3a81a83b42b2e1bfa00b4f08d" category="admonition">オフサイトのバックアップストレージやディザスタリカバリストレージからのクローニングは、オンプレミスのNetAppシステムとAmazon FSx for NetApp ONTAPでサポートされます。Azure NetApp Filesを使用する場合、クローンはソースボリュームにのみ作成できます。</block>
  <block id="7e22a4a705cb1e44da3a7fa13d9330fb" category="section-title">*統合による自動化*</block>
  <block id="86aedb2a5d0e4cc1e18959a121d927a4" category="paragraph">SAPテストシステムのプロビジョニングは、サードパーティのツールを使用してNetAppの機能を統合することで、完全に自動化されたエンドツーエンドで実行できます。詳細については、次のサイトを参照してください。</block>
  <block id="bcaeb718111fd28a80ff0468446a8cca" category="inline-link">TR-4929：『Automating SAP system copy operations with Libelle SystemCopy』（netapp.com）</block>
  <block id="b86922f81f8fbdc269eb147c0132320d" category="inline-link">AlpacaとNetApp SnapCenterを使用したSAPシステムのコピーとクローンワークフローの自動化</block>
  <block id="ef9c1ed1eec5b69c3ed64cd0c51e91f5" category="inline-link">AvantraとNetApp SnapCenterを使用したSAPシステムのコピーとクローンワークフローの自動化</block>
  <block id="5e159ddb5310fc1d30282d2680fcae12" category="paragraph">前のセクションで説明したように、SnapCenter は、任意の既存のSnapshotバックアップからデータセットのクローンを管理し、これらのデータセットを任意のターゲットシステムに迅速にプロビジョニングできます。論理的な破損に対処するために本番データをリペアシステムに柔軟かつ迅速にプロビジョニングすることは、リペアシステムをリセットして別の本番データセットを選択する必要があることが多いため、非常に重要です。FlexCloneテクノロジを使用すると、修復システムは通常短時間しか使用されないため、高速なプロビジョニングプロセスが可能になり、容量を大幅に削減できます。</block>
  <block id="99f37d6bcbc15f5a2f030419d3a43170" category="paragraph">次の図は、SnapCenterを使用したSAPシステムのクローニング処理に必要な手順をまとめたものです。</block>
  <block id="6adc11bc6e0f34c4086c389511eccf77" category="list-text">SAP HANA共有ボリューム用のSnapCenterクローン作成ワークフロー</block>
  <block id="3334a5d45d4ab3ed5e8fac320282f236" category="list-text">SnapCenterクローンは、SAP HANAデータボリュームのデータベースリカバリを含むワークフローを作成します。</block>
  <block id="11733d6a63d8e319f8af4dfdbae0f156" category="list-text">SAP HANAシステムを修復システムとして使用できるようになりました。</block>
  <block id="19c1631605a596df1a5aa9b6ada6f550" category="list-text">データベースのシャットダウンを含む、SAP HANAデータボリュームのSnapCenterクローン削除ワークフロー（自動スクリプト使用時）。</block>
  <block id="2496728194ae81963fd344f8d300397c" category="list-text">SAP HANA共有ボリュームのSnapCenterクローン削除ワークフロー</block>
  <block id="d9de7f702e8fd112fa358cb13b6860e3" category="admonition">システムを別のSnapshotバックアップにリセットする必要がある場合は、手順6と手順4で十分です。SAP HANA共有ボリュームの更新は必要ありません。</block>
  <block id="c46ef19a1340287af560e4a95498efff" category="paragraph">SnapCenterには、既存のSnapshotバックアップからデータセットのクローンを管理するワークフローが用意されています。このクローンデータセットはFlexCloneボリュームで、ソースシステムからHANAデータボリュームを迅速にプロビジョニングしてターゲットシステムに接続するために使用できます。したがって、QA、テスト、サンドボックス、またはトレーニングシステムのシステム更新処理を実行する場合に最適です。</block>
  <block id="e33a7ba0a145b92332e5a214da5f0b7e" category="paragraph">SnapCenter クローニングワークフローは、ストレージレイヤで必要なすべての処理を処理します。また、スクリプトを使用して拡張し、ホスト固有の処理とHANAデータベース固有の処理を実行することもできます。本ドキュメントでは、スクリプトを使用して、HANAデータベースのリカバリ処理とシャットダウン処理を実行します。SnapCenter ワークフローにスクリプトを使用してさらに自動化を進めることで、必要なHANAデータベースの処理はすべて処理されますが、SAPの後処理の手順については説明しません。SAPの後処理は、手動またはサードパーティのツールを使用して実行する必要があります。</block>
  <block id="f58b84023a4279ee2a567eb3c380fb35" category="paragraph">SnapCenterを使用したSAPシステムの更新ワークフローは、次の図に示すように、主に5つの手順で構成されます。</block>
  <block id="c6fa61b09f8df64b162b460b69ac8069" category="list-text">ターゲットシステムの初回インストールと準備</block>
  <block id="0158f9b30056021a175e96d4f836415b" category="list-text">新しいターゲットシステムにSnapCenter HANAプラグインをインストールし、SnapCenterでHANAシステムを設定する必要があります。</block>
  <block id="8415b5eee52c3d01b2d370fe398a5951" category="list-text">ターゲットシステムを停止し、HANAデータボリュームをアンマウントする必要があります。</block>
  <block id="8fe61949b8b56ec8da525f4acbba93de" category="list-text">SnapCenterクローン作成ワークフロー</block>
  <block id="9ebae8e0bfc2f8e5b5b9a6e8a00fca6a" category="list-text">SnapCenterがソースシステムの選択したSnapshotのFlexCloneボリュームを作成</block>
  <block id="eb273cd7f5324ffbf92aeecff9ff3a97" category="list-text">SnapCenterがターゲットシステムにFlexCloneボリュームをマウントする</block>
  <block id="56b43ec1d85e7efde50be2f2d2ead918" category="list-text">ターゲットのHANAデータベースのリカバリは、スクリプトをポストスクリプトとして使用して自動化することも、手動で実行することもできます<block ref="d8eec050302627350eb082c264bec8f6" prefix=" " category="inline-code"></block> 。</block>
  <block id="937826f7ea9205ca3512d509a6ca8a78" category="list-text">SAPの後処理（手動またはサードパーティのツールを使用）</block>
  <block id="020b657f2ba667b7c8125459d9f08450" category="list-text">これで、システムをテスト/QAシステムとして使用できるようになります。</block>
  <block id="e849346a4770c0465337a49c10973303" category="list-text">新しいシステム更新が要求されると、SnapCenterクローン削除ワークフローを使用してFlexCloneボリュームが削除されます。</block>
  <block id="8e91d4bf6d06ab88552ea7233f10f6a1" category="list-text">ターゲットのHANAシステムがSnapCenterで保護されている場合は、クローン削除ワークフローを開始する前に保護を削除する必要があります。</block>
  <block id="96888e9c90caae0063e746ed75f814e1" category="list-text">HANAシステムは手動で停止するか、SnapCenterのプリスクリプトとしてスクリプトを使用して自動的に停止する必要があります。<block ref="d8eec050302627350eb082c264bec8f6" prefix=" " category="inline-code"></block></block>
  <block id="fb4b6d894aa9bb0e852938feaa8dbd6f" category="list-text">SnapCenterがHANAデータボリュームをアンマウントする</block>
  <block id="fc7b39f931e97a5620b60594593a3ded" category="list-text">SnapCenterがFlexCloneボリュームを削除</block>
  <block id="01cd3fe546b8551fcb17aab105bfd54d" category="list-text">ステップ2でリフレッシュが再開されます。</block>
  <block id="29455d0165f5fd37f1ddd0e1acde2d19" category="paragraph">ほとんどの場合、ターゲットテスト/QAシステムは少なくとも数週間使用されます。FlexCloneボリュームがソースシステムボリュームのSnapshotをブロックしているため、このSnapshotには、ソースシステムボリュームでのブロック変更率に基づいて追加の容量が必要になります。本番ソースシステムで1日あたりの平均変更率が20%の場合、ブロックされたSnapshotは5日後に100%に達します。そのため、NetAppでは、クローンが本番用のソースシステムに基づいている場合は、FlexCloneボリュームをすぐにスプリットするか、数日後にスプリットすることを推奨しています。クローンスプリット処理ではクローンボリュームの使用はブロックされないため、HANAデータベースの使用中にいつでも実行できます。</block>
  <block id="fec549457b5ca8b6fab2e0ae6d6e75a6" category="admonition">SnapCenterおよびAzure NetApp FilesでAzure NetApp Filesは、作成後に常にクローンがスプリットされるため、クローンスプリット処理は実行できません。</block>
  <block id="6f1539c5dce675aa44b87f7f9f369176" category="paragraph">クローンスプリットを含む更新処理は、次の手順で構成されます。</block>
  <block id="4fe3df0af2aa4e5f9eacca7e203e19cb" category="list-text">SnapCenterクローンスプリットワークフローを使用してFlexCloneボリュームをスプリットします。</block>
  <block id="f53badcf937e2258faf81fb846c9c3d4" category="list-text">新しいシステムの更新が要求されると、クリーンアップは次の手動手順で実行されます。</block>
  <block id="4d6aae36d78746a9a8fe6767a99cb8e7" category="list-text">ターゲットのHANAシステムがSnapCenterで保護されている場合は、保護を削除する必要があります。</block>
  <block id="dc2c5e947a6cab89514335a13dc423e1" category="list-text">HANAシステムを手動で停止する必要がある</block>
  <block id="7c66351a8e30aafa989ed12950bed825" category="list-text">HANAデータボリュームをアンマウントし、SnapCenterからfstabエントリを削除する（手動タスク）</block>
  <block id="69de215ba3fc3f69bd238db63e732bab" category="paragraph">SAP HANAデータベースの設定に応じて、追加の手順を実行するか、準備が必要です。次の表に概要を示します。</block>
  <block id="48a431e7da72cf4ddb716b44e3bd3022" category="cell">ソースシステム</block>
  <block id="f07b20b3bf641e75d700e21df41afa86" category="cell">ソースシステムの構成</block>
  <block id="445749c81622e3f4b55555307ee1b829" category="cell">SnapCenterとSAP HANAの運用</block>
  <block id="02d433082554aa78e77702e422da1369" category="cell">MDCシングルテナント+ SID =テナント名</block>
  <block id="4538fddc8b1e4453fc76236736640432" category="cell">標準構成</block>
  <block id="0ab4f55de764dc8394643b349b083994" category="cell">SnapCenterクローン処理とリカバリスクリプトの実行（オプション）。</block>
  <block id="0a65e6a9e8d4b8b7c8582184102df1c5" category="cell">SAP HANAの永続性暗号化</block>
  <block id="014c18a7ee780910ba664b6a0b978c06" category="cell">最初に、またはソースシステムでルートキーが変更された場合は、リカバリを実行する前に、ルートキーのバックアップをターゲットシステムにインポートする必要があります。</block>
  <block id="89d86b9ec09c7f3b392bb43ea2eb6dd6" category="cell">SAP HANAシステムレプリケーションのソース</block>
  <block id="99626cfc8b134a9568590f75a1fa39e9" category="cell">追加の手順は必要ありません。ターゲットシステムにHSRが設定されていない場合は、スタンドアロンシステムのままになります。</block>
  <block id="55e4c24dca21aa659ae4ad4a62764c3a" category="cell">SAP HANAマルチパーティション</block>
  <block id="9045ec7ce843df8f562cdac52976a8ef" category="cell">追加の手順は必要ありませんが、ターゲットシステムに同じ命名規則（SIDのみが異なります）を使用してSAP HANAボリュームパーティションのマウントポイントを使用できる必要があります。</block>
  <block id="747e7c5207b7c8c7b7c0d19a45e85b9a" category="paragraph">またはMDCシングルテナント+（SID &lt;&gt;テナント名）</block>
  <block id="b202c7fafecac4cc268100693b999ff4" category="cell">SnapCenterクローン処理とリカバリスクリプトの実行（オプション）。スクリプトによってすべてのテナントがリカバリされます。ターゲットシステム名にテナント名またはテナント名が存在しない場合は、SAP HANAのリカバリ処理中に必要なディレクトリが自動的に作成されます。テナント名はソースと同じであり、必要に応じてリカバリ後に名前を変更する必要があります。</block>
  <block id="fd8ed9109131dae1c0a52003f1f433ad" category="cell">ターゲットシステムに以前にソースシステムのDBIDが存在しない場合は、このテナントのルートキーバックアップをインポートする前に、システムデータベースをリカバリする必要があります。</block>
  <block id="eda5c3cd479d8bf56791258422f9d2e9" category="cell">HANAシステムレプリケーションのソース</block>
  <block id="fee1d7f7b5a29f13c080fff62b1a3b65" category="cell">HANAマルチパーティション</block>
  <block id="c8c7f73988a5c0973f17af8df0cb4dd9" category="list-text">テナント名がSIDと同じであるプライマリストレージからのクローニング</block>
  <block id="05590d33a5380f7b50af20fb1efa88b5" category="list-text">オフサイトのバックアップストレージからのクローニング</block>
  <block id="11a5026e03c97eab61a881708b9b49c8" category="list-text">複数テナントのプライマリストレージからのクローニング</block>
  <block id="3c25d22c9021a2e592956ec113805a27" category="paragraph">以降のセクションで説明するワークフローには、SAP HANAシステムのアーキテクチャとSnapCenterの設定に関する前提条件と制限事項がいくつかあります。</block>
  <block id="e5e449d642ed48f133072437710b3002" category="list-text">ここで説明するワークフローは、SnapCenter 5.0リリース以降でのみ有効です。</block>
  <block id="2878c2c0b8a2905a221c10c60a633bb9" category="list-text">ここで説明するワークフローは、シングルテナントまたは複数テナントのシングルホストSAP HANA MDCシステムに対して有効です。SAP HANAマルチホストシステムは対象外です。</block>
  <block id="ee1298a4094419180908c6a8f9750843" category="list-text">SnapCenterの自動検出と自動スクリプトの実行を有効にするには、SnapCenter SAP HANAプラグインをターゲットホストに導入する必要があります。</block>
  <block id="831c78892fc4855cb4580e43283bcc00" category="list-text">ワークフローは、物理ホストでNFSまたはFCPを使用するSAP HANAシステム、またはゲスト内NFSマウントを使用する仮想ホストに有効です。</block>
  <block id="82265800899596c16d78fb324ee99ee9" category="paragraph">次の図は、さまざまなシステム更新操作オプションに使用したラボのセットアップを示しています。</block>
  <block id="c1ccc7a2f7826dbffdffce4e5624e1e7" category="list-text">プライマリストレージまたはオフサイトバックアップストレージからのクローニング。テナント名はSIDと同じです。</block>
  <block id="2392da269b7d67c099f828cb74ad9c1b" category="list-text">ソースSAP HANAシステム：SS1とテナントSS1</block>
  <block id="ef01d4b10ea3ed41d87666599cdf399d" category="list-text">ターゲットのSAP HANAシステム：QS1とテナントQS1</block>
  <block id="95cc06694d517f9353d6b698b3b3bdc2" category="list-text">プライマリストレージからのクローニング（複数テナント）。</block>
  <block id="7c0d7757d3e67c52576fa49494e0d690" category="list-text">ソースSAP HANAシステム：SM1とTenant1およびTenant2</block>
  <block id="5d18cafd8986f8849c2f6bc0ff09d24f" category="list-text">ターゲットのSAP HANAシステム：QS1とTenant1およびTenant2</block>
  <block id="8e07dd0a7cef005f474929f3ccd8ab15" category="list-text">SnapCenter 5.0</block>
  <block id="0efafb1fb3d4bc2c365cbbb3af0533af" category="list-text">SAP HANAシステム：HANA 2.0 SPS7 rev.73</block>
  <block id="f77a693c238b55e124aad6c742f7abd9" category="list-text">SLES 15</block>
  <block id="20e87fcd4bc1712b811d18af13b0e6d6" category="list-text">ONTAP 9.14P1</block>
  <block id="9cf594fe38671c761a0b6e93fb10d913" category="paragraph">最初のステップとして、ターゲットのSAP HANAシステムがSnapCenter内で設定されている必要があります。</block>
  <block id="cefc420e25b581b96f90b91e0ff4cce1" category="list-text">SAP HANAターゲットシステムのインストール</block>
  <block id="e7c20caad0a94652e99b08f067f64ee4" category="list-text">SnapCenterバックアップ処理用のSAP HANAデータベースユーザの設定このユーザは、ソースシステムとターゲットシステムで同一である必要があります。</block>
  <block id="628c9d08d98e85f5ed00ff90d451d924" category="list-text">上記のバックアップユーザを使用した&lt;sid&gt; admのhdbuserstoreキーの設定。リカバリに自動スクリプトを使用する場合は、キー名を&lt;SID&gt;キーにする必要があります。</block>
  <block id="b0f3533d0b597ddb0a9a7b416ea89e64" category="list-text">SnapCenter SAP HANAプラグインをターゲットホストに導入SAP HANAシステムは、SnapCenterによって自動検出されます。</block>
  <block id="645ee22e308ea0aafb5d3acc44bd0dcf" category="list-text">SAP HANAリソース保護の設定（オプション）</block>
  <block id="3719947e600560be28eef96cf84ecefb" category="list-text">ターゲットのSAP HANAシステムをシャットダウン</block>
  <block id="4a44e0462a55038e478c10bd7443f236" category="list-text">SAP HANAデータボリュームをアンマウントします。</block>
  <block id="db196b5d964c1f53d6294ccf9014b550" category="paragraph">ターゲットシステムで実行するスクリプトを、SnapCenter allowed commands configファイルに追加する必要があります。</block>
  <block id="5a299bcf5b5a9319251be4bb7bfdff03" category="paragraph">ここでは、SAP HANAシステムの更新ワークフローについて説明します。このワークフローでは、ソースシステムとターゲットシステムのテナント名がSIDと同じになります。ストレージのクローニングはプライマリストレージで実行され、スクリプトによってリカバリが自動化され<block ref="3b7212a09a85af46251eb075db2a1a3f" prefix=" " category="inline-code"></block>ます。</block>
  <block id="03f09cb006153d192d8c9fe50e970086" category="inline-link-macro">「ストレージSnapshotバックアップを使用したSAP HANAシステムの更新処理に関する考慮事項」</block>
  <block id="d04adce820ccdbc17e627f19eb666286" category="list-text">ターゲットのSAP HANAシステムがSnapCenterで保護されている場合は、まず保護を削除する必要があります。</block>
  <block id="0b66e7539f72334708449da2e12d9bea" category="list-text">ソースSAP HANAシステムSS1から[Snapshot backup]を選択します。</block>
  <block id="b7de32cf0e13a0111d1b6c1b89e593ac" category="list-text">ターゲットホストを選択し、ターゲットホストのストレージネットワークインターフェイスを指定してください。</block>
  <block id="82f2589d399b8ea3a554792f2d8df999" category="list-text">ターゲットシステムのSIDを指定します（この例ではQS1）。</block>
  <block id="c9717f36d77a03c5f881f50aaab1f447" category="list-text">必要に応じて、クローン後の処理としてリカバリ用のスクリプトを指定します。</block>
  <block id="0917c92ee20b51dab8079504f8afb4d6" category="list-text">ソースSAP HANAシステムの選択したSnapshotバックアップに基づいてFlexCloneボリュームを作成します。</block>
  <block id="ff94c3eee45cbfae940f9add0b4eb508" category="list-text">FlexCloneボリュームをターゲットホストストレージのネットワークインターフェイスまたはigroupにエクスポートします。</block>
  <block id="07ade2cb0f2a92cfb2ee5a43961f3e10" category="list-text">のマウント処理を実行します。FlexCloneボリュームをターゲットホストにマウントします。</block>
  <block id="314c2cce5caa9e6fcd928fc9c35302d1" category="list-text">クローニング後処理のリカバリスクリプトを実行します（前に設定した場合）。それ以外の場合は、SnapCenterワークフローが終了したときにリカバリを手動で実行する必要があります。</block>
  <block id="fc37d233917d319533af32bb51dba4ff" category="list-text">必要に応じて、ターゲットのSAP HANAリソースをSnapCenterで保護します。</block>
  <block id="eb4b39872c9b3c2192257f6c1418c394" category="list-text">ソースシステムSS1からSnapshotバックアップを選択し、[Clone]をクリックします。</block>
  <block id="45cb930cdf8bda3887a5e6b8bcf538b8" category="admonition">入力するターゲットSIDによって、SnapCenterによるクローンリソースの管理方法が制御されます。ターゲットSIDのリソースがすでにSnapCenterで設定されており、プラグインホストと一致する場合、SnapCenterはクローンをこのリソースに割り当てます。ターゲットホストでSIDが設定されていない場合、SnapCenter は新しいリソースを作成します。</block>
  <block id="bd49bd38980d1a48b9ac573cdf9cc7fe" category="admonition">クローニングのワークフローを開始する前に、ターゲットシステムのリソースとホストをSnapCenterで設定しておくことが重要です。そうしないと、SnapCenterで作成された新しいリソースでは自動検出がサポートされず、説明されているワークフローは機能しません。</block>
  <block id="6b70c14bef490b5b4a9c096761e1d9ce" category="paragraph">ファイバチャネルSANのセットアップでは、エクスポートIPアドレスは必要ありませんが、次の画面で使用するプロトコルを指定する必要があります。</block>
  <block id="2b23cdd09cd3ee449ae9f62aa220bc15" category="admonition">スクリーンショットは、ファイバチャネル接続を使用した別のラボセットアップを示しています。</block>
  <block id="0893fd1866670782e0403c79e13cedce" category="paragraph">Azure NetApp Filesと手動のQoS容量プールを使用している場合は、新しいボリュームのスループットを最大化する必要があります。容量プールに十分なヘッドルームがあることを確認してください。そうしないと、クローニングワークフローが失敗します。</block>
  <block id="984e3ff8040e7c400c8af9ccde982a58" category="admonition">スクリーンショットは、Azure NetApp Filesを使用したMicrosoft Azureで実行される別のラボセットアップを示しています。</block>
  <block id="a246e063e5a58db55d7ef2e1bb5b2753" category="list-text">必要なコマンドラインオプションを指定して、オプションのクローニング後スクリプトを入力します。この例では、クローニング後のスクリプトを使用してSAP HANAデータベースのリカバリを実行します。</block>
  <block id="4b553d5e2901b3bd5ebdeaeaf95deb09" category="admonition">前述したように、リカバリスクリプトの使用はオプションです。SnapCenterクローニングのワークフローが終了したあとに、手動でリカバリを実行することもできます。</block>
  <block id="180bfaef4a78bba04a268efdcb9583d8" category="admonition">リカバリ処理用スクリプトは、ログのクリア処理を使用してSAP HANAデータベースをSnapshotのポイントインタイムにリカバリし、フォワードリカバリは実行しません。特定の時点までのフォワードリカバリが必要な場合は、リカバリを手動で実行する必要があります。手動フォワードリカバリでは、ソースシステムのログバックアップをターゲットホストで利用できることも必要です。</block>
  <block id="ebfa595f3cfff6397d5505668de0daaf" category="list-text">SnapCenter の[ジョブの詳細]画面に、処理の進捗状況が表示されます。ジョブの詳細には、データベースリカバリを含めた全体的な実行時間が3分未満であることも示されています。</block>
  <block id="35ae1427629c6141347a56f0f206a9aa" category="list-text">スクリプトのログファイル<block ref="d8eec050302627350eb082c264bec8f6" prefix=" " category="inline-code"></block> には、リカバリ処理で実行されたさまざまなステップが表示されます。このスクリプトは、システムデータベースからテナントのリストを読み取り、既存のすべてのテナントのリカバリを実行します。</block>
  <block id="484ee70604ccba123df2c8b647e52d46" category="list-text">SAP HANAデータベースが実行されます。</block>
  <block id="85766798d4ef3cbf9aab9706b8710129" category="list-text">ターゲットのSAP HANAシステムを保護する場合は、ターゲットシステムのリソースをクリックして自動検出を実行する必要があります。</block>
  <block id="371c81f2e3f355a3efc6d7a2704e44fe" category="paragraph">自動検出プロセスが完了すると、新しいクローンボリュームがストレージフットプリントセクションに表示されます。</block>
  <block id="93b753d711577984a6f989bbe3b0d5c7" category="paragraph">リソースを再度クリックすると、更新したQS1システムのデータ保護を設定できます。</block>
  <block id="15be6cf7fdcb22e17d63f0e911172b26" category="paragraph">ここでは、ソースシステムとターゲットシステムのテナント名がSIDと同じであるSAP HANAシステムの更新ワークフローについて説明します。ストレージのクローニングはオフサイトのバックアップストレージで実行され、スクリプトsc-system-refresh.shを使用してさらに自動化されます。</block>
  <block id="eb60f75b56b459c5a2055a06898489e3" category="paragraph">選択したバックアップにセカンダリストレージの場所が複数ある場合は、必要なデスティネーションボリュームを選択する必要があります。</block>
  <block id="029ffd9a3919273510e46b6290e3b8f7" category="paragraph">以降の手順は、プライマリストレージからのクローニングのワークフローと同じです。</block>
  <block id="4962363e29e7acb600c871b9a2e605d7" category="section-title">複数テナントのSAP HANAシステムのクローニング</block>
  <block id="ed7b7ec143380db464dc6cf992d44bca" category="paragraph">このセクションでは、複数のテナントを使用したSAP HANAシステムの更新ワークフローについて説明します。ストレージのクローニングはプライマリストレージで実行され、スクリプトを使用してさらに自動化され<block ref="3b7212a09a85af46251eb075db2a1a3f" prefix=" " category="inline-code"></block>ます。</block>
  <block id="af91ea812cfad225a7ca2a1b156b3ce8" category="paragraph">SnapCenterで必要な手順は、「テナント名がSIDと等しいプライマリストレージからのクローニング」セクションで説明した手順と同じです。唯一の違いは、スクリプト内でのテナントリカバリ処理で、すべてのテナントがリカバリされる点です<block ref="3b7212a09a85af46251eb075db2a1a3f" prefix=" " category="inline-code"></block>。</block>
  <block id="37a2727e344d9facb9435dc33b8e61d4" category="paragraph">ターゲットのSAP HANAシステムがSnapCenterで保護されている場合は、まず保護を削除する必要があります。ターゲットシステムのトポロジビューで、Remove Protection（保護の削除）をクリックします。</block>
  <block id="9de8473b21ff03236d0c22b8e66fb32b" category="paragraph">クローン削除ワークフローを次の手順で実行します。</block>
  <block id="4163c4375ee84108e7464bed795c7892" category="list-text">ソースシステムのトポロジビューでクローンを選択し、[Delete]をクリックします。</block>
  <block id="307887031775930c6a8e1e3bced427b1" category="list-text">スクリプトのログファイルに<block ref="d8eec050302627350eb082c264bec8f6" prefix=" " category="inline-code"></block> は、シャットダウンとアンマウントの処理手順が表示されます。</block>
  <block id="11166cbb1d1517e978936ba177acabdd" category="paragraph">システム更新処理のターゲットシステムを長期間使用する予定がある場合は、システム更新処理の一環としてFlexCloneボリュームをスプリットすることを推奨します。</block>
  <block id="69b329311d07b607f52569715e798844" category="admonition">クローンスプリット処理でクローンボリュームの使用がブロックされることはないため、SAP HANAデータベースの使用中にいつでも実行できます。</block>
  <block id="e92bb8c6f438e94fa791d43bdb4dcbcd" category="admonition">Azure NetApp FilesではAzure NetApp Files、作成後に常にクローンがスプリットされるため、クローンスプリット処理は実行できません。</block>
  <block id="b0418a29ab57c4166b0221cb9ca10482" category="paragraph">SnapCenterのリソースビューで、ターゲットシステムQS1がクローニングされたリソースとしてマークされなくなりました。ソースシステムのトポロジビューに戻ると、クローンは表示されなくなります。スプリットボリュームは、ソースシステムのSnapshotバックアップとは独立しています。</block>
  <block id="4a1abc6199d49f198914fd8d148bf5c0" category="paragraph">クローンスプリット処理後の更新ワークフローは、クローンスプリットを使用しない処理と少し異なります。クローンスプリット処理後は、ターゲットデータボリュームがFlexCloneボリュームでなくなるため、クローン削除処理は必要ありません。</block>
  <block id="7dfe8874c51c5d084185151f12846337" category="list-text">SAP HANAデータベースをシャットダウンし、データボリュームをアンマウントして、SnapCenterで作成されたfstabエントリを削除する必要があります。これらの手順は手動で実行する必要があります。</block>
  <block id="023a58384ef01abf43f481c807b63886" category="list-text">これで、前のセクションで説明したように、SnapCenterクローン作成ワークフローを実行できるようになりました。</block>
  <block id="c877627d59d4aabd928b804662a092c9" category="list-text">更新処理後も古いターゲットデータボリュームは引き続き存在するため、ONTAP System Managerなどを使用して手動で削除する必要があります。</block>
  <block id="b15c25b8eded6042b31638d675f46bbb" category="paragraph">画面出力には、PowerShellスクリプトclone–delete.ps1が実行されたことが示されています。</block>
  <block id="c02f461d6bc735814c693a2961f876d0" category="admonition">システムを別のSnapshotバックアップにリセットする必要がある場合は、手順6と手順4で十分です。SAP HANA共有ボリュームは引き続きマウントできます。</block>
  <block id="3a76181089e0a4d1760e6aee32bf113f" category="list-text">SAP HANAデータボリュームのSnapCenterクローン削除ワークフロー（データベースのシャットダウンを含む）。</block>
  <block id="5c1f104318aa49fc440eebd55451b8ee" category="list-text">ここで説明するワークフローは、シングルホストのSAP HANA MDCシステムに対して有効です。複数のホストシステムはサポートされません。</block>
  <block id="db2df21a0523790017cef08c7f5c3eaa" category="list-text">自動スクリプトを実行するには、SnapCenter SAP HANAプラグインをターゲットホストに導入する必要があります。</block>
  <block id="679aaef31443a5734d1e57a79b042625" category="list-text">NFSのワークフローが検証されました。SAP HANA共有ボリュームのマウントに使用される自動化で<block ref="9042a1dcfe3f159e3f1da35f8f9052d7" prefix=" " category="inline-code"></block>は、FCPはサポートされません。この手順は、手動で実行するか、スクリプトを拡張して実行する必要があります。</block>
  <block id="b344b862744c6785533cff671e8e9106" category="list-text">ここで説明するワークフローは、SnapCenter 5.0リリース以降でのみ有効です。</block>
  <block id="f4c86ccde3feda7d831a21fb6b56af67" category="paragraph">次の図は、システムのクローン作成に使用するラボのセットアップを示しています。</block>
  <block id="b7840bade6da17d016ba5336a5c3aaa7" category="list-text">SAP HANAシステム：HANA 2.0 SPS6 rev.61</block>
  <block id="af05a28023ad2e8de362143859a247fd" category="paragraph">通常運用時は、SAP HANA QAやテストシステムなど、他の目的にターゲットホストを使用できます。したがって、前述のほとんどの手順は、システムクローン処理が要求されたときに実行する必要があります。一方、やなどの関連する設定ファイルは<block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block> 、<block ref="32e243072177237fcbc533f525dd494c" prefix=" " category="inline-code"></block>設定ファイルをコピーするだけで準備し、本番環境に置くことができます。</block>
  <block id="e9c407386493da0488ffd728b9d23d75" category="paragraph">ターゲットホストの準備には、SAP HANA QAまたはテストシステムのシャットダウンも含まれます。</block>
  <block id="b43670ab546cad4f1187a024f2655141" category="section-title">*ターゲットサーバーのホスト名とIPアドレス*</block>
  <block id="82c0bd942f14ac535ea2ec3308abb419" category="section-title">*必要なソフトウェアのインストール*</block>
  <block id="03471c13e336e3a43d05ecf4cc3b50f1" category="paragraph">SAP ホストエージェントソフトウェアをターゲットサーバにインストールする必要があります。詳細については、SAPヘルプポータルのを参照して<block ref="442ac416f46b28c63828de9c422750a6" category="inline-link-rx"></block> ください。</block>
  <block id="19de9f5ceba0710bef9910d02b8c00be" category="paragraph">SnapCenterでのホストの追加処理を使用して、SnapCenter SAP HANAプラグインをターゲットホストに導入する必要があります。</block>
  <block id="8500f355a94e4036a165523b43519009" category="section-title">*ユーザー'ポート'およびSAPサービスの構成*</block>
  <block id="cbd9861da1634998fdbec0f1674bffaf" category="paragraph">ターゲットサーバに、 SAP HANA データベースに必要なユーザとグループが配置されている必要があります。通常は、ユーザの一元管理が使用されるため、ターゲットサーバで設定手順を行う必要はありません。SAP HANAデータベースに必要なポートがターゲットホストに設定されている必要があります。/etc/servicesファイルをターゲット・サーバにコピーすることにより'ソース・システムから構成をコピーできます</block>
  <block id="0fe0a84b026a92619e0b883f8ace7f05" category="section-title">*ファイル・システム・マウントの準備*</block>
  <block id="6e1bc5bbe01a1cf6f8a91aa5f717dfbd" category="paragraph">この例では、ディレクトリ<block ref="8d71e4e8f2c69228b36f61ec92ff6e55" prefix=" " category="inline-code"></block>、<block ref="b61595b5b7b716bd6b8bd21e4fa4a3bf" prefix=" " category="inline-code"></block> および<block ref="f2540a99f8fb2005adffa67040796a39" prefix=" " category="inline-code"></block> を作成する必要があります。</block>
  <block id="e1ef880ffbb207865c6448e388da62a2" category="section-title">*スクリプト実行の準備*</block>
  <block id="20f8e33f71e1aadeaebae17a3a593359" category="paragraph">ターゲットシステムで実行するスクリプトを、SnapCenter allowed commands configファイルに追加する必要があります。</block>
  <block id="5c233cde12edcc7cd9a5040d286ad73d" category="list-text">ソースシステムのSS1共有ボリュームからSnapshotバックアップを選択し、[Clone]をクリックします。</block>
  <block id="6369c2aa65382d97cfb630036e611bc6" category="list-text">ターゲット修復システムの準備が完了したホストを選択します。NFSエクスポートのIPアドレスは、ターゲットホストのストレージネットワークインターフェイスである必要があります。ターゲットSIDとして、ソースシステムと同じSIDを保持します。この例では、SS1。</block>
  <block id="fc85d3d93a940166679a1ff3ce2858c7" category="list-text">SnapCenter の[ジョブの詳細]画面に、処理の進捗状況が表示されます。</block>
  <block id="70bc6b2748946208934f890668f6e3ad" category="list-text">sc-mount-volume.shスクリプトのログファイルには、マウント処理で実行されたさまざまな手順が表示されます。</block>
  <block id="48a54a3a578b8e3e928361dc37dc0b17" category="list-text">SnapCenterワークフローが完了すると、/usr/sap/ss1と/hana/sharedファイルシステムがターゲットホストにマウントされます。</block>
  <block id="f5aed610591d8d0f471cd94b9ec0b07b" category="list-text">/hana/sharedボリュームが使用可能になったので、SAP HANAサービスを開始できます。</block>
  <block id="e6c84cae702fee0b7de0005e27cafd83" category="list-text">これで'SAPホスト・エージェントとsapstartsrvのプロセスが開始されました</block>
  <block id="b4570d56ed8039388696e01590c23ef0" category="paragraph">その他のSAPアプリケーションサービスのクローニングは、セクション「SAP HANA共有ボリュームのクローニング」で説明したSAP HANA共有ボリュームと同じ方法で行います。もちろん、SAPアプリケーションサーバに必要なストレージボリュームもSnapCenterで保護する必要があります。</block>
  <block id="cd366cfea7a5fb3bf24ebeea8fb49f63" category="paragraph">必要なサービスエントリを/usr/sap/sapservicesに追加し、ポート、ユーザ、およびファイルシステムのマウントポイント（/usr/sap/SIDなど）を準備しておく必要があります。</block>
  <block id="d0365f13b3672003f3890d0f741af6b6" category="list-text">ソースシステムSS1からSAP HANA Snapshotバックアップを選択します。</block>
  <block id="3aac5dfc2f5dcdace5aa92b15faf9364" category="list-text">ターゲット修復システムの準備が完了したホストを選択します。NFSエクスポートのIPアドレスは、ターゲットホストのストレージネットワークインターフェイスである必要があります。ターゲットSIDとして、ソースシステムと同じSIDを保持します。この例では、SS1</block>
  <block id="49cb46f6fb695d36680d613409cecb98" category="list-text">必要なコマンドラインオプションを指定して、クローニング後のスクリプトを入力します。</block>
  <block id="bd56a8d936792c44272149daeaa73c61" category="admonition">リカバリ処理用スクリプトは、Snapshot処理の時点までSAP HANAデータベースをリカバリし、フォワードリカバリを実行しません。特定の時点までのフォワードリカバリが必要な場合は、リカバリを手動で実行する必要があります。手動フォワードリカバリでは、ソースシステムのログバックアップをターゲットホストで利用できることも必要です。</block>
  <block id="30d1c8855084004ff5efd83a1b2ac199" category="paragraph">スクリプトのログファイル<block ref="d8eec050302627350eb082c264bec8f6" prefix=" " category="inline-code"></block> には、マウント処理とリカバリ処理に対して実行されるさまざまな手順が表示されます。</block>
  <block id="b9a43783881462b22ed1b9304e93a208" category="paragraph">これでSAP HANAシステムが利用可能になり、リペアシステムなどとして使用できます。</block>
  <block id="1a859eefed9ce4c295aedc96dfafaf4f" category="paragraph">次の図は、システム更新、システムコピー、またはシステムクローンの処理中に実行する必要がある主な手順を示しています。青のボックスはSnapCenterで自動化できる手順を示し、グレーのボックスは手動またはサードパーティのツールを使用してSnapCenter以外で実行する必要がある手順を示します。</block>
  <block id="a7602bcc4a327a853c0bc9244c8d5cf7" category="doc">サポートされるインフラとシナリオ</block>
  <block id="000ce6bcdcf462bf4ae7ce71777101b1" category="paragraph">このドキュメントでは、オンプレミスのNetAppシステム、Amazon FSx for NetApp ONTAPシステム、およびAzure NetApp Filesで実行されるSAP HANAシステムの更新とクローニングのシナリオについて説明します。ただし、すべてのストレージプラットフォームですべての機能とシナリオを使用できるわけではありません。次の表は、サポートされる構成をまとめたものです。</block>
  <block id="2186ce34f5e82979ca155ca8a50f154e" category="paragraph">このドキュメントでは、オンプレミスのNetAppシステムで実行されるSAP HANAランドスケープを使用し、NFSをストレージプロトコルとして使用しています。ワークフローの手順のほとんどは、プラットフォームごとに同じです。違いがある場合は、このドキュメントで説明します。</block>
  <block id="9dc9e3437e4c7ab520eea0bc890ec77d" category="cell">*オンプレミスのNetAppシステム*</block>
  <block id="dc590521b479337b3c16fdc9b86fa862" category="cell">* AWS FSx for NetApp ONTAP *</block>
  <block id="502138babd0f5b6a19480328fd806740" category="cell">* Azure NetApp Files *</block>
  <block id="9b8bdf7379e889d83ab24e782c87d2ac" category="cell">ストレージプロトコル</block>
  <block id="0f59ffbf177067a2b43529c379b9a941" category="cell">NFS、ファイバチャネル</block>
  <block id="1d1a594959ec615f56516f5d0f5e8ddb" category="cell">NFS</block>
  <block id="cd390e0f91519da01691549afef00620" category="cell">シンクローン（FlexClone）</block>
  <block id="0255a9cd10f452086da62b59f792a1f2" category="cell">いいえ。現在のANFバージョンでは、クローンボリュームは常にスプリットされます。</block>
  <block id="382b0f5185773fa0f67a8ed8056c7759" category="cell">N/A</block>
  <block id="9f1d8d71503bb95d72fe41f56c48761a" category="cell">フライマリカラノクロニンク</block>
  <block id="3f78baa2e72d94c1e4ae14fd035d05aa" category="cell">オフサイトバックアップからのクローニング</block>
  <block id="13a880a9528cd60eb10631adb9802946" category="cell">DRサイトでのクローニング</block>
  <block id="07973f5db801b7bc6b863fe0aae5ee4a" category="cell">はい。ただしSnapCenterには統合されていません。</block>
  <block id="16fc6bd74d4496ed31fe8ee50e1887ee" category="section-title">QA、テスト、サンドボックス、トレーニングシステムのデータ更新</block>
  <block id="862c3e3761bf683136ee838de2c0c203" category="paragraph">リペアシステムを設定する際には、柔軟性と俊敏性が重要です。NetAppのストレージベースのSnapshotバックアップを使用すると、NetApp FlexCloneテクノロジを使用して、複数の整合性のあるデータベースイメージを使用して本番用システムのクローンを作成できます。ファイルベースのバックアップからリダイレクトされたリストアを使用して修復システムを設定する場合、FlexCloneボリュームは数時間ではなく数秒で作成できます。</block>
  <block id="2792124a69a48ece7030f9b29701007b" category="paragraph">効果的なディザスタリカバリ戦略では、必要なワークフローをテストする必要があります。テストでは、戦略が機能するかどうか、および内部ドキュメントで十分かどうかを検証します。また、管理者は必要な手順をトレーニングすることもできます。</block>
  <block id="0ca7de0d8a3d9d654f0a2d183f1c4aef" category="inline-link">TR-4646：『SAP HANA Disaster Recovery with Storage Replication』（netapp.com）</block>
  <block id="4b3309d5f0ac80977c53b53f174cf02b" category="inline-link">SAP Business Application and SAP HANA Database Solutions（netapp.com）</block>
  <block id="73018ba6d8f50b92b992ab316f15a0a6" category="paragraph">SnapCenter 4.3および改良された自動化スクリプトを対象とした完全な書き換え+システム更新処理とシステムクローン処理のワークフローの説明が新しくなりました。</block>
  <block id="30dac510a408bf8be8dd4336d96b482f" category="cell">SnapCenter 4.6 P1で変更されたワークフローに対応</block>
  <block id="f66bc2df80ac37f354b591907be92e18" category="cell">2024年7月</block>
  <block id="17fb9a63c15de98fb13578ff5b945b03" category="paragraph">このドキュメントはオンプレミスのNetAppシステムを対象としています。 FSx for ONTAPとAzure NetApp Files +新しいSnapCenter 5.0の操作クローンの作成と削除のワークフローでのマウントとアンマウント+ファイバチャネルSANの具体的な手順の追加+ Azure NetApp Filesの具体的な手順の追加+対応したシンプルなスクリプト+有効なSAP HANAに必要な手順の追加<block ref="d8eec050302627350eb082c264bec8f6" prefix=" " category="inline-code"></block></block>
  <block id="a5cf81e748f3b3e6fad26b2e3470f879" category="list-text"><block ref="a5cf81e748f3b3e6fad26b2e3470f879" category="inline-link-macro-rx"></block></block>
  <block id="87c8349f2562b9df828a79206981328c" category="list-text"><block ref="87c8349f2562b9df828a79206981328c" category="inline-link-macro-rx"></block></block>
  <block id="20a0dcae2f540339bbf69dbaa7f0050a" category="list-text"><block ref="20a0dcae2f540339bbf69dbaa7f0050a" category="inline-link-macro-rx"></block></block>
  <block id="1b70ac0a972fddf1e1a33e6ed9df49c7" category="cell">2022年9月</block>
  <block id="3c3691e44e6ff923dc83662b2f7e1001" category="cell">新しいOS -リリース</block>
  <block id="6d6bbe0ff14c220c87649b72d24ad927" category="cell">2023年8月</block>
  <block id="588e591ee2a91af94d3b4c16b18b9baf" category="cell">新しいストレージシステム（AFF Cシリーズ）</block>
  <block id="c33f6b520ad3c202db9ed1b825ac8b3d" category="cell">2023年12月</block>
  <block id="573a46f547eae3963940bf6d5022971e" category="cell">ホストセットアップの更新：nconnectの設定が改訂され、NFSv4.1セッションに関する情報が追加されました。</block>
  <block id="5b44aad20fbc2491f38bc99fd2eb8086" category="cell">2024年5月</block>
  <block id="0a961d2cbb588be1d5a93b4774cf6ef1" category="cell">新しいストレージシステム（AFF Aシリーズ）</block>
  <block id="f31f11743f1dfba18e9f008e2956d24e" category="cell">2024年9月</block>
  <block id="e4a9c264a13e2ec5faac7a73cf8d0e8c" category="cell">マイナーアップデート</block>
  <block id="44fee80ab2b2a3105ec17b94b206cc8f" category="inline-link"><block ref="44fee80ab2b2a3105ec17b94b206cc8f" category="inline-link-rx"></block></block>
  <block id="55162df4eaa40993b4b04219f5dd5e87" category="paragraph"><block ref="55162df4eaa40993b4b04219f5dd5e87" category="inline-link-rx"></block></block>
  <block id="292ed8e9851502aa4feb9eef4c6dbb13" category="paragraph">SAP Landscape Management （ SAP LaMa ）を使用すると、オンプレミスのデータセンターやクラウドで実行されているシステムでも、複雑な SAP システム環境を管理できます。SAP LaMa は、ネットアップの Storage Services Connector （ SSC ）と連携して、 SAP システムのクローニングやレプリケーション、 Snapshot や FlexClone テクノロジを使用したコピー、更新などのストレージ運用を実行できます。そのため、ストレージクローニングテクノロジに基づいて SAP システムのコピーを完全に自動化し、必要な SAP のポストプロセスも含めて実行できます。SAP LaMa向けNetAppソリューションの詳細については、を参照してください<block ref="f5cd59812ce597d8b57d775862213a16" category="inline-link-rx"></block>。</block>
  <block id="d5e4b2586a8501ff7c2a392297c5cd32" category="paragraph">バージョン 4.6 以降の SnapCenter では、 HANA システムレプリケーション関係で設定された HANA システムの自動検出がサポートされます。各ホストは、物理 IP アドレス（ホスト名）とストレージレイヤ上の個々のデータボリュームを使用して設定されます。2 つの SnapCenter リソースが 1 つのリソースグループに統合されている場合、 SnapCenter はプライマリまたはセカンダリのホストを自動的に識別し、必要なバックアップ処理を適宜実行します。SnapCenter で作成された Snapshot とファイルベースのバックアップの保持の管理は、両方のホストで実行されます。これにより、現在のセカンダリホストでも古いバックアップが削除されるようになります。次の図に概要を示します。SnapCenterでのHANAシステムレプリケーションに対応したHANAシステムの構成と運用の詳細については、を参照<block ref="cfe50e5b56f8a98ece306a69e546da3e" category="inline-link-rx"></block>してください。</block>
  <block id="e5e2a6bf28307550240d9ed91bbb0fa0" category="paragraph"><block ref="e5e2a6bf28307550240d9ed91bbb0fa0" category="inline-link-rx"></block></block>
  <block id="bc83c6be4c9eaece698b7eb18b8517a0" category="paragraph"><block ref="bc83c6be4c9eaece698b7eb18b8517a0" category="inline-link-rx"></block></block>
  <block id="a36cfc2690f8671748f584abb16bdd04" category="cell">新しいストレージシステム</block>
  <block id="0fba9f2a3fbb4cfbaed44806cd9933a2" category="cell">新しいストレージシステム（ASA Aシリーズ）</block>
  <block id="5e8f0f670e38fbdf628b0883f946934f" category="inline-image-macro">入力/出力ダイアログを示す図、または書き込まれた内容を表す図</block>
  <block id="085efbf60b3725eeb0ee8ff55a22a221" category="paragraph"><block ref="085efbf60b3725eeb0ee8ff55a22a221" category="inline-image-macro-rx" type="image"></block></block>
  <block id="07d652acdae0a73446e157f933c39530" category="paragraph"><block ref="07d652acdae0a73446e157f933c39530" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e0e586261702652aa86584fc3f6f7d3" category="paragraph"><block ref="2e0e586261702652aa86584fc3f6f7d3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f7b545f17ee3f29abc32c6432914443" category="paragraph"><block ref="9f7b545f17ee3f29abc32c6432914443" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0e45db023a26e4137bc4e65f4e28483" category="paragraph"><block ref="b0e45db023a26e4137bc4e65f4e28483" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eb250eaded5f0165a2ad37e5bfc9f90f" category="paragraph"><block ref="eb250eaded5f0165a2ad37e5bfc9f90f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d30518549ecc6aed9b4994b6b3630f0" category="paragraph"><block ref="3d30518549ecc6aed9b4994b6b3630f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="adf4a3f33015499461672af5e91f00cb" category="paragraph"><block ref="adf4a3f33015499461672af5e91f00cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e317ecdc7c5b6774a42eec2438865d46" category="paragraph"><block ref="e317ecdc7c5b6774a42eec2438865d46" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e2299ebf1c65b4c5359424a5c14af82f" category="paragraph"><block ref="e2299ebf1c65b4c5359424a5c14af82f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0d9b6640f970bc3e0490200165dafaee" category="paragraph"><block ref="0d9b6640f970bc3e0490200165dafaee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1731b936ec01fb67650cc1f22ee99c8a" category="paragraph"><block ref="1731b936ec01fb67650cc1f22ee99c8a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="674c4972efaf0701f358ebfc8521b4ba" category="paragraph"><block ref="674c4972efaf0701f358ebfc8521b4ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8b9e1f7ba7a71896ac3b27d54b1553a" category="paragraph"><block ref="e8b9e1f7ba7a71896ac3b27d54b1553a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4fe197efb48d951817ec3e6456c8ed86" category="paragraph"><block ref="4fe197efb48d951817ec3e6456c8ed86" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c0d10a2dfbd0d578067510d2f31c2b18" category="paragraph"><block ref="c0d10a2dfbd0d578067510d2f31c2b18" category="inline-image-macro-rx" type="image"></block></block>
  <block id="482082f888a81c29cb607272c8815b25" category="paragraph"><block ref="482082f888a81c29cb607272c8815b25" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4b2a78f2508fa7b80945f707b3a38cf" category="paragraph"><block ref="c4b2a78f2508fa7b80945f707b3a38cf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5555e191de64d3b80e23d8c74c86faff" category="paragraph"><block ref="5555e191de64d3b80e23d8c74c86faff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0983a769f9e2c33bc99e5f0dfaffa995" category="paragraph"><block ref="0983a769f9e2c33bc99e5f0dfaffa995" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1121f7d56f65af16927195028dca2ced" category="paragraph"><block ref="1121f7d56f65af16927195028dca2ced" category="inline-image-macro-rx" type="image"></block></block>
  <block id="052a582be64e1dd71040846dafd74e80" category="paragraph"><block ref="052a582be64e1dd71040846dafd74e80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7115b058c69a33fcaa134234783500df" category="paragraph"><block ref="7115b058c69a33fcaa134234783500df" category="inline-image-macro-rx" type="image"></block></block>
  <block id="75b60d6e1a77b7c2b4732a1081d4f9bc" category="paragraph"><block ref="75b60d6e1a77b7c2b4732a1081d4f9bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ea5a836e9a4b8204f750abefd838986" category="paragraph"><block ref="1ea5a836e9a4b8204f750abefd838986" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f8849a8f7ca76b3d93c6e7093a41d6cc" category="paragraph">このドキュメントでは、SnapVaultを使用してバックアップを作成する方法について説明します。</block>
  <block id="0c0acee5da4f998604bb63e426324dc8" category="paragraph"><block ref="0c0acee5da4f998604bb63e426324dc8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8eeb22ac2ec3194a8f4dcd5bf90c5376" category="paragraph"><block ref="8eeb22ac2ec3194a8f4dcd5bf90c5376" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c0fb06f1c756c675a699f04ea39c35cf" category="paragraph"><block ref="c0fb06f1c756c675a699f04ea39c35cf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="665142113d98e378bb0b420d9fbd7847" category="paragraph"><block ref="665142113d98e378bb0b420d9fbd7847" category="inline-image-macro-rx" type="image"></block></block>
  <block id="466dfadfb6a8383efbfec1738e63981d" category="paragraph"><block ref="466dfadfb6a8383efbfec1738e63981d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5e5c27df6e9b0364fe7f9139baaab8f" category="paragraph"><block ref="c5e5c27df6e9b0364fe7f9139baaab8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2ed88024658115d5c34da6959d0aa2c0" category="paragraph"><block ref="2ed88024658115d5c34da6959d0aa2c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="689a14925191468af4abac93ac4bae22" category="paragraph"><block ref="689a14925191468af4abac93ac4bae22" category="inline-image-macro-rx" type="image"></block></block>
  <block id="761e86b208c561be6f1b9504a4ac37c0" category="paragraph"><block ref="761e86b208c561be6f1b9504a4ac37c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5b559869d4e5353ee5bf9ba5abbdb8e" category="paragraph"><block ref="f5b559869d4e5353ee5bf9ba5abbdb8e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b43e6002733dc8a9b0a3cc8db3631ce5" category="paragraph"><block ref="b43e6002733dc8a9b0a3cc8db3631ce5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5cfe302d8fd6fb49c656dd6a61219a19" category="paragraph"><block ref="5cfe302d8fd6fb49c656dd6a61219a19" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d69ca1c54c43856fc373948e9036e217" category="paragraph">作成者：Nils Bauer、NetApp</block>
  <block id="292062c311206183ebdd6ca3c288b1a2" category="paragraph"><block ref="292062c311206183ebdd6ca3c288b1a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9ee2e3f66acaae241fb30c6239dafe90" category="paragraph"><block ref="9ee2e3f66acaae241fb30c6239dafe90" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a255f306e8ce7199fafc007c288aa97a" category="paragraph"><block ref="a255f306e8ce7199fafc007c288aa97a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9e547491b14163fc06d796271102091" category="paragraph"><block ref="a9e547491b14163fc06d796271102091" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f1ca23fdd99c11241abdcac87a788f90" category="paragraph"><block ref="f1ca23fdd99c11241abdcac87a788f90" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5d68d8e321832c5a6809c03cdeb7d54" category="paragraph"><block ref="c5d68d8e321832c5a6809c03cdeb7d54" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b1ae3730b79e17eb65840598e14cff6e" category="paragraph"><block ref="b1ae3730b79e17eb65840598e14cff6e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1480cb2d8a21d47fd14b5d83279d288d" category="paragraph"><block ref="1480cb2d8a21d47fd14b5d83279d288d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd51e0317461a4c4ab1c50f23e42ba35" category="paragraph"><block ref="bd51e0317461a4c4ab1c50f23e42ba35" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b88040dfd5321d269e81face489ed592" category="paragraph"><block ref="b88040dfd5321d269e81face489ed592" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6d834903af902328d64086e92b2caa5a" category="paragraph"><block ref="6d834903af902328d64086e92b2caa5a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4123b8d307798c71349dc904fd7592d" category="paragraph"><block ref="b4123b8d307798c71349dc904fd7592d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f55f824f9e55c7e532cbd044e1c3cd70" category="paragraph"><block ref="f55f824f9e55c7e532cbd044e1c3cd70" category="inline-image-macro-rx" type="image"></block></block>
  <block id="499b2145e1f9a566c2096488a52eef93" category="paragraph"><block ref="499b2145e1f9a566c2096488a52eef93" category="inline-image-macro-rx" type="image"></block></block>
  <block id="725e0c4dd0da2f44dd5e12847ad2aa02" category="paragraph"><block ref="725e0c4dd0da2f44dd5e12847ad2aa02" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49af863f2f6721b62e12fb9ad5b71e6a" category="paragraph"><block ref="49af863f2f6721b62e12fb9ad5b71e6a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="889c04cc63ee856efcd32d8e532d8c2c" category="paragraph"><block ref="889c04cc63ee856efcd32d8e532d8c2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="371da8e1ec34d2a8f5c5b20f0e720f5d" category="paragraph"><block ref="371da8e1ec34d2a8f5c5b20f0e720f5d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe787194b4bc9d3f9c9bf659c643f835" category="paragraph"><block ref="fe787194b4bc9d3f9c9bf659c643f835" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22541d7972f26d2e166eb883482f2b6b" category="paragraph"><block ref="22541d7972f26d2e166eb883482f2b6b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b9ebd1a574cf21289ac3a5496cda4fa" category="paragraph"><block ref="6b9ebd1a574cf21289ac3a5496cda4fa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b7f859daf0ba8a3409adca386e7fedd4" category="paragraph"><block ref="b7f859daf0ba8a3409adca386e7fedd4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22231633df8cb3267a20a9ae1197b0cb" category="paragraph"><block ref="22231633df8cb3267a20a9ae1197b0cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d85e6ca0f060545a30bc27ba0d0378c" category="paragraph"><block ref="2d85e6ca0f060545a30bc27ba0d0378c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="74b70257e7405ff10b797869cc7b17f6" category="paragraph"><block ref="74b70257e7405ff10b797869cc7b17f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9599d066a3b3f423d2b80efa23d6dabd" category="paragraph"><block ref="9599d066a3b3f423d2b80efa23d6dabd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0dfe2ca2f17a011c65cef6fd64e720ec" category="paragraph"><block ref="0dfe2ca2f17a011c65cef6fd64e720ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="17c3600ebb7c62e9975c8a3ce664c7d8" category="paragraph"><block ref="17c3600ebb7c62e9975c8a3ce664c7d8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="486fdec5eabff6d515ed0fb47e3aed04" category="paragraph"><block ref="486fdec5eabff6d515ed0fb47e3aed04" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb9ff2317d1e171c45d58af152d844f1" category="paragraph"><block ref="fb9ff2317d1e171c45d58af152d844f1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8377c9c81420014d537e512eae625abe" category="paragraph"><block ref="8377c9c81420014d537e512eae625abe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1756aa8abc7f1094f194883a1fac6002" category="paragraph"><block ref="1756aa8abc7f1094f194883a1fac6002" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ee6d8ed0ae31a1c957aff9fae65dbbf5" category="paragraph"><block ref="ee6d8ed0ae31a1c957aff9fae65dbbf5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8ad7e31b1db9900d9fa4df04443e8741" category="paragraph"><block ref="8ad7e31b1db9900d9fa4df04443e8741" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e0fcd0740c4da9daa5ffd673095ae40" category="paragraph"><block ref="9e0fcd0740c4da9daa5ffd673095ae40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6d64d26793fadd91b1bc7394658365b0" category="paragraph"><block ref="6d64d26793fadd91b1bc7394658365b0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c31cfaef9364a7790fe4671d2b005ff8" category="paragraph"><block ref="c31cfaef9364a7790fe4671d2b005ff8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f2c6bd6c931cd5dab1f2e1d9c7153264" category="paragraph"><block ref="f2c6bd6c931cd5dab1f2e1d9c7153264" category="inline-image-macro-rx" type="image"></block></block>
  <block id="74fbda49727400c791421c5523bc609b" category="paragraph"><block ref="74fbda49727400c791421c5523bc609b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="182cf1738b45f63dd97bce1b0cd9338d" category="paragraph"><block ref="182cf1738b45f63dd97bce1b0cd9338d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5725087f1926385d0f3f038c97c966c8" category="paragraph"><block ref="5725087f1926385d0f3f038c97c966c8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="457eead26f95ee84b4f5e45a66310db0" category="paragraph"><block ref="457eead26f95ee84b4f5e45a66310db0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0689e6e0802340b1e177cfa21bc1732" category="paragraph"><block ref="a0689e6e0802340b1e177cfa21bc1732" category="inline-image-macro-rx" type="image"></block></block>
  <block id="59e60a8306676d353bd2961881ac2f75" category="paragraph"><block ref="59e60a8306676d353bd2961881ac2f75" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5aacefe8b2cdf5b953e733d3d6a4c19f" category="paragraph"><block ref="5aacefe8b2cdf5b953e733d3d6a4c19f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1429ce527cf4cd4b50df05f493b91313" category="paragraph"><block ref="1429ce527cf4cd4b50df05f493b91313" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e107febc841d55315bacadea7f0686eb" category="paragraph"><block ref="e107febc841d55315bacadea7f0686eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9dbd4c807b3ae80f70ef349ef31a1af9" category="paragraph"><block ref="9dbd4c807b3ae80f70ef349ef31a1af9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b24dc7a3a6f2051b81d50ddebc7637bb" category="paragraph"><block ref="b24dc7a3a6f2051b81d50ddebc7637bb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd62cdc19a7b43b491aebad1b79699a2" category="paragraph"><block ref="bd62cdc19a7b43b491aebad1b79699a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0936b428194481c8aa469bef1fbe5a2e" category="paragraph"><block ref="0936b428194481c8aa469bef1fbe5a2e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4eb24bf34fba9222605c7e3c856bf8a8" category="paragraph"><block ref="4eb24bf34fba9222605c7e3c856bf8a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0ae7726ed3ec0b70e84ae1a4f1b71d23" category="paragraph"><block ref="0ae7726ed3ec0b70e84ae1a4f1b71d23" category="inline-image-macro-rx" type="image"></block></block>
  <block id="14397cf778300a82704513944fe2f1ec" category="paragraph"><block ref="14397cf778300a82704513944fe2f1ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e6a6eb10efdb10620a6a3d4bdeb2b88" category="paragraph"><block ref="9e6a6eb10efdb10620a6a3d4bdeb2b88" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5bf509e6d43ff3eb5c07c44c1546ab09" category="paragraph"><block ref="5bf509e6d43ff3eb5c07c44c1546ab09" category="inline-image-macro-rx" type="image"></block></block>
  <block id="55aab77fa5d7f50b7fbedbf0df160938" category="paragraph"><block ref="55aab77fa5d7f50b7fbedbf0df160938" category="inline-link-rx"></block></block>
  <block id="5455f48dc7894a1b2782bb01cf938a86" category="paragraph"><block ref="5455f48dc7894a1b2782bb01cf938a86" category="inline-link-rx"></block></block>
  <block id="6e0b32969c38b1fb3a586b9c8bca6d29" category="inline-image-macro">hana-hycl-back-image2、width=624、height=316</block>
  <block id="04c6fea5cff3e4aa7643ec678d204fdc" category="inline-image-macro">^ a b c d e text enth ä lt.Automatisch generierte Beschreibung、width=624、height=316</block>
  <block id="e67b31693fccd64a3bacc0e55452cae2" category="inline-image-macro">hana-hycl-back-image5、width=624、height=316</block>
  <block id="bea671570e246847e20efc713c53c69e" category="inline-image-macro">アイン・ビルト（Das Diagramm enth ä lt）とも呼ばれる。Automatisch generierte Beschreibung、width=624、height=316</block>
  <block id="dd78ee4baa00b09244d3a2f25c867ae5" category="inline-image-macro">hana-hycl-back-image7、width=624、height=308</block>
  <block id="271dec539afcefba0b81c99e084b109c" category="inline-image-macro">hana-hycl-back-image8、width=624、height=309</block>
  <block id="b0ea90440a1c4c0ce85aa8e6a6798323" category="inline-image-macro">hana-hycl-back-image9、width=624、height=304</block>
  <block id="16c981d74d1a7a65432b0b676f94b05d" category="inline-image-macro">hana-hycl-back-image10、width=624、height=307</block>
  <block id="3fe7bd8162333cf5226079e598f88f63" category="inline-image-macro">hana-hycl-back-image12、width=624、height=305</block>
  <block id="8de11028ada12771254470b000810e23" category="inline-image-macro">hana-hycl-back-image11、width=624、height=304</block>
  <block id="eb54efc82bc89a6f6a8a311be7a01d24" category="inline-image-macro">Ein Bild, das Text, Software, Computersymbol, Webseite enth ä lt.Automatisch generierte Beschreibung、width=624、height=306</block>
  <block id="75e71600dc8b519173f07bb53132cfea" category="inline-image-macro">hana-hycl-back-image14、width=624、height=306</block>
  <block id="844815fed3e149f6fc8998b67459b8a9" category="inline-image-macro">hana-hycl-back-image15、width=624、height=304</block>
  <block id="a8520b5a7e60b78ae1f8faf41e825735" category="inline-image-macro">hana-hycl-back-image16、width=624、height=304</block>
  <block id="46694ff89d2e1049db53b085f808204b" category="inline-image-macro">hana-hycl-back-image17、width=624、height=304</block>
  <block id="6b1682473b222d2b053e1f829a4dfa26" category="inline-image-macro">グラフィカルユーザインターフェイス、アプリケーション概要が自動的に生成される、幅= 604、高さ= 156</block>
  <block id="ec949205c32b4dcbf3d33ae3d2653d23" category="list-text">SAP HANAシステムが格納されているSVM（この例ではHANA）がクラスタ経由で追加されているかどうかを確認します。SVMのみが追加されている場合は、クラスタを追加します。+<block ref="a21a8efefc66cab38c485ab2857055c4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fa2838d19a717f2eaaa40e2f1f725b14" category="inline-image-macro">グラフィカルユーザインターフェイス、アプリケーション概要が自動的に生成される、幅= 604、高さ= 140</block>
  <block id="015b0ff295262d8372bb8eaf0e7007fa" category="inline-image-macro">hana-hycl-back-image20、width=167、height=167</block>
  <block id="fc770d11db32177599ce06cc7a281439" category="inline-image-macro">グラフィカルユーザインターフェイス、アプリケーション概要が自動的に生成される、幅= 604、高さ= 215</block>
  <block id="84c8d37516c033f0c33377c3d5233ad4" category="list-text">新しいポリシーをSAP HANAシステムに追加し、日次スケジュールを割り当てます。+<block ref="7adbf922feb3d32be59867cb2db85d53" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f306bf0a63220090651328d0787ebdef" category="inline-image-macro">グラフィカルユーザインターフェイス、アプリケーション、Teams概要が自動的に生成される、幅= 604、高さ= 193</block>
  <block id="8b7d9c683eee25ba85d1f605aa5bfc73" category="list-text">設定された新しいバックアップは、定義されたスケジュールに従ってポリシーが実行されたあとに使用できるようになります。<block ref="4cdd66955f0a12d8fd4b6c1593da46ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9a74817b35b4d995ea09e91b80d35939" category="inline-image-macro">hana-hycl-back-image23、width=624、height=316</block>
  <block id="f1fa07b4f7836783fffe714d5a32befc" category="inline-image-macro">hana-hycl-back-image26、width=624、height=315</block>
  <block id="4d57087fb6eb4ef48dd81d74b0599e61" category="inline-image-macro">hana-hycl-back-image27、width=624、height=316</block>
  <block id="649a9b7aadbc8a5543b6a50f4b67635f" category="inline-image-macro">hana-hycl-back-image29、width=624、height=316</block>
  <block id="349ab45b449e8c58be43aa51b5414b97" category="inline-image-macro">hana-hycl-back-image30、width=624、height=316</block>
  <block id="62a3ac1a1f8d319fbc334f7bb626e92f" category="inline-image-macro">hana-hycl-back-image31、width=624、height=315</block>
  <block id="56a584207272fdc3949d5cfbeddc6890" category="inline-image-macro">hana-hycl-back-image32、width=624、height=315</block>
  <block id="76e2dedbbcb80bd757e7f109e362eddf" category="inline-image-macro">幅= 624、高さ= 316</block>
  <block id="659017308b6b80ebac0dc21912936c14" category="inline-image-macro">幅= 624、高さ= 337</block>
  <block id="a852f184953f796252263a558df2db56" category="inline-image-macro">hana-hycl-back-image37、width=624、height=316</block>
  <block id="c7fbbf7c043fddfe22030f95f982786c" category="summary">このセクションでは、追加情報の参照先とバージョン履歴を示します。</block>
  <block id="41bb765509308cdc44c413e512e52e34" category="inline-image-macro">Ein Bild, das Text, Screenshot, Diagramm, Kreis enth ä lt.Automatisch generierte Beschreibung、width=624、height=450</block>
  <block id="796b2f89ad255115d9dff26e3177a467" category="paragraph"><block ref="796b2f89ad255115d9dff26e3177a467" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7bff1872092b4daae129c007c84cd996" category="inline-image-macro">hana-hycl-back-image38、width=624、height=305</block>
  <block id="a50aa712257968ee6554358d180aeec3" category="inline-image-macro">幅= 624、高さ= 308</block>
  <block id="c2dc9045e50399390c48484b265865e6" category="inline-image-macro">hana-hycl-back-image41、width=624、height=309</block>
  <block id="607e9caaefc803f1d39242ad4334a766" category="paragraph"><block ref="607e9caaefc803f1d39242ad4334a766" category="inline-image-macro-rx" type="image"></block></block>
  <block id="46f88568036f8d70f81f56eb754440ba" category="paragraph"><block ref="46f88568036f8d70f81f56eb754440ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0e84b80d2a5f8afd1eeb5f706b957809" category="paragraph"><block ref="0e84b80d2a5f8afd1eeb5f706b957809" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76cbf45b1f9a3af3dab99afdd9102f57" category="paragraph"><block ref="76cbf45b1f9a3af3dab99afdd9102f57" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a2ceed083413904bb97cfc22c026b2af" category="paragraph"><block ref="a2ceed083413904bb97cfc22c026b2af" category="inline-image-macro-rx" type="image"></block></block>
  <block id="509edc00e360dcd0c183c1487937703d" category="paragraph"><block ref="509edc00e360dcd0c183c1487937703d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8679b7fce4de17eedbac19a9c747487" category="paragraph"><block ref="e8679b7fce4de17eedbac19a9c747487" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5149a69616444893c44f06dc15b741e8" category="paragraph"><block ref="5149a69616444893c44f06dc15b741e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dc1f0638cdbb609889f95d7ea5de91f0" category="paragraph"><block ref="dc1f0638cdbb609889f95d7ea5de91f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="213000344b9f5937ee0ab5022fb38fe1" category="paragraph"><block ref="213000344b9f5937ee0ab5022fb38fe1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1e06dc81d31ce49e4c49bf35b686e256" category="paragraph"><block ref="1e06dc81d31ce49e4c49bf35b686e256" category="inline-image-macro-rx" type="image"></block></block>
  <block id="81a6dbd112e9acc96063544263cd4407" category="paragraph"><block ref="81a6dbd112e9acc96063544263cd4407" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f77ab94949d12edf3f679eeafaff08f1" category="paragraph"><block ref="f77ab94949d12edf3f679eeafaff08f1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9569b07c4fa020d453c61f6bebb105ca" category="paragraph"><block ref="9569b07c4fa020d453c61f6bebb105ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b98bb01e05466370ca465f334758c7b" category="paragraph"><block ref="6b98bb01e05466370ca465f334758c7b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f36bfceb38e6d87d048d602306b8acbb" category="paragraph"><block ref="f36bfceb38e6d87d048d602306b8acbb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b9e76dd31d87682580ad0cd4ae926ee" category="paragraph"><block ref="3b9e76dd31d87682580ad0cd4ae926ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6a8431ddb99271c6c2a394be7d8fdf13" category="paragraph"><block ref="6a8431ddb99271c6c2a394be7d8fdf13" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f8f40e030fc3a293f9182520e7bf9778" category="paragraph"><block ref="f8f40e030fc3a293f9182520e7bf9778" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88bc4c29ce686e50d213ba7ad5a20db8" category="paragraph"><block ref="88bc4c29ce686e50d213ba7ad5a20db8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c6a493a9ccd77d86a4be748edbfdbc9" category="paragraph"><block ref="4c6a493a9ccd77d86a4be748edbfdbc9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97a4633a8756f5cb371d3439d3bcb6fb" category="paragraph"><block ref="97a4633a8756f5cb371d3439d3bcb6fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="75523f1a0e977636bc96cc9d1d4d0841" category="paragraph"><block ref="75523f1a0e977636bc96cc9d1d4d0841" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6c2f3808a3d3fab64305716667e3ee5e" category="paragraph"><block ref="6c2f3808a3d3fab64305716667e3ee5e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ffcd1c596f830f8e72c9e5094447626" category="paragraph"><block ref="6ffcd1c596f830f8e72c9e5094447626" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd0c8a6c113f22fd66826518dd76e047" category="paragraph"><block ref="bd0c8a6c113f22fd66826518dd76e047" category="inline-image-macro-rx" type="image"></block></block>
  <block id="10ce9a188fb42d2f2e42a0e4b110ec58" category="paragraph"><block ref="10ce9a188fb42d2f2e42a0e4b110ec58" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cf1dde6f502faeaf69d6ed5e5d4d286c" category="paragraph"><block ref="cf1dde6f502faeaf69d6ed5e5d4d286c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="67f0b6f8ea0341b32bbc62ada2f2835b" category="paragraph"><block ref="67f0b6f8ea0341b32bbc62ada2f2835b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f3e52d43d89f6fcdcfd642fc3ae1be74" category="paragraph"><block ref="f3e52d43d89f6fcdcfd642fc3ae1be74" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4b76acec06128c0b8027bfaec9e4efd" category="paragraph"><block ref="b4b76acec06128c0b8027bfaec9e4efd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ce8f77d71cf66a8a5b8dc84d9d7247e1" category="paragraph"><block ref="ce8f77d71cf66a8a5b8dc84d9d7247e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5bc0a4ea41e4dd6446daac80c75b6285" category="paragraph"><block ref="5bc0a4ea41e4dd6446daac80c75b6285" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ad47737e5317a468731032ba4583dc06" category="paragraph"><block ref="ad47737e5317a468731032ba4583dc06" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8480ccc856cccf9e0731d039a39d2eb5" category="paragraph"><block ref="8480ccc856cccf9e0731d039a39d2eb5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b9bc79829aa9fc1c48f9fdbb93c04fd9" category="paragraph"><block ref="b9bc79829aa9fc1c48f9fdbb93c04fd9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="695c571700b169d6a339f1dd5f2f882c" category="paragraph"><block ref="695c571700b169d6a339f1dd5f2f882c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7e2da0bf7ed0bcc1e03f8d93bc3024d0" category="paragraph"><block ref="7e2da0bf7ed0bcc1e03f8d93bc3024d0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9a65f4509dbeacb95be90baf19f0e2d4" category="paragraph"><block ref="9a65f4509dbeacb95be90baf19f0e2d4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5745ea93c728dda67de8288de2bc36f6" category="paragraph"><block ref="5745ea93c728dda67de8288de2bc36f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aa4851d9c80e8ee496311dfd26fbdcb8" category="paragraph"><block ref="aa4851d9c80e8ee496311dfd26fbdcb8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bf00a08e154ad0e4fddb73fb9da56257" category="paragraph"><block ref="bf00a08e154ad0e4fddb73fb9da56257" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ef3a7196cbb2d1daab72705808b947d5" category="paragraph"><block ref="ef3a7196cbb2d1daab72705808b947d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fbcac1c11ccc8e801efe2bbf2acf143d" category="paragraph"><block ref="fbcac1c11ccc8e801efe2bbf2acf143d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c6d7d8114f2a343a4e7c04602a69227a" category="paragraph"><block ref="c6d7d8114f2a343a4e7c04602a69227a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8dd6243b1463fbbb4e16bf54334f2640" category="paragraph"><block ref="8dd6243b1463fbbb4e16bf54334f2640" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3f277dd697470b66c1f2190244c54d2" category="paragraph"><block ref="b3f277dd697470b66c1f2190244c54d2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e7501802c681ec1f47cd912c86b3bd9e" category="paragraph"><block ref="e7501802c681ec1f47cd912c86b3bd9e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="61df5eceeb903c66813a8653651a1fc7" category="paragraph"><block ref="61df5eceeb903c66813a8653651a1fc7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39eb57804690563a191dfa1190966d73" category="paragraph"><block ref="39eb57804690563a191dfa1190966d73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2cb625187749843bebb4e6401cc5b84a" category="paragraph"><block ref="2cb625187749843bebb4e6401cc5b84a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1cd0ad1c95f31a9fe03790e1f2b2f647" category="paragraph"><block ref="1cd0ad1c95f31a9fe03790e1f2b2f647" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c6c6629c213de910296218d125350f7" category="paragraph"><block ref="3c6c6629c213de910296218d125350f7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f217e06b2f5e63f5ce7c9782fe45e0c7" category="paragraph"><block ref="f217e06b2f5e63f5ce7c9782fe45e0c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9cf5ed7cea49e42512c5250ba7e05032" category="paragraph"><block ref="9cf5ed7cea49e42512c5250ba7e05032" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d9c5fc076375ef8a1a5f08cba7be5801" category="paragraph"><block ref="d9c5fc076375ef8a1a5f08cba7be5801" category="inline-image-macro-rx" type="image"></block></block>
  <block id="942b1ef3e197f6f65e33b3a4a84f80b1" category="paragraph"><block ref="942b1ef3e197f6f65e33b3a4a84f80b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d70362fd6eea1b2d5597e45e213ba76" category="paragraph"><block ref="3d70362fd6eea1b2d5597e45e213ba76" category="inline-image-macro-rx" type="image"></block></block>
  <block id="385c63b17908d38dddf10ae4033ef478" category="paragraph"><block ref="385c63b17908d38dddf10ae4033ef478" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f8cadf0861791dd858d7b79a8bc58881" category="paragraph"><block ref="f8cadf0861791dd858d7b79a8bc58881" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ac724fb8986b98e6e85034df7770698" category="paragraph"><block ref="6ac724fb8986b98e6e85034df7770698" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7b1e890b361a4751180d81a2c44aca27" category="paragraph"><block ref="7b1e890b361a4751180d81a2c44aca27" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6122c430d0be02491954b9c7c2af8bd7" category="paragraph"><block ref="6122c430d0be02491954b9c7c2af8bd7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9b95cb56a3a264d39c3953aab74d1daa" category="paragraph"><block ref="9b95cb56a3a264d39c3953aab74d1daa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9a250d7a6069f1d1fbb482060a0232f0" category="paragraph"><block ref="9a250d7a6069f1d1fbb482060a0232f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76939726b98a889d506989deb9341103" category="paragraph"><block ref="76939726b98a889d506989deb9341103" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7216f6ef9e8c4aca1ef8fa2296148bdf" category="paragraph"><block ref="7216f6ef9e8c4aca1ef8fa2296148bdf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2dbf47a4d55d423ce21c24522f7b1574" category="paragraph"><block ref="2dbf47a4d55d423ce21c24522f7b1574" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27885829bda7c02ed136f0cf60d94136" category="paragraph"><block ref="27885829bda7c02ed136f0cf60d94136" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9796177deb9c126116fcf994b5040617" category="paragraph"><block ref="9796177deb9c126116fcf994b5040617" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ba987cf0ba6c5b030b65a08d26406095" category="paragraph"><block ref="ba987cf0ba6c5b030b65a08d26406095" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7e5a1cf5ffd1105de263b9ce83bc4c0d" category="paragraph"><block ref="7e5a1cf5ffd1105de263b9ce83bc4c0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="248dcdd614770532cf092fb13e8cb6e5" category="paragraph"><block ref="248dcdd614770532cf092fb13e8cb6e5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e292f2d79c8a90bebfddbd410ab5feca" category="paragraph"><block ref="e292f2d79c8a90bebfddbd410ab5feca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b59196896409702b7619c9f466e93a96" category="paragraph"><block ref="b59196896409702b7619c9f466e93a96" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12070fd7c7bf14b0d48eca672da868cc" category="paragraph"><block ref="12070fd7c7bf14b0d48eca672da868cc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e41d9c3d5fa367b3bfcf9ae7c3286930" category="paragraph"><block ref="e41d9c3d5fa367b3bfcf9ae7c3286930" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d74c29ce0fce3db7e0cb88e0c0dd7354" category="paragraph"><block ref="d74c29ce0fce3db7e0cb88e0c0dd7354" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3e40111348d81f6a8f8c325b1d729b1e" category="paragraph"><block ref="3e40111348d81f6a8f8c325b1d729b1e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8c793658e962487f4c8a6f7b4bd13e9a" category="paragraph"><block ref="8c793658e962487f4c8a6f7b4bd13e9a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9389dbbe2ed5738acc253d6aeccd4285" category="paragraph"><block ref="9389dbbe2ed5738acc253d6aeccd4285" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4acf49c37725eff3d1e1647f59444563" category="paragraph"><block ref="4acf49c37725eff3d1e1647f59444563" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d401c96972cf4872497867c8813dd0c4" category="paragraph"><block ref="d401c96972cf4872497867c8813dd0c4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="df1b32232287f7077cc8ea06d4067aba" category="paragraph"><block ref="df1b32232287f7077cc8ea06d4067aba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d927ea73390d1073b251d0ab8e1c4f29" category="paragraph"><block ref="d927ea73390d1073b251d0ab8e1c4f29" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49aea0eb02cf6c45f892c1968f4be5e4" category="paragraph"><block ref="49aea0eb02cf6c45f892c1968f4be5e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ed753725e82825ea0717a079ace3f412" category="paragraph"><block ref="ed753725e82825ea0717a079ace3f412" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a226af60009f8254abee0e79c0cfefcb" category="paragraph"><block ref="a226af60009f8254abee0e79c0cfefcb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45d79d69ac1d7220193d0c8affd7d9a8" category="paragraph"><block ref="45d79d69ac1d7220193d0c8affd7d9a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="077917c9df911c71a158d740302e512d" category="paragraph"><block ref="077917c9df911c71a158d740302e512d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="633bcbcfe96ab07323708da2788530fe" category="paragraph"><block ref="633bcbcfe96ab07323708da2788530fe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23b1e85ca318b7c394cdfb37cf779a84" category="paragraph"><block ref="23b1e85ca318b7c394cdfb37cf779a84" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0834dce0aa1a2d0809955c3925129489" category="paragraph"><block ref="0834dce0aa1a2d0809955c3925129489" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b64bc38243e4b017acd60936979040ba" category="paragraph"><block ref="b64bc38243e4b017acd60936979040ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03d7b4ceaff2906c7ae18429532e7b6e" category="paragraph"><block ref="03d7b4ceaff2906c7ae18429532e7b6e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3db6ab2fafae9e697382cb69b35cb26c" category="paragraph"><block ref="3db6ab2fafae9e697382cb69b35cb26c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9ed22a3c9e174cb71b8c3f6d4666cd8" category="paragraph"><block ref="a9ed22a3c9e174cb71b8c3f6d4666cd8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9786c27aaf0b69122f76ff37da013171" category="paragraph"><block ref="9786c27aaf0b69122f76ff37da013171" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f89b5e800d7219f5c70ff5cb9df2071f" category="paragraph"><block ref="f89b5e800d7219f5c70ff5cb9df2071f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="154813b4920e9b720e9d5f15705ccebc" category="paragraph"><block ref="154813b4920e9b720e9d5f15705ccebc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e65dcbc8d4ba6e6fc232aa49bcfd185e" category="paragraph"><block ref="e65dcbc8d4ba6e6fc232aa49bcfd185e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09370ef617197ffd6612a29d78e374fa" category="paragraph"><block ref="09370ef617197ffd6612a29d78e374fa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="221de9d5155a2d0b97df79adfc91ebc2" category="paragraph"><block ref="221de9d5155a2d0b97df79adfc91ebc2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="652b0bd267da45fc4baf7581b1e9dfdc" category="paragraph"><block ref="652b0bd267da45fc4baf7581b1e9dfdc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b827b5e63fb204b72559cd49e8cbcb0a" category="paragraph"><block ref="b827b5e63fb204b72559cd49e8cbcb0a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97979c8cc8ed0bb377db069e4501a3ad" category="paragraph"><block ref="97979c8cc8ed0bb377db069e4501a3ad" category="inline-image-macro-rx" type="image"></block></block>
  <block id="16494477d3a123e941b6ff45c69cf723" category="paragraph"><block ref="16494477d3a123e941b6ff45c69cf723" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3fec478f2aa80a942d362849454f49f6" category="paragraph"><block ref="3fec478f2aa80a942d362849454f49f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ee854e7031d8466ca89ef6b0a031257b" category="paragraph"><block ref="ee854e7031d8466ca89ef6b0a031257b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="67a2a2d69a95fb29f0d671fe8bd03a93" category="paragraph"><block ref="67a2a2d69a95fb29f0d671fe8bd03a93" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b90d2babb8f18a211e72aa916075a6f9" category="paragraph"><block ref="b90d2babb8f18a211e72aa916075a6f9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d505d74f1e8db6a8c3a7b4effd93c03" category="paragraph"><block ref="7d505d74f1e8db6a8c3a7b4effd93c03" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eb42e84bdd458b863b6d5668842a6244" category="paragraph"><block ref="eb42e84bdd458b863b6d5668842a6244" category="inline-image-macro-rx" type="image"></block></block>
  <block id="818e8d9b9c866af7a74140a2e73171a2" category="paragraph"><block ref="818e8d9b9c866af7a74140a2e73171a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="36e9d30b5a88eb8d1212a4a88853343a" category="paragraph"><block ref="36e9d30b5a88eb8d1212a4a88853343a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9108e12773fdbc41d3dad3146c5e34d5" category="paragraph"><block ref="9108e12773fdbc41d3dad3146c5e34d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="693150dd042d78f1eb9da59f5b5d7f49" category="paragraph"><block ref="693150dd042d78f1eb9da59f5b5d7f49" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a170df0ea0568c142cb25b08a3a3762b" category="paragraph"><block ref="a170df0ea0568c142cb25b08a3a3762b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3c9dd76d97c11ad455c0d89b35face9" category="paragraph"><block ref="c3c9dd76d97c11ad455c0d89b35face9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d48d3297a2157610b962a8b5e45d4b7b" category="paragraph"><block ref="d48d3297a2157610b962a8b5e45d4b7b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="37a837af1f6c53e70f87fc2a348a1f13" category="paragraph"><block ref="37a837af1f6c53e70f87fc2a348a1f13" category="inline-image-macro-rx" type="image"></block></block>
  <block id="674375a017dced04e6158b45943a19c2" category="paragraph"><block ref="674375a017dced04e6158b45943a19c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="73cebd5a1227e44927be7ce4e2058a0a" category="paragraph"><block ref="73cebd5a1227e44927be7ce4e2058a0a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58e6f26a1d92ca5189c3e094b4b87a5e" category="paragraph"><block ref="58e6f26a1d92ca5189c3e094b4b87a5e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e4746ad00011ec5decb7bd58b32e4118" category="paragraph"><block ref="e4746ad00011ec5decb7bd58b32e4118" category="inline-image-macro-rx" type="image"></block></block>
  <block id="60f024e4f5fc54f83cb9397e48c097bf" category="paragraph"><block ref="60f024e4f5fc54f83cb9397e48c097bf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="55c28d7c8eb2db7e68ee228debca9909" category="paragraph"><block ref="55c28d7c8eb2db7e68ee228debca9909" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4f2bd4164b2d594a347258d12c41de82" category="paragraph"><block ref="4f2bd4164b2d594a347258d12c41de82" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3a6dd499d879b53282054958d67fa8d6" category="paragraph"><block ref="3a6dd499d879b53282054958d67fa8d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d31d347e600eb28d9478ede18fc8411" category="paragraph"><block ref="1d31d347e600eb28d9478ede18fc8411" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4334eb8cd2e8039ba334b71fc06d8db8" category="paragraph"><block ref="4334eb8cd2e8039ba334b71fc06d8db8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="116dc38e3581c8a4641891cd3f0d8658" category="paragraph"><block ref="116dc38e3581c8a4641891cd3f0d8658" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f67733e89d0b5d732c1fd344cbb7105f" category="paragraph"><block ref="f67733e89d0b5d732c1fd344cbb7105f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="effb4b9effe8b2ac6af9b7bbeedc81aa" category="paragraph"><block ref="effb4b9effe8b2ac6af9b7bbeedc81aa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6af3b4279a45fee0176779ad97e6127a" category="paragraph"><block ref="6af3b4279a45fee0176779ad97e6127a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c916b4f33090fb713c3626bab9d40dc0" category="paragraph"><block ref="c916b4f33090fb713c3626bab9d40dc0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7a393612bb12dacd45725bfcf1dc07d6" category="paragraph"><block ref="7a393612bb12dacd45725bfcf1dc07d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b43f7198e92454b11807399b4cba06b" category="paragraph"><block ref="5b43f7198e92454b11807399b4cba06b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71ae6283c1cddf71f46c95dd5f742941" category="paragraph"><block ref="71ae6283c1cddf71f46c95dd5f742941" category="inline-image-macro-rx" type="image"></block></block>
  <block id="064c12d44f5dc3e4d5e0c8d8968a464c" category="paragraph"><block ref="064c12d44f5dc3e4d5e0c8d8968a464c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c97782ef9e4ce23ec2d0a66d5fe18206" category="paragraph"><block ref="c97782ef9e4ce23ec2d0a66d5fe18206" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c360813f37faca7cfe33ddf674507002" category="paragraph"><block ref="c360813f37faca7cfe33ddf674507002" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b42ec286951308db9609b18b9ba618e" category="paragraph"><block ref="5b42ec286951308db9609b18b9ba618e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="05d88dd9fb94513b5c307c3dacc9428f" category="paragraph"><block ref="05d88dd9fb94513b5c307c3dacc9428f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b1c986927364892bf2ad5b69d4d7169b" category="paragraph"><block ref="b1c986927364892bf2ad5b69d4d7169b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="659b0717a77e312a3b42c4d3bf436071" category="paragraph"><block ref="659b0717a77e312a3b42c4d3bf436071" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d7ec1f350783981b5864d754a684c22a" category="paragraph"><block ref="d7ec1f350783981b5864d754a684c22a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4ac8e14391df6273f3df23512b83e54f" category="paragraph"><block ref="4ac8e14391df6273f3df23512b83e54f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e1d682874989f057e3b73e6c34b2dca" category="paragraph"><block ref="2e1d682874989f057e3b73e6c34b2dca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="14d0de324edbfcb89462ebddf1ce52e0" category="paragraph"><block ref="14d0de324edbfcb89462ebddf1ce52e0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7426e6396c17ca706788d1a4298aebe3" category="paragraph"><block ref="7426e6396c17ca706788d1a4298aebe3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0809e1508f7549a38a780b779a4d889" category="paragraph"><block ref="b0809e1508f7549a38a780b779a4d889" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12b7d639d9a4e784f5ff18c9c2d82b2b" category="paragraph"><block ref="12b7d639d9a4e784f5ff18c9c2d82b2b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="50182d1212e6e13b880fae3290b3f229" category="paragraph"><block ref="50182d1212e6e13b880fae3290b3f229" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4eeaf2497bf1e78eff048404e175af1c" category="paragraph"><block ref="4eeaf2497bf1e78eff048404e175af1c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4730908778321c1c43883f74e6a2290" category="paragraph"><block ref="c4730908778321c1c43883f74e6a2290" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e3c0940db2450101287ffe6b7064a54d" category="paragraph"><block ref="e3c0940db2450101287ffe6b7064a54d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="170e3ae89d6261851ff484a8e771649e" category="paragraph">執筆者：NetAppのMarco Schoen氏、Commvault SystemsのTristan Daude博士</block>
  <block id="477777d7db9a7b53d5e478c5db17b758" category="paragraph">このドキュメントでは、SAP HANAを使用したANFのクロスリージョンレプリケーションについて説明します。</block>
  <block id="47aaf8de67485357e92e6a9f240d8259" category="paragraph">クロスリージョンレプリケーションに関するアプリケーションに依存しない情報は、次の場所にあります。</block>
  <block id="c4b92d3c1a1f3068ee30be1e0c67b874" category="paragraph"><block ref="703da3602eb8895f5ab46f3e581967de" category="inline-link-macro-rx"></block>を参照してください。</block>
  <block id="be11a09e4ce4c0d4bf97388fc53cc41f" category="paragraph"><block ref="be11a09e4ce4c0d4bf97388fc53cc41f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b117eb2890fb70e2258b6dcd5cb0135" category="paragraph"><block ref="6b117eb2890fb70e2258b6dcd5cb0135" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b17ba34677395ede8c6cbaf3db2a3a1a" category="paragraph"><block ref="b17ba34677395ede8c6cbaf3db2a3a1a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af58c6e0baa91053f65764beb2329580" category="paragraph"><block ref="af58c6e0baa91053f65764beb2329580" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0d8b535b651621de879b4aa099b76a23" category="paragraph"><block ref="0d8b535b651621de879b4aa099b76a23" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e5de95bcc37400cfd56a76e05c8141ad" category="paragraph"><block ref="e5de95bcc37400cfd56a76e05c8141ad" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f675098f46d311d3782e270959ca5ffb" category="paragraph"><block ref="f675098f46d311d3782e270959ca5ffb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="06ae7353ed1f5039442397f2b2ea525f" category="paragraph"><block ref="06ae7353ed1f5039442397f2b2ea525f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5bd384ec367fabe3f59dd536d87d59be" category="paragraph"><block ref="5bd384ec367fabe3f59dd536d87d59be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="707ccff1ec6eac1c4cf26ca3bee5bda1" category="paragraph"><block ref="707ccff1ec6eac1c4cf26ca3bee5bda1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c35077811ee736b1e8448fb3db61871d" category="paragraph"><block ref="c35077811ee736b1e8448fb3db61871d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="013edc7081d08436bfc61b35ad959f46" category="paragraph"><block ref="013edc7081d08436bfc61b35ad959f46" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6c292597f00bd08bdf83748dd93948e1" category="paragraph"><block ref="6c292597f00bd08bdf83748dd93948e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3e4acfdc602088f9c71301dc58910590" category="paragraph"><block ref="3e4acfdc602088f9c71301dc58910590" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5e79f9aa23bdb0ed964a063bf531adc4" category="paragraph"><block ref="5e79f9aa23bdb0ed964a063bf531adc4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="065981f3f6e55d32323dcd986071c284" category="paragraph"><block ref="065981f3f6e55d32323dcd986071c284" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e97f6d7a7344486294c33d6f977eeac9" category="paragraph">作成者：Nils Bauer、NetApp Ralf Klahr、Microsoft</block>
  <block id="623fe9adf48a40688e6ff6b4dbc86391" category="paragraph">財務面での影響に加えて、ダウンタイムは企業の評判、スタッフの士気、顧客ロイヤルティを損なう可能性もあります。驚くべきことに、すべての企業が包括的なディザスタリカバリポリシーを持っているわけではありません。</block>
  <block id="3df64b394b3dd5715841673864cabf41" category="paragraph"><block ref="3df64b394b3dd5715841673864cabf41" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fab33777c49ea1ad98df5195e304ce49" category="paragraph">このセクションでは、Azure NetApp Files（ANF）でのSAP HANA向けディザスタリカバリの概要を説明します。</block>
  <block id="1ea8b5f06505efaf09d410c5e2da5fa7" category="paragraph"><block ref="1ea8b5f06505efaf09d410c5e2da5fa7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a540511c7182e4ca19f0c146ab4549f6" category="paragraph"><block ref="a540511c7182e4ca19f0c146ab4549f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="04f1e2de3476b55892265c003b6854dd" category="paragraph"><block ref="04f1e2de3476b55892265c003b6854dd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="47702125a3af734377218735a751bcbb" category="paragraph"><block ref="47702125a3af734377218735a751bcbb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5e57f6f4d0c511dfbe046b491728ad18" category="paragraph">このセクションでは、Azure NetApp Files（ANF）でのSAP HANAのディザスタリカバリテストの概要を説明します。</block>
  <block id="ab9dbf2083578b44a472ea9e4be86bc8" category="paragraph"><block ref="ab9dbf2083578b44a472ea9e4be86bc8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="85591ea875aef47b04117d05480a19b6" category="paragraph"><block ref="85591ea875aef47b04117d05480a19b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9a38316ac2ef898c9b4a6bf665e78a56" category="paragraph"><block ref="9a38316ac2ef898c9b4a6bf665e78a56" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c8bd9fa63d68091ab344661ded1d084d" category="paragraph"><block ref="c8bd9fa63d68091ab344661ded1d084d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="30084c3bfe907010024e87ab013aa9e9" category="paragraph"><block ref="30084c3bfe907010024e87ab013aa9e9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1597c090ca92637dc7c87369385ae4ae" category="paragraph"><block ref="1597c090ca92637dc7c87369385ae4ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="232d09bce830ff435ff855ae867e7612" category="paragraph"><block ref="232d09bce830ff435ff855ae867e7612" category="inline-image-macro-rx" type="image"></block></block>
  <block id="411ab2cdf07ad3f27defc79e892f1431" category="paragraph"><block ref="411ab2cdf07ad3f27defc79e892f1431" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fd39a5c32ee6690549ac30ea245401aa" category="paragraph">著者：</block>
  <block id="f831bc1385f211f6c5893e60a78f7edd" category="paragraph"><block ref="f831bc1385f211f6c5893e60a78f7edd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9eee47fd34fc6b04956fd9a405203870" category="paragraph"><block ref="9eee47fd34fc6b04956fd9a405203870" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4101bf3ece6b2883b54788c3db328556" category="paragraph"><block ref="4101bf3ece6b2883b54788c3db328556" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6862c0de21b3b1f69dd5d17d1ca71674" category="paragraph"><block ref="6862c0de21b3b1f69dd5d17d1ca71674" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0793c41e221d987cd28b69479802ca0f" category="paragraph"><block ref="0793c41e221d987cd28b69479802ca0f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4185d7ef0fa279ea3a511196a6fec9af" category="paragraph"><block ref="4185d7ef0fa279ea3a511196a6fec9af" category="inline-image-macro-rx" type="image"></block></block>
  <block id="733fdb7f97f71e69890c36070b776f4d" category="paragraph"><block ref="733fdb7f97f71e69890c36070b776f4d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a8ed0b8c8d32b15e6fc1572db0c8f48e" category="paragraph"><block ref="a8ed0b8c8d32b15e6fc1572db0c8f48e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3cd03a132712864a3f205a261a367a0" category="paragraph"><block ref="c3cd03a132712864a3f205a261a367a0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b5e6d39d6ec4da44b47f8a00e90c5a90" category="paragraph"><block ref="b5e6d39d6ec4da44b47f8a00e90c5a90" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4f59ab534fc94a035a9becf56da748a3" category="paragraph"><block ref="4f59ab534fc94a035a9becf56da748a3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0c59c6e251456b278007120a47900369" category="paragraph"><block ref="0c59c6e251456b278007120a47900369" category="inline-image-macro-rx" type="image"></block></block>
  <block id="60e4fc4a93b8b978c5da7ae35f18915c" category="paragraph"><block ref="60e4fc4a93b8b978c5da7ae35f18915c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b8c1d0e538d07726bb2a3789788890a3" category="paragraph"><block ref="b8c1d0e538d07726bb2a3789788890a3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f401057efa629c640bf715ba315b7913" category="paragraph"><block ref="f401057efa629c640bf715ba315b7913" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cf1de9c715b2a8b6aa770689688ad7db" category="paragraph"><block ref="cf1de9c715b2a8b6aa770689688ad7db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e4d1c212c314a6a2dda14e5a20be3c65" category="paragraph"><block ref="e4d1c212c314a6a2dda14e5a20be3c65" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ad326a8f9bef32e7dba45e5d9b6aad8f" category="paragraph"><block ref="ad326a8f9bef32e7dba45e5d9b6aad8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1f5a5d1c478390a93e5af02b571888e9" category="paragraph"><block ref="1f5a5d1c478390a93e5af02b571888e9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c22e3a90c4fca8a5cb858ca36706c26" category="paragraph"><block ref="2c22e3a90c4fca8a5cb858ca36706c26" category="inline-image-macro-rx" type="image"></block></block>
  <block id="abbf55aa91020e0bf9cb4a8990a21585" category="paragraph"><block ref="abbf55aa91020e0bf9cb4a8990a21585" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5fd0bc2d8579914f332abdc440f20b13" category="paragraph"><block ref="5fd0bc2d8579914f332abdc440f20b13" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2424a8c3863c52896548d419748e580c" category="paragraph"><block ref="2424a8c3863c52896548d419748e580c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="398ea5018be91458ba81a72e923d493a" category="paragraph"><block ref="398ea5018be91458ba81a72e923d493a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2383c7a036f0732ff3580d36a951a656" category="paragraph"><block ref="2383c7a036f0732ff3580d36a951a656" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ac5ad4a0ae8e627e2f3c2a12c0fff05f" category="paragraph"><block ref="ac5ad4a0ae8e627e2f3c2a12c0fff05f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9cebaed070e7174613ece1f474ee0561" category="paragraph"><block ref="9cebaed070e7174613ece1f474ee0561" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97190cc0cb5ed4bb0aaaa0aa25a3187e" category="inline-link-macro">SnapVaultレプリケーション</block>
  <block id="927d1129cd74d49cd508b054408f783e" category="paragraph">SnapVaultレプリケーションがデータ保護戦略の一部である場合は、特定のシナリオについて手動での操作が必要です。詳細については、セクションを参照してください。<block ref="ea12e55fd902665a5f91f6ad71303561" category="inline-link-macro-rx"></block></block>
  <block id="5892f64a984e3831714926d1d2ff42d8" category="paragraph"><block ref="5892f64a984e3831714926d1d2ff42d8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3a36e4a9f8e29b1b70cbfaaaf5e5ddde" category="paragraph"><block ref="3a36e4a9f8e29b1b70cbfaaaf5e5ddde" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e1c1974d031eaf0719cec6ace3eea10d" category="paragraph"><block ref="e1c1974d031eaf0719cec6ace3eea10d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="807d7f5e50a9f6922b56d8d961f2dda6" category="paragraph"><block ref="807d7f5e50a9f6922b56d8d961f2dda6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e847c644316c370dfd813e219de5d11d" category="paragraph"><block ref="e847c644316c370dfd813e219de5d11d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="817002b2c8fa8c5a6546fb55840f6b34" category="paragraph"><block ref="817002b2c8fa8c5a6546fb55840f6b34" category="inline-image-macro-rx" type="image"></block></block>
  <block id="01182ea8b83ed9f7eb8a36a89e5a1026" category="paragraph"><block ref="01182ea8b83ed9f7eb8a36a89e5a1026" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23418f52a3a6930931815e387ff025fe" category="paragraph"><block ref="23418f52a3a6930931815e387ff025fe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8a0d8a27f6742187cd8f99299d70e021" category="paragraph"><block ref="8a0d8a27f6742187cd8f99299d70e021" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fadcf0f76dee035327c90347953239be" category="paragraph"><block ref="fadcf0f76dee035327c90347953239be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cae956850a011894c308d0409418b30f" category="paragraph"><block ref="cae956850a011894c308d0409418b30f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7bb0dde17fbe3ab4080823274e64ab98" category="paragraph"><block ref="7bb0dde17fbe3ab4080823274e64ab98" category="inline-image-macro-rx" type="image"></block></block>
  <block id="302cc5fdbbdeea7eb9611dda9151b197" category="paragraph"><block ref="302cc5fdbbdeea7eb9611dda9151b197" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6a0665230e1e72e8aed753e6363e901" category="paragraph"><block ref="f6a0665230e1e72e8aed753e6363e901" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e90a7bd2cc19c236b6114c186643dd93" category="paragraph"><block ref="e90a7bd2cc19c236b6114c186643dd93" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3fb66457e92819a1f279716b95613a23" category="paragraph"><block ref="3fb66457e92819a1f279716b95613a23" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7253509f805066b30ccf8aed6ffd413c" category="paragraph"><block ref="7253509f805066b30ccf8aed6ffd413c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49556731c4ef8b16ff1d4cf83bab41aa" category="paragraph"><block ref="49556731c4ef8b16ff1d4cf83bab41aa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dad5a2a61738b4f53ce8ea3e45c16107" category="paragraph"><block ref="dad5a2a61738b4f53ce8ea3e45c16107" category="inline-image-macro-rx" type="image"></block></block>
  <block id="823fb6ab3b8e68a12ff217e49415622a" category="paragraph"><block ref="823fb6ab3b8e68a12ff217e49415622a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7c02071adedf3bbf5aac4d094485fd3e" category="paragraph"><block ref="7c02071adedf3bbf5aac4d094485fd3e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12c70128b1bbdaa03a9899f8d26be08e" category="paragraph"><block ref="12c70128b1bbdaa03a9899f8d26be08e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="589b851f407d78c290592aacc331a232" category="paragraph"><block ref="589b851f407d78c290592aacc331a232" category="inline-image-macro-rx" type="image"></block></block>
  <block id="35c46d1308ad1dcdfdb1cdc8aa5c6bb3" category="paragraph"><block ref="35c46d1308ad1dcdfdb1cdc8aa5c6bb3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3bcc285c555f1a917d23761e04d98e2c" category="paragraph"><block ref="3bcc285c555f1a917d23761e04d98e2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="adf2d4c62bc39518d50fe4a1329307e4" category="paragraph">バージョン履歴：</block>
  <block id="55d5dfa50d04891918fe3ea9ad00059b" category="paragraph"><block ref="55d5dfa50d04891918fe3ea9ad00059b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e6aabe615d4f04cff649751db99a960f" category="paragraph">このドキュメントでは、NetApp FASシステムとNFSのインフラのセットアップと設定について説明します。</block>
  <block id="43eddd188c3e76947dbca863365a0183" category="paragraph"><block ref="43eddd188c3e76947dbca863365a0183" category="inline-image-macro-rx" type="image"></block></block>
  <block id="47fe5a641384ba3150a9df792aafd860" category="paragraph"><block ref="47fe5a641384ba3150a9df792aafd860" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b7be9b3ca8485885afa5f9250455d21d" category="paragraph"><block ref="b7be9b3ca8485885afa5f9250455d21d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0937ed7cc435379f8de3fc08658990ba" category="paragraph"><block ref="0937ed7cc435379f8de3fc08658990ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="60b486631d0e94399c0d3352ca21fa00" category="paragraph"><block ref="60b486631d0e94399c0d3352ca21fa00" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0295da9e9d8f6cc887cd3e6b7b62db45" category="paragraph"><block ref="0295da9e9d8f6cc887cd3e6b7b62db45" category="inline-image-macro-rx" type="image"></block></block>
  <block id="265ae4ad07ae6dd3140cd976e6e96a15" category="paragraph"><block ref="265ae4ad07ae6dd3140cd976e6e96a15" category="inline-image-macro-rx" type="image"></block></block>
  <block id="017e522349a0ff07067400d6b880e9df" category="paragraph">=: hardbreaks::nofooter::icons:font:linkattrs::imagesdir:../media/</block>
  <block id="2267b0943e951c31d5f31c288b6bfbe6" category="paragraph">NFSプロトコルを使用するNetApp AFF上のSAP HANA</block>
  <block id="1061c8a586da3d6a249f18df930dc33a" category="paragraph">このドキュメントでは、NetApp AFFシステムとNFSのインフラのセットアップと設定について説明します。</block>
  <block id="c0c285f4d23d22653eba8dc9a75078b0" category="paragraph"><block ref="c0c285f4d23d22653eba8dc9a75078b0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bc6f4f64c41295649568c9b08222f2c3" category="paragraph"><block ref="bc6f4f64c41295649568c9b08222f2c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c55f68c7fa3064bc905d3ae3a6a0a59d" category="list-text">および<block ref="886d8674ea6944dd32bd390cb48bc80e" category="inline-xref-macro-rx"></block>の説明に従って、アグリゲート内にボリュームを作成します<block ref="7f2f76d537cb5c15ae301f069af9489f" category="inline-xref-macro-rx"></block>。</block>
  <block id="b726daf8a2adf210c59b7ef834090339" category="paragraph"><block ref="b726daf8a2adf210c59b7ef834090339" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c8ad86db51ea3fec014b3b92b80c4f2e" category="paragraph"><block ref="c8ad86db51ea3fec014b3b92b80c4f2e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d64ce1ec53ddbb70221c0732f05697a6" category="paragraph"><block ref="d64ce1ec53ddbb70221c0732f05697a6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="57f3c3545cf78dda99e9898c26f43005" category="paragraph"><block ref="57f3c3545cf78dda99e9898c26f43005" category="inline-image-macro-rx" type="image"></block></block>
  <block id="87c981e26acc223a7d0dba3d39b42d11" category="paragraph"><block ref="87c981e26acc223a7d0dba3d39b42d11" category="inline-image-macro-rx" type="image"></block></block>
  <block id="286a02ac976f208a41714fb1b31d5563" category="paragraph"><block ref="286a02ac976f208a41714fb1b31d5563" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f354441147ead38889b9adc2d2ebc209" category="paragraph"><block ref="f354441147ead38889b9adc2d2ebc209" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b3a2ed3db2363af1fc4a4d9670fd4f1" category="paragraph"><block ref="3b3a2ed3db2363af1fc4a4d9670fd4f1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="82020173d38ee27d458fbdf847bfc42e" category="paragraph"><block ref="82020173d38ee27d458fbdf847bfc42e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1b937a8a58ab58bc1c61e59ac1b52925" category="paragraph"><block ref="1b937a8a58ab58bc1c61e59ac1b52925" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3f8fbc4328976ab1bb4502f3763520b2" category="paragraph"><block ref="3f8fbc4328976ab1bb4502f3763520b2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="942f47e7ef3ead6cb8f92c69276f36c3" category="paragraph"><block ref="942f47e7ef3ead6cb8f92c69276f36c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a58f060b570a241814715299c91f3fad" category="inline-image-macro">Alpacaサーバ、NetApp SnapCenterサーバ、NetAppストレージシステム、SAPソースシステム、SAPターゲットシステム、およびすべてがどのように統合されているかを示す図</block>
  <block id="f4ca65fb5c61e96bb0d6eed9c0ca8715" category="paragraph"><block ref="f4ca65fb5c61e96bb0d6eed9c0ca8715" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c6eb0132e4ccfcc9ed228d27e5cfc29" category="paragraph"><block ref="4c6eb0132e4ccfcc9ed228d27e5cfc29" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb37eef62a9f3eb5c99bffedd0024c1f" category="paragraph"><block ref="fb37eef62a9f3eb5c99bffedd0024c1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6393f88818ef94108486ce2601a4732e" category="paragraph"><block ref="6393f88818ef94108486ce2601a4732e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1036db93beffe95b80fff8d0ba735af9" category="paragraph"><block ref="1036db93beffe95b80fff8d0ba735af9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6482dcb2b1a382097c11d3774a029ac" category="inline-image-macro">Avantraサーバ、NetApp SnapCenterサーバ、NetAppストレージシステム、SAPソースシステム、SAPターゲットシステム、およびすべてのシステムがどのように統合されているかを示す図</block>
  <block id="32f81f33d6e774f336864df9e87bc44f" category="paragraph"><block ref="32f81f33d6e774f336864df9e87bc44f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c7048f952442b8f6d998ab516777056" category="paragraph"><block ref="4c7048f952442b8f6d998ab516777056" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26fa64ddac14c561cb8700ddd04d2768" category="paragraph"><block ref="26fa64ddac14c561cb8700ddd04d2768" category="inline-image-macro-rx" type="image"></block></block>
  <block id="209692e856fceee655a52e1abaa65592" category="paragraph"><block ref="209692e856fceee655a52e1abaa65592" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e9bcb357a56a02c9bd8533df7d0dd0ca" category="paragraph"><block ref="e9bcb357a56a02c9bd8533df7d0dd0ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="d0f0f43af738b26d182641cb7c12254e" category="paragraph"><block ref="d0f0f43af738b26d182641cb7c12254e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="08c5b98069920bf5ac7b4961005b5056" category="paragraph"><block ref="08c5b98069920bf5ac7b4961005b5056" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54c6354a212b8f91f2ff043d95c8a94e" category="paragraph"><block ref="54c6354a212b8f91f2ff043d95c8a94e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="70f474aab1616506d03d24a8657ae910" category="paragraph"><block ref="70f474aab1616506d03d24a8657ae910" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7f23aeaaf119e1c77839ccb7a26f572a" category="paragraph"><block ref="7f23aeaaf119e1c77839ccb7a26f572a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18ed31da1adaccc57dd6543fc9b26c8f" category="paragraph"><block ref="18ed31da1adaccc57dd6543fc9b26c8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="baaa9a167a827541388c50135103e4fd" category="paragraph"><block ref="baaa9a167a827541388c50135103e4fd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f2e7523bdd169ca65eca0147bca8fff1" category="inline-image-macro">「Use Mount Data XML yes」が強調表示された「Delete NetAppClone General」画面のスクリーンショット</block>
  <block id="8a8dd4fc02cb2cf28f0b93868a12473e" category="paragraph"><block ref="8a8dd4fc02cb2cf28f0b93868a12473e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d574b7c12d0ffbf3da10d882088b0cef" category="paragraph"><block ref="d574b7c12d0ffbf3da10d882088b0cef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0f9f630eca85dbbe04a442a7a696930c" category="inline-image-macro">SAP LaMa Configuration &amp; gt; Systems &amp; gt; System Details画面のスクリーンショット。［カスタムプロビジョニングプロセスを使用］チェックボックスが強調表示されます。</block>
  <block id="032c2a456234741b329b07d476cc4d1a" category="paragraph"><block ref="875d532bdc997e1002f70ac7b667645e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="254514cf830e6feaf160e3ec53e3f18f" category="paragraph">著者：Michael Schlosser、Nils Bauer、NetApp</block>
  <block id="e066a9a52290d370f53ecf456c5be0f4" category="paragraph"><block ref="e066a9a52290d370f53ecf456c5be0f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c49f1c2b6cf2a413b781562e94f51c9" category="paragraph"><block ref="2c49f1c2b6cf2a413b781562e94f51c9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be134f57e81ec33622cfc4840b1b0b96" category="paragraph"><block ref="be134f57e81ec33622cfc4840b1b0b96" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22dd11876567037f3dce168aca90a55d" category="inline-image-macro">このスクリーンショットは、System &amp; gt; Provisioning Systems Viewで開いているSAP LaMa GUIを示しています。このGUIでは、Destroy Systemsドロップダウンを開くことができます。</block>
  <block id="c29f9ca5d936c517167eb4d17112544a" category="paragraph"><block ref="cd60d04f86fbd91a9f493108cae035e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="80e4ac8363c4bb43c3e0be2319263403" category="paragraph"><block ref="80e4ac8363c4bb43c3e0be2319263403" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ed02cb72288b1d82c109e6809814b6d8" category="paragraph"><block ref="ed02cb72288b1d82c109e6809814b6d8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c9e5185c4873df6611b8dfbcf745108e" category="paragraph"><block ref="c9e5185c4873df6611b8dfbcf745108e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="665bbfd6b563f38b5fe08024fd11bd2a" category="paragraph"><block ref="665bbfd6b563f38b5fe08024fd11bd2a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9337347d6d92fec3b5156bcc5bb61fdb" category="paragraph"><block ref="9337347d6d92fec3b5156bcc5bb61fdb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="43c1e12c4de1117893166b4d61a58800" category="paragraph"><block ref="43c1e12c4de1117893166b4d61a58800" category="inline-image-macro-rx" type="image"></block></block>
  <block id="11be0398e50f67b0d6de3c0d5065d86d" category="paragraph"><block ref="11be0398e50f67b0d6de3c0d5065d86d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="92e855188fcadbee0c81d0aef8797e36" category="paragraph"><block ref="92e855188fcadbee0c81d0aef8797e36" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5d15a1dd9a1e0efc6857b74627bf9a71" category="paragraph"><block ref="5d15a1dd9a1e0efc6857b74627bf9a71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="942813ee3bf3e2e859a1cad799510176" category="paragraph"><block ref="942813ee3bf3e2e859a1cad799510176" category="inline-image-macro-rx" type="image"></block></block>
  <block id="47a8e72c82c913fb5ec4254dfdc296d9" category="paragraph"><block ref="47a8e72c82c913fb5ec4254dfdc296d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d2131ff1c4a2e5d26bf0b2cb33f5c8eb" category="paragraph"><block ref="d2131ff1c4a2e5d26bf0b2cb33f5c8eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="78a4d37e4d6724327721d85ef21012d9" category="paragraph"><block ref="78a4d37e4d6724327721d85ef21012d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9326b2ac6972353a648e8ebac728915c" category="paragraph"><block ref="9326b2ac6972353a648e8ebac728915c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d8e554fbc28ed599fa3b330903e7d0b" category="paragraph"><block ref="1d8e554fbc28ed599fa3b330903e7d0b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7a46bc035ec735ffe93788d32e556ee4" category="paragraph"><block ref="7a46bc035ec735ffe93788d32e556ee4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a118fa5c9c9accd7643ffad4342eaf35" category="paragraph"><block ref="a118fa5c9c9accd7643ffad4342eaf35" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6721ceca95a36e6e11baced7869c395e" category="paragraph"><block ref="6721ceca95a36e6e11baced7869c395e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="55ca9b09ad1ce9c38941c90c88767f7e" category="paragraph"><block ref="55ca9b09ad1ce9c38941c90c88767f7e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="441425b2f5b62ff29a43ee5c4a2ca207" category="paragraph"><block ref="441425b2f5b62ff29a43ee5c4a2ca207" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1fd4abb2e9e4644dca0b00cc5564ae7d" category="paragraph"><block ref="1fd4abb2e9e4644dca0b00cc5564ae7d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0ee7ebf271ff2743b8f544bbfeb81691" category="paragraph"><block ref="0ee7ebf271ff2743b8f544bbfeb81691" category="inline-image-macro-rx" type="image"></block></block>
  <block id="675714232d181513a4eeff22a3b0db21" category="paragraph"><block ref="675714232d181513a4eeff22a3b0db21" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0e5538f491798b42e37ed0f1c413963d" category="paragraph"><block ref="0e5538f491798b42e37ed0f1c413963d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fd186e381af91342321d2f87740110a9" category="paragraph"><block ref="fd186e381af91342321d2f87740110a9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d6c61f59b9d13174e1e29f1881cb383a" category="paragraph"><block ref="d6c61f59b9d13174e1e29f1881cb383a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7413e2537a132edd12589463531e2bcd" category="paragraph"><block ref="7413e2537a132edd12589463531e2bcd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3692e43b127e4974805821bedcf7b7af" category="paragraph"><block ref="3692e43b127e4974805821bedcf7b7af" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ea9e8adaeb644dd10fe0cff853bb61c9" category="paragraph"><block ref="ea9e8adaeb644dd10fe0cff853bb61c9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9c922d24ae362be7b4b207796c78fc80" category="paragraph"><block ref="9c922d24ae362be7b4b207796c78fc80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f66bd4318b3bbbdefc2a05b723e920b8" category="paragraph"><block ref="f66bd4318b3bbbdefc2a05b723e920b8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6940d83e659b53fe2828f35b5691fab4" category="paragraph"><block ref="6940d83e659b53fe2828f35b5691fab4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dfbc93639d1067b24f414457d7eb84e4" category="paragraph"><block ref="dfbc93639d1067b24f414457d7eb84e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="50e1d44f2792b680cc4c690f57736241" category="paragraph"><block ref="50e1d44f2792b680cc4c690f57736241" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27a88cfd40f9f876e71c77f4b3ebce5b" category="paragraph"><block ref="27a88cfd40f9f876e71c77f4b3ebce5b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0519aa55a3128b6d977868b191a4c9b" category="paragraph"><block ref="a0519aa55a3128b6d977868b191a4c9b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0fd3fed7a6654b610a5215582f3890df" category="paragraph"><block ref="0fd3fed7a6654b610a5215582f3890df" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8dda9dbd415a90ebdecd67562ff62647" category="paragraph"><block ref="8dda9dbd415a90ebdecd67562ff62647" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49af0825272af5b55efb29d6e627295a" category="paragraph"><block ref="49af0825272af5b55efb29d6e627295a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4e06893830d915ce3e5944cc4a806a70" category="paragraph"><block ref="4e06893830d915ce3e5944cc4a806a70" category="inline-image-macro-rx" type="image"></block></block>
  <block id="814ac3ceb59872d05a2261dbcb6762c4" category="paragraph"><block ref="814ac3ceb59872d05a2261dbcb6762c4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a252d2b5bd54720415ff0f1bbcd3bfe5" category="paragraph"><block ref="a252d2b5bd54720415ff0f1bbcd3bfe5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="91cda59c1c41ab362256a803dd6e9aaa" category="paragraph"><block ref="91cda59c1c41ab362256a803dd6e9aaa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ea03a38ab10e6dd8a884dadd6c248ff3" category="paragraph"><block ref="ea03a38ab10e6dd8a884dadd6c248ff3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5d16c8339f5fcab67de96988b089d35" category="paragraph"><block ref="f5d16c8339f5fcab67de96988b089d35" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c30622a0d9b9e9fc1d3b481798046eab" category="paragraph"><block ref="c30622a0d9b9e9fc1d3b481798046eab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e7a877dc2387d8faa54362255e76495" category="paragraph"><block ref="6e7a877dc2387d8faa54362255e76495" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e18efc193d0f3a7f6848d6be60867b3" category="paragraph"><block ref="6e18efc193d0f3a7f6848d6be60867b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a199e55ed8eb37606428746d6f10d147" category="paragraph"><block ref="a199e55ed8eb37606428746d6f10d147" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e4d4a0dc2ca0c2797ae8ae1ea2a1b82c" category="paragraph"><block ref="e4d4a0dc2ca0c2797ae8ae1ea2a1b82c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="678bcd2f08c5337d0222e9bfde1b5844" category="paragraph"><block ref="678bcd2f08c5337d0222e9bfde1b5844" category="inline-image-macro-rx" type="image"></block></block>
  <block id="605799b9f9a950727f602913d090cd4f" category="paragraph"><block ref="605799b9f9a950727f602913d090cd4f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ec235bf2d8184a1756901c3c16298822" category="paragraph"><block ref="ec235bf2d8184a1756901c3c16298822" category="inline-image-macro-rx" type="image"></block></block>
  <block id="41468c4909b503f2f8450403348438d1" category="paragraph"><block ref="41468c4909b503f2f8450403348438d1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58ab23d5a0e0f21a7077556a4a2aeccb" category="paragraph">次の図に示すように、最初にLSC内のすべての関連システムを定義しました。</block>
  <block id="5fdad469293cb215921d36afbda617a9" category="paragraph"><block ref="5fdad469293cb215921d36afbda617a9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3b8765a4980907a8866739e8902f29d" category="paragraph"><block ref="c3b8765a4980907a8866739e8902f29d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a1c34f80a501b5f0967b004c78c0ff8e" category="paragraph"><block ref="a1c34f80a501b5f0967b004c78c0ff8e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f327d46bfc411de47abf4b30419f2e71" category="paragraph"><block ref="f327d46bfc411de47abf4b30419f2e71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5cbbd62b6aa5194964f15bc6eb899167" category="paragraph"><block ref="5cbbd62b6aa5194964f15bc6eb899167" category="inline-image-macro-rx" type="image"></block></block>
  <block id="21eac00966acf4b2a72bf91167f30ebf" category="paragraph"><block ref="21eac00966acf4b2a72bf91167f30ebf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="47a802a2fc87ab9dc509a5196ce212ed" category="paragraph"><block ref="47a802a2fc87ab9dc509a5196ce212ed" category="inline-image-macro-rx" type="image"></block></block>
  <block id="331bcc5b2de814edbfdb7a4ed55aca83" category="paragraph"><block ref="331bcc5b2de814edbfdb7a4ed55aca83" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e025797ef76ec523c2fbdc913acd1b8d" category="paragraph"><block ref="e025797ef76ec523c2fbdc913acd1b8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6d33e0da817a0c4581511187861113a2" category="paragraph"><block ref="6d33e0da817a0c4581511187861113a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ac934736a221fb880f1f184f450b3b84" category="paragraph"><block ref="ac934736a221fb880f1f184f450b3b84" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d9ab7555999c5d8ff45ee59f2901274e" category="paragraph"><block ref="d9ab7555999c5d8ff45ee59f2901274e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e4eb73ef43a1f9303efb9aacfa9fb54" category="paragraph"><block ref="8e4eb73ef43a1f9303efb9aacfa9fb54" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fa50f5934ab4a86ba7d21d9282a4ae83" category="paragraph"><block ref="fa50f5934ab4a86ba7d21d9282a4ae83" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7015b3891214599aa77ef61934d48e7" category="paragraph"><block ref="c7015b3891214599aa77ef61934d48e7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1481209059a8c176a74f364ded8717f3" category="paragraph"><block ref="1481209059a8c176a74f364ded8717f3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="431660b7246559c07729890a342868c6" category="paragraph"><block ref="431660b7246559c07729890a342868c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eac376c625b17cbfe1ce4dc53801ef84" category="paragraph"><block ref="eac376c625b17cbfe1ce4dc53801ef84" category="inline-image-macro-rx" type="image"></block></block>
  <block id="479c484cab176977b9085c7442252d55" category="paragraph"><block ref="479c484cab176977b9085c7442252d55" category="inline-image-macro-rx" type="image"></block></block>
  <block id="354953ecdb34e2ea0a14730090c02b5d" category="paragraph"><block ref="354953ecdb34e2ea0a14730090c02b5d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="174ef09bcd66f149e8f3d48b9c27d084" category="paragraph"><block ref="174ef09bcd66f149e8f3d48b9c27d084" category="inline-image-macro-rx" type="image"></block></block>
  <block id="33d725d287734490bd3cf2cbc2610e77" category="paragraph"><block ref="33d725d287734490bd3cf2cbc2610e77" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a52149656c8f2abac5c009c9b7bd0e3a" category="paragraph"><block ref="a52149656c8f2abac5c009c9b7bd0e3a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="01f138b89b76c271eaaf0dbe6b566876" category="paragraph"><block ref="01f138b89b76c271eaaf0dbe6b566876" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c4df2993c5eadacc25e3c3baae96002" category="paragraph"><block ref="3c4df2993c5eadacc25e3c3baae96002" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e23696742acf0fa9bb7c2286b3e5f59" category="paragraph"><block ref="8e23696742acf0fa9bb7c2286b3e5f59" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c243eb4e919916e473a72dccd4fbfe1b" category="paragraph"><block ref="c243eb4e919916e473a72dccd4fbfe1b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8fd04f11688ea4f9308b54658b7dd1b2" category="paragraph"><block ref="8fd04f11688ea4f9308b54658b7dd1b2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f261b42439047d072eb3c7e9b4b87db" category="paragraph"><block ref="9f261b42439047d072eb3c7e9b4b87db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7c607c15b167925298ee59c7b9b536a2" category="paragraph"><block ref="7c607c15b167925298ee59c7b9b536a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8c94f21bb3442dbbfc3e795c932d333" category="paragraph"><block ref="e8c94f21bb3442dbbfc3e795c932d333" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b611762afdd13630ec29f6cdb763085a" category="paragraph"><block ref="b611762afdd13630ec29f6cdb763085a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52846a5050d653763f3cd3243f72d0a4" category="paragraph"><block ref="52846a5050d653763f3cd3243f72d0a4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e9b147ad6cc71607ab8a105a00546bdb" category="paragraph"><block ref="e9b147ad6cc71607ab8a105a00546bdb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7fbd33f7b46ab179e85bc49b99a762af" category="paragraph"><block ref="7fbd33f7b46ab179e85bc49b99a762af" category="inline-image-macro-rx" type="image"></block></block>
  <block id="319b428c387de4fee05b987babf39455" category="paragraph"><block ref="319b428c387de4fee05b987babf39455" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a51a61213f6795503ed5e5f0666ed276" category="paragraph"><block ref="a51a61213f6795503ed5e5f0666ed276" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8af50f5f42c2479f67f027cb7263e038" category="paragraph"><block ref="a6b0e1abc31c1512868a62f35c9a7070" category="inline-image-macro-rx" type="image"></block> プライマリとオフサイトのバックアップストレージのクローニングでSAP HANAシステムの更新ワークフローが異なるのは、SnapCenterでSnapshotバックアップを選択することだけです。オフサイトのバックアップストレージのクローニングでは、まずセカンダリバックアップを選択し、次にSnapshotバックアップを選択する必要があります。</block>
  <block id="b95eabd6551d0cecc533e863bd612859" category="paragraph"><block ref="b95eabd6551d0cecc533e863bd612859" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8947252def4e010b81da6bad251c30c8" category="paragraph"><block ref="8947252def4e010b81da6bad251c30c8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd7e803f5ed70720d795c6e599f3b1f3" category="paragraph"><block ref="bd7e803f5ed70720d795c6e599f3b1f3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="468d6a4b81fd97dcd919ddb062cfad9b" category="paragraph"><block ref="468d6a4b81fd97dcd919ddb062cfad9b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2697c3732578c70f48d3e1413167069a" category="paragraph"><block ref="2697c3732578c70f48d3e1413167069a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da0d785f35be51c61538b9b7ef61ec2f" category="paragraph"><block ref="da0d785f35be51c61538b9b7ef61ec2f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3295f6a56df5dfbe6d8979d65e00cda4" category="paragraph"><block ref="3295f6a56df5dfbe6d8979d65e00cda4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="748f98c77c761c744d8667ba2bfeb19d" category="paragraph"><block ref="748f98c77c761c744d8667ba2bfeb19d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09176130239d5894263c4ed91014305a" category="paragraph"><block ref="09176130239d5894263c4ed91014305a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f4d0149ab4a4edbbee5e661be99483a" category="paragraph"><block ref="6f4d0149ab4a4edbbee5e661be99483a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b87f73078b80ca4368d0366f224cbef" category="paragraph"><block ref="5b87f73078b80ca4368d0366f224cbef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1f88af7db6ddf1c30d5eaf785280d094" category="paragraph"><block ref="1f88af7db6ddf1c30d5eaf785280d094" category="inline-image-macro-rx" type="image"></block></block>
  <block id="902958adb563d46c054b6534faccb079" category="paragraph"><block ref="902958adb563d46c054b6534faccb079" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d860cf77350224351ea2dc03dff69f4" category="paragraph"><block ref="2d860cf77350224351ea2dc03dff69f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="381b5f7026618027af2bcab45f168245" category="paragraph"><block ref="381b5f7026618027af2bcab45f168245" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5bd721f9ee4385ac6cc588d739aef8b5" category="paragraph"><block ref="5bd721f9ee4385ac6cc588d739aef8b5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4bb2c1fe93a605d54cdd64b4a9d5e008" category="paragraph"><block ref="4bb2c1fe93a605d54cdd64b4a9d5e008" category="inline-image-macro-rx" type="image"></block></block>
  <block id="310350ac09043bc6ffaddd203d00cdee" category="paragraph"><block ref="310350ac09043bc6ffaddd203d00cdee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ae96409347532f67bebd16667d20fd2d" category="paragraph"><block ref="ae96409347532f67bebd16667d20fd2d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="10c565f3aabb68bc914db1d5bbd769a5" category="paragraph"><block ref="10c565f3aabb68bc914db1d5bbd769a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c035e71f6f70515cd48a1af9cbd896ae" category="paragraph"><block ref="c035e71f6f70515cd48a1af9cbd896ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b7159fc1bb313286db7554a84bc8ebb" category="paragraph"><block ref="8308411e5b8a4f498b77fa40cd42c44e" category="inline-image-macro-rx" type="image"></block> SnapCenterクローニングのワークフローを使用すると、インフラレイヤとデータベースレイヤで必要なタスクを高速化、自動化できます。SnapCenterでは、ソースシステムからターゲットシステムにバックアップをリストアする代わりに、NetApp SnapshotコピーとNetApp FlexCloneテクノロジを使用しているため、起動したSAP HANAデータベースに必要なタスクを数時間ではなく数分で実行できます。クローニングプロセスに要する時間はデータベースのサイズに左右されないため、非常に大規模なシステムでも数分で作成できます。起動時間は、データベースのサイズ、およびデータベースサーバとストレージシステム間の接続によって異なります。</block>
  <block id="0b756a2b837b399a76855dd2c7ad462c" category="paragraph"><block ref="0b756a2b837b399a76855dd2c7ad462c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71363724384f11e567c31d8b03a9c2dd" category="paragraph"><block ref="71363724384f11e567c31d8b03a9c2dd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="099298864cff6077c45112acbd241aa8" category="paragraph"><block ref="bac0a60e872e73e9fd7d2ef7ad8b195c" category="inline-image-macro-rx" type="image"></block> 詳細な手順については、テクニカルレポートを参照してください。</block>
  <block id="d315ad62620c6c170565a626312e362d" category="cell">NFS TCPの最大転送サイズを1MBに設定する</block>
  <block id="8a92011f99cb9f446b19032c2d76f759" category="admonition">ワークロードが異なる共有環境では、NFS TCPの最大転送サイズを262144に設定</block>
  <block id="42a7703e0bc31f6ec72a6e40780ff36a" category="cell">NFSv4.xセッションスロットの数の変更（オプション）</block>
  <block id="cae93577fd94d0fe06d63305e6bfbe50" category="admonition">pNFSは有効にして使用できます。</block>
  <block id="dface3e0fc3485feea995027b8e0fd8a" category="cell">advanced 権限レベルの nfs modify -vserver &lt;vserver_name&gt; -tcp-max-xfer-size 1048576 set admin を設定します</block>
  <block id="9adaadfddff33c2daa546229f2809747" category="list-text">SAPインストールツールを使用して<block ref="b0aa3e7cad7b6222087aedbd4c799832" prefix=" " category="inline-code"></block>、いずれかのワーカーホストで次のコマンドを実行してインストールを開始します。オプションを使用し<block ref="9676c5ff8ed94e9d3ceba55f16dde62f" prefix=" " category="inline-code"></block>て<block ref="d6075976fde6718b25d21e4894d5d07d" prefix="(" category="inline-code"></block>、2番目のワーカーとスタンバイホストを追加し<block ref="7e4282317c0dcc7ce1f24f047b09f466" prefix="(" category="inline-code"></block>ます）。</block>
  <block id="dc6dd758c7cbed933fdee36ba03835f9" category="admonition">準備したファイルが格納されているディレクトリ<block ref="1611b9881f1a590d33bbbcfdd9c55ca7" prefix=" " category="inline-code"></block>は<block ref="1b723e0f23eac7863dadd5b0b02436e4" prefix="(" category="inline-code"></block>、CLIオプションに含まれてい<block ref="09c9689230344c41364f0fa22da928c6" prefix=" " category="inline-code"></block>ます）。</block>
  <block id="b5b2eafc66ebc94cfb50a26c15cf1f52" category="paragraph">SAPインストールツールを使用して<block ref="e57381f2a2aa941f8d88ba956c77d978" prefix=" " category="inline-code"></block>、いずれかのワーカーホストで次のコマンドを実行してインストールを開始します。オプションを使用し<block ref="9676c5ff8ed94e9d3ceba55f16dde62f" prefix=" " category="inline-code"></block>て、2番目のワーカー（sapc-hana-tst-06）とスタンバイホスト（sapc-hana-tst-07）を追加します。準備したファイルが格納されているディレクトリ<block ref="1611b9881f1a590d33bbbcfdd9c55ca7" prefix=" " category="inline-code"></block>は<block ref="1b723e0f23eac7863dadd5b0b02436e4" prefix="(" category="inline-code"></block>、CLIオプションに含まれてい<block ref="09c9689230344c41364f0fa22da928c6" prefix=" " category="inline-code"></block>ます）。使用する OS のバージョンによっては、 SAP HANA データベースをインストールする前に Phyton 2.7 をインストールする必要があります。</block>
  <block id="1a808aae97e904d2d0d8b853c60fa475" category="list-text">AFF A150、AFF A20、AFF A250、AFF A30、AFF A400、AFF A50、AFF A70、AFF A1K、AFF A90、AFF A900、AFF A800</block>
  <block id="19fe8eb256f35b3d5110d29e652ce432" category="list-text">AFF C250、AFF C30、AFF C400、AFF C60、AFF C800、AFF C80</block>
  <block id="968cad2bf5c711dad5ccd0efa3e1ff9f" category="list-text">AFF A150、AFF A20、AFF A250、AFF A30、AFF A400、AFF A50、AFF A70、AFF A1K、AFF A900、AFF A90、AFF A800</block>
  <block id="54652d040ebb810c360684ca8e231a52" category="paragraph">NFS データストアまたは NFS を使用する VVol データストアもサポートされます。どちらの場合も、本番環境で使用するデータストアに格納する必要があるのは、 1 つの SAP HANA データボリュームまたはログボリュームだけです。</block>
  <block id="7d631f41ea82e4581ac749b6874d885a" category="paragraph">raw デバイスマッピング（ RDM ）、 FCP データストア、または FCP を使用する VVol データストアもサポートされます。どちらのデータストアオプションも、本番環境で使用するためにデータストアに格納する SAP HANA データボリュームまたはログボリュームは 1 つだけです。</block>
  <block id="efd1d0d586a27578c98f10496d441cd4" category="paragraph">NFS データストアと NFS を使用する VVol データストアもサポートされます。どちらの場合も、本番環境で使用するデータストアに格納する必要があるのは、 1 つの SAP HANA データボリュームまたはログボリュームだけです。</block>
  <block id="cb1774d583cd49c1e7fc03a9172f09d9" category="list-text">FAS2750、FAS2820、FAS8300、FAS50、FAS8700、FAS70、FAS9500、FAS90 SAP HANA向けのNetApp認定ストレージソリューションの一覧については、を参照してください<block ref="b94cf00a6e18ec3712e81f808581c042" category="inline-link-rx"></block>。</block>
  <block id="68a4c90b9b4251c2e6c62854e0f0e383" category="cell">新しいストレージシステムとマイナーアップデート</block>
  <block id="6cc5c9e930ea3d3b8bff4367c60ceea4" category="cell">2025年2月</block>
  <block id="15cd132980dad32e9c3c529955721df9" category="cell">新しいストレージシステム</block>
  <block id="a10922577a9bcbf85b1a7a9d8e7de5aa" category="cell">2024年11月</block>
  <block id="53bab281b7eb6692b17a4b65d99e2188" category="list-text">FAS2750、FAS2820、FAS8300、FAS50、FAS8700、 FAS70、FAS9500、FAS90</block>
  <block id="eccbc87e4b5ce2fe28308fd9f2a7baf3" category="cell">3</block>
  <block id="c9f0f895fb98ab9159f51fd0297e236d" category="cell">8</block>
  <block id="34173cb38f07f89ddbebc2ac9128303f" category="cell">30</block>
  <block id="c2be09c4548a0a3d6590431051156ecc" category="inline-image-macro">8台のSAP HANAホストをストレージHAペアに接続</block>
  <block id="445dc01d838477256a3f7c6ec4051a70" category="inline-image-macro">ストレージHAペアに接続された追加のSAP HANAホスト</block>
  <block id="6119ba4f9580ccfa3f0a3d3f871870ff" category="inline-image-macro">ストレエシHAヘアノツイカ</block>
  <block id="238ec08371f09e874d0f1002aee0caeb" category="inline-image-macro">2台のストレージコントローラに接続されたSAP HANAホスト</block>
  <block id="74f3ad2825ea13022492793fb7f63a79" category="paragraph"><block ref="74f3ad2825ea13022492793fb7f63a79" category="inline-image-macro-rx" type="image"></block></block>
  <block id="15e40c72ba936fd4cbb64210e15725a1" category="paragraph">次の図に示すように、 1 つの SAS スタックに最大 1 台のディスクシェルフを接続して、 SAP HANA ホストに必要なパフォーマンスを実現できます。各シェルフ内のディスクは、 HA ペアの両方のコントローラに均等に分散する必要があります。ADPv2 は、 ONTAP 9 および DS224C ディスクシェルフで使用されます。</block>
  <block id="2f4edbf818ed882e067d16f9f1c932da" category="inline-image-macro">DS224Cディスクシェルフの接続</block>
  <block id="ddb7d2fa5d4fd45c1a6001d8cbba792c" category="paragraph"><block ref="ddb7d2fa5d4fd45c1a6001d8cbba792c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f8c9ad3e9065af52a42b05407f475c98" category="paragraph">次の図に示すように、NS224 NVMeディスクシェルフは、コントローラごとに2つの100GbEポートで接続されます。各シェルフ内のディスクは、HAペアの両方のコントローラに均等に分散する必要があります。ADPv2 は、 NS224 ディスクシェルフにも使用されます。</block>
  <block id="39b270995b65c0f50a8535f49f84aa61" category="inline-image-macro">NS224 NVMeディスクシェルフの接続</block>
  <block id="dac87f657c075eb6a448486fda4b18e4" category="paragraph"><block ref="dac87f657c075eb6a448486fda4b18e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0dee623c3a47708547aff95df6dc16df" category="paragraph">一般に、使用するディスクシェルフやディスクテクノロジ（ SSD または HDD ）に関係なく、コントローラごとに 2 つのアグリゲートを設定する必要があります。この手順は、使用可能なすべてのコントローラリソースを使用できるようにするために必要です。</block>
  <block id="6f1ace73b19ea95862049cef5bc4fabb" category="admonition">2024年8月以降にリリースされたASAシステムでは、この手順は自動的に実行されるため必要ありません。</block>
  <block id="f4c9620796b063803a52bf4cb0bdc63b" category="paragraph"><block ref="f4c9620796b063803a52bf4cb0bdc63b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="775282e39d26408a21d5eaa1c485e361" category="paragraph">ONTAP System Managerを使用したSVMの作成時には、必要なすべての物理FCPポートを選択でき、物理ポートごとに1つのLIFが自動的に作成されます。</block>
  <block id="ca4b4ab28b402042c5530cc0059c6af3" category="inline-image-macro">SVMの作成</block>
  <block id="bc0b4db5e6b23fdaed6f5246d05d6ef8" category="paragraph"><block ref="bc0b4db5e6b23fdaed6f5246d05d6ef8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0c2fd995ece5cfe7704d5109986e3b0e" category="paragraph"><block ref="0c2fd995ece5cfe7704d5109986e3b0e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2376775a32e0fa313efe0917b1bd9cfc" category="paragraph"><block ref="2376775a32e0fa313efe0917b1bd9cfc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="871d39fd458463703004f24c503c7812" category="paragraph">1つのNVMe SSD（データ）は、使用する特定のNVMeディスクに応じて、最大2/5のSAP HANAホストをサポートします。SSDとSAP HANAホストは、両方のストレージコントローラ間で均等に分散する必要があります。AFFシステムとASAシステムの内蔵NVMeディスクについても同様です。</block>
  <block id="b80edeac5a9d51784b1a139f183acc83" category="inline-image-macro">SAP HANAのサイジングプロセス</block>
  <block id="f2ed1b2a99c0f64ca0cfcd6111d7ec4c" category="inline-image-macro">8台のSAP HANAホストをストレージハイアベイラビリティ（HA）ペアに接続</block>
  <block id="d788d47338c59792d717e9540a6664ef" category="inline-image-macro">既存のストレージコントローラHAペアへの追加のSAP HANAホストの追加</block>
  <block id="4f056ce2074ba16ee637d64fdef647a7" category="inline-image-macro">HAペアが追加されました</block>
  <block id="4d9c2ddc20521fa24e033c096807f43d" category="paragraph">次の図は、 4 台の SAP HANA ホストを 10GbE ネットワークを使用してストレージコントローラ HA ペアに接続した場合の例を示しています。各SAP HANAホストには、冗長ファブリックへのアクティブ/アクティブ接続があります。</block>
  <block id="e7c118cc09590a9a288c67a4b302b904" category="paragraph">ストレージレイヤでは、4つのアクティブ接続が各SAP HANAホストに10Gbのスループットを提供するように構成されます。ストレージレイヤでは、MTUサイズが9、000のブロードキャストドメインが設定され、必要なすべての物理インターフェイスがこのブロードキャストドメインに追加されます。この方法では、これらの物理インターフェイスが同じフェイルオーバーグループに自動的に割り当てられます。これらの物理インターフェイスに割り当てられているすべての論理インターフェイス（ LIF ）が、このフェイルオーバーグループに追加されます。</block>
  <block id="fa9e73ef22bb3dbfc0d7dfadf5b21281" category="inline-image-macro">ネットワークの概要</block>
  <block id="1f4afde3d41b82108694e4fb06f46b87" category="paragraph"><block ref="1f4afde3d41b82108694e4fb06f46b87" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5cc69351dc44fc813914fdaa909dbc3e" category="paragraph">一般に、サーバ（ボンド）およびストレージシステムではHAインターフェイスグループ（Link Aggregation Control Protocol [LACP]やifgroupなど）を使用することを推奨します。HA インターフェイスグループを使用して、グループ内のすべてのインターフェイス間で負荷が均等に分散されていることを確認します。負荷分散は、ネットワークスイッチインフラの機能によって異なります。</block>
  <block id="6c3a3847a37cd097bd01d4da5604f5ec" category="inline-image-macro">SASシェルフの接続</block>
  <block id="9a0eda3f9d8233b1fa9f3da649f3f69a" category="paragraph"><block ref="9a0eda3f9d8233b1fa9f3da649f3f69a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ad5e5ab57510595b28c8e0eccf58ded8" category="inline-image-macro">MVMeディスクシェルフの接続</block>
  <block id="a1868e70c540a5e45ad58185a99b3769" category="paragraph"><block ref="a1868e70c540a5e45ad58185a99b3769" category="inline-image-macro-rx" type="image"></block></block>
  <block id="06622e356c3be6dc8c45370761d20660" category="paragraph">一般に、使用するディスクシェルフやドライブテクノロジ（ SAS SSD または NVMe SSD ）とは関係なく、コントローラごとに 2 つのアグリゲートを構成する必要があります。</block>
  <block id="91e0d52ee3c1820ee8386d18f6a91bd0" category="inline-image-macro">アグリゲート構成</block>
  <block id="da814dd6671cb64a7483f4c29eac56a3" category="paragraph"><block ref="da814dd6671cb64a7483f4c29eac56a3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d63145bc3309abf0009436530805ac13" category="inline-image-macro">ボリューム構成SAP HANAシングルホスト</block>
  <block id="4e37fc2061f3eb4a5c883256f7abd270" category="paragraph"><block ref="4e37fc2061f3eb4a5c883256f7abd270" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2f57ad2489363e64804b354244f0c7b8" category="inline-image-macro">ボリューム構成SAP HANAマルチホスト</block>
  <block id="67723885e8b8dec5641fd9b65c05a445" category="paragraph"><block ref="67723885e8b8dec5641fd9b65c05a445" category="inline-image-macro-rx" type="image"></block></block>
  <block id="de3a0b5c28d9158410e205fdf4dd72f2" category="paragraph">1つのNVMe SSD（データ）は、使用するNVMeディスクに応じて、最大2/5のSAP HANAホストをサポートします。SSDとSAP HANAホストは、両方のストレージコントローラ間で均等に分散する必要があります。AFFシステムの内蔵NVMeディスクについても同様です。</block>
  <block id="a1498fba486158dfd616e2bc1f205275" category="admonition">ディスクシェルフを追加しても、ストレージコントローラでサポートできるSAP HANAホストの最大数は増えません。</block>
  <block id="a2ef5d14ae5c3accf7291e39163d1ebd" category="paragraph">次の図に示すように、NS224 NVMeディスクシェルフは、コントローラごとに2つの100GbEポートで接続されます。各シェルフ内のディスクは、HAペアの両方のコントローラに均等に分散する必要があります。</block>
  <block id="ef8d203413a4aabe57527556e0ef5fcb" category="paragraph"><block ref="ef8d203413a4aabe57527556e0ef5fcb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c93db5d513dfbb32e85b013261b5aa8" category="list-text">の説明に従って、正しいディスク・シェルフ構成を確認します<block ref="039cb3f1d3f19b24b2d3e1a57595e88d" category="inline-xref-macro-rx"></block>。</block>
  <block id="cf0ea9a7f661e4a10ff9e179d0893564" category="list-text">の説明に従って、必要なアグリゲートを作成して設定します<block ref="19f0aba2b822910f53ba3966ee7c8d59" category="inline-xref-macro-rx"></block>。</block>
  <block id="07701c9e659f97922638b5c031983241" category="list-text">の説明に従って、Storage Virtual Machine（SVM）を作成します<block ref="7c58f6887f41bcea1635c2c18a7a4529" category="inline-xref-macro-rx"></block>。</block>
  <block id="9a7dedbc9b05dfef2c16b4468bbc6d42" category="list-text">の説明に従って、論理インターフェイス（LIF）を作成します<block ref="fc903155b67a1626f9032f79a26da71f" category="inline-xref-macro-rx"></block>。</block>
  <block id="629b1434b46fe9fd8b49baa3b0226daf" category="paragraph">ストレージクラスタ構成内に、 1 つのネットワークインターフェイス（ LIF ）を作成して専用の FCP ポートに割り当てる必要があります。たとえば、パフォーマンス上の理由から 4 つの FCP ポートが必要な場合は、 4 つの LIF を作成する必要があります。次の図は、SVMに設定された8つのLIFのスクリーンショットを示しています。</block>
  <block id="f2a5a64a9782e57f69edcf500c263407" category="inline-image-macro">論理インターフェイスの概要</block>
  <block id="23f2cbd88aede07dbc46cb6cec53ff8d" category="paragraph"><block ref="23f2cbd88aede07dbc46cb6cec53ff8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65b9726e3ebe1a441202c9bf3f553bf8" category="paragraph">igroupは、ONTAPクラスタのCLIを使用して作成できます。</block>
  <block id="919eb574abc6bef1fb42921ca23d3583" category="paragraph">NetApp ONTAP System Managerを使用してストレージボリュームとLUNを作成し、それらをサーバとONTAP CLIのigroupにマッピングすることができます。このマニュアルでは、CLIの使用方法について説明します。</block>
  <block id="235dfb4bd58f5a92d4712e433e88456c" category="paragraph">次の図に示すように、NS224 NVMeディスクシェルフは、コントローラごとに2つの100GbEポートで接続されます。各シェルフ内のディスクは、HAペアの両方のコントローラに均等に分散する必要があります。ADPv2 は、アグリゲート構成の章で説明されているとおり、 NS224 ディスクシェルフにも使用されます。</block>
  <block id="b9d115fd1443e1fee32e7a7fa3d39e70" category="paragraph">一般に、使用するディスクシェルフやディスクテクノロジ（ SSD または HDD ）とは別に、各コントローラに 2 つのアグリゲートを構成する必要があります。</block>
  <block id="7ec35ad49c18b3a6ac9a59e0f61272ff" category="paragraph">ストレージクラスタ構成内に、 1 つのネットワークインターフェイス（ LIF ）を作成して専用の FCP ポートに割り当てる必要があります。たとえば、パフォーマンス上の理由から 4 つの FCP ポートが必要な場合は、 4 つの LIF を作成する必要があります。次の図は、SVMに設定された8つのLIFのスクリーンショットを示しています。</block>
  <block id="0adbb60b92d050e36477305b1ca4b7e1" category="paragraph"><block ref="0adbb60b92d050e36477305b1ca4b7e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ddef20c528ad3796675320c130ce0e9b" category="paragraph">ONTAP 9 の System Manager で SVM を作成する際には、必要なすべての物理 FCP ポートを選択し、物理ポートごとに 1 つの LIF を自動的に作成できます。</block>
  <block id="8df6e0f7aa1113d05b7847dae27cf647" category="paragraph">次の図は、ONTAP System Managerを使用したSVMとLIFの作成を示しています。</block>
  <block id="fa1f57a7da43e8241d1a111b118395b1" category="paragraph"><block ref="fa1f57a7da43e8241d1a111b118395b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09ca73f01b169a4b7a327768898bf71c" category="paragraph">次の図は、 4 つのシングルホスト SAP HANA システムのボリューム構成を示しています。各SAP HANAシステムのデータボリュームとログボリュームは、異なるストレージコントローラに分散されます。たとえば、ボリュームは<block ref="aaef8ff6bbc08e9efaddebd078c4777c" prefix=" " category="inline-code"></block>コントローラAで構成され、ボリュームはコントローラBで構成され<block ref="eedd0dd4abbe982364bb7aa4dc29237b" prefix=" " category="inline-code"></block>ます。各ボリューム内には単一のLUNが構成されます。</block>
  <block id="102c21391acced3e67ae185a05909bc8" category="admonition">上記の構成では、<block ref="e049803e41fabe0f53c4ead4b0f14350" prefix=" " category="inline-code"></block>ユーザSIDadmのデフォルトのホームディレクトリが格納されているディレクトリが、各HANAホストのローカルディスクに配置されます。ディスクベースのレプリケーションを使用するディザスタリカバリの設定では、NetAppでは、各データベースホストのすべてのファイルシステムが中央ストレージに配置されるように、ファイルシステム用のボリュームに<block ref="e049803e41fabe0f53c4ead4b0f14350" prefix=" " category="inline-code"></block>さらに4つのサブディレクトリを作成することを推奨してい<block ref="07fe7fc9aa3cd33458708758a4a5854e" prefix=" " category="inline-code"></block>ます。</block>
  <block id="dd3925da178560a888f5c0d4bd90dc73" category="paragraph">このセクションでは、コマンドラインを使用した構成例を示します。 ONTAP 9 は、 LVM を使用した 2+1 の SAP HANA マルチホストシステムで、 LVM ボリュームグループごとに 2 つの LUN を使用した SID FC5 です。</block>
  <block id="952239c31e0fbf4511610dae4cbe22be" category="paragraph">1本のNVMe SSD（データ）は、最大2台のSAP HANAホストをサポートします。SSDとSAP HANAホストは、両方のストレージコントローラ間で均等に分散する必要があります。</block>
  <block id="01a8d3d035a390b9e2f8a164a50b3d9c" category="inline-image-macro">VMware固有のネットワーク設定</block>
  <block id="d4087e3f08b7a7f8751675ca82462e2a" category="list-text">TR-4667：『Automating SAP System Copies Using the SnapCenter SAP HANA Plug-in』</block>
  <block id="6c112b2b6e22e11b65018895aa298940" category="list-text">SAP HANA on VMware vSphere Wiki</block>
  <block id="7fd039f168758cb7fad07015245b1afa" category="inline-link"><block ref="7fd039f168758cb7fad07015245b1afa" category="inline-link-rx"></block></block>
  <block id="c0e729cc3b2e2214e3e2d35e123b1732" category="paragraph"><block ref="c0e729cc3b2e2214e3e2d35e123b1732" category="inline-link-rx"></block></block>
  <block id="c9f801c3b76e183b280276e75a8ebaea" category="list-text">『SAP HANA on VMware vSphere Best Practices Guide』</block>
  <block id="838491807b9e9689bc796a7e547fe188" category="inline-link"><block ref="838491807b9e9689bc796a7e547fe188" category="inline-link-rx"></block></block>
  <block id="b61d59281011f2681050ce1756929d77" category="paragraph"><block ref="b61d59281011f2681050ce1756929d77" category="inline-link-rx"></block></block>
  <block id="22c7eb5619fc26c433125aab7cfd57af" category="list-text"><block ref="22c7eb5619fc26c433125aab7cfd57af" category="inline-link-rx"></block></block>
  <block id="d8cb082280c9ef193a28bdb60d8e9779" category="list-text"><block ref="d8cb082280c9ef193a28bdb60d8e9779" category="inline-link-rx"></block></block>
  <block id="147a64bd742e2d54a7d7a7f133c3561c" category="paragraph">このセクションでは、コマンドラインを使用した ONTAP 9 と、 SID FC5 を使用した 2+1 の SAP HANA マルチホストシステムで、 LVM ボリュームグループごとに 2 つの LUN を使用した構成例を示します。</block>
  <block id="f98d4399781d823eb7dd788ef59bcb51" category="doc">追加情報とバージョン履歴</block>
  <block id="591670018ee25ae8b5625ed98cb5ff81" category="paragraph"><block ref="591670018ee25ae8b5625ed98cb5ff81" category="inline-link-rx"></block></block>
  <block id="ef1fb8d9c97217ef2fbf941299c08adf" category="paragraph">SnapMirrorアクティブ同期：</block>
  <block id="32e3115035ed1831322c88ce03af5c52" category="inline-link">ONTAPでのSnapMirrorアクティブ同期の概要</block>
  <block id="9f090056bc76628ad2a8b94b102aa48c" category="paragraph"><block ref="9f090056bc76628ad2a8b94b102aa48c" category="inline-link-rx"></block></block>
  <block id="e4004172088b034dfe07abe579273b06" category="inline-link">NetApp ONTAPとNetApp SnapMirrorは、VMware vSphere Metro Storage Cluster（vMSC）とアクティブに同期されます。</block>
  <block id="44d0d1ca42daaecc86f8bb55519f9ec5" category="paragraph"><block ref="44d0d1ca42daaecc86f8bb55519f9ec5" category="inline-link-rx"></block></block>
  <block id="34fd97d0487efaacb8dc98024d287c11" category="inline-link">SnapMirrorアクティブ同期を使用したVMware vSphere Metroストレージクラスタ</block>
  <block id="d5ad3267276646604ba509767a3d16f2" category="paragraph"><block ref="d5ad3267276646604ba509767a3d16f2" category="inline-link-rx"></block></block>
  <block id="58486898b4fe52f80d7a134d74186a4c" category="inline-link">VMware vSphere Metro Storage Cluster （ vMSC ）</block>
  <block id="f6bdc6a297299619f269bf3a556799d4" category="paragraph"><block ref="f6bdc6a297299619f269bf3a556799d4" category="inline-link-rx"></block></block>
  <block id="8866e8de2efa7275a5dc8e942c1613c2" category="paragraph">バージョン履歴：</block>
  <block id="0be8406951cdfda82f00f79328cf4efc" category="cell">コメント</block>
  <block id="88c55c9f00e518db40a6c680728b787f" category="cell">2025年3月</block>
  <block id="578debbebf489f0ea51e1904091b28c6" category="doc">セツテイノカイヨウレイ</block>
  <block id="b1d89f1cd61a86148770f4782f718ee1" category="paragraph">ラボのセットアップでは、両方のESXホストが両方のストレージクラスタにアクセスできる、統一されたアクセス構成を使用します。次のセクションでは、ユニフォームアクセス設定について説明しますが、ユニフォーム設定ではない場合の違いについても説明します。</block>
  <block id="6d29d2542a6a2e3e81746082b1d99b07" category="section-title">ソフトウェアバージョン</block>
  <block id="719d067b229178f03bcfa1da4ac4dede" category="cell">ソフトウェア</block>
  <block id="253b40ae359ba25b56231803430c4873" category="cell">ONTAP</block>
  <block id="23db331427e32cc94e52e42ba8759f19" category="cell">A700：9.15.1P7、A800：9.16.1RC1</block>
  <block id="612b02d3b61adaee87995431641689c5" category="cell">vSphereクライアント</block>
  <block id="75809dde56e3fe2c2fb740f1b55807ac" category="cell">8.0.3</block>
  <block id="1aa66ef3a8e34a7a538960a80d2e1e31" category="cell">ESXi</block>
  <block id="d5c7c08072d4efb56a83ee0c785a4627" category="cell">vSphere用SnapCenterプラグイン</block>
  <block id="a24cb0112e51902b6b3ed4606a7cd727" category="cell">6.0.1</block>
  <block id="793d284bad68b41cca09ce8e8b200352" category="cell">Linux OS</block>
  <block id="6ac3d422e6f335ad57542e8a44dd55b3" category="cell">SLES for SAP 15 SP5</block>
  <block id="cdfd3aaedd2f1ca4bb0a69bf5258b295" category="cell">2.0 SPS8</block>
  <block id="5c014f8939a89da0166a347a0237cf4f" category="cell">SnapCenter</block>
  <block id="e5aba9e63a96cac40d6e5f986a9079f3" category="doc">フェイルオーバーのシナリオ</block>
  <block id="de57ed1e494e5095dc962512b691ba8f" category="section-title">統一されたアクセス設定</block>
  <block id="f0debbf74e1e275c8a3ccb2444ac73f6" category="paragraph">統一されたアクセス構成では、ファイバチャネルSANが両方のサイトに拡張されます。両方のサイトのESXホストは、データセットの両方のコピーにアクセスできます。通常運用時、HANAシステムを実行するESXホストは、イニシエータグループ構成の近接設定に基づいてデータのローカルコピーにアクセスします。各ESXホストには、ローカルコピーへのアクティブな最適パスと、ミラーコピーへのアクティブな非最適パスがあります。</block>
  <block id="86bcf99dbc3944da56f06b48074d09f6" category="section-title">通常運用時</block>
  <block id="92b59c2bf70b9fdba2c059aee44eb044" category="paragraph">通常運用時には、HANAシステムはESXホストESX-1からのアクティブな最適パスに基づいてローカルコピーの読み取りと書き込みを行います。各バックアップ処理で、SnapCenterはレプリケーション関係の現在のプライマリサイトを検出し、プライマリサイトに対してバックアップ処理を実行します。Snapshotはミラーコピーにレプリケートされ、両方のサイトで使用できます。プライマリサイトでSnapCenterリストア処理を実行します。</block>
  <block id="48ff58405bb19fe5bfc8e9d56eed6a27" category="section-title">ストレージ障害</block>
  <block id="0b863d48b2762e9a065bb6609efb0e39" category="paragraph">サイト1のストレージシステムに障害が発生した場合、HANAシステムはサイト2のミラーコピーにアクセスして処理を続行します。プライマリサイトがセカンダリサイトに切り替わり、SnapCenterが新しいプライマリサイトでバックアップとリストアの処理を実行するようになります。</block>
  <block id="1163a74136e40a05bc320e61f567a4df" category="section-title">サイト障害</block>
  <block id="09e49506e92274d793e041a080d932ac" category="paragraph">サイト障害が発生した場合、HANA VMとSnapCenterおよびSnapCenter for VMwareプラグインVMは、vSphere HAを使用してセカンダリサイトのESXホストにフェイルオーバーします。HANAデータベースを起動し、セカンダリサイトのミラーコピーにアクセスする必要があります。プライマリサイトがセカンダリサイトに切り替わり、SnapCenterが新しいプライマリサイトでバックアップとリストアの処理を実行するようになります。</block>
  <block id="0a6e902e89c3df722cf20de93024e4c2" category="section-title">不均一なアクセス設定</block>
  <block id="0912a0ba8a9214fedc7c2bedb6ed636d" category="paragraph">統一されていないアクセス構成では、ファイバチャネルSANは両方のサイトに拡張されません。各サイトの各ESXホストは、データセットのローカルコピーにのみアクセスできます。</block>
  <block id="36830e760ac989938c2390fabd803283" category="paragraph">通常運用時、HANAシステムはローカルコピーとの間で読み取りと書き込みを行います。各バックアップ処理で、SnapCenterはレプリケーション関係の現在のプライマリサイトを検出し、プライマリサイトに対してバックアップ処理を実行します。Snapshotはミラーコピーにレプリケートされ、両方のサイトで使用できます。プライマリサイトでSnapCenterリストア処理を実行します。</block>
  <block id="9b73a2b8924460a1304567cee49f45b6" category="paragraph">ストレージに障害が発生した場合、HANA VMとSnapCenterおよびSnapCenter for VMwareプラグインVMは、vSphere HAを使用してセカンダリサイトのESXホストにフェイルオーバーします。HANAデータベースを起動し、セカンダリサイトのミラーコピーにアクセスする必要があります。プライマリサイトがセカンダリサイトに切り替わり、SnapCenterが新しいプライマリサイトでバックアップとリストアの処理を実行するようになります。</block>
  <block id="9ec38366f0f4b942de78f96e3cba6091" category="paragraph">ストレージ障害と同じ。</block>
  <block id="bf619fead7f757b3eab618cd1c3a0135" category="section-title">HANA VMまたはプライマリサイトの再配置</block>
  <block id="7f1a3b4bfc6d6488712d1783304ab09b" category="paragraph">HANA VMを他のESXホストに再配置し、ストレージのプライマリサイトを変更しないと、SnapCenterを使用したリストア処理は失敗します。SnapCenterはリストア処理を実行するためにプライマリサイトを使用するため、クローンは左側に作成され、HANA VMは右側で実行されます。サイト間にデータパスがないため、SnapCenterはデータをコピーしません。</block>
  <block id="489a7f9a78df7b4cf3e62a41e3245bc0" category="paragraph">この問題を回避するには、VMとプライマリ側の再配置を同時に実行するか、SnapCenterを使用したリストア処理の前にプライマリサイトをフェイルオーバーする必要があります。</block>
  <block id="b1e25e0a3cd6e9de63eb75f1fd3dd032" category="doc">SAP HANAの高可用性の概要</block>
  <block id="987809e37ad70a5df332e23a704d0bd7" category="paragraph">この章では、アプリケーションレイヤでのレプリケーションとストレージレプリケーションを比較した、SAP HANAの高可用性オプションの概要を説明します。</block>
  <block id="08eceef12e3967caaaf54cccf0ce111c" category="section-title">SAP HANAシステムレプリケーション（HSR）</block>
  <block id="74c978e5230861321ac16b0a627d3342" category="paragraph">SAP HANAシステムレプリケーションでは、データが同期的にレプリケートされ、メモリにプリロードされ、セカンダリホストで継続的に更新される処理モードが提供されます。このモードでは、RTO値は約1分以下と非常に低くなりますが、ソースシステムからのレプリケーションデータの受信にのみ使用される専用サーバも必要です。フェイルオーバー時間が短いため、SAP HANAシステムのレプリケーションは、HANAソフトウェアのアップグレードなど、ダウンタイムがほぼゼロのメンテナンス処理にもよく使用されます。通常、Linux Pacemakerクラスタソリューションは、フェイルオーバー処理の自動化に使用されます。</block>
  <block id="20ced194a2fd3c612748e5e51b3387c4" category="paragraph">プライマリサイト、ストレージ、ホスト、または完全なサイトで障害が発生した場合、HANAシステムはLinux Pacemakerクラスタで制御されているセカンダリサイトに自動的にフェイルオーバーします。</block>
  <block id="9e7336ba5e4ed2d09c7228c55e0ba47b" category="inline-link">SAP HANAシステムレプリケーション++|++ SAPヘルプポータル</block>
  <block id="7b34b1ed03b63bf2bd159a5a676652e8" category="paragraph">すべての設定オプションとレプリケーションシナリオの詳細については、を参照してください<block ref="17cc660648cb4616470c61fbc9c06824" category="inline-link-rx"></block>。</block>
  <block id="b5466376aeff587b72e99e54a02714fd" category="section-title">NetApp SnapMirrorアクティブ同期</block>
  <block id="b368e1e8268c5ee114e5ada04591b1a2" category="paragraph">SnapMirror Active Syncを使用すると、サイト全体に障害が発生してもビジネスサービスの運用を継続できるため、アプリケーションがセカンダリコピーを使用して透過的にフェイルオーバーできるようになります。SnapMirrorアクティブ同期でフェイルオーバーをトリガーするための手動操作やカスタムスクリプトは必要ありません。SnapMirrorアクティブ同期は、AFFクラスタ、オールフラッシュSANアレイ（ASA）クラスタ、およびCシリーズ（AFFまたはASA）でサポートされます。SnapMirrorアクティブ同期は、iSCSI LUNまたはFCP LUNを使用してアプリケーションを保護します。</block>
  <block id="120ac4512006f78bceb0b59765a5b470" category="paragraph">ONTAP 9.15.1以降では、SnapMirrorアクティブ同期で対称アクティブ/アクティブ機能がサポートされます。対称アクティブ/アクティブ：双方向同期レプリケーションにより、保護されたLUNの両方のコピーからの読み取りおよび書き込みI/O処理を有効にし、両方のLUNコピーがローカルでI/O処理を処理できるようにします。</block>
  <block id="ca3627c50535cf86d223e94a7157a787" category="paragraph">詳細については、を参照してください<block ref="90f942fd5a37ab4e29fced42177889a8" category="inline-link-rx"></block>。</block>
  <block id="e363c476652ac6172b97433ad80c2842" category="section-title">HANAベアメタル</block>
  <block id="77e01c1ae4414449514e53b334b3a5ee" category="paragraph">ベアメタルサーバでSAP HANAを実行している場合は、SnapMirrorアクティブ同期を使用して可用性の高いストレージソリューションを提供できます。データは同期的にレプリケートされるため、RPO=0になります。</block>
  <block id="371cc3ec4651f24f9520e71b61d120c3" category="paragraph">ストレージ障害が発生した場合、HANAシステムは2つ目のFCPパスを使用してセカンダリサイトのミラーコピーに透過的にアクセスし、RTO = 0を実現します。</block>
  <block id="902f4e9206ee07d7ed42ee4916c973a1" category="paragraph">ホストまたはサイト全体に障害が発生した場合は、障害が発生したホストのデータにアクセスするために、セカンダリサイトに新しいサーバを用意する必要があります。これは通常、本番システムと同じサイズのテストシステムまたはQAシステムで、シャットダウンして本番システムの実行に使用します。セカンダリサイトのLUNを新しいホストに接続したら、HANAデータベースを起動する必要があります。そのため、合計RTOは、ホストのプロビジョニングに必要な時間とHANAデータベースの起動時間に左右されます。</block>
  <block id="3ba147cc4fab7ba888332037f78a8985" category="section-title">vSphere Metro Storage Cluster（vMSC）</block>
  <block id="394ce32240e819d6d95dd2af28c53973" category="paragraph">FCPに接続されたデータストアを使用するVMware環境でSAP HANAを実行している場合は、SnapMirrorのアクティブ同期を使用してVMware Metroストレージクラスタを構築できます。このようなセットアップでは、HANAシステムで使用されるデータストアがセカンダリサイトに同期的にレプリケートされます。</block>
  <block id="9a140f89434439219a1b6faf5ba97e2b" category="paragraph">ストレージに障害が発生した場合、ESXホストはセカンダリサイトのミラーコピーに自動的にアクセスし、RTO = 0を実現します。</block>
  <block id="f91492c7d389cf5d440994259ad203e2" category="paragraph">ホストまたはサイト全体に障害が発生した場合は、vSphere HAを使用してセカンダリESXホストでHANA VMを起動します。HANA VMを実行したら、HANAデータベースを起動する必要があります。そのため、総RTOは主にHANAデータベースの起動時間に依存します。</block>
  <block id="86a805d84ce5e32e6ca13c56154a4a15" category="section-title">ソリューションの比較</block>
  <block id="9b5696f15b1d5f7a47f618da3b7853e9" category="paragraph">次の表は、上記のソリューションの主な特徴をまとめたものです。</block>
  <block id="dc6074de0b3772ead0e64c076f8d2259" category="cell">SnapMirrorアクティブ同期–ベアメタル</block>
  <block id="0a5b3c6f53c4a5accd866a909b4d52fd" category="cell">SnapMirrorアクティブ同期–VMware vMSC</block>
  <block id="27897ffb9e4044ade7a4bc86ad509a6c" category="cell">障害発生時のRPO</block>
  <block id="d67cedb462ee91d060fd85274a5e7494" category="cell">RPO = 0 +同期レプリケーション</block>
  <block id="009368507a7a4c26b10de28891aa0dd4" category="cell">ストレージ障害時のRTO</block>
  <block id="7763ad19cdccf617d43e749a80bfc602" category="cell">RTO ++&lt;++1分</block>
  <block id="dc181842fcb13b2256a35d267096561d" category="cell">RTO = 0 +透過的なストレージフェイルオーバー</block>
  <block id="6ea829e5a5696c9681eeef3604b2bd76" category="cell">サイトまたはホストの障害が発生した場合のRTO +</block>
  <block id="902a9f83cb07726e2582e114a6b7abbe" category="cell">RTO：サーバの準備とHANAデータベースの起動に必要な時間によって異なります。</block>
  <block id="0dbc0fdf45131a87daee08d81ebf33e1" category="cell">RTO：HANAデータベースの起動に必要な時間によって異なります。</block>
  <block id="284fc674eaa83c3b11ce1e98d5a052d3" category="cell">フェイルオーバーの自動化</block>
  <block id="6fb294e3702956a16cc26ebc2f652861" category="paragraph">はい、</block>
  <block id="dd2116922c73d7f2168d2fc912702614" category="paragraph">セカンダリHSRホストへの自動フェイルオーバー</block>
  <block id="7f575b7087101c4d9cc428f57e5dd059" category="paragraph">Pacemakerクラスタによって制御されます。</block>
  <block id="06c3156d8fb5cf2d45d241378819a628" category="paragraph">○（ストレージ障害の場合）</block>
  <block id="990f3e8714b8c5011ab8a20df2d7ea91" category="paragraph">いいえ（ホストまたはサイトの障害）</block>
  <block id="6a1e3724a3082939243ab3f91a946da8" category="paragraph">（ホストのプロビジョニング、ストレージリソースの接続、HANAデータベースの起動）</block>
  <block id="91704d15c2f156721d2e44204c22af5f" category="paragraph">○（ホストまたはサイトの障害時）</block>
  <block id="d359c0689ae33e3e1dfb405310903f04" category="paragraph">（他のサイトへのVMのフェイルオーバーは、vSphere HAとHANAデータベースの起動によって自動化されます）</block>
  <block id="c6b937a7b4e92d57fb3a35462485bdaa" category="cell">セカンダリサイトに専用サーバが必要</block>
  <block id="c47e796859dbedadcae3ab34dfa80d5a" category="paragraph">データをメモリにプリロードし、データベースの起動なしで高速フェイルオーバーを実現するために必要です。</block>
  <block id="dadf8968c911f87cc532e4805e90f855" category="paragraph">いいえ、</block>
  <block id="ad10577dd6419029ccf490373173660d" category="paragraph">サーバは、フェールオーバーの場合にのみ必要です。通常、QAに使用されるサーバは本番環境に使用されます。</block>
  <block id="fcfd78cf2bc94c041ed6fe1e45b63b84" category="paragraph">ESXホストのリソースは、フェイルオーバーの場合にのみ必要です。通常、QAリソースは本番環境に使用されます。</block>
  <block id="22cb9440d63d06a4ae448103a8862dd9" category="doc">HANAシステムのプロビジョニングとインストール</block>
  <block id="82fb8604ddd023efcdc1007567ae6eef" category="paragraph">次の図は、HANAシステムのストレージとデータストアの構成を示しています。HANAシステムのファイルシステムごとに専用のボリューム、LUN、データストアを設定する必要があります。複数のHANAシステム間やその他のワークロード間でデータストアを共有しないでください。</block>
  <block id="c3f1f40cd03b3f9d165d7c485614a8dd" category="paragraph">HANAシステムの3つのLUN（hana++_+data++_+SMA、hana+++_+LOG +++_+SAMおよびhana++_+shared++++_++SMA）と、OSイメージ用のLUNとSnapCenterコンポーネント用のLUNがすべてA700ストレージクラスタでプロビジョニングされている。</block>
  <block id="6abb836197119043e7e3a204cb912a67" category="admonition">HANAシステムのボリュームは、すべて同じSVM内にプロビジョニングする必要があります。後述するSnapMirrorアクティブ同期構成では、3つのHANAボリュームすべてにわたって整合グループを作成します。そのためには、ボリュームが同じSVM内にある必要があります。インフラボリュームは別の整合グループに配置されるため、別のSVMに配置することもできます。</block>
  <block id="6f858092d3c8c8c59ec9e6092fe629b6" category="paragraph">イニシエータグループを設定し、このラボ環境のA700ストレージシステムのすぐ近くにあるESX-1ホストに上記のLUNをマッピングする必要があります。</block>
  <block id="d4764807004a9c2e57acdb1113dadddb" category="section-title">データストアのプロビジョニング</block>
  <block id="fe52842ccaad661581071086ded46232" category="paragraph">以前にプロビジョニングした3つのLUNを使用して、HANAシステム用に3つのデータストアを作成しました。また、インフラLUNを使用してインフラデータストアを作成しました。</block>
  <block id="edbd77647e9fe471212a09f06fcef5be" category="section-title">VMのプロビジョニングとOSのインストール</block>
  <block id="5a6fb9ce0c23d1ac64afe3983e1668f0" category="paragraph">ラボのセットアップでは、新しいVMを導入し、Linux OS用のVMDKをインフラデータストアに配置しました。</block>
  <block id="a42168c386dcef152a0e7c885d464760" category="section-title">VMディスク構成</block>
  <block id="67e533b552471df92b12c97ce87b3cd5" category="paragraph">HANA VMに3本の新しいディスクが追加されました。各ディスクは、HANAシステム用に作成されたいずれかのデータストア内にあります。</block>
  <block id="e3ab7c7e24f43d25f78e863f781e03de" category="section-title">VMパラメータの設定</block>
  <block id="0bd6ffb9e904b280022c803fc521ca0a" category="paragraph">パラメータdisk.EnableUUIDを追加し、trueに設定する必要があります。SnapCenterではパラメータは必須です。設定しないと、SnapCenterの[Discover virtual resource]処理が失敗します。</block>
  <block id="890d55a7561d8f4fdc612a5495be0cda" category="paragraph">パラメータを追加する前に、VMを停止する必要があります。</block>
  <block id="e9033ec94d923384ee4a9d664fa0d7ef" category="paragraph">この機能は、以下のコマンドで確認できます。</block>
  <block id="fbd86477dc5ddc7e08bef7e21d85dd74" category="section-title">Linuxホストテノフアイルシステムノシユンヒ</block>
  <block id="f9a1aed2a171ffa40e1f0bfdfceab787" category="section-title">新しいディスクでのxfsファイルシステムの作成</block>
  <block id="01f87746bc9a85efb16048c2bfed76b9" category="paragraph">新しいディスクのデバイス名は、以下のコマンドで確認できます。</block>
  <block id="cd6174e52b01f5084087e5097afa84b5" category="paragraph">3つの新しいディスクそれぞれにxfsファイルシステムが作成されている。</block>
  <block id="5e21ca9a47d763f1547a6e8da87b48aa" category="section-title">マウントポイントの作成</block>
  <block id="364d059aeff423f2a53df3b500a50ee4" category="section-title">/etc/fstabの設定</block>
  <block id="a07e777a6c16b677430f0a4f8d2eb265" category="section-title">HANAのインストール</block>
  <block id="ed64580d8bc363a7c8503100764a1e22" category="paragraph">これで、HANAのインストールを実行できます。</block>
  <block id="bdcdc8dec084298d3d7b407e5e24db1b" category="admonition">ここで説明した設定では、OS VMDK上に/usr/sap/smaディレクトリが作成されます。/usr/sap/smaを共有VMDKに格納する必要がある場合は、HANA共有ディスクをパーティショニングして、/usr/sap/smaに別のファイルシステムを提供できます。</block>
  <block id="0f3fb56539f10acb82eb70a4ab370556" category="section-title">SnapCenterのユーザストアキー</block>
  <block id="7de31858198e16e10678a5b4f1d04243" category="paragraph">システムデータベースユーザのユーザストアを作成し、SnapCenterで使用する必要があります。通信ポートに応じてHANAインスタンス番号を設定する必要があります。セットアップでは、インスタンス番号「00」が使用されます。</block>
  <block id="b13ad7abcf30db767678239fb1e3a606" category="paragraph">接続は、以下のコマンドで確認できます。</block>
  <block id="ef6002cb57423b3807e1a4481d6b4b90" category="paragraph">バックアップ処理のたびに、SnapCenterはVMware側での検出とプライマリサイトの検出を実行します。ストレージフェイルオーバーが発生した場合、SnapCenterはリソースのバックアップが実行されるとすぐに新しいプライマリサイトを検出します。</block>
  <block id="04a44e5a8097fa18ecddaa90763d6135" category="section-title">[Topology]ビュー</block>
  <block id="05db403414edc672fd35cc5a3f1975ec" category="paragraph">トポロジビュー内のSnapCenterには、ソースとデスティネーションの両方のストレージクラスタのバックアップが表示されます。</block>
  <block id="c4e92cfd61ef8f4f63779913c6e9f675" category="paragraph">セカンダリストレージの数をクリックすると、現在の関係とレプリケーションの方向が表示されます。ソースは常に現在のプライマリサイトです。ストレージフェイルオーバーが発生すると、プライマリサイトが変化し、それに応じて表示が変更されます。どのストレージシステムが現在プライマリサイトであるかに応じて、すべてのバックアップの関係は常に同じです。</block>
  <block id="49e456be1e3c0ed447947f11c58565ce" category="section-title">ストレージシステムにSnapshotを作成</block>
  <block id="5819d1ff9bd305eabaf945b6544c23ef" category="paragraph">SnapCenterで作成されたSnapshotバックアップは、両方のストレージシステムの両方のHANAデータボリュームで使用できます。ONTAPでは、整合グループレベルで追加のSnapshotが作成され、他のすべてのHANAボリュームでも使用できます。</block>
  <block id="f7838da54113152cd818d6baa44190f5" category="paragraph">次の図は、A700クラスタのHANAデータボリュームのSnapshotを示しています。</block>
  <block id="b0e04e841e6578b57fe061057d48d4e4" category="paragraph">次の図は、A800クラスタのHANAデータボリュームのSnapshotを示しています。</block>
  <block id="150e7e66bd7d0560b632e6db10807aa0" category="paragraph">本ドキュメントの冒頭で説明したように、VMwareとVMFSおよびSnapMirrorのアクティブ同期を使用するHANA環境のベストプラクティスを紹介することを目的としています。ここでは、この特定のソリューションに関連する詳細と重要な手順についてのみ説明します。SnapCenterの一般的な概念については説明しません。SnapCenterに関するこれらの概念およびその他の追加情報については、次のサイトを参照してください。</block>
  <block id="e11da9afe91d381489a365c86cc614ab" category="section-title">前提条件</block>
  <block id="1a1399efb6ec09d6f1bcbf7e237aca09" category="paragraph">一般に、保護されたリソースをSnapCenterに追加する前に、SnapMirrorアクティブ同期を設定する必要があります。SnapMirror Active Syncのセットアップ前に作成されたバックアップは、元のプライマリストレージにのみ存在し、その後はレプリケートされません。</block>
  <block id="4f16119d47772a6a75fba710b3edec5b" category="section-title">SnapCenter HANAリソースを自動検出する必要があります</block>
  <block id="8adbe6d9d7496fa5a303471e887c8889" category="paragraph">VMware VMFSで構成されているリソース、またはSnapMirror Active Syncで保護されているリソースは、SnapCenterによって自動検出され、これらの構成に必要な特定の処理を実行できるようにする必要があります。</block>
  <block id="b16aa39a4f385ea2fba7969bf806fa8d" category="paragraph">HANAの非データボリュームは、SnapCenterでは常に手動で設定されたリソースであるため、SnapCenterでは即座にサポートされません。データボリューム以外のボリュームのオプションと回避策については、このドキュメントの後半で説明します。</block>
  <block id="6ad909fad35f1c46ac8d0a52be8a3d72" category="paragraph">SAP HANAマルチホストシステムは、中央のHANAプラグインを使用して設定する必要があるため、デフォルトでリソースを手動で設定します。VMware VMFSまたはSnapMirrorのアクティブ同期を使用している場合、このようなHANAシステムはSnapCenterでサポートされません。</block>
  <block id="f3b371d385ca5da7a8a691a87cd0550e" category="section-title">SnapCenter for VMware vSphereプラグイン</block>
  <block id="369f86eddeb3128a82721885894de95d" category="paragraph">SnapCenter for VMware vSphereプラグインをVMware環境に導入する必要があります。</block>
  <block id="f8840e34a497d5c17cb94149c2d5a54d" category="section-title">ボリュームをホストしているSVMの管理IPアドレス</block>
  <block id="163c4a344b405e61b7739029378e12d0" category="paragraph">クラスタをSnapCenterに追加する場合でも、ソースボリュームとデスティネーションボリュームをホストするSVMに管理IPアドレスを設定する必要があります。</block>
  <block id="c41142e8389e6d50aa7ca70768ab6dad" category="section-title">ストレージ通信用のREST API</block>
  <block id="feb49cee6d9d3ee76b226fb03b3d79d6" category="paragraph">SnapMirrorのアクティブな同期の管理と監視には、REST APIアクセスが必要です。そのため、ストレージ通信にREST APIを使用するようにSnapCenterを設定する必要があります。構成ファイル+C：++\\+Program NetApp +\\+SMCore++\\+SMCoreServiceHost.dll.configのパラメータ「IsRestEnabledForStorageConnection」をtrueに設定する必要があります。</block>
  <block id="1ebc543a4f05ada62a5956f69c8cc3d6" category="paragraph">パラメータを変更したら、SnapCenter SMCoreサービスを再起動する必要があります。</block>
  <block id="787d250b4622b9b1f34f52b01f5768aa" category="section-title">ストレージシステムを追加する</block>
  <block id="3112d21712c36ecc48176c64678e718e" category="paragraph">SnapCenterでREST APIを有効にしたあとにストレージシステムを追加できます。個 々 のSVMではなく、両方のストレージクラスタを追加する必要があります。</block>
  <block id="b46b76cab7f6f6afb52ebc4c10768224" category="section-title">ホストの追加–SnapCenter for VMware vSphereプラグイン</block>
  <block id="c35f3eb2b8da88a46acb4aa82928ce31" category="paragraph">SnapCenterのリソースが仮想化されたVMware環境で実行されている場合、SnapCenterはSnapCenter Plugin for VMware vSphereを利用して、SnapCenterのバックアップ、リストア、クローニングのワークフローを拡張し、VMwareレイヤで必要な手順を実行します。</block>
  <block id="cbb0594c4acc29f0e3fcb2963999fe73" category="paragraph">ホストをSnapCenterに追加する前に、VMware vSphere用SnapCenterプラグインをVMware環境に導入する必要があります。</block>
  <block id="8cc3230c5a466c86bb7d8f7af94952a5" category="admonition">クレデンシャルはホスト追加ワークフローで設定する必要があります。ホストタイプとしてvSphereを選択できます。</block>
  <block id="5ff52055959ad44e98f86e109ac72ca5" category="admonition">SnapCenter for vSphereプラグイン自体で追加の設定は必要ありません。</block>
  <block id="c426bd2997293154277f7c4e50310c96" category="section-title">ホストを追加–HANAシステム</block>
  <block id="b21232e9394cd4fb5e214660bb77db10" category="admonition">具体的な要件はありません。プラグインの導入と自動検出は通常どおり実行されます。</block>
  <block id="d1cdcf983bdd554e375ccec8432ef82e" category="paragraph">自動検出プロセスにより、SnapCenterは、HANAリソースがVMFS/VMDKで仮想化された状態で実行されていることを検出します。また、SnapCenterはSnapMirrorのアクティブな同期設定を検出し、現在のプライマリサイトを特定します。</block>
  <block id="95da28886abec665f2782fd7547431eb" category="paragraph">リソースの自動検出後、リソースビューのストレージフットプリントセクションに現在のプライマリサイトが表示されます。どのストレージシステムがマスターであるかは、SnapCenterで使用されるONTAPコマンドの出力に基づいて検出されます。</block>
  <block id="05bc6c382ea061de5b4f6fea203aa45a" category="paragraph">SnapMirrorアクティブ同期で保護されているリソースに使用されるポリシーは、SnapMirrorレプリケーションを使用して設定する必要があります。ただし、SnapCenterではSnapMirror更新処理がトリガーされません。</block>
  <block id="daf49724608610d815cd0eb3781425af" category="section-title">HANAリソース保護構成</block>
  <block id="43b663b9d6082168b84bee7d40564e67" category="paragraph">具体的な要件はありません。リソース保護の設定は通常どおり行われます。</block>
  <block id="7a0344025c16d96cd8df0619b2218fce" category="doc">SnapCenterデータボリューム以外のボリューム</block>
  <block id="9132feb6160cedf47a36155f2f3ad5ff" category="paragraph">リソースがSnapCenterで手動で設定され、自動検出されない場合、SnapCenterはVMwareとSnapMirrorのアクティブな同期を認識しません。そのため、SnapCenterではネイティブにサポートされていません。</block>
  <block id="5de17fd2a6b98e5056ac1e5633611b30" category="paragraph">HANA共有のようなデータボリューム以外のボリュームでは、追加の手動手順を検討する場合でも、SnapCenterを使用してバックアップとリストアの処理を実行できます。</block>
  <block id="61ebc8147fe58d3b86dae6344e91b60e" category="section-title">SnapCenterで設定されたストレージシステムの障害</block>
  <block id="c346d6fc87098f9a21d3525ee76139b3" category="paragraph">SnapCenterで設定されたストレージ・システムに障害が発生しても、SnapCenterは自動的にもう一方のストレージ・システムに切り替わりません。ボリュームのミラーコピーをバックアップおよびリストア処理に使用するには、データボリューム以外のリソースを手動で調整する必要があります。</block>
  <block id="4395ad4a2825b1a9b23561463c8deff8" category="paragraph">SnapCenterはHANA共有ボリュームのSnapMirrorアクティブ同期設定を認識しませんが、Snapshotは両方のサイトにレプリケートされます。</block>
  <block id="184c7acf475738503d79cb9ce937a858" category="paragraph">リストアの場合、SnapCenterでは、VMware固有の手順を実行せずにボリュームのリストアが実行されます。通常は、LinuxホストでHANA共有ボリュームをアンマウントし、データストアを切断してからボリュームのリストアを実行し、データストアを再度接続してから、Linuxホストでファイルシステムをマウントする必要があります。手動操作では、HANA VMを停止し、SnapCenterでHANA共有ボリュームをリストアしてから、VMを再起動できます。</block>
  <block id="093062b6c8b9821496cd9be5e55a9acc" category="doc">SnapCenterノリストアトリカハリ</block>
  <block id="a2966cfcc80f04bdf1206e8297c175cd" category="paragraph">仮想リソースがVMFS/VMDKに格納されている場合、SnapCenterのリストア処理は、常にクローン、マウント、コピーの各処理によって実行されます。</block>
  <block id="98eff08afbe785093d01ce969a164a0d" category="list-text">SnapCenterは、選択したSnapshotを基にボリュームクローンを作成します。</block>
  <block id="87dd4fb19c3e2e97b8cc1aa03edb4e4e" category="list-text">SnapCenterは、クローンボリューム内のLUNを新しいデータストアとしてESXホストにマウントします。</block>
  <block id="55bbc9eff8d3848a5cbab7456469a3b2" category="list-text">SnapCenterは、データストア内のVMDKを新しいディスクとしてHANA VMに追加</block>
  <block id="caeb5b140d6bab5426d94c1606851042" category="list-text">SnapCenterが新しいディスクをLinux OSにマウント</block>
  <block id="da49051afcb3436b0342559c9148ab9c" category="list-text">SnapCenterは、新しいディスクから元の場所にデータをコピーします。</block>
  <block id="eb8196a21b8b5e09eed40015d4a94457" category="list-text">コピー操作が終了すると、上記のリソースはすべて再度削除されます。</block>
  <block id="4aeeccb722fe371e69d0a28c56314dda" category="list-text">HANAのリカバリは通常どおり実行</block>
  <block id="778611a24fc532e45b1c02dd89308306" category="paragraph">したがって、リストア処理の全体的な実行時間は、データベースのサイズと、ストレージクラスタとESXホスト間のFC接続のスループットに左右されます。</block>
  <block id="e94b0328ba32f80357a5f27967929904" category="paragraph">また、リソースにSnapMirrorアクティブ同期が設定されている場合、SnapCenterリストア処理は現在のプライマリサイトでのみ選択できます。</block>
  <block id="d598a9665b7df364f57687a1e235a0b1" category="paragraph">リストアとリカバリ処理の実行中に、現在のプライマリサイトに作成された新しいクローンボリュームが表示されます。</block>
  <block id="abd74d957000391d94ad15a09a0818bd" category="paragraph">HANA Linuxホストでは、ホストにマウントされた新しいディスクが表示されます。リストア処理が完了すると、SnapCenterによってデータストアとボリュームが再び削除されます。</block>
  <block id="c2cb902b1e10d6b860fdcf4e986baf3b" category="doc">SAPシステムの更新処理</block>
  <block id="9b1c81d3df7f6bed2a839959b4477971" category="paragraph">クローニング処理は、プライマリサイトまたはセカンダリストレージで実行できます。</block>
  <block id="a020ae3097508c9c92639348111abaae" category="paragraph">クローンボリュームはHANA整合性グループには含まれず、SnapMirrorのアクティブな同期ではレプリケートされません。</block>
  <block id="956128d9b9faae13b3100c9e174d475d" category="doc">SnapCenter、SnapMirror Active Sync、VMware Metro Storage ClusterによるSAP HANAのデータ保護と高可用性</block>
  <block id="4a83948efff6fc2ff209b47d361b2ba8" category="paragraph">このドキュメントでは、HANAストレージリソースの高可用性ソリューションとしてのSnapMirror Active Syncと組み合わせて、VMware環境でSnapCenterを使用したデータ保護のベストプラクティスを紹介します。</block>
  <block id="63d06e5f1c9dbc6680e4643fd422c092" category="paragraph">このドキュメントは、環境全体のセットアップ方法を段階的に説明することを目的としたものではありませんが、以下に関連する概念と関連する詳細について説明します。</block>
  <block id="8949e3ca351483f6af273cac76bb01df" category="list-text">VMware VMFSを使用したSAP HANAシステムのセットアップ</block>
  <block id="972b18efcd39876d95d7b83050a71880" category="list-text">SAP HANA向けのSnapMirrorアクティブ同期構成</block>
  <block id="01a0a94ba05bcf19aa61e14480717d02" category="list-text">VMFSを使用したVMware上のHANA向けのSnapCenter構成</block>
  <block id="cb79b071d2a08f1ee0cb1f1849ef0748" category="list-text">SnapMirrorアクティブ同期のためのSnapCenter設定</block>
  <block id="7b018d7eff3dddf3b625b56e1ae5723e" category="list-text">VMware上のHANAでのSnapCenterの運用とSnapMirrorのアクティブな同期</block>
  <block id="2c0b72f10b5b508ac2650ddce956a926" category="paragraph">ここでは、次の図に示すように、SnapMirrorアクティブ同期の統一されたアクセス設定を使用するVMware Metro Storage Cluster（vMSC）構成に焦点を当てますが、ベアメタルおよび不統一のアクセス設定についても簡単に説明します。</block>
  <block id="d7583eff84af6f74a44a9ca5b5afc2fd" category="doc">SnapMirrorのアクティブな同期設定</block>
  <block id="f593c2db6d8f1128bf7bffe9f0f5580e" category="paragraph">ストレージクラスタと関連するSVMのピア関係が確立されている必要があります。</block>
  <block id="7b429c86f8caabbaec0c4187faeadf63" category="paragraph">両方のストレージクラスタでONTAPメディエーターが使用可能で設定されている必要があります。</block>
  <block id="e7928a4a03ebe9a5e393d034b995de4b" category="section-title">ストレージレイアウトと整合グループの設定</block>
  <block id="6b27256a76151ab9083e0dc68667e62c" category="paragraph">ONTAPのドキュメントでは<block ref="aea06cb1202b4252a4dc47ff101356e1" category="inline-link-rx"></block>、SnapMirrorアクティブ同期を使用する整合グループの概念を次のように説明しています。</block>
  <block id="8baeb3ed17a72a05bb00b270d3defc83" category="paragraph">整合グループはFlexVolボリュームの集まりで、ビジネス継続性のために保護する必要があるアプリケーションワークロードの整合性を保証します。</block>
  <block id="dab303185fbc9318833ee627f5c8c590" category="paragraph">整合性グループの目的は、複数のボリュームのSnapshotイメージを同時に作成して、ある時点における一連のボリュームのcrash-consistentコピーを作成することです。整合グループを使用すると、データセットのすべてのボリュームが休止され、正確に同じポイントインタイムにスナップされます。これにより、データセットをサポートするボリューム間でデータ整合性のあるリストアポイントが提供されます。これにより、整合グループは従属書き込み順序の整合性を維持します。ビジネス継続性のためにアプリケーションを保護する場合は、ソースとデスティネーションの整合グループの間にデータ保護関係を確立できるように、このアプリケーションに対応するボリュームグループを整合グループに追加する必要があります。ソース整合性とデスティネーション整合性には、同じ数とタイプのボリュームが含まれている必要があります。</block>
  <block id="d6680c06d2f114bd8fd0e1a1098c0529" category="paragraph">HANAシステムのレプリケーションでは、整合性グループに、個 々 のHANAシステムで使用されるすべてのボリューム（データ、ログ、共有）が含まれている必要があります。整合グループに含めるボリュームは、同じSVMに格納する必要があります。オペレーティングシステムイメージは、独自の整合グループを持つ別のボリュームに格納できます。次の図は、2つのHANAシステムを使用した構成例を示しています。</block>
  <block id="dce719a9aac895b223304c1967dcde5c" category="section-title">イニシエータグループの構成</block>
  <block id="b55a0f5977724be33def42dfcc7d795f" category="paragraph">このラボのセットアップでは、SnapMirrorのアクティブな同期レプリケーションに使用する両方のストレージSVMを含むイニシエータグループを作成しました。後述するSnapMirrorのアクティブな同期設定では、イニシエータグループをレプリケーションの一部として定義します。</block>
  <block id="d153ab00a9fc79e0afc040330080db50" category="paragraph">このプロキシミティ設定を使用して、どのESXホストがどのストレージクラスタに近いかを定義しました。この例では、A700はESX-1に近く、A800はESX-2に近くなっています。</block>
  <block id="42b0c96fbf8b9fed561a31ee0cb9388f" category="admonition">統一されていないアクセス設定では、プライマリストレージクラスタ（A700）のイニシエータグループにESX-1ホストのイニシエータのみを含める必要があります。これは、ESX-2へのSAN接続がないためです。また、2つ目のストレージクラスタ（A800）に、ESX-2ホストのイニシエータのみを含む別のイニシエータグループを設定する必要があります。プロキシミティ構成とイニシエータグループのレプリケーションは必要ありません。</block>
  <block id="fd262c56f1ba70fe1aa70d1a3c3d8afd" category="section-title">ONTAP System Managerを使用した保護の設定</block>
  <block id="409d8f4e43dfcf06670ff533559e8ca6" category="section-title">整合グループとイニシエータグループのレプリケーション</block>
  <block id="642a6ec5ac1c3d086a24286f621914c3" category="paragraph">新しい整合グループを作成し、HANAシステムの3つのLUNをすべて整合グループに追加する必要があります。</block>
  <block id="1928ce6903f987c46c44a15bac630260" category="paragraph">[イニシエータグループのレプリケート]が有効になりました。その後、イミテータグループは、変更が行われた場所で独立して同期されたままになります。</block>
  <block id="2bfcebfaa972add5e7bffefdb11ffd67" category="admonition">異なるアクセス設定では、別のイニシエータグループを2つ目のストレージクラスタに設定する必要があるため、イニシエータグループをレプリケートしないでください。</block>
  <block id="e5d385b6e94519336cb178d80995ad5a" category="paragraph">近接設定をクリックすると、イニシエータグループのセットアップで実行された設定を確認できます。</block>
  <block id="6a89dc487882b1a714475c4cd768dffe" category="paragraph">デスティネーションストレージクラスタを設定し、「関係の初期化」を有効にする必要があります。</block>
  <block id="7338ec41a2eba15da2de14082c9d6c96" category="section-title">同期</block>
  <block id="57703da2b711e4517a8228d88144ec56" category="paragraph">A700ストレージクラスタ（ソース）に新しい関係が表示されます。</block>
  <block id="417cc32b404ca22e52687ab1ca77d265" category="paragraph">A800ストレージクラスタ（デスティネーション）で、新しい関係とレプリケーションのステータスが表示されます。</block>
  <block id="cdfec31f4e0bb93abda71e2ebb065125" category="section-title">Infrastructureデータストア</block>
  <block id="a3501ac57e175c684d21dc319eb358b9" category="paragraph">HANAシステム、SnapCenter、vSphereプラグインのOSイメージが格納されるデータストアは、HANAデータベースデータストアの場合と同じ方法でレプリケートされます。</block>
  <block id="c7412e6f20979f19bfc91ee363a8559f" category="section-title">プライマリサイト</block>
  <block id="2fb52e630dac927698fdcc612a54fca1" category="paragraph">SnapMirrorのアクティブな同期の動作は対称ですが、重要な例外が1つあります（プライマリサイトの設定）。</block>
  <block id="09dc3c4ee13414b279f947b7358d2155" category="paragraph">SnapMirrorアクティブ同期では、一方のサイトが「ソース」で、もう一方が「デスティネーション」と見なされます。これは一方向のレプリケーション関係を意味しますが、IO動作には適用されません。レプリケーションは双方向であり、対称であり、IO応答時間はミラーの両側で同じです。</block>
  <block id="2c39175ecb307b16c8de8a41647fb350" category="paragraph">レプリケーションリンクが失われた場合、ソースコピー上のLUNパスは引き続きデータを提供しますが、デスティネーションコピー上のLUNパスは、レプリケーションが再確立されてSnapMirrorが同期状態に戻るまで使用できなくなります。その後、パスでデータの提供が再開されます。</block>
  <block id="88ccc2de61e6ab40dc9696595403d671" category="paragraph">1つのクラスタをソースとして指定すると、レプリケーションリンクが失われた場合に、どのクラスタが読み取り/書き込みストレージシステムとして残っているかが制御されます。</block>
  <block id="d0a5fb67845de44dc08ab4ba0fd5ddfe" category="paragraph">プライマリサイトはSnapCenterによって検出され、バックアップ、リストア、クローニングの各処理に使用されます。</block>
  <block id="58bdb7c81650e9b1e6991cf0a8697ad0" category="admonition">ソースとデスティネーションはSVMまたはストレージクラスタに関連付けられていませんが、レプリケーション関係ごとに異なる場合があることに注意してください。</block>
  <block id="f1ba28b4c958ea815882c3f5ff27adbe" category="paragraph">QoSを使用すると、共有コントローラ上の特定のSAP HANAシステムまたはSAP以外のアプリケーションのストレージスループットを制限できます。</block>
  <block id="e79e5867f76c82c725b17c2a238d1a04" category="section-title">本番環境と開発/テスト</block>
  <block id="14d1ab0e9152cc07d91da931d21d1efc" category="paragraph">1つのユースケースは、開発システムとテストシステムのスループットを制限して、混在環境で本番システムに影響を与えないようにすることです。サイジングプロセスでは、非本番システムのパフォーマンス要件を決定する必要があります。開発 / テスト用のシステムは、通常、 SAP で定義されている本番用システム KPI の 20~50% の範囲で、パフォーマンス値を低くしてサイジングすることができます。ストレージシステムのパフォーマンスに最も大きな影響を与えるのは、大きな書き込みI/Oです。そのため、QoSスループットの上限を、データボリュームとログボリュームの対応する書き込みSAP HANAストレージパフォーマンスKPI値の割合に設定する必要があります。</block>
  <block id="fa82b7d1d3929ac3284e96228b5b5293" category="section-title">共有環境</block>
  <block id="3f8bdc2c229f5f61cf4dbe32d9824fdf" category="paragraph">もう1つのユースケースは、負荷の高い書き込みワークロードのスループットを制限することです。特に、レイテンシの影響を受けやすい他の書き込みワークロードにこれらのワークロードが影響しないようにするためです。このような環境では、非共有のスループットの上限QoSグループポリシーを各Storage Virtual Machine（SVM）内の各LUNに適用して、個 々 のストレージオブジェクトの最大スループットを指定した値に制限することを推奨します。これにより、1つのワークロードが他のワークロードに悪影響を及ぼす可能性が低くなります。</block>
  <block id="2d8c78443540c2f552c7dc84ed09567d" category="paragraph">そのためには、SVMごとにONTAPクラスタのCLIを使用してグループポリシーを作成する必要があります。</block>
  <block id="55a97a03f64e996d2644eceb8eb6280b" category="paragraph">SVM内の各LUNに適用されます。次の例では、SVM内の既存のすべてのLUNにポリシーグループを適用します。</block>
  <block id="9dd8c51508454aadf24832dfd8927250" category="paragraph">この作業はSVMごとに行う必要があります。QoSポリシンググループの名前は、SVMごとに異なる名前にする必要があります。新しいLUNの場合は、ポリシーを直接適用できます。</block>
  <block id="1b1a359afcdc7d3b5156dabdbc04c722" category="inline-link">ホスト セットアップ</block>
  <block id="00baa41e1729865cdcf0dd167c42a103" category="admonition">この制限は読み取りにも適用されます。そのため、SAP HANAデータベースの起動時間やバックアップに必要なSLAを満たす十分な数のLUNを使用します。</block>
  <block id="d4c72fc22f26abba0093768f03edb4a0" category="paragraph">この記事では、このソリューションに関連するその他のリソースへのリンクを示します。</block>
  <block id="074369535c2b72e415b46037c769db31" category="inline-image-macro">説明している内容を示す図</block>
  <block id="82939b4c20827ef8747827e5d9e73f44" category="paragraph"><block ref="82939b4c20827ef8747827e5d9e73f44" category="inline-image-macro-rx" type="image"></block></block>
  <block id="91f7a01523f97830123056b150d665c4" category="paragraph">この記事では、このソリューションのフェイルオーバーシナリオについて説明します。</block>
  <block id="90da339b4089a6653efbaaac861d4b16" category="paragraph"><block ref="90da339b4089a6653efbaaac861d4b16" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1940a7999691c2410b94d4a2c3ec01e5" category="paragraph"><block ref="1940a7999691c2410b94d4a2c3ec01e5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d0ee48b0b850f85c619bd15386d1dac" category="paragraph"><block ref="7d0ee48b0b850f85c619bd15386d1dac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aa1af12002be2532bd3b767417dd8030" category="paragraph"><block ref="aa1af12002be2532bd3b767417dd8030" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97d983073e5d3c316d684cc4c1e82035" category="paragraph"><block ref="97d983073e5d3c316d684cc4c1e82035" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c8d50d8d805356645584b035011a2e48" category="paragraph"><block ref="c8d50d8d805356645584b035011a2e48" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ed7510c413f504ae29a400d3769bd83" category="paragraph"><block ref="7ed7510c413f504ae29a400d3769bd83" category="inline-image-macro-rx" type="image"></block></block>
  <block id="976be4c90fb708bbdd1a6c1853c99fd6" category="paragraph"><block ref="976be4c90fb708bbdd1a6c1853c99fd6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8f9368382f985cc62e3b6b3a28d8a96a" category="paragraph"><block ref="8f9368382f985cc62e3b6b3a28d8a96a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d8aa5de0cd8b0f7dbb5a1cd13239baaf" category="paragraph"><block ref="d8aa5de0cd8b0f7dbb5a1cd13239baaf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a961e013d2aa7f45ca23374245c1ed08" category="paragraph"><block ref="a961e013d2aa7f45ca23374245c1ed08" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c1749a7c61c505cfc49a68d5c5bf790" category="paragraph"><block ref="5c1749a7c61c505cfc49a68d5c5bf790" category="inline-image-macro-rx" type="image"></block></block>
  <block id="21e44e9a239c5844d21a67ee6908c214" category="paragraph"><block ref="21e44e9a239c5844d21a67ee6908c214" category="inline-image-macro-rx" type="image"></block></block>
  <block id="789a95adfd8d8c28411f006dd97a23c4" category="paragraph"><block ref="789a95adfd8d8c28411f006dd97a23c4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="149f266972276846c1d5601e581af6ec" category="paragraph"><block ref="149f266972276846c1d5601e581af6ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76208d94f7ba069a5cb9a3c73b449db6" category="paragraph"><block ref="76208d94f7ba069a5cb9a3c73b449db6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="48c35f00e54bcd076beab66aeb66748f" category="paragraph"><block ref="48c35f00e54bcd076beab66aeb66748f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="701aeb9baf8b5644d4b46e3f72cc90d1" category="paragraph"><block ref="701aeb9baf8b5644d4b46e3f72cc90d1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="119c697a3d2f1bb3e36b7433612793ce" category="paragraph"><block ref="119c697a3d2f1bb3e36b7433612793ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="169c2d544429ca437e1d9c20d9f5f5c9" category="paragraph"><block ref="169c2d544429ca437e1d9c20d9f5f5c9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8212e7c3c4a5f6ba8be99f44fd45ce3f" category="paragraph"><block ref="8212e7c3c4a5f6ba8be99f44fd45ce3f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c6444acf4b8ec3eaa480205ff78ca970" category="paragraph"><block ref="c6444acf4b8ec3eaa480205ff78ca970" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e5d2319ea1dafbcd71c7aec59ddaba42" category="paragraph"><block ref="e5d2319ea1dafbcd71c7aec59ddaba42" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7554f201942d191e98fed78d39be63c4" category="paragraph"><block ref="7554f201942d191e98fed78d39be63c4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0f5f8faae727b0137b96e07db68391cb" category="paragraph"><block ref="0f5f8faae727b0137b96e07db68391cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6702d56dc6c6b518b231b5e40d8c5ccc" category="paragraph"><block ref="6702d56dc6c6b518b231b5e40d8c5ccc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c984f6b8928f9d9874896ddba5c04199" category="paragraph"><block ref="c984f6b8928f9d9874896ddba5c04199" category="inline-image-macro-rx" type="image"></block></block>
  <block id="edeaf903e9853d04a8806ae07cbecf14" category="paragraph"><block ref="edeaf903e9853d04a8806ae07cbecf14" category="inline-image-macro-rx" type="image"></block></block>
  <block id="83716a3e5802cb0a227f6e5f45798a71" category="paragraph"><block ref="83716a3e5802cb0a227f6e5f45798a71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="499f51d9181a1f831d45ab5693cd4c0e" category="paragraph"><block ref="499f51d9181a1f831d45ab5693cd4c0e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6d78b942eaeee0f83df91143c05801f" category="paragraph"><block ref="f6d78b942eaeee0f83df91143c05801f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d3fd3dc2c8bc64857b9ee2ff1c9ffc8a" category="paragraph"><block ref="d3fd3dc2c8bc64857b9ee2ff1c9ffc8a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f1d6e478ccdd2c5f011c5106195f6112" category="paragraph"><block ref="f1d6e478ccdd2c5f011c5106195f6112" category="inline-image-macro-rx" type="image"></block></block>
  <block id="234465c3e209a597f0cd52b2e45aaa67" category="paragraph"><block ref="234465c3e209a597f0cd52b2e45aaa67" category="inline-image-macro-rx" type="image"></block></block>
  <block id="24d19b8a8c742230ddb8b49a8b9fab6b" category="paragraph"><block ref="24d19b8a8c742230ddb8b49a8b9fab6b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d78dfa4fe6c387096f78ef0272804eac" category="paragraph"><block ref="d78dfa4fe6c387096f78ef0272804eac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3f7e85d8a888e58a3a25baefeb498544" category="paragraph">この記事では、このソリューションに必要な設定手順について説明します。</block>
  <block id="9f4d8328c4b4f138cd7407f810df3cff" category="paragraph"><block ref="9f4d8328c4b4f138cd7407f810df3cff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d20f74547653b320798bf9f65c56a82d" category="paragraph"><block ref="d20f74547653b320798bf9f65c56a82d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4178a692b2dc1d7f34e586e28a84611d" category="paragraph"><block ref="4178a692b2dc1d7f34e586e28a84611d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9d70605c19b38ced8da9c8a788ac9ec8" category="paragraph"><block ref="9d70605c19b38ced8da9c8a788ac9ec8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="59c6681070b75f9a4753dc9a4925fe5f" category="paragraph"><block ref="59c6681070b75f9a4753dc9a4925fe5f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31c99a8d02f09d0517e8ec257ef400b1" category="paragraph"><block ref="31c99a8d02f09d0517e8ec257ef400b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e579c92f66df2b5d1bb2881985b002c7" category="paragraph"><block ref="e579c92f66df2b5d1bb2881985b002c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="35d3a483d2f3c72aada7b10371ed3537" category="paragraph"><block ref="35d3a483d2f3c72aada7b10371ed3537" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ccc685f61d9aa4b750fdd8658835ff94" category="paragraph"><block ref="ccc685f61d9aa4b750fdd8658835ff94" category="inline-image-macro-rx" type="image"></block></block>
  <block id="34db90278e7f1203022d19ec5b665010" category="paragraph"><block ref="34db90278e7f1203022d19ec5b665010" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5da5dde9720b315379e70b4177434a18" category="paragraph"><block ref="5da5dde9720b315379e70b4177434a18" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27e52c3fb5eeac301ef7551fbbc844ca" category="summary">このドキュメントでは'SAP環境で使用されるIBM DB2データベースのSnapCenter統合の詳細について説明します</block>
  <block id="f2ce65fcc640e16d86d90a9043a03a3b" category="doc">IBM DB2データベース用のSnapCenter統合</block>
  <block id="ec0faed5ff7ebe2f0706a4c39e2c4c2c" category="list-text">サンプルレイアウト</block>
  <block id="ef7b844ca6d6a2602dafe3134fb1ca72" category="list-text">DB2データベースの保護</block>
  <block id="4e31e49d4100c6ba14450837d92d461f" category="list-text">DB2データベースのリストアとリカバリ</block>
  <block id="a00f0fd59cca7f07f0cea6ac706a0e5c" category="paragraph">作成者：Michael Schlosser、NetApp</block>
  <block id="473b1d9bd40c12221ea0f6cae1597325" category="paragraph">Azureプラットフォームで実行されているSAPシステム向けSnapCenter DB2プラグインの実装例</block>
  <block id="12b39368d55e98f888e35df7746fb72c" category="admonition">この実装では、最小限必要なボリューム構成について説明します。</block>
  <block id="12cd71728e50a3902fcece65460e4ebf" category="inline-link-macro">MSテクニカルコミュニティブログ</block>
  <block id="fbcc308403cd96b6411f668e18f06800" category="paragraph">または、これに記載されている体積構造を<block ref="ba61e08a88d29c2a10a488be3b39cf04" category="inline-link-macro-rx"></block>使用することもできます。</block>
  <block id="da244bb6adce2e1c672dfd628fb7dd34" category="inline-image-macro">IBM DB2を使用した実装例の図</block>
  <block id="e62cf247ea7ec708a2ad9230ea442925" category="paragraph"><block ref="e62cf247ea7ec708a2ad9230ea442925" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b3baef4e7ae79cabecf02ebeed0c59d" category="section-title">デモ環境</block>
  <block id="7eef23b11d6e87eee968a9bef33fd707" category="cell">*ソフトウェア*</block>
  <block id="45cc01ab5f209e8760027e9c30097025" category="cell">* バージョン *</block>
  <block id="999bc6b18351bbe817d26f559ba408ae" category="cell">SAP</block>
  <block id="6d249e1baba83ae640bbeec81e7c3615" category="cell">SAP NetWeaver 7.5</block>
  <block id="c890515f1055143925ae4fb85b86ec70" category="cell">DB2</block>
  <block id="948d557ffdaf25b2c6b7be9ddd53ec00" category="cell">10.5.0.7</block>
  <block id="d6eb82c324cab2f36e345863fad95090" category="cell">6.1</block>
  <block id="8cfac113a293def38718f860d9847f61" category="section-title">DB2ボリューム設計</block>
  <block id="4637ee103bf2e775e15a469132b5bb9e" category="paragraph">DB2データベースのバックアップ/リカバリとクローンのユースケースには、次の最小ボリュームレイアウトを使用する必要があります。この設定例では、&lt;SID&gt;：D01を使用しています。</block>
  <block id="9a888b0c74b941393528812eb1316d03" category="cell">*ボリューム名*</block>
  <block id="f899d776dc67e9dcee2f4121b4bba535" category="cell">*ボリューム上のディレクトリ（qtree）*</block>
  <block id="e672228e961994874c51cca0ee312ede" category="cell">*サーバ上のマウントポイント*</block>
  <block id="9bdc480955b350f1fe8089392ad36cbe" category="cell">* コメント *</block>
  <block id="31d84945c9682550a825076c467153b5" category="cell">&lt;SID&gt;- sapdb2</block>
  <block id="ea95a7d80f83fc61f9f153f2638ea853" category="cell">DB2</block>
  <block id="7e26510de272b089b386a86ccbf587b6" category="cell">/db2</block>
  <block id="534a3af3843cec27238cd2a795da097e" category="cell">/DB2/&lt;SID&gt;</block>
  <block id="dd821c245ff7dc009d80ebb64af5731f" category="cell">DB2関連ファイルの親ディレクトリ</block>
  <block id="8fd86b7aadd5e9b03497bf120891978b" category="cell">/DB2/DB2 &lt;sid&gt;</block>
  <block id="79df651c0a05c7844b2d00a3d89305ad" category="cell">ユーザDB2 &lt;sid&gt;およびDB2ソフトウェアのホームディレクトリ</block>
  <block id="15a05a936e7e6e3f58e6fbc1511a6e81" category="cell">/db2/&lt;SID&gt;/db2dump</block>
  <block id="b3a15b9def11128e8b2026efc6c3d072" category="cell">DB2診断ログおよびダンプファイル</block>
  <block id="e997b2cd0b797de69fb2c7d8ffffca3c" category="cell">/DB2 /&lt;SID&gt;/バックアップ</block>
  <block id="64eb203ca6b490c12ed7667283c124a6" category="cell">バックアップの場所（別のボリュームに配置される場合がある）</block>
  <block id="7d096ea4f92dc98b3097737a8b5181a6" category="cell">/db2/&lt;SID&gt;/log_arch</block>
  <block id="6f492fcb3cdd8aace41d6904c24b3bc5" category="cell">オフラインREDOログ（別のボリュームに配置される可能性があります。Snapshotがトリガーされます）</block>
  <block id="4aea0cb6e5c006ddd53a70c12b56fdd0" category="cell">/db2/&lt;SID&gt;/log_dir</block>
  <block id="2270a43500f9a14bb91dab8efd360ef3" category="cell">オンラインREDOログ（別のボリュームに配置されている可能性があります。Snapshotがトリガーされます）</block>
  <block id="bbf57e51fef1ff26dad896beca3f7e87" category="cell">&lt;sid&gt; adm</block>
  <block id="2da342b3dda8e03159bbffaefb0d4c8b" category="cell">&lt;sid&gt; adm</block>
  <block id="698ad4b403eed82197a9bf2952ebcf6f" category="cell">ユーザ&lt;sid&gt; admのホームディレクトリ</block>
  <block id="25b707f15524f486786dd6cf01c22073" category="cell">SAP &lt;sid&gt;</block>
  <block id="a861d753fb632d3aa7894413728b31bc" category="cell">/home/SAP &lt;sid&gt;</block>
  <block id="96d9f98b47736d5b212d67691e5ed26f" category="cell">ユーザsap &lt;sid&gt;のホームディレクトリ</block>
  <block id="07c219d49a1979ef373138dd06f5ad96" category="cell">usrsaptrans</block>
  <block id="82fccaf357ca5c791314eaf3a6944474" category="cell">/usr/sap/trans</block>
  <block id="b838e6c5bd60b36ebeaaab72caed45fa" category="cell">転送ディレクトリ</block>
  <block id="be4c2a2a5d126229964628d446efbb8f" category="cell">Usrsap &lt;SID&gt;</block>
  <block id="c01ff4fdf7388e360b42bc0e64a0a80d" category="cell">/usr/sap/&lt;SID&gt;</block>
  <block id="756508efab6e0d1bc2dc4fee92cac4c5" category="cell">ユーザSAP</block>
  <block id="4a7c0df05ccef9cc1dc8697f985fd620" category="cell">sapmnt &lt;SID&gt;</block>
  <block id="5a098fa2529c8679c4e8fc1738f1da9d" category="cell">/sapmnt/&lt;SID&gt;</block>
  <block id="026549168c7a2bb8161cfb74d480263a" category="cell">SAP GlobalHostディレクトリ</block>
  <block id="3505690b5481050b39a2b9670d03515f" category="cell">&lt;SID&gt;データ</block>
  <block id="c787761c1a756dd43a957c5e2c583389" category="cell">sapdata1</block>
  <block id="4f0c7b90b273f14a8619b86e13dd9ca9" category="cell">/db2 /&lt;SID&gt;/ sapdata1</block>
  <block id="483c4c7bd72d57048ff3744af95fc494" category="cell">DBデータ</block>
  <block id="065951937bf4428ca6fb06582f598edd" category="cell">sapdata2</block>
  <block id="0b40cbe6e00bd32ab25fa62693b43c0a" category="cell">/db2 /&lt;SID&gt;/ sapdata2</block>
  <block id="665d47691ba149a5bec2082999149594" category="cell">sapdata3</block>
  <block id="4f7a702472576e4342b1e74200918229" category="cell">/db2 /&lt;SID&gt;/ sapdata3</block>
  <block id="8285444aa5840d99f8550da86ffa63a5" category="cell">sapdata4</block>
  <block id="b818a2f692219a659b3df706806dbbe1" category="cell">/db2 /&lt;SID&gt;/ sapdata4</block>
  <block id="0bbf1b8adc2733d08c166b57dd640cd5" category="cell">saptmp1</block>
  <block id="eae9762e5cfdc29394389a973ba509c7" category="cell">/db2/&lt;SID&gt;/saptmp1</block>
  <block id="64166c815cb9bcbf7f48c602e9e96f51" category="cell">DB一時ファイル</block>
  <block id="e20f53264436638f3fb4a5fba1747e7e" category="cell">saptmp2</block>
  <block id="3510de8e86604adfbef947b90a1c45ee" category="cell">/db2/&lt;SID&gt;/saptmp2</block>
  <block id="682655157fb73f8c2be7e18600c66215" category="cell">saptmp3</block>
  <block id="cb594ac1e19e0800c21774554c937620" category="cell">&lt;SID&gt;/saptmp3</block>
  <block id="11b94078dbe191b06347286767e4081a" category="cell">saptmp4</block>
  <block id="a63099b6993198420aa5ae00b810ce02" category="cell">&lt;SID&gt;/saptmp4</block>
  <block id="70c057283d21e800806e65930d57dd49" category="cell">DB2 &lt;sid&gt;</block>
  <block id="33661a49a40bfa2f45c04c0fb17bd4fa" category="cell">/DB2/&lt;SID&gt;/ DB2 &lt;sid&gt;</block>
  <block id="27913215df8cddaf9d03dc16f87f321e" category="cell">インスタンスファイル</block>
  <block id="40cb4b2d8d5816e1f0184321618fbd12" category="paragraph">DB2プラグインでは自動検出がデフォルトで有効になっているため、次のファイルパスに一致するボリュームに対してSnapshotが作成されます。</block>
  <block id="bd496227fb0e5b76b69f3b4e68518afe" category="inline-image-macro">データベースファイルパスのスクリーンショット</block>
  <block id="5758fa0e46506a3a69a20fedf21759bf" category="paragraph"><block ref="5758fa0e46506a3a69a20fedf21759bf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9a81c153454f0f6f7d8579cc34ee5234" category="section-title">データベースD01を保護する手順</block>
  <block id="9a0270e05c38e9a7d1ac8d978974e340" category="list-text">サンプルレイアウトに従ってファイルの配布をチェックします。</block>
  <block id="86c6e3d68127f421e9ef698d11cc75ed" category="list-text">ホストの前提条件の確認（vm-d01）</block>
  <block id="33f7664c941a3d9b3d28bbcb4c812758" category="list-text">データベースの前提条件の確認（D01）</block>
  <block id="47fe320168def34402834656016c2220" category="list-text">ホストへのSnapCenterエージェントの導入/インストール（vm-d01）</block>
  <block id="ce63ea422e33d0794813d24821f1dcc3" category="list-text">SnapCenterインスタンスリソース構成の作成</block>
  <block id="7559741220811236735f363b93a31049" category="section-title">ホストの前提条件</block>
  <block id="bca10cb4cf9094843c7355adeba6eac9" category="paragraph">詳細については、次のサイトを参照してください。</block>
  <block id="e1b0bca9c4cdbfdc55a42c6370c32016" category="list-text"><block ref="e1b0bca9c4cdbfdc55a42c6370c32016" category="inline-link-rx"></block></block>
  <block id="286c51b67f871ee890090f0b93e51a87" category="list-text"><block ref="286c51b67f871ee890090f0b93e51a87" category="inline-link-rx"></block></block>
  <block id="4800367b8851abf8ad87e97df37414a2" category="paragraph">ホストを追加してLinux用のプラグインパッケージをインストールする前に、すべての要件を満たしておく必要があります。</block>
  <block id="8dd7d2aae8c4a449ae4eb17577d64964" category="list-text">iSCSIを使用している場合は、iSCSIサービスが実行されている必要があります。</block>
  <block id="2e1961167c1057a818d6fff279cd9778" category="list-text">パスワードベースの認証またはSSHキーベースの認証を使用できます。パスワードベースの認証はrootユーザとroot以外のユーザが使用できます。</block>
  <block id="fed1505389358193273003d88a5d4e8b" category="list-text">SnapCenter Plug-in for UNIX File Systemsは、root以外のユーザもインストールできます。ただし、プラグイン プロセスをインストールして開始できるよう、root以外のユーザにsudo権限を設定する必要があります。プラグインのインストール後、プロセスは有効なroot以外のユーザとして実行されます。</block>
  <block id="45d6e373e26981f8611297351f3acd1f" category="list-text">インストール ユーザのクレデンシャルを、認証モードをLinuxに設定して作成します。</block>
  <block id="129fdeda5a8637916b3b579b072e4eaa" category="list-text">Java 11をLinuxホストにインストールしておく必要があります。</block>
  <block id="d1ea7cd127db6778a24937199f9b7686" category="list-text">LinuxホストにJava 11の認定エディションのみがインストールされていることを確認します。</block>
  <block id="9285703bdbff8eccacde8c66953002ab" category="list-text">Javaのダウンロードについては、「Java Downloads for All Operating Systems」を参照してください。</block>
  <block id="225638f404e1ccbeb997a0f1c9c04f5c" category="list-text">プラグインのインストールには、デフォルトのシェルとしてbashを使用する必要があります。</block>
  <block id="5bb507af45f0fd81d1f1caabc686314b" category="section-title">データベースの前提条件–ログとバックアップの有効化</block>
  <block id="c09daa85b259d9f7648c6fbc39ed25ca" category="admonition">オフラインログを有効にするには、データベースのオフラインフルバックアップが必要です。通常、生産性の高いシステムではすでに有効になっています。</block>
  <block id="96789433eac5e3944ca0d800fc85486e" category="list-text">バックアップおよびLOG_ARCHのディレクトリの作成（/db2/d01/backup、/sybase/d01/log_arch）</block>
  <block id="956d0c05682b3bc3cb93899562e10f67" category="list-text">logarchmeth1を有効にする（os-user db2d01として）</block>
  <block id="94ef65514f807d19bdb88718b99c02fe" category="list-text">db2は、logarchmeth1 disk：/db2/d01/log_arch/を使用してD01のdb cfgを更新します。</block>
  <block id="5e00eadfc1b5e7463a17c56b72d5f181" category="list-text">オフラインバックアップの作成（os-user db2d01として）</block>
  <block id="179cbd0252387fd4435d78ae06e787b2" category="list-text">db2ストップフォース</block>
  <block id="7ebce8853c97c81f4e553e7b1dc0ca96" category="list-text">db2start adminモード制限付きアクセス</block>
  <block id="622fcf6018c9ebf916f7c5cb383db1d7" category="list-text">DB2バックアップDB D01から/DB2/D01/backup</block>
  <block id="132ac58d4e1fac6434f811d92132baab" category="list-text">db2 activate db D01</block>
  <block id="9fec43604f51a0651fe36635eb132bd7" category="section-title">SnapCenterエージェントをホストVM-d01にデプロイする</block>
  <block id="d5c9b73d439aa92ef011ebf02237c888" category="inline-link-macro">SnapCenter のドキュメント</block>
  <block id="3a633c1034368fc3855a16dd076fbf74" category="paragraph">詳細については、を参照して<block ref="29e7bd256c94454af51a7602a8b13056" category="inline-link-macro-rx"></block>ください。</block>
  <block id="b9ea14491630eed38c34384a444e82ae" category="paragraph">[IBM DB2 and Unix File Systems Plugins]を選択します。</block>
  <block id="35b8a19cf7d821dfa7b8a737f99c48ec" category="inline-image-macro">IBM DB2およびUNIXファイルシステムプラグインを追加するスクリーンショット</block>
  <block id="a2f6986a884997444723c59680789f03" category="paragraph"><block ref="a2f6986a884997444723c59680789f03" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6695ed7c4dc6e7742c1d1d038a25f676" category="admonition">インストール後、ホスト上のデータベースの検出が開始されます。</block>
  <block id="fd48bbf17291907d730e2522d1a85bc5" category="inline-image-macro">ホストでのデータベース検出のスクリーンショット</block>
  <block id="7f069b03dc5ca3b8f62d29589f4511be" category="paragraph"><block ref="7f069b03dc5ca3b8f62d29589f4511be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1296bb39d2d57c6cc10bc8b7676917e8" category="section-title">データベースD01のリソース構成の作成</block>
  <block id="8330f0a2b7e6f6014bf360706b2bf776" category="paragraph">検出されたリソースD01を選択</block>
  <block id="64cebb4358b84bfd80d6579d778f0dcc" category="paragraph"><block ref="64cebb4358b84bfd80d6579d778f0dcc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da91a3254aca6de315b2373021256929" category="paragraph">Snapshot名の設定</block>
  <block id="e84fae071a8e78d1fb7a744b24cc5570" category="inline-image-macro">[Configure snapshot name]ダイアログのスクリーンショット</block>
  <block id="3069aeaf5ccf52d1a3cda1b52aeb70d6" category="paragraph"><block ref="3069aeaf5ccf52d1a3cda1b52aeb70d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="486fc7232baeaac232c34da92814b735" category="paragraph">特定のアプリケーション設定は必要ありません。必要に応じてポリシーと通知を設定します。</block>
  <block id="b3e9c346af65ea78931895ae0ed7f82c" category="inline-image-macro">ポリシーと通知の設定のスクリーンショット</block>
  <block id="55274b856cef4df2e84f634090d352eb" category="paragraph"><block ref="55274b856cef4df2e84f634090d352eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="623c2f695c43944368233cdcd5112fa6" category="paragraph">設定を完了します。</block>
  <block id="62157a3f9b3e302e2af1a8ae18fa9f72" category="section-title">システムD01を回復する手順</block>
  <block id="816afd57aef5575fc9bbdc88bc26ddc4" category="list-text">SAPシステムD01の停止（データベースを含む）</block>
  <block id="6786f06988fe239916a81108eb0a0c69" category="list-text">SnapCenterバックアップのリストア（ボリュームD01-data）</block>
  <block id="0e2495c75bf156696de96e63614ac7a7" category="list-text">ファイルシステムのアンマウント</block>
  <block id="ec6cf5d30900bcc6f82f3eb5c23d8c37" category="list-text">ボリュームのリストア</block>
  <block id="53497eb2c626ef9f24d9de1007a5a90b" category="list-text">ファイルシステムのマウント</block>
  <block id="d0c9247901ac4a52c58033d856dddbff" category="list-text">データベースをミラーDBとして初期化</block>
  <block id="3291c9695e2f7dd58cdd755c2c2e393a" category="list-text">データベースD01のリカバリ（DB2ロールフォワードを使用）</block>
  <block id="91ed7fe4c36ec693747f406ea94d23af" category="list-text">SAPシステムD01の起動</block>
  <block id="11dab2657295441ca871a59b243ec1a0" category="section-title">データベースD01のリカバリ</block>
  <block id="4df9343790098c76f2411a45b066901e" category="list-text">ホストVM上でSAPシステム+ DB D01を停止- d01</block>
  <block id="a25c1c8c4de0276c08c8234ab3b708ce" category="list-text">ユーザーd01adm:停止</block>
  <block id="6b57c8193bf71b9818408e839220a139" category="list-text">リストア バックアップ</block>
  <block id="1452732860e76c518c037e770ed085dd" category="list-text">SnapCenter GUI：リストアに必要なバックアップを選択</block>
  <block id="679f60d183f669fb2ca68c72c3316c6b" category="inline-image-macro">リストアするバックアップを選択するSnapCenter GUIのスクリーンショット</block>
  <block id="1c169de9b3a145e2e063671d59b50af5" category="paragraph"><block ref="1c169de9b3a145e2e063671d59b50af5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ac7ddb192c30c1078e57e0342a5062fc" category="list-text">ANF導入の場合–完全なリソースのみ提供</block>
  <block id="7931bab6bc0927ffc59532f7984bbd0d" category="paragraph"><block ref="7931bab6bc0927ffc59532f7984bbd0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f13df4ad54f0c2b31657833f05881004" category="paragraph">概要が表示され、[Finish]をクリックすると、実際のリストアが開始されます。</block>
  <block id="f8efcbfafcbabb8a7f35baf81e1a1d01" category="inline-image-macro">リストア用のバックアップの概要を示すスクリーンショット</block>
  <block id="60ca3833d5c084c52db489b55e75ce1c" category="paragraph"><block ref="60ca3833d5c084c52db489b55e75ce1c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c2aadbaa97afd661ab97f8cbdd12d10" category="admonition">「db2inidb D01 as mirror」は、SnapCenterリストアワークフローの一部として実行されます。</block>
  <block id="3924f610d9938ce01769afe331519cb3" category="list-text">リカバリステータスデータベースD01（ユーザdb2d01として）を確認します</block>
  <block id="f7d697eda5d7d5408cd061092fce3503" category="list-text">DB2 rollforward db D01クエリステータス</block>
  <block id="26f1cfe3b5f012c83d58eb78e3dd6bab" category="list-text">必要に応じてデータベースをリカバリします。ここではロスレスリカバリが開始されます（ユーザdb2d01として実行）。</block>
  <block id="808d84098ee3a2c0ff76deab40d1c2fa" category="list-text">db2 rollforward db d01からログの末尾へ</block>
  <block id="0e7f22e930a9154acae7551b5123ad69" category="list-text">データベースリカバリの停止とオンラインデータベースD01（ユーザdb2d01として）</block>
  <block id="3fb30e7509d0e9bbf3b116bb39f7c95c" category="list-text">DB2ロールフォワードDB D01ストップ</block>
  <block id="b6e8958390494acbc53d1196bd948204" category="list-text">SAPシステムの起動(ユーザd01admとして)</block>
  <block id="d85cd1065b480106e7535dc478664dc7" category="list-text">スタートサップ</block>
  <block id="447970b435b84887a5470043a2eedc24" category="paragraph">ドキュメントをサポートするために、次の記録済みデモを利用できます。</block>
  <block id="48acd28f9ce67afbe3fe3d84dd852d8f" category="video-title">インストールおよび設定DB2プラグイン、DB2データベースのバックアップ</block>
  <block id="834fcc01f78a95063fed805a018f7769" category="video-title">DB2データベースのリストアとリカバリ</block>
  <block id="2dcfe53d3362a6931b5721d7c46f91b4" category="inline-link-macro">SAP on DB2インストールAzure on ANF</block>
  <block id="23bd21aaf1bfee84bb68aac8e897d1ec" category="list-text"><block ref="23bd21aaf1bfee84bb68aac8e897d1ec" category="inline-link-macro-rx"></block></block>
  <block id="991cec96960ff6372703208927785cbd" category="inline-link-macro">SnapCenterプラグインの前提条件</block>
  <block id="6b48a347db8166414731f4502394c924" category="list-text"><block ref="6b48a347db8166414731f4502394c924" category="inline-link-macro-rx"></block></block>
  <block id="27402574bb9402b54c301114f164ebb2" category="inline-link-macro">SnapCenterインストールプラグイン</block>
  <block id="fe09e9c39b636255ab5de9f96a18b14b" category="list-text"><block ref="fe09e9c39b636255ab5de9f96a18b14b" category="inline-link-macro-rx"></block></block>
  <block id="ab8523e2f3333d22d15b6d6ebf19221e" category="inline-link-macro">SnapCenter DB2プラグインのドキュメント</block>
  <block id="32a05a4bb6b637b6299d25c7f836d5d2" category="list-text"><block ref="32a05a4bb6b637b6299d25c7f836d5d2" category="inline-link-macro-rx"></block></block>
  <block id="916cccec2fcddffb90024152bd9a22ba" category="list-text">SAP Notes（ログインが必要）</block>
  <block id="45af776ab4c832d294cff3edde6c8360" category="list-text">83000- DB2/390:バックアップとリカバリのオプション:<block ref="1f0fcc94b117dadffa7a2d1ba26a8490" category="inline-link-rx"></block></block>
  <block id="ae32a4ebf5c4235fd1aeabe2187af8fc" category="list-text">594301-db6:管理ツールとスプリットミラー:<block ref="2312bb0b28f7812dba2cdde94e9f73c6" category="inline-link-rx"></block></block>
  <block id="4bf308994c1ed9e12dfc8091e1be97d9" category="list-text">NetApp製品ドキュメント：<block ref="9d25e96cb4da17ca8bcf663a18812ece" category="inline-link-rx"></block></block>
  <block id="5edbe8c55546db896b55871b44a39263" category="cell">* 日付 *</block>
  <block id="c2259d06d49b65de5c037d65c1cc79b2" category="cell">*ドキュメントバージョン履歴*</block>
  <block id="42ce83dc3f5ef22d986311b267a5ac20" category="cell">2025年4月</block>
  <block id="09ba040f5df18abbd4604e53ff4afd84" category="cell">初期バージョン：バックアップ/リカバリDB2データベース</block>
  <block id="048272e99fdf9fe71a8896827dbae3c0" category="summary">このドキュメントでは、SAP環境で使用されるSAP ASEデータベースのSnapCenter統合の詳細について説明します。</block>
  <block id="6b84a3bc8a409a71d17a2fcbad7053b8" category="doc">SnapCenterとSAP ASEデータベースの統合</block>
  <block id="8401e75b01ba6fa918a576426555c04a" category="list-text">SAP ASEインスタンスの保護</block>
  <block id="90111ff53c4535a9a6b7bca16dfd2401" category="list-text">SAP ASEインスタンスのリストアとリカバリ</block>
  <block id="f96ed43c45e02c1d0034d3c5c173b8e8" category="paragraph">Azureプラットフォームで実行されているSAPシステム用のSnapCenter ASEプラグインの実装例。</block>
  <block id="8275585a5f5a60f1cc7ed3ded973f327" category="admonition">この実装では、最小限必要なボリューム構成について説明します。データ・ダンプ・バックアップとログ・ダンプ・バックアップは、SAP Note 1588316に従って設定します。</block>
  <block id="87d0a3216ca308da450ea688cc418ff4" category="inline-link-macro">MSテクニカルコミュニティブログ</block>
  <block id="e30d84b931733cca553a4e2b056c9718" category="paragraph">または、これに記載されている体積構造を<block ref="0023ecb2db8d73de3cf4e469cdb5e1a5" category="inline-link-macro-rx"></block>使用することもできます。</block>
  <block id="7db2cb298cd95506358dd06177b04700" category="inline-image-macro">使用したデモ環境を示す図</block>
  <block id="0f1747ea369cc4076ba2cc3993432abc" category="paragraph"><block ref="0f1747ea369cc4076ba2cc3993432abc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cdee3d093954e7eef1d1def2838f1f3a" category="cell">SAP ASE</block>
  <block id="13406bf13d82eeafb3b40b18c91daece" category="cell">16.0 SP04 PL06 HF1</block>
  <block id="bfe962199aac9ebfade24320adc2691b" category="section-title">ASEボリューム設計</block>
  <block id="000c1e0d40d661b2c06c011004e154d9" category="paragraph">SAP ASEデータベースのバックアップ/リカバリとクローニングのユースケースには、次の最小ボリュームレイアウトを使用する必要があります。この設定例では、&lt;SID&gt;：A01を使用しています。</block>
  <block id="34bee2ba966455e53875dcd856764cf2" category="cell">&lt;SID&gt;サパス</block>
  <block id="7a0260097c41fcc0f116e761f1026332" category="cell">Sybase の場合</block>
  <block id="2381f633e71aa671f008e66e64aa960b" category="cell">/Sybase</block>
  <block id="97d651e6d9f634c271e5557333ae8d35" category="cell">ASE関連ファイルの親ディレクトリ</block>
  <block id="8ff4caaea7ce0dab63dd3043133f5d4d" category="cell">/Sybase /&lt;SID&gt;/バックアップ</block>
  <block id="67960c0ae6009f7b7bd326a083d87377" category="cell">データダンプのバックアップ（別のボリュームに配置されている場合がある）</block>
  <block id="550162b6cb14b7b942f7267b1729be29" category="cell">/Sybase /&lt;SID&gt;/ log_archives</block>
  <block id="36d391cc2500d8cc788a23d6ed534955" category="cell">ログダンプのバックアップ（別のボリュームに配置されている可能性あり）</block>
  <block id="c6baf29718d3f6f328e1b0a8b40a37da" category="cell">&lt;SID&gt;-データログ</block>
  <block id="95fcb1619f5e8f3197478302f5b93b87" category="cell">SAPDATA_1</block>
  <block id="003b52815fdc226d19f036fa3876c8b6" category="cell">/Sybase/Sybase/Sapdata_1 &lt;SID&gt;</block>
  <block id="21e459d2a210b040cccf8c6172fb2f00" category="cell">DBデータ（SID）</block>
  <block id="92f85b1bd0a4aebea166b0d13e288f80" category="cell">saplog_1</block>
  <block id="9cb30ddd45ecd9416a87cdc0a7908343" category="cell">/sybase/saplog_1 &lt;SID&gt;</block>
  <block id="a9d027f27d25721466ddf8fffd5f388c" category="cell">DBログ（SID）</block>
  <block id="fb04d57956c94c6ecf71bd9b53cafaae" category="cell">saptemp</block>
  <block id="eeaa36876c33a85b0f3824abf2dbad33" category="cell">/Sybase/Sybase/Saptemp &lt;SID&gt;</block>
  <block id="392c10a58461b01912e39fb9c75ea817" category="cell">PSAPTEMP</block>
  <block id="3ef65f7b9e51ab27fa837dba76c1f25a" category="cell">Sybsecurity</block>
  <block id="e71d86e8d3d7d02672723a43b5b947c1" category="cell">/Sybase/Sybase/Sybsecurity &lt;SID&gt;</block>
  <block id="02ad3495b1e50a5f6280ee917cc15efa" category="cell">SybaseセキュリティDB</block>
  <block id="c58a7294b002c3d6399667d55932ca93" category="cell">Sybsystem</block>
  <block id="b5549becb81e070362e65d347125f3b2" category="cell">/Sybase/Sybase/Sybsystem &lt;SID&gt;</block>
  <block id="d575be3aed56fddf35af4e6dfbfafc27" category="cell">SybaseシステムDB</block>
  <block id="b4399480b1acfdf1353494ce4f306568" category="cell">sybtemp</block>
  <block id="28dbd03d200b8924a94286e818c9ea10" category="cell">/Sybase/Sybase/Sybtemp &lt;SID&gt;</block>
  <block id="93ac7fbe9004ed4ebb53ce345474ffa8" category="cell">SybaseシステムDB-Temp</block>
  <block id="471a9be95dfa241e5bf39e303f5a53b6" category="cell">sapdiag</block>
  <block id="81e861c9d8739bcf1ee9590ec5c98ed6" category="cell">/Sybase/Sybase/Sapdiag &lt;SID&gt;</block>
  <block id="2ae763a05f4307578b710bd273b22ebd" category="cell">'saptools'データベース</block>
  <block id="1e3359ff48a9bf93ce05e8221b5f9fc7" category="section-title">データベースA01を保護する手順</block>
  <block id="63c7c9a11cf9f3320a8b03edcd0bb3d3" category="list-text">ホストの前提条件の確認（VM-A01）</block>
  <block id="2a724788217d7e99620121403f7ec1b7" category="list-text">データベースの前提条件の確認(A01)</block>
  <block id="9bf7ca2d0dda306ce7f51ca3af9d83e2" category="list-text">ホストへのSnapCenterエージェントの導入/インストール（VM-A01）</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">ここをクリック</block>
  <block id="422dc1c7aa9fc1d19cf44df1acbaf925" category="paragraph">より最新の情報が得られる可能性があり<block ref="b31005d5a625ab242194ebb7f4843882" category="inline-link-macro-rx"></block>ます。</block>
  <block id="c7bbc1c3f4ce465ac86c6def6aa2e810" category="list-text">バックアップとLOG_ARCHIVESのディレクトリを作成（/sybase/a01/backups、/sybase/a01/log_archives）</block>
  <block id="a7e66d589f3f50cff457fac187f177c5" category="list-text">データベースA01に接続（OS-user syba01として）</block>
  <block id="667761e3e0d6887d2cc1bda8fa69b73f" category="list-text">isql -S A01 -U sapsa -X -w 1024</block>
  <block id="063d82e54f4551852204f9ad1bc5a382" category="list-text">SAP Note 1588316に従って、データ（A01DB）のダンプ構成を作成します。</block>
  <block id="13429c175e7673f5c7eda3dca112fb78" category="list-text">マスターを使用</block>
  <block id="34d1f91fb2e514b8576fab1a75a89a6b" category="list-text">移動</block>
  <block id="c8ae55807dd7df265de61b46ba8d4dbe" category="list-text">exec exec SP _config_dump@config_name ='A01DB'、@stripe_dir='/sybase/A01/backups'、@compression='101'、@verify='header'</block>
  <block id="e01c941839fc7d01d3a81fee8ce5c3f0" category="list-text">SAP Note 1588316に従って、ログ（A01LOG）のダンプ構成を作成します。</block>
  <block id="485318a14883612c2f1de46de2f487f1" category="list-text">sybase_config_dump@config_name ='A01LOG'、@stripe_dir='/sybase/A01/log_archives'、@compression='101'、@verify='header' SP</block>
  <block id="206731b1458254be46a024bf901e0522" category="list-text">データベースA01のフルロギングを有効にする</block>
  <block id="39247d6e41eb100898fb3b1a2364114e" category="list-text">dboption a01、'trunc log on chkpt'、false SP</block>
  <block id="96ceb753c0a377c92ad1e221d9641c1d" category="list-text">vlan_dboption A01、'full logging for all'、'true' SP</block>
  <block id="c025485eae5bde859ea018121cbd62c1" category="list-text">dboption a01、'Enforce dump tran sequence'、'true' SP</block>
  <block id="d658901cc9e2ac30b9d89213df5ee7c5" category="list-text">ログダンプバックアップを有効にするデータベースダンプバックアップ</block>
  <block id="343cf6a81ce43dd7f9f74d4528c9c339" category="list-text">config='A01DB'を使用してデータベースA01をダンプする</block>
  <block id="c277e3c6dfc07bd8ea02dff494a1d274" category="list-text">ログダンプ</block>
  <block id="b1e76779deb99368f17b934d2714f080" category="list-text">config='A01LOG'を使用してトランザクションA01をダンプします</block>
  <block id="718fef5e818207fc5faf769133a9d1ac" category="list-text">SAP Note 1588316に従って、定期的なログバックアップが設定されていることを確認します。</block>
  <block id="5aee402eaf0a4ab653841701c52ddfa0" category="section-title">オプション–専用のデータベースユーザを作成する</block>
  <block id="51e130c4750b38ec3d89d3985c597933" category="paragraph">SAP環境では、ユーザsapsaを使用できます。</block>
  <block id="0daad5d6690de03566ec10706323e3e9" category="list-text">ユーザの作成</block>
  <block id="c7e9d1181d494814a2d110faeb190b94" category="list-text">パスワード「&lt;password&gt;」でログインのバックアップを作成します。</block>
  <block id="fdbffd1a7c8cf59d0847b653982d873f" category="list-text">ユーザーへの権限/役割の割り当て</block>
  <block id="b1abcb7f7c33e1a82bd2f7488e439df2" category="list-text">ロールsa_role、sso_role、oper_role、sybase_ts_roleをバックアップに付与</block>
  <block id="fffdd9228fa28e3d5f0ab709f9c51c92" category="section-title">SnapCenterエージェントをホストVM-A01に展開する</block>
  <block id="17bcfd0ce80849145fcae272c3073ed6" category="paragraph">[SAP ASE and Unix File Systems Plugins]を選択します。</block>
  <block id="e53bb8d8a1e0b4b32f829be09ad36762" category="inline-image-macro">[Add Host]ダイアログのスクリーンショット</block>
  <block id="acca9221dcefb315b8b1b4bf389e15b3" category="paragraph"><block ref="acca9221dcefb315b8b1b4bf389e15b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c98176d904449d2adc5d23a31a7c375" category="section-title">データベースA01のSnapCenterインスタンスリソース構成の作成</block>
  <block id="a36650e58db1b909efccef9064bdffaa" category="paragraph">リソース-&gt; SAP ASE -&gt;リソースの追加</block>
  <block id="5c9a1bdda8593f1e12622a4a40be53e2" category="inline-image-macro">[Add host resource details]ダイアログのスクリーンショット</block>
  <block id="5bdaba367a5127ac9faca28b92601e0e" category="paragraph"><block ref="5bdaba367a5127ac9faca28b92601e0e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dddc00803e5eec31fdd3e73f7b3bda63" category="admonition">パスワードに特殊文字が含まれている場合は、バックスラッシュでマスクする必要があります。例：Test！123! -&gt;テスト\!123\!</block>
  <block id="0f80339fee7af36494724f100fa1b298" category="paragraph"><block ref="c70fe733883ae564246c8c95a562793a" category="inline-image-macro-rx" type="image"></block> <block ref="e4d81f8c1bad0c167b65b878413682b0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d522f9ffd8420f78fb398b61cfcf6b61" category="admonition">からボリュームデザインを使用している場合<block ref="0023ecb2db8d73de3cf4e469cdb5e1a5" category="inline-link-macro-rx"></block>。</block>
  <block id="56855831be7a1bb8c1559951423245d6" category="paragraph">ボリューム/vol/&lt;SID&gt; Sybase、/vol/&lt;SID&gt; data、/vol/&lt;SID&gt; logをストレージフットプリントとして設定する必要がある</block>
  <block id="b6260cf3a73129eca5cad5d8725639ef" category="paragraph">次のリソース設定カスタムのキーと値のペアを作成する必要があります(少なくとも)。</block>
  <block id="11a632a5a413b2b5ea3750ad2d9d9598" category="inline-image-macro">[Resource Settings][Custom key-value pairs]ダイアログのスクリーンショット</block>
  <block id="0d52a1e343b85460d4430d8fe28a1b06" category="paragraph"><block ref="0d52a1e343b85460d4430d8fe28a1b06" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f841a697ec4008a662dbd87a8f456b42" category="paragraph">次の表に、 Sybase プラグインのパラメータの一覧、設定、説明を示します。</block>
  <block id="1243bb65d9566a6d540f765e10dcd146" category="cell">* パラメータ *</block>
  <block id="6a9433367cb8ed2838f8d46c7dd21f11" category="cell">*設定*</block>
  <block id="f14c276c07197ebef1394a5a219087a1" category="cell">* 概要 *</block>
  <block id="5b00a3c4e4d7e5113c17f1cd4ed0a251" category="cell">SYBASE_ISQL_CMD のようになります</block>
  <block id="8df27c24b6eaf41bcf190d923045378d" category="cell">例：/opt/sybase/ocs-15__0/bin/isql -X</block>
  <block id="f2f2fee1f06dd71c704fbc6000a528ab" category="cell">isql コマンドへのパスを定義します。使用可能なオプション：<block ref="763ff236fd49c579bfce336892c2759d" category="inline-link-rx"></block></block>
  <block id="64351137a517d0ca934c2b86eee9675b" category="cell">SYBASE_USER</block>
  <block id="c56f5648d4c0e137f9de3dfc7a54d55b" category="cell">user_name （ユーザー名</block>
  <block id="5a4a293be7914085f58e2bf2270ee0b3" category="cell">isql コマンドを実行できるオペレーティングシステムユーザを指定します。このパラメータは UNIX では必須です。このパラメータは、 Snap Creator の Agentstart コマンドおよび stop コマンド（通常は root ユーザ）を実行しているユーザと、 isql コマンドを実行しているユーザが異なる場合に必要です。</block>
  <block id="cbea20ef19e65a6d7816edf35c606308" category="cell">SYBASE_SERVER のことです</block>
  <block id="a9a2c88955eda13e180455da3b7ce94f" category="cell">data_sserver_name を選択します</block>
  <block id="99023927bcfcfd9d0d7d8bc17ca5f819" category="cell">Sybaseデータサーバ名を指定します（isqlコマンドの-Sオプション）。例：A01</block>
  <block id="f3c063a3270fe692a7554ecd77108549" category="cell">SYBASE_DATABASES</block>
  <block id="49b805efdee9543bf933cbdaf44e88eb" category="cell">db_name ： user_name password</block>
  <block id="1d3991a4e28c10d1e4921e9aeece15a6" category="cell">バックアップするインスタンス内のデータベースのリストを表示します。たとえば、DBAtest2:sa/53616c7404351eのようにマスターデータベースが追加されます。+allという名前のデータベースを使用すると、データベースの自動検出が使用され、sybsyntax、sybsystemdb、sybsystemprocs、tempdbデータベースは除外されます。例：+all：sa/53616c71a6351e NTAP_PWD_PROTECTIONパラメータが設定されている場合、暗号化されたパスワードがサポートされます。</block>
  <block id="ea5b6b066484400736ebd6d01383ab07" category="cell">SYBASE_DATABASE_EXCLUDE</block>
  <block id="24e8d17701309eab9a46949f1eab03b1" category="cell">データベース名</block>
  <block id="55fe692c769f13f5b6ee2dda865ad64d" category="cell">ALL construct を使用する場合にデータベースを除外できるようにします。複数のデータベースを指定するには、セミコロンで区切ったリストを使用します。例：pubs2；test_db1</block>
  <block id="cb595d25d18096c8ff698bc74c19a106" category="cell">Sybase_Tran ダンプ</block>
  <block id="5d42605e018c0a31e55f67caf36d20fd" category="cell">db_name ： direction_path</block>
  <block id="1ac0084e3e1f354250967f0f719fe341" category="cell">Snapshotコピーを作成したあとにSybaseトランザクションダンプを実行できます。例：pubs2：/sybasedumps/pubs2トランザクションダンプが必要な各データベースを指定する必要があります。</block>
  <block id="e48ebe9c56fd413872056d2ea877f906" category="cell">SYBASE_TRAN_DUMP_FORMAT</block>
  <block id="313cd648590f4c79c6d1e1c10c5aef76" category="cell">%S_%D_%T.cmn</block>
  <block id="40105874dd0b793808ef635cbddfd446" category="cell">ダンプの命名規則を指定できます。次のキーを指定できます。%S = SYBASE_SERVERのインスタンス名%D = SYBASE_DATABASESのデータベース%T = UNIQUE TIMESTAMP例を次に示します。%S_%D_% T.log</block>
  <block id="1663c45679303f56792e3727ef91fb00" category="cell">SYBASE_TRAN_DUMP_COMPRESSE_COMPRESS</block>
  <block id="dd4cc36e5ee02a7982f7c80b58ce22e3" category="cell">（Y/N）</block>
  <block id="aa282c218f8de50d8c07e673a3efba9b" category="cell">標準の Sybase トランザクションダンプの圧縮を有効または無効にします。</block>
  <block id="2c27e6763625498e55312a132bc3d46c" category="cell">Sybase の場合</block>
  <block id="ae7636891c062bb81143f59119afafb7" category="cell">例：/Sybase</block>
  <block id="cab4531e6a5d295253641118de633747" category="cell">Sybase をインストールする場所を指定します。</block>
  <block id="0a40e150a4b2ba86a9f227ab2e340101" category="cell">SYBASE_MANIMANIEST</block>
  <block id="44b3ace265fe49c623da13fcbf3d4695" category="cell">例：a01：/sybase/a01/sapdiag</block>
  <block id="0fee590c69692bfeabde30d46e060dfc" category="cell">マニフェストファイルを作成する必要のあるデータベースと、マニフェストファイルを配置する必要のある場所を指定します。</block>
  <block id="4971d917f319072c5a8c27035b04f9d1" category="cell">SYBASE_MANIMANIT_FORMAT の場合</block>
  <block id="800c3aaa4ed5765af077a4fd281607bf" category="cell">%S__%D_.manifest例：%S_%D_.manifest</block>
  <block id="44ad1cbfd1d8db9d47172ca1030c45fb" category="cell">マニフェストファイルの命名規則を指定できます。次のキーを指定できます。%S = Sybase_serverのインスタンス名%D = Sybase_databasesのデータベース</block>
  <block id="007d080f3e7133036769892befcdecbe" category="cell">SYBASE_MANIMANIT_DELETE</block>
  <block id="3e694eb78d4d924354d3003ec21b5aa1" category="cell">Snapshot コピーの作成後にマニフェストを削除できます。Snapshot コピー内でマニフェストファイルをキャプチャし、常にバックアップで利用できるようにする必要があります。</block>
  <block id="76674a5c76cb1c68992f1b8b8832b7a0" category="cell">SYBASE_EXCLUDE tempdb の場合</block>
  <block id="b6b7714b8342524ea9c1e80f43417e09" category="cell">ユーザが作成した一時データベースの自動除外を有効にします。</block>
  <block id="22c3e60dda32a397204c57fc27acda8e" category="section-title">システムA01をリカバリする手順</block>
  <block id="dc91cbdd99890b23cf8e77f3b523ec10" category="list-text">SAPシステムA01（データベースを含む）の停止、sapinitの停止</block>
  <block id="96e0ef6bada3e35f827c28acc315e808" category="list-text">ファイルシステムのアンマウント</block>
  <block id="c60f16a72ba7cfddfac2e1dbf5f40d45" category="list-text">リストアボリュームA01-datalog（SnapCenterを使用）</block>
  <block id="838b36bde2291fca9d871f6fcab8be44" category="list-text">ファイルシステムのマウント</block>
  <block id="6137e37a5885d90eb0ac7cf888a5d2c7" category="list-text">データベースA01を起動します（SAP Note 1887068に準拠して、自動オンラインを回避し、データベースのフォワードリカバリを可能にするために–qオプションを指定）。</block>
  <block id="21d17a5ee18728a81aa088d18c24ee77" category="list-text">BackupServer A01の起動</block>
  <block id="6c4f8619e91dbc892fe5105a556a4475" category="list-text">オンラインデータベースsaptools、sybsecurity、sybmgmtdb</block>
  <block id="8ab35c1252ac2b355dd0075f743b23f4" category="list-text">データベースA01のリカバリ（isqlを使用）</block>
  <block id="f46e8f1975ffffc40f0de8dfa6a57926" category="list-text">オンラインデータベースA01</block>
  <block id="9d7255aa22c8bb6c89d8a8cbe33ac4f3" category="list-text">sapinit、SAPシステムA01の起動</block>
  <block id="c0ed127324e97f318c161cc8520a5247" category="section-title">インスタンスA01のリカバリ</block>
  <block id="7b1e9066cef0caf29601e456f8506344" category="list-text">ホストVM-A01でSAPシステム+ DB A01を停止</block>
  <block id="94388a9dd48e6d94cb7abbd8c533de13" category="list-text">ユーザーa01adm：停止</block>
  <block id="32d9da06ca252a0fdb2b6e925b5d499d" category="list-text">ユーザroot：/etc/init.d/sapinit stop</block>
  <block id="d4f34dfc47fb963b67ab9ed55f350447" category="list-text">ユーザroot：umount -a -t nfs</block>
  <block id="f01af0d16f12f2b868deef38b6209609" category="inline-image-macro">[Select Required Backup for Restore]ダイアログのスクリーンショット</block>
  <block id="d49075162f901ea4622e600aa91de5a5" category="paragraph"><block ref="d49075162f901ea4622e600aa91de5a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b42b7a52cff89edbddbe4be7d7205378" category="paragraph"><block ref="b42b7a52cff89edbddbe4be7d7205378" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a423820050e5f46f36fc1327c48bb00c" category="inline-link-macro">ボリュームのリバート</block>
  <block id="ac982be345b6d6c694cc959a3be81042" category="admonition">[Complete Resource]を選択すると、Volume Based Snap Restore（VBSR）が実行されます。Azure内ではと呼ばれます<block ref="10b20588aa12150bf8ab4282b1ad89cc" category="inline-link-macro-rx"></block>。</block>
  <block id="ae6bfd9134039fc38306b500f181ae54" category="inline-image-macro">Snapshotに関する重要なメッセージのスクリーンショット</block>
  <block id="09a821f7985f625502cd7570b8109c5b" category="paragraph"><block ref="09a821f7985f625502cd7570b8109c5b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7e811158a8bf3a36519dfb1b03d6594" category="admonition">その他のタイプの導入（オンプレミスANFなど）では、Single File Snap Restore（SFSR）処理をオーケストレーションできます。[File Level]と[According Volume]を選択し、[All]にチェックマークを付けます。次のスクリーンショットを参照してください。</block>
  <block id="836cd106056cddb1cb12770ce199f4bc" category="inline-image-macro">ファイルレベルのスナップショットを選択するスクリーンショット</block>
  <block id="03ea504d9d91015356cd846a5fb336a2" category="paragraph"><block ref="03ea504d9d91015356cd846a5fb336a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bfdf5efcc3e42f260229813559cf78b2" category="inline-image-macro">Snapshotリストアの概要を示すスクリーンショット</block>
  <block id="7909030f74c6404738bed90ef5312d0c" category="paragraph"><block ref="7909030f74c6404738bed90ef5312d0c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ddc6e4c56d490457b2807db132950771" category="list-text">ファイルシステムのマウント（VM-A01）</block>
  <block id="d77b57a63ab8eaff9cc1da11a538179f" category="list-text">ユーザroot：mount -a -t nfs</block>
  <block id="de7ffd3333b7854d5f5d63faebec0c7e" category="list-text">データベースA01+ BackupServerの起動</block>
  <block id="bd61ba14cc9992a52d53c1649007b50f" category="list-text">run_a01を変更し、-q\を追加します（SAP Note 1887068に準拠）。</block>
  <block id="0ea31d20db4af0a1b7f55b3dfd0408a8" category="list-text">ユーザsyba01：run_A01 &amp;</block>
  <block id="cfdf8709565909fee52efd2b8ada2800" category="list-text">ユーザsyba01：run_A01_BS&amp;</block>
  <block id="99f2d082c49f5fd0e481706159ecfa4c" category="list-text">オンラインデータベースsaptools、sybsecurity、sybmgmtdb</block>
  <block id="6ef4181346562481fc58f15f50f04a08" category="list-text">ユーザsyba01：isql -S A01 -U sapsa -X -w 1024</block>
  <block id="cc764b54b873d92b806f0639f7a3f22b" category="list-text">オンラインデータベースのsaptools</block>
  <block id="865a234c767735f76f2827c60f85abd1" category="list-text">オンラインデータベースsybsecurity</block>
  <block id="902eb517c20f52988915334bc496cfc8" category="list-text">オンラインデータベースsybmgmtdb</block>
  <block id="bc1ff6b3db2095ea203daf4929eb73a3" category="list-text">データベースA01のリカバリ</block>
  <block id="bbb2920b6e94fe76efed0e4d9bb7e488" category="list-text">SP dump_history（トランザクション・ログ・ダンプを表示）</block>
  <block id="2e3264bee5c3799d9908279f68b22a4a" category="list-text">必要に応じてトランザクションログダンプをロードします。詳細については、次のドキュメントを参照してください。<block ref="ef6cbe686159c9b75cbe40ffe259de26" category="inline-link-rx"></block></block>
  <block id="511ea467526ed43b8ab12e89c9facbe2" category="list-text">例：'/sybase/a01/log_archives/a01.Tran.20250207.140248.6.000'からTran A01をロードします</block>
  <block id="57685292aeeae0d936e02f3b8c79ea3e" category="list-text">run_A01から-qを削除</block>
  <block id="9d2845b5f6e8a1c9185ddca9866823d6" category="list-text">SAPシステムの起動</block>
  <block id="fd5462a5ba0a3afe8cb39f11792e6c0a" category="list-text">ユーザroot：/etc/init.d/sapinit start</block>
  <block id="c130926d6616542217bb82934bb3882a" category="list-text">ユーザa01adm：startsap</block>
  <block id="0481b5d3f8326ffcd87b030484af3d32" category="section-title">休止と準備</block>
  <block id="9bc5a761c922ebff2efbd814b1b18b65" category="paragraph">リンク：https://help.sap.com/docs/SAP_ASE/4e870f06a15b4bbeb237cca890000421/d9d3ce996bdd415693cdb17663bfc0e3.html?locale=en-US&amp;version=16.0.2.0[SAPヘルプページ]のドキュメントを参照してください。</block>
  <block id="16050ac4ff4ee27ec88b2273d800069d" category="inline-image-macro">SAPヘルプページのコンテンツのスクリーンショット</block>
  <block id="0f7c5358d5b88100058060ed5afb2ac6" category="paragraph"><block ref="0f7c5358d5b88100058060ed5afb2ac6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f06c8ac7e1db032e3c742c956fbdcd67" category="paragraph">SnapCenter SAP ASEプラグインはquiesce databaseコマンドを使用しますが、prepareコマンドに置き換えることもできます。必要に応じて、473、475、479、481、673、675のSybase.pmで変更する必要があります。</block>
  <block id="042b389bcb10221db2bebdd7761bc4f7" category="inline-image-macro">quiesce databaseコマンドのスクリーンショット</block>
  <block id="ef7e48da0a3de2cfd57a9a9d8786dccd" category="paragraph"><block ref="ef7e48da0a3de2cfd57a9a9d8786dccd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="46f2faba494f69f6e11941be04d5eef3" category="section-title">デモの録画</block>
  <block id="22089ff3e2f698bd47ecc1e972ed96b8" category="video-title">インストールと設定ASEプラグイン、ASEデータベースのバックアップ</block>
  <block id="80e1f722ca644623f0957c1529c9e936" category="video-title">ASEデータベースのリストアとリカバリ</block>
  <block id="802889ba8e68d06ab223337c1108b438" category="section-title">外部ドキュメント</block>
  <block id="9f4daa4772f9607a111c8202ad41d9a5" category="inline-link-macro">ANFでのAzureのSAPインストール</block>
  <block id="3fa66eb74457ea2fc821f138385c7519" category="list-text"><block ref="3fa66eb74457ea2fc821f138385c7519" category="inline-link-macro-rx"></block></block>
  <block id="811ec2a3ed919b3da3e6b8fce4d91abc" category="inline-link-macro">Sybase Infocenter - isql</block>
  <block id="798ef01f4a0a22aa92264b8c67766d0c" category="list-text"><block ref="798ef01f4a0a22aa92264b8c67766d0c" category="inline-link-macro-rx"></block></block>
  <block id="1ebaf9b920afffe58a30e658da6e1414" category="inline-link-macro">Sybase Infocenter -トランザクションログダンプをロード</block>
  <block id="c5f913a10f9f276b3b9c2ee2b70671ad" category="list-text"><block ref="c5f913a10f9f276b3b9c2ee2b70671ad" category="inline-link-macro-rx"></block></block>
  <block id="0af20cbeca939760d181deee6b404c63" category="list-text">1887068-SYB：SAP ASEでの外部バックアップとリストアの使用：<block ref="ab4914ef849f1de520395e48bffb8b16" category="inline-link-rx"></block></block>
  <block id="75e06b88ecfdc2f489b785e3b13d2b13" category="list-text">1618817- SYB: SAP ASEデータベース・サーバのリストア方法(UNIX):<block ref="4034096a300ed131652b69eb35a0eb3e" category="inline-link-rx"></block></block>
  <block id="64d669e71de00ac85ee378745f531872" category="list-text">1585981-SYB：SAP ASEのリカバリ性の確保：<block ref="4c89d5c78712c3629963f4741a089c28" category="inline-link-rx"></block></block>
  <block id="5691b76e0c9ec6a7b8b2d9062ed04d20" category="list-text">1588316-SYB：データベースとログの自動バックアップを設定します。<block ref="27fffb2c3ac126d513ed8eb62fc0c072" category="inline-link-rx"></block></block>
  <block id="ebbef4ff98690d25d6060ddc932670b0" category="cell">初期バージョン：ASEデータベースのバックアップ/リカバリ</block>
  <block id="7b4b03f44ad3853577dba2a8cb0ea413" category="video-title">インストールASEプラグイン、設定ASEプラグイン、ASEデータベースのバックアップ</block>
  <block id="6d6e2198d3b7635ccb9480a805db5475" category="paragraph">管理ユーザ<block ref="f1770ad185fb295659ec2c9813d05f31" prefix=" " category="inline-code"></block><block ref="45a97e94fe5e2d9ac461ae04e25474ab" prefix="," category="inline-code"></block>SAP HANAソフトウェアのインストールを開始する前に、SAP HANAホストとストレージコントローラにと<block ref="d2c4ba56a16c77e9f8b02c0e67ddab49" prefix=" " category="inline-code"></block>グループを手動で作成する必要があります。</block>
  <block id="0c8bebe236646d373f29581e17ec5c73" category="paragraph">ユーザ<block ref="f1770ad185fb295659ec2c9813d05f31" prefix=" " category="inline-code"></block>と<block ref="45a97e94fe5e2d9ac461ae04e25474ab" prefix=" " category="inline-code"></block>がSAP HANAホストに作成されます。ストレージコントローラの既存のユーザIDと競合しない一意のIDを選択する必要があります。</block>
  <block id="c3edf19e9cb8e20c8545cc3279f2d388" category="paragraph">マルチホストSAP HANAシステムの場合は、ユーザIDとグループIDがすべてのSAP HANAホストで同じである必要があります。グループとユーザは、および<block ref="c5068b7c2b1707f8939b283a2758a691" prefix=" " category="inline-code"></block>の影響を受ける行をソースシステムから他のすべてのSAP HANAホストにコピーすることで、他のSAP HANAホストに作成され<block ref="8cd4f87abbd9addd26d3a8c86730f48b" prefix=" " category="inline-code"></block>ます。</block>
  <block id="176e74803d5c3f1e178b5783467512c1" category="paragraph">ユーザIDとグループIDは、SAP HANAホストとストレージコントローラで同じである必要があります。グループとユーザは、ストレージクラスタで次のコマンドを入力することで作成されます。</block>
  <block id="475f69cf41ea6662f4b22c6f70e6908a" category="paragraph"><block ref="475f69cf41ea6662f4b22c6f70e6908a" category="inline-link-macro-rx"></block></block>
  <block id="a201805882d53b0d86eb70856415289e" category="inline-link-macro">SnapCenterによるバックアップとリカバリ</block>
  <block id="dde57db73596e74078e45164bdb7bd33" category="paragraph"><block ref="dde57db73596e74078e45164bdb7bd33" category="inline-link-macro-rx"></block></block>
  <block id="ce4589128029e47b2ddedb1d962263a0" category="paragraph">HANA MDCのシングルテナントシステムの標準的なシナリオは、ボリュームをリバートしてリソース全体を使用する場合です。複数のテナントを使用するHANA MDCシステムでは、単一のテナントのみをリストアできます。単一テナントのリストアの詳細については、を参照してください<block ref="39ba00e9dd4ac940d535c2591ecdb23b" category="inline-link-macro-rx"></block>。</block>
  <block id="2f430b9352cf5338fe7797399f3883e2" category="paragraph">第章で説明したように、<block ref="c51f667ca6b84ee5b3dd69f787a989c4" category="inline-link-macro-rx"></block>レプリケーションターゲットは、プライマリFSx for ONTAPファイルシステムの障害から保護するために、別のアベイラビリティゾーンにある2つ目のFSx for ONTAPファイルシステムである必要があります。また、HANA共有ボリュームをONTAP ファイルシステムのセカンダリFSXにレプリケートする必要があります。</block>
  <block id="93d6beb28ac909b433df94308b360fa7" category="paragraph">このドキュメントでは、ONTAP 用FSXでシングルテナントを使用するSAP HANA MDCシングルホストシステムの最も一般的なSnapCenter 構成オプションについて説明します。その他の構成オプションも使用できます。また、場合によっては、複数ホストシステムの場合など、特定のSAP HANAシステムに必要な構成オプションもあります。その他の設定オプションの詳細については、を参照してください<block ref="18e3b66784490dc66af7b05ef4fbd38c" category="inline-link-macro-rx"></block>。</block>
  <block id="3bbbb9b799728fb6c79de967a65e92f1" category="paragraph">バックアップが完了すると、トポロジビューに新しいエントリが表示されます。バックアップ名は、セクションで定義したSnapshot名と同じ命名規則に従います。<block ref="d4f6e24221d73a5247f7989bd3e6279a" category="inline-link-macro-rx"></block></block>
  <block id="e6c902cbc294906423ce6b2ae70a10f0" category="paragraph"><block ref="e6c902cbc294906423ce6b2ae70a10f0" category="inline-link-rx"></block></block>
  <block id="b63a6331fcf18745c27c04a3233c51c4" category="inline-link-macro">SnapCenterを使用したSAPシステムコピーの自動化</block>
  <block id="d9cad4617115b3ee896b14267ba3f6a6" category="paragraph"><block ref="d9cad4617115b3ee896b14267ba3f6a6" category="inline-link-macro-rx"></block></block>
  <block id="d3d2800b62efdcf08b498a4f144f186d" category="inline-link-macro">SnapCenter を使用した SAP HANA システムのレプリケーション、バックアップ、リカバリ</block>
  <block id="2b1990636264002898a26c505ad3162b" category="paragraph"><block ref="2b1990636264002898a26c505ad3162b" category="inline-link-macro-rx"></block></block>
  <block id="78099d72d4f81c04563ad7080b4174b2" category="paragraph"><block ref="78099d72d4f81c04563ad7080b4174b2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="47de212f23a6456e40fe16849e821116" category="paragraph">セクションで説明したように、<block ref="a509ffe3d84aeeb05e1a9d4f9a639ed9" category="inline-link-macro-rx"></block>オフサイトバックアップストレージへのデータバックアップの保持管理はONTAPによって処理されます。SnapCenter は、週次のデフォルトスケジュールを設定してクリーンアップジョブを実行することにより、オフサイトのバックアップストレージで ONTAP がバックアップを削除したかどうかを定期的にチェックします。</block>
  <block id="e93b82dddb398592fbbc36bbfc6c5e17" category="admonition">HANA プラグインが HANA データベースホストに導入されている場合、リソースはデフォルトで自動検出されます。自動検出を個々のホストに対して無効にして、プラグインを展開できます。たとえば、アクティブな HANA システムレプリケーションが有効になっているデータベースホストでは、自動検出がサポートされていない SnapCenter リリース 4.6 では、自動検出を無効にできます。詳細については、を参照してください。<block ref="0551c9f8d8ebcd28b38da16324dadae3" category="inline-link-macro-rx"></block></block>
  <block id="0c7292c62c1cc94addf062306a96fb73" category="paragraph">クリーンアップジョブのスケジュールを調整する方法、または手動更新をトリガーする方法の詳細については、のセクションを参照してください。<block ref="5a4c4e3e1e9ab2e3c32d01e4b8730030" category="inline-link-macro-rx"></block></block>
  <block id="a4dc1aadaff10f5b5494677adef82538" category="paragraph">ログバックアップ保持管理は、デフォルトで有効になっています。必要に応じて、セクションの説明に従って無効にすることができます。<block ref="0551c9f8d8ebcd28b38da16324dadae3" category="inline-link-macro-rx"></block></block>
  <block id="6492882b570626ce56056ce5404fa5a5" category="paragraph">バックアップジョブが開始されます。トポロジビューの下のアクティビティ領域に、前の 5 つのジョブのログが表示されます。バックアップが完了すると、トポロジビューに新しいエントリが表示されます。バックアップ名は、セクションで定義したSnapshot名と同じ命名規則に従います。<block ref="342f9ded041ab8b42ec30676eabb94ee" category="inline-link-macro-rx"></block></block>
  <block id="07ec1aef5b0ee0ab0a5639e1f90682d6" category="list-text">バックアップが完了すると、トポロジビューに新しいエントリが表示されます。バックアップ名は、セクションで定義したSnapshot名と同じ命名規則に従います。<block ref="342f9ded041ab8b42ec30676eabb94ee" category="inline-link-macro-rx"></block></block>
  <block id="fa3b13f642e6145ecf562595773f98b9" category="admonition">作成するポリシーの SnapMirror ラベルは、 SnapCenter ポリシーの設定で定義されたラベルと一致する必要があります。詳細については、を参照してください <block ref="373c556d5f28249363a6b8cd2b7ea9e7" category="inline-link-macro-rx"></block>。</block>
  <block id="fb88152a7e1ea258069d6b61f772ee80" category="list-text">リソースの設定が完了したら、の説明に従ってリソース保護の設定を実行します<block ref="02d11ed9d3c3725020080b7b33c98dad" category="inline-link-macro-rx"></block>。</block>
  <block id="77835e1b5ca05f49add3aaf1d2f76278" category="paragraph"><block ref="77835e1b5ca05f49add3aaf1d2f76278" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b9984569a5f75c51d3680d9d5cbefd58" category="paragraph">セクションで説明したように、<block ref="de12311c69d0a322c9e3189f392aee9b" category="inline-link-macro-rx"></block>ポリシーは通常、リソースとは別に設定され、複数のSAP HANAデータベースで使用できます。</block>
  <block id="e34ce3b231903e44c3708a8295d4abc8" category="admonition">セカンダリポリシーのラベルは、ストレージレイヤのデータ保護設定の SnapMirror ラベルと同じにする必要があります。を参照してください。<block ref="9709887b2e10facf416fc3560603f9b8" category="inline-link-macro-rx"></block></block>
  <block id="f87531f2bfe441193671ca21c1af5569" category="paragraph">災害時のフェイルオーバーの場合は、レプリケーション関係を解除し、ボリュームを DR 本番用サーバにマウントして、 HANA データベースを最後の HANA セーブポイントにリカバリするか、レプリケートされたログバックアップを使用してフォワードリカバリでリカバリする必要があります。の章<block ref="e662c9f6046b2d69b33032921c282f16" category="inline-link-macro-rx"></block>では、必要な手順について説明します。</block>
  <block id="fd8ff870af3225045cae849a29ee9c7c" category="paragraph">各種の設定オプションの詳細については、の章を参照して<block ref="52361ff2780d39b847dad2f6438b837e" category="inline-link-macro-rx"></block>ください。</block>
  <block id="e2a4d74d9da0f37cf75c01a592cccda1" category="list-text">+作業環境の追加*を押します。+<block ref="244734d9a715669af19beac37418cc69" category="inline-image-macro-rx" type="image"></block></block>
  <block id="487444cd9d2276bc7a0457c80118ecc8" category="list-text">[オンプレミス]を選択します。+<block ref="e2dbe10136eb44d00f6ea57dbc61dbf3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f0bcbad0f64ed212671e0e94fe377d3" category="list-text">[オンプレミスのONTAPを検出]*を選択します。+<block ref="c373c9a6bc5f211b8506ef9fbccc4011" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31b63ccfc00a87f4a0934a0009a846df" category="list-text">ONTAPクラスタのIPアドレスとパスワードを追加し、*[検出]*を押します。+<block ref="377b624e95c0a3e30f2686a4faa1ebed" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e6906c1f38dbed8e1e05842ff6286585" category="list-text">これでONTAPクラスタが使用可能になります。+<block ref="f027fc2d9f697bc8a53fef90fc34acd6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fd13c146e0766b30e17141fd79e917bb" category="list-text">[保護]*から*[バックアップとリカバリ]*に移動し、*[ボリューム]*を選択します。+<block ref="37456cd827740a922e3efb17ffba4398" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8d6313bf00288819643ab8e400670ef" category="list-text">[Activate Backup]ボタンを押します。+<block ref="c372536652e895dd7d75f8a09398380b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d9a0e0cda5e1db18333387626bd238f4" category="list-text">目的のオンプレミスストレージシステムを選択し、*[バックアップのアクティブ化]*をクリックします。+<block ref="dec3e4e769c8ac62648df6cd1390fd33" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5fad0330d15b001ea9ddb8076af3574f" category="list-text">[バックアップ]*を選択します。+<block ref="207e65c3d4a711c8387574765084cefe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="63ba88b030ae789f4aed3eb5dd3f7963" category="list-text">SAP HANAデータファイルと同じSVMに格納されているボリュームを選択し、*[次へ]*を押します。この例では、/hana/sharedのボリュームが選択されています。+<block ref="4d3350cffa19f3cd959b7120cc46c077" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f807dc984612de42e2803ec8811279a4" category="list-text">既存のポリシーが存在する場合は、[続行]*をクリックします。+<block ref="0512ce0c50e2b38b84d08a2aeb441a14" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e6492f95475ccdc8c8633e4e3a777fa" category="list-text">[バックアップオプション]*にチェックを入れ、目的のバックアッププロバイダを選択します。この例ではAWSです。+既存のポリシーについては、このオプションをオンのままにします。+使用しないオプションのチェックを外します。+<block ref="076b2db5fd2dd85efd4b4ce9c10783e2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="08c2b3c3f4b0a4da3e410a3d2c7a80b1" category="list-text">新しいバケットを作成するか、既存のバケットを選択します。AWSアカウント設定、regio、アクセスキー、シークレットキーを指定します。[次へ]*を押します。+<block ref="fcd2110b19ec8e0a5c1f57035990560a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bb7816e48b641793b34661b87a385315" category="list-text">オンプレミスストレージシステムの正しいIPspaceを選択し、* Privat Endpoint Configuration *を選択してS3のVPCエンドポイントを選択します。[次へ]*を押します。+<block ref="33e10a566213a6a475d417a3000cbf46" category="inline-image-macro-rx" type="image"></block></block>
  <block id="72811a0b1e049021699cde08c8d273a0" category="list-text">構成を確認し、*[バックアップのアクティブ化]*を押します。+<block ref="3d06d54330c9e8aa49ee9d5c2427605c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ef4e48db7837bb4b18a4999b9b87f08" category="list-text">バックアップが開始されました。+<block ref="942d980a9dd4c5c16db513a30ca11cb8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0fdd2ecdd94b659b9a48810552358736" category="list-text">daily、weekly、またはmonthlyスケジュールタイプでスケジュールポリシーを定義します。+<block ref="4053c2b580ac63fbd3aca168d4d20e18" category="inline-image-macro-rx" type="image"></block> <block ref="e4037ddbb5c26d524521d26f37ae8f52" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0df67991d6f19d68be5a1f806ea33ba8" category="list-text">プルダウンメニューから* Hybrid *を選択します。+<block ref="50b62de2b206c907297feb41ea8c584e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e168337ad80dacfb777dfb5b9d16d1b6" category="list-text">設定メニューで* SnapCenter Servers *を選択します。+<block ref="b8a08223f5755a38417573c44c7115d2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d03f1780fa4abc5c29edf1a7376f442" category="list-text">SnapCenterサーバを登録します。+<block ref="dca8f8475b9f80caacbae88f15d95adf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9288106bf9ce2dc4c764fab82260680" category="list-text">SnapCenterサーバのクレデンシャルを追加します。+<block ref="1f1add5901b34cb27bd11009a4bdf830" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ddc6a127dfd0f26869593648a25756a7" category="list-text">SnapCenterサーバが追加され、データが検出されます。+<block ref="5b4b1c8299226aa8a2b083d1352dba59" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c875706a996c5fcf3565a727ad698f17" category="list-text">検出ジョブが完了すると、SAP HANAシステムが使用可能になります。+<block ref="be655bf65dd56c79dc95dbfa07634cfc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="74e83dca0aa27b732266bd94e5b121c7" category="list-text">設定メニューの*ポリシー*を選択します。+<block ref="e795cb19dc5cd5daf529720180130b91" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6044544f3420c01cf19975ce598455f0" category="list-text">必要に応じて、[ポリシーの作成]*をクリックして新しいポリシーを作成します。+<block ref="d480fe1c409cf4f84bdc7ee238e839c8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5342b2db061cb16c3806776ac15c963" category="list-text">ポリシー名と目的のSnapMirrorラベルを指定し、必要なオプションを選択して*[作成]*を押します。+<block ref="bac41397b788aa7d17de3980c0ed6ddd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e645d4f0db4c9dbeb4ca23b11261a3f3" category="list-text">新しいポリシーが使用可能になります。+<block ref="449c23022bfb13eda82ce7584605e31e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ad5f9eb966551a1c729bc1bb9ae4549" category="list-text">SAP HANAシステムの*[バックアップのアクティブ化]*を選択します。+<block ref="5589cd08880f60d2123164b618a2d3e6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="accd433ef37c2537a94a3c084d2f1907" category="list-text">前の手順で作成したポリシーを選択し、*[次へ]*をクリックします。+<block ref="91384b55a136ca1c585e2c2884eb4bca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c9ad830bea03b11fd05ba79eaf0ec5f6" category="list-text">ストレージシステムとコネクタが事前に設定されているため、バックアップがアクティブ化されます。+<block ref="55f436d2fa7549d6372fa3c35565c4a4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cb0d8c7c771bfde22fa72cdc285079e2" category="list-text">ジョブが完了すると、システムが表示されます。+<block ref="88e6e4ade5b4c937312486c5dd3e1978" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a2eb1ff416cbd26d08b23a37d3c82da7" category="list-text">しばらくすると、バックアップがSAP HANAシステムの詳細ビューに表示されます。+日次バックアップが翌日に表示されます。+<block ref="ac6a034c4eb3ed5655ae8237fc420fb0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ddf969692f0e57fae57aaff1456799a0" category="list-text"><block ref="ddf969692f0e57fae57aaff1456799a0" category="inline-link-macro-rx"></block></block>
  <block id="3c7416820648f591bb3fa1d31f7bcf03" category="paragraph">オンプレミスのSAP HANAバックアップ/リカバリソリューションのセットアップと構成については、を<block ref="159877d61f413e893b32f610f850cc28" category="inline-link-macro-rx"></block>参照してください。</block>
  <block id="552f6a9485fc60bb7f55b449a97dc4e2" category="paragraph">必要なインストールと設定の手順は、3つの領域に分けることができます。+ NetApp Snap CenterでSAP HANAのバックアップ構成が設定されていることを前提条件としています。Snap Center for SAP HANAの最初のセットアップについては、を参照してください<block ref="df47df2d53579a5ed631e4604d5acca1" category="inline-link-macro-rx"></block>。</block>
  <block id="c7ac945124ce2a979ffd642d40432d85" category="list-text">リストアするデータベースの*[詳細の表示]*をクリックします。+<block ref="acd713c1b2b085fc56261aa0cfad9c89" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e60ebdb0aaaf0d4fb13bfd7d896cf8bf" category="list-text">目的のバックアップを選択し、[ストレージ][エクスポート]を選択します。+<block ref="b77d2ab3123688d838c2ad8eb51692dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f9435ac70c6aa2a726c5283ca2bb9bc7" category="list-text">必要なオプションを指定します。+<block ref="49dd4ae51b31524f137f2bd709126245" category="inline-image-macro-rx" type="image"></block></block>
  <block id="08862f459410ef47bf21a7834acd3afd" category="list-text">詳細を確認し、 *[リストア]*をクリックします。<block ref="552dceb28f1276cb45b6d2afff2ae744" category="inline-image-macro-rx" type="image"></block>++この処理では、指定したホストのリストアされたバックアップのストレージエクスポートのみが実行されます。ホストでファイルシステムを手動でマウントし、データベースを起動する必要があります。ボリュームを利用したあと、ストレージ管理者はONTAP クラスタからボリュームを削除できます。</block>
  <block id="cbfd61eacaaf6c950b89d6113ccfe679" category="paragraph"><block ref="cbfd61eacaaf6c950b89d6113ccfe679" category="inline-link-macro-rx"></block></block>
  <block id="3149d7f53627e7a4811812a5342ef935" category="paragraph"><block ref="3149d7f53627e7a4811812a5342ef935" category="inline-link-macro-rx"></block></block>
  <block id="aa00b093336debfc20dbc4fc69cb70d8" category="paragraph"><block ref="aa00b093336debfc20dbc4fc69cb70d8" category="inline-link-macro-rx"></block></block>
  <block id="882fe2ce394c7d9c0385b7a97a8950d8" category="paragraph">この章では、VMFSを使用するVMware環境に固有のSAP HANAシステムのインストールと設定について説明します。その他の一般的なベストプラクティスについては、を参照してください<block ref="06906b11f7ae357da484fb08941ebda3" category="inline-link-macro-rx"></block>。</block>
  <block id="d3450fdafc4244aee5c63cfcfde1e9b1" category="paragraph">詳細については、を参照してください。<block ref="cf0f4aceb2724dbd12ffb8937b40a02d" category="inline-link-macro-rx"></block></block>
  <block id="e710d3810f7e451ec6523f0e9e885294" category="paragraph">システム更新ワークフローの詳細については、次のサイトを参照してください。<block ref="aa00b093336debfc20dbc4fc69cb70d8" category="inline-link-macro-rx"></block></block>
  <block id="cb1c427f849c2d72a11deb653146971d" category="paragraph">バックアップとリカバリ処理を実行するために必要なPrivilegesを使用して、HANAシステムデータベース用にデータベースユーザ「SnapCenter」<block ref="49fdeef268de6c02607d61f7ad78837d" category="inline-link-macro-rx"></block>を作成しました（を参照）。HANA のユーザストアキーは、上記のデータベースユーザを使用して両方のホストで設定する必要があります。</block>
  <block id="2ee7482c97f57196dcd82677dc69cfaf" category="paragraph">SnapCenter 4.6 リソースグループ構成のリストアおよびリカバリ操作は ' 自動検出されたシステム以外のレプリケーション設定と同じですリストアと自動リカバリのすべてのオプションを使用できます。詳細については、テクニカルレポートを参照して<block ref="a89d8332f01e75c4fbbb76087191a365" category="inline-link-macro-rx"></block>ください。</block>
  <block id="a3051f2748b88ccf17cf01b6ad73fabe" category="paragraph">もう一方のホストで作成されたバックアップからのリストア処理については、セクションで説明し<block ref="acf62b44d5a90b4d958a3c0c6b8a0edb" category="inline-link-macro-rx"></block>ます。</block>
  <block id="d852a1a7f80061a0cea060eff4f24745" category="list-text"><block ref="d852a1a7f80061a0cea060eff4f24745" category="inline-link-macro-rx"></block></block>
  <block id="17b4daea6f84861e54f9cacd1bbd3604" category="paragraph">セクションで説明したように、<block ref="4a1e790749396e92e0acae21d9b3b1c2" category="inline-link-macro-rx"></block>ストレージベースのSnapshotバックアップを使用したリストア処理は、リストアが必要なバックアップによって異なります。ローカル・ストレージ・ボリュームでリストアを実行できるかどうか、または他のホストのストレージ・ボリュームでリストアを実行する必要があるかどうかを判断するには、バックアップが作成されたホストを特定することが重要です。</block>
  <block id="e67d97d89f9c40cfae5324b32057baf6" category="paragraph">SAP HANAプラグインの導入オプションとユーザストアの設定の詳細については、テクニカルレポートTR-4614：を参照<block ref="49fdeef268de6c02607d61f7ad78837d" category="inline-link-macro-rx"></block>してください。</block>
  <block id="e1de529a8060a08809a319261affb84a" category="paragraph">SAP HANA Studioを使用したリストアとリカバリの処理は、で説明した手順と同じ<block ref="b4ea72f2d8ae046f29d30c5810a2bb91" category="inline-link-macro-rx"></block>です。</block>
  <block id="634026d49ebac88d23dd5c784943ae14" category="paragraph">SAP HANA Studioを使用したリカバリは、の説明に従って実行されます<block ref="b4ea72f2d8ae046f29d30c5810a2bb91" category="inline-link-macro-rx"></block>。</block>
  <block id="a2033f3b8dbfdd7480dec7410e656b54" category="inline-link-macro">NetApp SAPソリューション–ユースケース、ベストプラクティス、メリットに関する情報</block>
  <block id="ff2639b5be5b7c24ce3cb0874e92d9ad" category="list-text"><block ref="ff2639b5be5b7c24ce3cb0874e92d9ad" category="inline-link-macro-rx"></block></block>
  <block id="baf75f835444ae888fe881657d0d6283" category="inline-link-macro">NetApp SAPソリューション–ユースケース、ベストプラクティス、メリットに関する情報</block>
  <block id="f4f6448ce2463f9796b00cc3d2e3918b" category="list-text"><block ref="f4f6448ce2463f9796b00cc3d2e3918b" category="inline-link-macro-rx"></block></block>
  <block id="f66513fe0c0dd89c03b635c7eabcc830" category="summary">このドキュメントでは、SAP環境で使用されるSAP MaxDBデータベースのSnapCenter統合について説明します。</block>
  <block id="f166cb9cc39aedee7f77baa00ca5bccf" category="doc">SAP MaxDBデータベースのSnapCenter統合</block>
  <block id="daf0bfbf4c03d522775e61c17ffe9098" category="list-text">SAP MaxDBインスタンスの保護</block>
  <block id="1693c5d2f1a92c24b7549371abe319b3" category="list-text">SAP MaxDBインスタンスのリストアとリカバリ</block>
  <block id="6ee98ff0301b1b81da1259b1c00384a2" category="paragraph">デモセンターで実行されているSAPシステム用のSnapCenter MaxDBプラグインの実装例。</block>
  <block id="dfb908252f4cf9f2318caf71de4f0c4d" category="admonition">この実装では、最小限必要なボリューム構成について説明します。Data Dump Backups and Log Dump Backups、Backup Templateなどは、SAP Note「1928060 - Data backup and recovery with file system backup」およびそこから参照されている注意事項に従って設定します。</block>
  <block id="c0f0a01495337e45004126fe3283cba7" category="inline-link-macro">MS Techcommunityブログ</block>
  <block id="130dc0190171efb81796a0297ba703fd" category="paragraph">または、に記載されているボリューム構造を<block ref="6753b78b633e0f13d11c737182927c1b" category="inline-link-macro-rx"></block>使用することもできます。</block>
  <block id="4ddb29c6888b432efa02ec9fb0a84a03" category="paragraph"><block ref="4ddb29c6888b432efa02ec9fb0a84a03" category="inline-image-macro-rx" type="image"></block></block>
  <block id="70c702908f3d7b1a5e1c952c1cddbde7" category="cell">SAP MaxDB</block>
  <block id="0a5572b629ec9fa65ad24c56d2c27f31" category="cell">DBMServer 7.9.10ビルド004-123-265-969</block>
  <block id="87aecc495c6246f65bb89f10dfaa2566" category="section-title">MaxDBボリューム設計</block>
  <block id="1d8fd364d8fe152ea1237320143b7f6b" category="paragraph">SAP MaxDBデータベースのバックアップ/リカバリとクローンのユースケースを有効にするには、以下の最小ボリュームレイアウトを使用する必要があります。この設定例では、&lt;SID&gt;：M02を使用しています。</block>
  <block id="98da32ee1fdcac3057e30a217ed3769e" category="cell">&lt;SID&gt;_ sapmaxdb</block>
  <block id="a00d772b1aad0352b712af71b4506885" category="cell">SAPDB</block>
  <block id="38c0b70aaeddb5c3c7a8472a26f17656" category="cell">/SAPDB</block>
  <block id="39edb5d9724717eec9ad2e192e1517fa" category="cell">MaxDB関連ファイルの親ディレクトリ</block>
  <block id="ca1d88556371f10ab0b45fb997104dc3" category="cell">/SAPDB/SAPDB/SAPLOG &lt;SID&gt;</block>
  <block id="408f82b8bed591c64dd89d55ad0063a2" category="cell">REDOログ（別のボリュームに配置される可能性あり）</block>
  <block id="942e622949a5bd49cb994af63ce085b7" category="cell">/SAPDB /&lt;SID&gt;/バックアップ</block>
  <block id="422c341e300196f62925cb73ca1e76ba" category="cell">ダンプバックアップ（データ+ログ）（別のボリュームに配置可能）</block>
  <block id="9c51816c474bb23a990ab22eddcd57a1" category="cell">sdb</block>
  <block id="e25bbd1172ff4d911309f1ed82293c2d" category="cell">/home/sdb</block>
  <block id="6a0a273dad7ed9db5c2df121ffa2df75" category="cell">ユーザsdbのホームディレクトリ</block>
  <block id="a2e0d50bcb6fa78fe16a9461bc5cac3d" category="cell">SQD &lt;sid&gt;</block>
  <block id="7d5b420c29b33485e77c00769e947212" category="cell">/home/sqd &lt;sid&gt;</block>
  <block id="8e536073662c5a93867d92ba0916eccf" category="cell">ユーザsqd &lt;sid&gt;のホームディレクトリ</block>
  <block id="0ec309f4f7b5eb19eea236818ba1a248" category="cell">&lt;SID&gt;データ</block>
  <block id="d3ccf4573731218db5232391074d90e6" category="cell">SAPDATA</block>
  <block id="8cb684b18793b33eaab0c01fe1b73400" category="cell">/SAPDB/SAPDB/sapdata &lt;SID&gt;</block>
  <block id="36f28041f70ed6aef9c7de573903fe3a" category="cell">DBデータファイル（SID）</block>
  <block id="753ca37bf9f50c885f9919400e0cf62c" category="section-title">データベースM02を保護する手順</block>
  <block id="e54c5fef93809c5ee1f107aa2d7b5136" category="list-text">ホストの前提条件の確認（sap-lnx25）</block>
  <block id="379596987d6514d8c3369f48694d2b58" category="list-text">データベースの前提条件の確認(M02)</block>
  <block id="c50429ec3d1652661f4ce7bd37bec313" category="list-text">ホストへのSnapCenterエージェントの導入/インストール（sap-lnx25）</block>
  <block id="6471237660f87e49fdadb866beb10434" category="section-title">データベースの前提条件–バックアップテンプレートの作成、ログバックアップの有効化</block>
  <block id="3002fc072613e2605313c1f6fc6f5146" category="list-text">データおよびログのバックアップ用ディレクトリの作成（/sapdb/m02/backup/data、/sapdb/m02/backup/log–owner sdb：sdba–Permissions 755）</block>
  <block id="6e145715c7c00349c1158fb1650beaac" category="list-text">データベースM02に接続（OS-user sqdm02として）</block>
  <block id="b9cad072bc4b889dd02244ada2830244" category="list-text">dbmcli -d M02 -uコントロール、&lt;password&gt;</block>
  <block id="84bb77c0e4e5f63d5bdb76c1afec8418" category="list-text">SAP Note 1928060に従って、データファイルバックアップテンプレート（M02_DATA）を作成します。</block>
  <block id="e2c0be8caba0f7ec551b85600c65e01e" category="list-text">backup_template_create M02_data to file /SAPDB/M02/backup/data/M02_data content data</block>
  <block id="fa81417f7bc77ffc5d6a28ce79cc79f8" category="list-text">SAP Note 1928060に従って、データバックアップテンプレート（M02_log）を作成します。</block>
  <block id="6ef7769ec752d34db5d261d2c821e1ef" category="list-text">backup_template_create M02_logをファイル/SAPDB/M02/backup/log/m02_logコンテンツログに保存</block>
  <block id="ea67bac90b50c9492cb8af9f0c739a7b" category="list-text">SAP Note 1928060に従って、データSnapshotバックアップテンプレート（M02_snap）を作成</block>
  <block id="e2a5f5e4ac8949f386f637b599b22f50" category="list-text">外部スナップショットへのbackup_template_create M02_snap</block>
  <block id="6dcb0543fa95a127d6dd5b3267952031" category="list-text">ログバックアップを有効にするには偽装バックアップを作成してください</block>
  <block id="67fc08132555f0a263fa74b70caebaa7" category="list-text">util_connect</block>
  <block id="8ed655d591444790b35ad2c70331d390" category="list-text">バックアップ開始M02_SNAP</block>
  <block id="742c4e02c14498dd71a08510408acb19" category="list-text">backup_finish M02_snap ExternalBackupID first_full_fake_backup</block>
  <block id="734dc6ca73c13723dff166113c12efcf" category="list-text">データベースロギングモードの切り替え</block>
  <block id="51126bc755cf27fa89bc2172620e3fe9" category="list-text">自動ログオフ</block>
  <block id="951d01f74ef0790e1c678fb835a29281" category="list-text">AutoLog_on M02_log間隔300</block>
  <block id="e1b856c5e1605f8a3756bee1ba2a84b5" category="list-text">AutoLog_show</block>
  <block id="6f9aaac2c5c6b4e23c894bb6b735d122" category="section-title">sap-lnx25をホストするためのSnapCenterエージェントの配備</block>
  <block id="783e0b114414bdadf238d4d4650dcd61" category="paragraph">詳細については、を参照して<block ref="29e7bd256c94454af51a7602a8b13056" category="inline-link-macro-rx"></block>ください。</block>
  <block id="e13cd62d46c4ef8c2b89c111253512d4" category="paragraph">[SAP MaxDB and Unix File Systems Plugins]を選択します。</block>
  <block id="b464e178115890af74f29c5a7d2bc249" category="inline-image-macro">[Add Host]ユーザインターフェイスのスクリーンショット</block>
  <block id="27206d04ed005163d3dce26ea91b4cb1" category="paragraph"><block ref="27206d04ed005163d3dce26ea91b4cb1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1e3db4314c6cbec628c5a993df385f00" category="section-title">データベースM02のSnapCenterリソース構成の作成</block>
  <block id="9131dcbb4d30fe63a40c5f79b71ab085" category="paragraph">リソース-&gt; SAP MaxDB -&gt;リソースの追加</block>
  <block id="08a6731617765122f6f7a86fe557ae05" category="inline-image-macro">[Add SAP MaxDB Resource]ユーザインターフェイスのスクリーンショット</block>
  <block id="a3719ee768665a91e73f3c43bef723a4" category="paragraph"><block ref="a3719ee768665a91e73f3c43bef723a4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0f9b1f51175978726eba77e15caf8e00" category="admonition">パスワードに特殊文字が含まれている場合は、バックスラッシュでマスクする必要があります（例：Test!123! -&gt;テスト\!123\!)。</block>
  <block id="3d90e94ed469fbc6329c02909f14d49d" category="inline-image-macro">[Add SAP MaxDB Resource Details]ユーザインターフェイスのスクリーンショット</block>
  <block id="28af7eb5664ba789a5a68751654645b6" category="paragraph"><block ref="28af7eb5664ba789a5a68751654645b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a65dda90b1f378bc5a7fbe529b293a26" category="inline-image-macro">[Provide Storage Footprint Details]ユーザインターフェイスのスクリーンショット</block>
  <block id="171fb59dfa6087b19d76feb6705d8cc3" category="paragraph"><block ref="171fb59dfa6087b19d76feb6705d8cc3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb539d1768266e9190f002577ac3548c" category="inline-image-macro">[Resource Settings]ユーザインターフェイスのスクリーンショット</block>
  <block id="bee9f7dcdcf1622073ad800c39972e6f" category="paragraph"><block ref="bee9f7dcdcf1622073ad800c39972e6f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0729e4fcbe9380d6dff801434839d4ec" category="paragraph">次の表に、 MaxDB プラグインのパラメータを示します。このパラメータの設定と説明が表示されます。</block>
  <block id="241f5d27a590d5e5b612bae3bf105b2c" category="cell">handle_logWRITER</block>
  <block id="ce87fd39231d4d7db946d96ee7adb8ad" category="cell">suspend logwriter （ N ）または resume logwriter （ Y ）操作を実行します。</block>
  <block id="26fcd8eebf13e45e4f4520e256ff553d" category="cell">DBMCLICMD</block>
  <block id="ce100735b0ca5fc5eb684f306ba710e2" category="cell">path_to dbmcli_cmd</block>
  <block id="74799cbd6aaf1f1da4f350df7b6b6e93" category="cell">MaxDB の dbmcli コマンドへのパスを指定します。設定しない場合、検索パス上の dbmcli が使用されます。</block>
  <block id="c94f0f4455fdd8e341a73b83da578bf9" category="cell">SQLCLICMD</block>
  <block id="15412e4627d0a544a1e878418f28723e" category="cell">path_to _sqlcli_cmd</block>
  <block id="e4b679b0ac85a6b0c608b7010d7fc583" category="cell">MaxDB の sqlcli コマンドのパスを指定します。設定しない場合、 sqlcli は検索パスで使用されます。</block>
  <block id="db683decfdd5d3cc222e83b54fb09420" category="cell">MaxDB の更新 _HIST_LOG</block>
  <block id="6196df101774cafedcfcee4403c8fb1a" category="cell">MaxDB バックアッププログラムに MaxDB 履歴ログを更新するかどうかを指示します。</block>
  <block id="eaee3ba30eedf9ce184f7af88130f2bb" category="cell">MaxDB のバックアップテンプレート</block>
  <block id="8ff4ed5f680f0c11a7c3eee002c1854f" category="cell">template_name（例：<block ref="3500c828be616273f8655bdcdff7dba6" prefix=" " category="inline-code"></block>）</block>
  <block id="0850912b8455d0f2c44e78183b684e67" category="cell">各データベースのバックアップテンプレートを指定します。テンプレートはすでに存在している必要があり、外部タイプのバックアップテンプレートである必要があります。MaxDB 7.8 以降の Snapshot コピー統合を有効にするには、 MaxDB のバックグラウンドサーバ機能を持っていて、 MaxDB バックアップテンプレートをすでに設定している必要があります。</block>
  <block id="18fb2d3fa03afbc6e0b5bd4506577fbf" category="cell">MaxDB の BG_server_prefix</block>
  <block id="97236ee83edadf884e2c7943aa318268" category="cell">BG_SERVER_PREFIX（例：<block ref="2143ca02572a144ceb1042eb893b28c6" prefix=" " category="inline-code"></block>）</block>
  <block id="ddca9ca1b092edef223da460a559a1de" category="cell">バックグラウンドサーバ名のプレフィックスを指定します。MaxDB_backup_templatesパラメータが設定されている場合は、MaxDB_BG_SERVER_PREFIXパラメータも設定する必要があります。プレフィックスを設定しない場合は、デフォルト値na_bg_databaseが使用されます。</block>
  <block id="f50da299b4aee041df8991047c28dfe2" category="inline-image-macro">[Add MaxDB Resource]ユーザインターフェイスのスクリーンショット</block>
  <block id="10468196b29a95224b22a984ecce5e0e" category="paragraph"><block ref="10468196b29a95224b22a984ecce5e0e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8eb226c6a9027dc170fe9241ae4f5c11" category="paragraph">これで、全体的な保護コンセプトに従って設定を終了し、バックアップをスケジュールできます。</block>
  <block id="7a61daaabddeaa552563ad231ca1cb42" category="paragraph"><block ref="7a61daaabddeaa552563ad231ca1cb42" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be81f9c775d992dc9f37571c9792b993" category="paragraph"><block ref="be81f9c775d992dc9f37571c9792b993" category="inline-image-macro-rx" type="image"></block></block>
  <block id="915da8a2e3469fef1e4a6d9c3f639b0d" category="paragraph"><block ref="915da8a2e3469fef1e4a6d9c3f639b0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2830663f1fa6c8b063f13a604cd94295" category="paragraph"><block ref="2830663f1fa6c8b063f13a604cd94295" category="inline-image-macro-rx" type="image"></block></block>
  <block id="96a607a538e225f2b43ca8c459b1f891" category="paragraph"><block ref="96a607a538e225f2b43ca8c459b1f891" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0e0ea073f92175f1df05cda424d57256" category="paragraph"><block ref="0e0ea073f92175f1df05cda424d57256" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b2b50f8959feb28aaacd15900dd5450" category="section-title">システムM02をリカバリする手順</block>
  <block id="ba75ed29085cae2c1c3577415b5d485b" category="list-text">SAPシステムM02（データベースを含む）の停止、sapinitの停止</block>
  <block id="6de7c5eeb5b548fc647f882fdb4a1cce" category="list-text">ファイルシステム/SAPDB/M02/sapdataのアンマウント</block>
  <block id="2994f768f080c3d6ac9fa4ad76363cdc" category="list-text">ボリュームM02_dataのリストア（SnapCenterを使用）</block>
  <block id="3ec0d2a56d059cb3ffb78345dbaf6839" category="list-text">ファイルシステム/SAPDB/M02/sapdataをマウント</block>
  <block id="fc839d17f78a44bb8ac0317f029278c7" category="list-text">データベースM02の起動と接続（管理者モード）</block>
  <block id="d37ddad3c85bc337c222b83ecb25c31b" category="list-text">バックアップ情報の収集</block>
  <block id="7d01eaa7535040d539ec4ab6fafae00b" category="list-text">データベースデータバックアップのリカバリ</block>
  <block id="f3f79ab5e1e9251c491171145c968f5a" category="list-text">データベースログバックアップをリカバリします。</block>
  <block id="ad3f45275c9672890425827b35ed9ee7" category="list-text">データベースの停止</block>
  <block id="f35ae5f48268b85f17a67204c6ca46e2" category="list-text">sapinit、SAPシステムM02の起動</block>
  <block id="cd30d0baa772b20bd80c3bef015bd5fe" category="section-title">インスタンスM02のリカバリ</block>
  <block id="680cd86add5dfd55f8b43b6570185f0b" category="list-text">ホストsap-lnx25でSAPシステム+ DB M02を停止</block>
  <block id="2bb41b85297c8ddd73957fbf42dec9f1" category="list-text">ユーザーm02adm：停止</block>
  <block id="118e98c0c7c554342b9c81fe49394afc" category="list-text">オプション–データベースが正常に停止していない場合–ユーザ：sqdm02</block>
  <block id="1d60565a754d421f6088ddcf1654107a" category="list-text">DB_OFFLINE</block>
  <block id="0b695e525da4e226c798133981915322" category="list-text">ユーザroot：umount /sapdb/m02/sapdata</block>
  <block id="02fc05541ba1b3df65829d47aa433c3a" category="list-text">SnapCenter GUI：リストアに必要なバックアップを選択</block>
  <block id="4d8218105f5450c4c738678875707b73" category="inline-image-macro">[Manage Copies]ユーザインターフェイスのスクリーンショット</block>
  <block id="f13cb2a47649269ebf085616305239d7" category="paragraph"><block ref="f13cb2a47649269ebf085616305239d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="157a340cbb91e160dcc49cd2ea5324ec" category="admonition">[Complete Resource]を選択すると、Volume Based Snap Restore（VBSR）が実行されます。Azure内ではと呼ばれます<block ref="10b20588aa12150bf8ab4282b1ad89cc" category="inline-link-macro-rx"></block>。ANF導入の場合*完全なリソースのみが提供されます*。</block>
  <block id="4fcea016fb02654e4451380086053b2f" category="inline-image-macro">上記のプロセス中に表示されるメッセージのスクリーンショット</block>
  <block id="2746c2f60e9370977a5040c33aafc52d" category="paragraph"><block ref="2746c2f60e9370977a5040c33aafc52d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f18b09520b97fc1232b4223d6f9e61be" category="admonition">その他のタイプの導入（オンプレミスANFなど）では、Single File Snap Restore（SFSR）処理をオーケストレーションできます。[File Level]と[According Volume]を選択し、[All]にチェックマークを付けます。次のスクリーンショットを参照してください。</block>
  <block id="48b96a2bbf0fc0ff50c348f4078b8f38" category="inline-image-macro">[Restore from resource]ユーザインターフェイスのスクリーンショット</block>
  <block id="04c312997073caad4a1760402505ad7e" category="paragraph"><block ref="04c312997073caad4a1760402505ad7e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9a4761f745b1996ff105e542ef8541bc" category="paragraph"><block ref="9a4761f745b1996ff105e542ef8541bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c17fe7087b43d719b6fbaa417940bff2" category="list-text">ファイルシステムのマウント（sap-lnx25）</block>
  <block id="0e4cf765f9d260132915730eedf9163d" category="list-text">ユーザルート：mount /sapdb/m02/sapdata</block>
  <block id="f0bceccd8e208786f4d1ac965db5e662" category="list-text">データベースM02を管理者モードで起動し、接続します。</block>
  <block id="a33a48bb5c3e91b7f5fba16424ad6b0b" category="list-text">ユーザ：sqdm02：dbmcli -d m02 -uコントロール、&lt;password&gt;</block>
  <block id="4f32591232b4ade18be079dba527d520" category="list-text">db_admin</block>
  <block id="b7ce49d5c524ea00a76408c5477c57d1" category="list-text">DB_CONNECT</block>
  <block id="1fb77ffd4a322cfb201328f4f75a76ee" category="list-text">backup_history_open</block>
  <block id="afcb1c5bddb44cb361cc77f04ad75045" category="list-text">backup_history_list -cラベル、アクション、ページ、停止、メディア-r last</block>
  <block id="9165f67adb4d4f00b633546ebead0cd5" category="inline-image-macro">コマンド出力のスクリーンショット</block>
  <block id="696d72cb21d1cb402bf8db59547ebbdb" category="paragraph"><block ref="696d72cb21d1cb402bf8db59547ebbdb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="acbd33dee96c00573f0c4d35196e9aea" category="list-text">データベースをリカバリ</block>
  <block id="81a0e41b5c1ab0b65a1f0c486318eafc" category="list-text">データバックアップのリカバリ</block>
  <block id="56d3f20fd4b6615a991150a7aa0f1b10" category="list-text">RECOVER_START M02_SNAP DATA ExternalBackupID DAT_000000008</block>
  <block id="c76f7ea7119226c19014fd2a4e17f4e1" category="paragraph"><block ref="c76f7ea7119226c19014fd2a4e17f4e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d397e0342cfcf244412c03ea795c103" category="list-text">必要に応じてログバックアップをリカバリ</block>
  <block id="a4697372319379ed6951f1594870e351" category="list-text">例：RECOVER_START M02_LOG LOG 147</block>
  <block id="f4ed4cbd3ddfacfe0bc5dd55829a765d" category="paragraph"><block ref="f4ed4cbd3ddfacfe0bc5dd55829a765d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e535067fb0e6618b9c68dda026cac5c3" category="list-text">オプション情報–特定のタイムスタンプに自動リカバリします（専用のデータ/ログバックを指定する必要はありません）。</block>
  <block id="591edc368b2822787ebd72bcaa55a9b4" category="list-text">例：20250520 200000までの自動リカバリ</block>
  <block id="edcdd82e6b81c2dc7b051abb16188578" category="paragraph"><block ref="edcdd82e6b81c2dc7b051abb16188578" category="inline-image-macro-rx" type="image"></block></block>
  <block id="abe8af8c2db93fb488c3dde90e0a4f23" category="list-text">リカバリを終了してデータベースを停止</block>
  <block id="b26c494f22f551919df25b2e10daff6c" category="inline-link-macro">MaxDBのマニュアル</block>
  <block id="7e618526b904ac863da889fdada8abc4" category="admonition">リカバリの詳細については、<block ref="185f708352a6f464ad9524197367f940" category="inline-link-macro-rx"></block></block>
  <block id="c538fa54884ff0f27d5054d901e290bf" category="list-text">ユーザm02adm：startsap</block>
  <block id="ef1084840a1cab475120152d30f8c308" category="video-title">MaxDBプラグインのインストール、MaxDBプラグインの設定、MaxDBデータベースのバックアップ</block>
  <block id="59431baed42eae3aa15105caa9483238" category="video-title">MaxDBデータベースのリストアとリカバリ</block>
  <block id="47889456230ce6a828c1282007f7eae9" category="list-text"><block ref="47889456230ce6a828c1282007f7eae9" category="inline-link-macro-rx"></block></block>
  <block id="e994faf42b3f3641546418a601a8ea87" category="inline-link-macro">MaxDBリカバリのマニュアル</block>
  <block id="a60dd82c8ad1200ae88b41830606e3ba" category="list-text"><block ref="a60dd82c8ad1200ae88b41830606e3ba" category="inline-link-macro-rx"></block></block>
  <block id="1fec6630b0d82dded25f6004db0a3cb4" category="inline-link-macro">1928060 -ファイルシステムのバックアップを使用したデータのバックアップとリカバリ</block>
  <block id="cf39794bb65b58653699e63d76e19e5d" category="list-text"><block ref="cf39794bb65b58653699e63d76e19e5d" category="inline-link-macro-rx"></block></block>
  <block id="7dea35dbfd35ab01adaee66cbde84338" category="inline-link-macro">2282054 -バックグラウンドDBMサーバ</block>
  <block id="49518c212048dab7df495d7f61c5c721" category="list-text"><block ref="49518c212048dab7df495d7f61c5c721" category="inline-link-macro-rx"></block></block>
  <block id="20042756e86ce9c7f296c5970b4434eb" category="inline-link-macro">616814 -スプリット・ミラーまたはスナップショットのログ・ライターを中断します</block>
  <block id="cfb1403bdd1f82e8dbd27282db7bb507" category="list-text"><block ref="cfb1403bdd1f82e8dbd27282db7bb507" category="inline-link-macro-rx"></block></block>
  <block id="b17b6a754a3973cd6b5fc3893f7b399a" category="inline-link-macro">HOWTO - Database Manager CLIによるSAP MaxDBバックアップ</block>
  <block id="530f9a50fda9ec85fbb7f59a55ade2da" category="list-text"><block ref="530f9a50fda9ec85fbb7f59a55ade2da" category="inline-link-macro-rx"></block></block>
  <block id="6187303e9465b0a3952347edd1b972a8" category="inline-link-macro">HOWTO - Database Manager CLIを使用したSAP MaxDBリカバリ</block>
  <block id="e71444f2cc500bd8ae2346b5d0119a5d" category="list-text"><block ref="e71444f2cc500bd8ae2346b5d0119a5d" category="inline-link-macro-rx"></block></block>
  <block id="8268571eb80f1c5f354648848815bc56" category="list-text"><block ref="8268571eb80f1c5f354648848815bc56" category="inline-link-macro-rx"></block></block>
  <block id="cf03cdae2ad7ba4a0223424315de78db" category="list-text"><block ref="cf03cdae2ad7ba4a0223424315de78db" category="inline-link-macro-rx"></block></block>
  <block id="5ff448003ebaf80171d13e6e73920334" category="cell">2025年5月</block>
  <block id="aec8b279f6bbfa44c38f060c1a4d9c75" category="cell">初期バージョン–バックアップ/リカバリMaxDBデータベース</block>
  <block id="f43189b608fe679c2f5bfe1fa09a6987" category="paragraph"><block ref="f43189b608fe679c2f5bfe1fa09a6987" category="inline-image-macro-rx" type="image"></block></block>
  <block id="41fc9942bec5239323b5dd801f5bee58" category="list-text"><block ref="41fc9942bec5239323b5dd801f5bee58" category="inline-link-macro-rx"></block></block>
  <block id="d2904072197c733bd10bb3985e8b304d" category="paragraph">SAP HANAのバックアップとリカバリのソリューションの詳細については、を参照してください<block ref="0a5fce897a9b356de9fbfc0e516c7392" category="inline-link-macro-rx"></block>。</block>
  <block id="b6e1c7dc173d5846c1c02517be7f17ef" category="paragraph">SAP HANAディザスタリカバリソリューションの詳細については、を参照してください<block ref="9e073a57f7a3e69defc613fe0d2d690f" category="inline-link-macro-rx"></block>。</block>
  <block id="da49521caaf686b5ddf9ad44b46ff253" category="list-text"><block ref="da49521caaf686b5ddf9ad44b46ff253" category="inline-link-macro-rx"></block></block>
  <block id="4d1bc709bfba771f4ff18cae8cad5821" category="list-text"><block ref="4d1bc709bfba771f4ff18cae8cad5821" category="inline-link-macro-rx"></block></block>
  <block id="d1b4413cecd0416bbd7ac40af6b252af" category="list-text"><block ref="d1b4413cecd0416bbd7ac40af6b252af" category="inline-link-macro-rx"></block></block>
  <block id="2d7472524212d38654f8712f8528de00" category="list-text">「link：hana-fas-fc-storage-controller-setup.html# initiator-groups」の説明に従って、HANAサーバのWorld Wide Name（WWN；ワールドワイド名）を含むイニシエータグループ（igroup）<block ref="a30a5bc4156d5efb64f9f758389889ed" category="inline-xref-macro-rx"></block>を作成します。</block>
  <block id="ca4e28b2d73ad674c0052aaa001a3fbe" category="admonition">この<block ref="3a8e4afa851609127d534b04e7d29c08" prefix=" " category="inline-code"></block>ツールはNetApp Host Utilitiesに含まれており、各SAP HANAホストにインストールする必要があります。詳細については、セクションを参照してください。<block ref="f75b5be3cddbf151c8e809ce5b0c771a" category="inline-link-macro-rx"></block></block>
  <block id="60c724065bc332dd941c269b2a5bf0f6" category="paragraph">セクションで説明したタスクに加えて<block ref="c2cc83b43967a333625e03c0c4e4e13e" category="inline-link-macro-rx"></block>、新しい追加データボリュームの追加のマウントポイントおよび<block ref="520a0201c5bdee02e1c617ad8c8e2596" prefix=" " category="inline-code"></block>エントリを作成し、新しいボリュームをマウントする必要があります。</block>
  <block id="d810b6120408f928c8d432b920338406" category="paragraph"><block ref="d810b6120408f928c8d432b920338406" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5098abcd11f62e55614ae7323201c3d" category="admonition">SAP HANAのバックアップとリカバリのソリューションの詳細については、を参照してください<block ref="0a5fce897a9b356de9fbfc0e516c7392" category="inline-link-macro-rx"></block>。</block>
  <block id="34bab9646046fb6a7d08a42312ff5c0a" category="paragraph">SAP HANAディザスタリカバリソリューションの詳細については、を参照してください<block ref="9e073a57f7a3e69defc613fe0d2d690f" category="inline-link-macro-rx"></block>。</block>
  <block id="1e72fb5aa3fd5c3621864de3f10cf8cf" category="admonition">nconnectをNFSv4.xで使用する場合は、次のルールに従ってNFSv4.xセッションスロットの数を調整する必要があります。セッションスロットの数は&lt;nconnect value&gt; x 64と等しくなります。ホストでこれを確認し<block ref="1f544d9bef8ddb99793e0436d6362920" prefix=" " category="inline-code"></block>てから再起動します。サーバー側の値も調整する必要があります。で説明されているように、セッションスロットの数を設定します。<block ref="b7e4d6f25b44e37cc0e24fba4db18d4d" category="inline-link-macro-rx"></block></block>
  <block id="11cfc0b9a7c7ee9b54ba196748406dc0" category="admonition">SAP HANA ホストの数と使用されている接続速度に応じて、アクティブな物理ポートの数を変える必要があります。詳細については、を参照してください<block ref="ca84783cbbdbff2bbccb3b70787d54c2" category="inline-link-macro-rx"></block>。</block>
  <block id="44724b96d03ee7072b74f4df6d742efa" category="admonition">数値IDを無効にするにはユーザ管理が必要であることに注意してください。詳細については、を参照してください。<block ref="171b753eb8efc5cb753cd0dd58fc8169" category="inline-link-macro-rx"></block></block>
  <block id="11eae0cf8eb7987977f94d2eaeba6b9d" category="admonition"><block ref="f606fb2da2ae329157d791c6955a0337" prefix="(" category="inline-code"></block>セクションの説明に従って、NFSv4ドメインIDをすべてのLinuxサーバで同じ値に設定する必要があります。<block ref="171b753eb8efc5cb753cd0dd58fc8169" category="inline-link-macro-rx"></block></block>
  <block id="81ed243e0aa50a10ea422c0e85319d46" category="paragraph"><block ref="81ed243e0aa50a10ea422c0e85319d46" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e6b7e7bf86715e60d66e0c4fd326c955" category="paragraph">SnapCenterを使用したSAP HANAバックアップ/リカバリソリューションの詳細については、を参照してください<block ref="0a5fce897a9b356de9fbfc0e516c7392" category="inline-link-macro-rx"></block>。</block>
  <block id="5b30611fb0620adc53c494ca5e20e5d0" category="paragraph">SnapCenterを使用したSAP HANAディザスタリカバリソリューションの詳細については、を参照してください<block ref="9e073a57f7a3e69defc613fe0d2d690f" category="inline-link-macro-rx"></block>。</block>
  <block id="e409da5f49cbcd0d5f6f423a57a43e78" category="paragraph">ストレージを仮想マシン（ VM ）に接続する方法はいくつかあります。推奨される方法は、ストレージボリュームと NFS をゲストオペレーティングシステムから直接接続することです。このオプションについては、を<block ref="d1b4413cecd0416bbd7ac40af6b252af" category="inline-link-macro-rx"></block>参照してください。</block>
  <block id="a49d9f984a7158fad1ccd4db2fb62927" category="paragraph">特定のLUNの最大スループットとして1000MB/秒を使用することを推奨します。アプリケーションがより多くのスループットを必要とする場合は、LUNストライピングを備えた複数のLUNを使用して、必要な帯域幅を提供する必要があります。このガイドでは、セクションで、Linux LVMをベースとしたSAP HANAの例を紹介します<block ref="b31e32426f0cc5eb025339912edb2d91" category="inline-link-macro-rx"></block>。</block>
  <block id="60e3819e2b8858d6ed1ed9bf9b7ea912" category="paragraph"><block ref="60e3819e2b8858d6ed1ed9bf9b7ea912" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f1ae89b567878eafdf31bc9d9aab95c" category="admonition">この<block ref="3a8e4afa851609127d534b04e7d29c08" prefix=" " category="inline-code"></block>ツールはNetApp Host Utilitiesに含まれており、各SAP HANAホストにインストールする必要があります。詳細については、セクションを参照してください。<block ref="1970c05dedf021dcfe0fe0afe84eb11e" category="inline-link-macro-rx"></block></block>
  <block id="21a371be04b3decb0d2708ebbabb53cb" category="paragraph"><block ref="21a371be04b3decb0d2708ebbabb53cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03d4ca68b32ea9f2f635fcbcef451ff5" category="paragraph"><block ref="03d4ca68b32ea9f2f635fcbcef451ff5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ddb07fca4392fed73f0b74e31f3d9094" category="paragraph">セクションで説明するタスクに加えて、<block ref="adf8569c32b23d1a6f4cc05867010ec6" category="inline-link-macro-rx"></block>新しい追加データボリューム用の追加のマウントポイントとfstabエントリを作成し、新しいボリュームをマウントする必要があります。</block>
  <block id="94e6c9533c4e5938e1269e20fd8bbcdb" category="paragraph"><block ref="94e6c9533c4e5938e1269e20fd8bbcdb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b4a4c5cba74229745c4b5f00c36c078" category="admonition">nconnectをNFSv4.xで使用する場合は、次のルールに従ってNFSv4.xセッションスロットの数を調整する必要があります。セッションスロットの数は&lt;nconnect value&gt; x 64と等しくなります。ホストでこれを確認し<block ref="1f544d9bef8ddb99793e0436d6362920" prefix=" " category="inline-code"></block>てから再起動します。サーバー側の値も調整する必要があります。で説明されているように、セッションスロットの数を設定します。<block ref="256a13ffa427d2ae7d891aa66668354c" category="inline-link-macro-rx"></block></block>
  <block id="2f163d27e5ecec2ddc7ba6221bd2e9b2" category="list-text">VMwareのセットアップでは、実行中の各仮想マシンに専用のVMXNET3ネットワークアダプタを割り当てる必要があります。詳細な要件については、に記載されている関連文書を確認してください<block ref="87d361475810d68b856fb3a99638bb7f" category="inline-link-macro-rx"></block>。</block>
  <block id="8708e36a9ce28a2b88418b7415eb627c" category="list-text">の説明に従って、正しいSASスタック構成を確認します。<block ref="e050e2655f75db4cbc468bb16e460c38" category="inline-link-macro-rx"></block></block>
  <block id="59b4fcd0a164c30f675e6a770d9e72f9" category="list-text">の説明に従って、必要なアグリゲートを作成して設定します。<block ref="3c82b1a66a2cfd1c6593f481c199b71a" category="inline-link-macro-rx"></block></block>
  <block id="d649ef640bb95588e385ba232374b875" category="list-text">の説明に従ってStorage Virtual Machine（SVM）を作成します。<block ref="d4a99eed0543890b47df9f01c59e8743" category="inline-link-macro-rx"></block></block>
  <block id="5e0f6aa6d54690f5344127a834793c09" category="list-text">の説明に従ってLIFを作成します。<block ref="0b856f6c21ee64261fb684a2e43b5473" category="inline-link-macro-rx"></block></block>
  <block id="eae4f3eab93246c5336de85835d197dc" category="list-text">およびの説明に従って、アグリゲート内にボリュームを作成します。<block ref="54c6cd59c93bb4815ee6649695cef027" category="inline-link-macro-rx"></block><block ref="5e939937eb07a0ffbedc1f7a0c692c51" category="inline-link-macro-rx"></block></block>
  <block id="36355d6512b3bd3868eee7acc11d1190" category="list-text">の説明に従って、必要なボリュームオプションを設定します。<block ref="36b33b548e3c759be826cd5d0278e1aa" category="inline-link-macro-rx"></block></block>
  <block id="48b073059a9dcf323707258c78188330" category="list-text">の説明に従ってNFSv3に必要なオプションを設定するか、の説明に従ってNFSv4に必要なオプションを設定し<block ref="83792462ce23c048c3cab42159579deb" category="inline-link-macro-rx"></block>ます。<block ref="256a13ffa427d2ae7d891aa66668354c" category="inline-link-macro-rx"></block></block>
  <block id="df0c4b640dbc11799ceb4798ee3e7295" category="list-text">の説明に従って、ボリュームをネームスペースにマウントし、エクスポートポリシーを設定します。<block ref="dfab551b11ed45a0cc9720a2adb1b483" category="inline-link-macro-rx"></block></block>
  <block id="61a38f8acdf9a308c4dd06a2b76b8321" category="paragraph"><block ref="61a38f8acdf9a308c4dd06a2b76b8321" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3debb9840290921884aced0f96e21f8b" category="paragraph"><block ref="3debb9840290921884aced0f96e21f8b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2fb008a4aa6e9b1674589ab158357eec" category="paragraph"><block ref="2fb008a4aa6e9b1674589ab158357eec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cee08209b26c4cf3c1d81b672cca50ed" category="admonition">ID番号を無効にするには、ユーザー管理が必要であることに注意してください（を参照）。<block ref="4fd4e9f5908240975bfd330ff66bb878" category="inline-link-macro-rx"></block></block>
  <block id="5141282cb81f182de556fd743aa6b50f" category="admonition">NFSv4ドメインIDは、すべてのLinuxサーバ（）およびSVMで同じ値に設定する必要があります<block ref="194f502e09f2beaa6d2fed713cbc42c4" prefix="/" category="inline-code"></block>（を参照）。<block ref="4fd4e9f5908240975bfd330ff66bb878" category="inline-link-macro-rx"></block></block>
  <block id="a4ed3843a038bd7642a8d1c9c92bea9d" category="paragraph">SAPホストエージェントもこのホストにインストールされています。NetAppプロバイダスクリプトとAnsibleプレイブックは、Ansibleコントロールノードで設定しました（を参照）。<block ref="e0821c83e8bb2d4f1ec8142cc9cde64c" category="inline-link-macro-rx"></block></block>
  <block id="39629ebeee47783acfe0c41c48f33977" category="paragraph"><block ref="39629ebeee47783acfe0c41c48f33977" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f31f1b3cba0ad4811ab65341b9a3967f" category="paragraph"><block ref="f31f1b3cba0ad4811ab65341b9a3967f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7c76b5244726cd9609f245d4df61287" category="paragraph"><block ref="c7c76b5244726cd9609f245d4df61287" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b99de4cf657d6d87d131870a05d28bfe" category="paragraph"><block ref="b99de4cf657d6d87d131870a05d28bfe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4adb006f45156d89b2c331c12bc78ecc" category="paragraph"><block ref="4adb006f45156d89b2c331c12bc78ecc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="323baf3961d5f7f4788c929b721cf6dc" category="paragraph"><block ref="323baf3961d5f7f4788c929b721cf6dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cfbcab52e9219a88b453d8640a695b5c" category="paragraph"><block ref="cfbcab52e9219a88b453d8640a695b5c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8182e6c407ae4266fab449c510893871" category="paragraph"><block ref="8182e6c407ae4266fab449c510893871" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a7ff5809b72a550475c833f91f3adb78" category="paragraph"><block ref="a7ff5809b72a550475c833f91f3adb78" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a2e0ccc67df24c6d663ad8bb51e2ebee" category="paragraph">これらのさまざまなSnapCenterエージェントとSAP HANAデータベースプラグインのインストールオプションの詳細については、テクニカルレポートを参照して<block ref="e9d950f5d5f56487dcd7311f01f0531d" category="inline-link-macro-rx"></block>ください。</block>
  <block id="d5a7518453c3639808aa5fee5b36fce5" category="paragraph">では、ソースデータベースからSnapshotコピーベースの自動バックアップを実行し、新しいターゲットデータベースのクローンを作成するために、LSCとSnapCenterの統合について説明しています<block ref="49d1af2cf82cf0b45d74f29b4b37bfb7" category="inline-link-macro-rx"></block>。では、に記載されている設定オプションとスクリプトを使用しています。</block>
  <block id="49d1af2cf82cf0b45d74f29b4b37bfb7" category="list-text"><block ref="49d1af2cf82cf0b45d74f29b4b37bfb7" category="inline-link-macro-rx"></block></block>
  <block id="df896ef034b20676d525fde3b569e0fd" category="paragraph">修復システムと災害復旧テストシステムは、通常、更新されたテストおよびトレーニングシステムのためにSAPシステムクローン（広範囲な後処理操作は不要）を使用して提供されますが、これらの後処理手順を適用してソースシステムと共存させる必要があります。そのため、本ドキュメントでは、SAPシステムの更新シナリオに焦点を当てて説明します。さまざまなユースケースの詳細については、テクニカルレポートを参照し<block ref="49d1af2cf82cf0b45d74f29b4b37bfb7" category="inline-link-macro-rx"></block>てください。</block>
  <block id="5b6ca0b8aa20d1b2d1c1f4f776d98453" category="list-text"><block ref="5b6ca0b8aa20d1b2d1c1f4f776d98453" category="inline-link-macro-rx"></block></block>
  <block id="038cc9135f774f6ca4e5b8854e85fd29" category="list-text"><block ref="038cc9135f774f6ca4e5b8854e85fd29" category="inline-link-macro-rx"></block></block>
  <block id="edb8903c02314004d9b3e78f5bc04091" category="list-text"><block ref="edb8903c02314004d9b3e78f5bc04091" category="inline-link-macro-rx"></block></block>
  <block id="209b9cb89860e1a4ba10f4f1718904c8" category="list-text"><block ref="209b9cb89860e1a4ba10f4f1718904c8" category="inline-link-macro-rx"></block></block>
  <block id="114f14acf5d8d013dd95789d87df42bd" category="list-text"><block ref="114f14acf5d8d013dd95789d87df42bd" category="inline-link-macro-rx"></block></block>
  <block id="ad6e031a57fcf75ea91c508ef641336b" category="list-text"><block ref="ad6e031a57fcf75ea91c508ef641336b" category="inline-link-macro-rx"></block></block>
  <block id="9ad4a24b5d6ff5539ca63f2e962bc5ca" category="inline-link-macro">AlpacaとNetApp SnapCenterによるSAPシステムのコピー、更新、クローニングのワークフローの自動化</block>
  <block id="cdf522f142e0cdba9292a69965f7987c" category="list-text"><block ref="cdf522f142e0cdba9292a69965f7987c" category="inline-link-macro-rx"></block></block>
  <block id="64098a348b693b068c8a5f7cc6b6c53f" category="inline-link-macro">AvantraとNetApp SnapCenterを使用したSAPシステムのコピー、更新、クローニングのワークフローの自動化</block>
  <block id="323450f90563551d13fe3ac0a1078ed2" category="list-text"><block ref="323450f90563551d13fe3ac0a1078ed2" category="inline-link-macro-rx"></block></block>
  <block id="c5f4ddebe5050f29cfac9f464f218997" category="paragraph">すべてのSAP HANAシステムは、構成ガイドに基づいて設定する必要があります<block ref="f7f1322fc01ab9c31c98cc0e27ac7c60" category="inline-link-macro-rx"></block>。SnapCenterとSAP HANAのリソースは、ベストプラクティスガイドに基づいて設定されました<block ref="3d48c3f615eb3308bf93e425d017a973" category="inline-link-macro-rx"></block>。</block>
  <block id="c9fb4441cc296fc20e6422304f80ca05" category="list-text">SnapCenterでのSAP HANAシステムの構成（を参照）<block ref="41fc9942bec5239323b5dd801f5bee58" category="inline-link-macro-rx"></block></block>
  <block id="ee519a6a522a3796e2c9e59317999081" category="list-text">ソースシステムでSAP HANA永続性暗号化が有効になっている場合は、暗号化ルートキーを1回インポートする必要があります。ソースシステムでキーが変更されている場合もインポートが必要です。章を参照 <block ref="2403d000b1cc698c05ad24f9b7418ccf" category="inline-link-macro-rx"></block></block>
  <block id="fd3c9302330a899fd41bdcf7c2f93e79" category="paragraph"><block ref="bb259d3519df9e585015ef9bdd8404c4" category="inline-link-macro-rx"></block></block>
  <block id="3248f470b458c5d4a6999f060cee6ac9" category="paragraph"><block ref="e3e93ab2e46b454dca6e093a872bc6fb" category="inline-link-macro-rx"></block></block>
  <block id="86ad1375d3881f140eea75ca1d6e37b6" category="paragraph">「」セクションでは<block ref="ea1706f3ad5e346967804b36867b7225" category="inline-link-macro-rx"></block>、システムクローニングワークフローの詳細な手順を説明します。</block>
  <block id="43c5e08c31b6a523c632fd0eeef62def" category="paragraph">このセクションでは<block ref="6e18004838abb6c618bd52cfb75053aa" category="inline-link-macro-rx"></block>、両方のシステム更新ワークフローについて、詳細なステップバイステップで説明します。</block>
  <block id="4d6f4667d5cf9fb3474d683dfdc4c06b" category="admonition">SAP HANAシステムでは、構成ガイドで推奨されているように、およびに<block ref="332a4b8a50d2a34eacd47a3800f13b64" prefix=" " category="inline-code"></block>単一のボリュームをサブディレクトリに分けて使用します<block ref="b61595b5b7b716bd6b8bd21e4fa4a3bf" prefix=" " category="inline-code"></block><block ref="f7f1322fc01ab9c31c98cc0e27ac7c60" category="inline-link-macro-rx"></block>。スクリプト<block ref="7475fe06dd4f4cf4edc0c5536fb55aa4" prefix=" " category="inline-code"></block> では、マウントパスに特別なコマンドラインオプションを使用してこの設定をサポートしています。mount pathコマンドラインオプションをusr-sap-and-sharedと指定すると、sharedおよびusr-sapのサブディレクトリがボリューム内に適宜マウントされます。</block>
  <block id="03d4157529053c5e8a8154f9ca134c01" category="paragraph">システム更新処理のワークフローについては、を参照してください。<block ref="b9d5f197c08fde17abc21bbf3508faa4" category="inline-link-macro-rx"></block></block>
  <block id="b7f794af977f79f2c8b61dc7d918bef3" category="paragraph">リペアシステムの作成ワークフローについては、のセクションを参照してください。<block ref="2a46f69c983531d333057d14da39a63c" category="inline-link-macro-rx"></block></block>
  <block id="4abd2b96de5193e2efafa375e8b00e84" category="paragraph"><block ref="4abd2b96de5193e2efafa375e8b00e84" category="inline-link-macro-rx"></block></block>
  <block id="15b10323702696b4b2eff0a8a7fd029b" category="list-text"><block ref="15b10323702696b4b2eff0a8a7fd029b" category="inline-link-macro-rx"></block></block>
  <block id="371e3bfeb464f53b17c98c9552076c9a" category="list-text"><block ref="371e3bfeb464f53b17c98c9552076c9a" category="inline-link-macro-rx"></block></block>
  <block id="e44ed137bef8215f3915cddce03f7e35" category="list-text"><block ref="e44ed137bef8215f3915cddce03f7e35" category="inline-link-macro-rx"></block></block>
  <block id="0904547c2cb2fa7f2a97979d7b1ab56d" category="list-text"><block ref="0904547c2cb2fa7f2a97979d7b1ab56d" category="inline-link-macro-rx"></block></block>
  <block id="26727b801c8904e39d395cf46aaf0852" category="list-text"><block ref="26727b801c8904e39d395cf46aaf0852" category="inline-link-macro-rx"></block></block>
  <block id="a356d6e3581ce64a0bc5d29164987a23" category="list-text"><block ref="a356d6e3581ce64a0bc5d29164987a23" category="inline-link-macro-rx"></block></block>
  <block id="0548fcaa028e6830c5407fbc21aa4e59" category="sidebar">オンプレミスのSAP HANA（プロトコルのサポート）</block>
  <block id="1644ee410155d595393f2cde06c51f8a" category="sidebar">オンプレミスのSAP HANA</block>
  <block id="2af771bd56410c67c29f7e5140a65ab8" category="sidebar">Azure NetApp Files上のSAP HANA</block>
  <block id="6948c0136a7332c8523d2831ec051ce8" category="sidebar">Azure NetApp Filesを使用したSAP HANA向けディザスタリカバリ</block>
  <block id="15b91590cdcaae4e578421c83d91b3a3" category="sidebar">『SAP HANA data protection on Azure NetApp Files with SnapCenter』（ブログとビデオ）</block>
  <block id="4e72c140671925ba8ec396ae5c8a7ea1" category="sidebar">『SAP System Refresh and Cloning operations on Azure NetApp Files with SnapCenter』（ブログとビデオ）</block>
  <block id="601cb41696f29ac80dcbf468890ce7cb" category="sidebar">SAP on Azure NetApp Filesサイジングツール</block>
  <block id="732adae0412f545e8d42107d2b5e4a0c" category="sidebar">FSx for ONTAP上のSAP HANA</block>
  <block id="9c99946ab5220a6b8da6b19c801ff333" category="sidebar">FSx for ONTAPサイジングツール</block>
  <block id="3ff94088a12e40d70ab49680b4fa8d2d" category="sidebar">SnapCenter（プラットフォームに依存しない）</block>
  <block id="58b9bbf1f64eb397b83e8797b4eb9abc" category="sidebar">『SAP HANA System Replication - Backup and Recovery with SnapCenter』</block>
  <block id="64b03de2a20ee77b8fcb65406457066c" category="sidebar">SAP HANAを使用したリージョン間レプリケーションの概要</block>
  <block id="30153729aca2324ae82bff47e711a46c" category="inline-link"><block ref="30153729aca2324ae82bff47e711a46c" category="inline-link-rx"></block></block>
  <block id="f1397363d18b147fd01373f4149892ef" category="paragraph"><block ref="f1397363d18b147fd01373f4149892ef" category="inline-link-rx"></block></block>
  <block id="7ba180b00c4e305e303aa3374823a50c" category="paragraph"><block ref="7ba180b00c4e305e303aa3374823a50c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e0f8fdaaa774f947afc3ff1a079fbeac" category="paragraph"><block ref="e0f8fdaaa774f947afc3ff1a079fbeac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5e9c0eeb7ac3cf8553a451d06c88831c" category="paragraph"><block ref="5e9c0eeb7ac3cf8553a451d06c88831c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4ca95b5bca07e84d7755d3c0f50a04c9" category="inline-image-macro">SnapCenterの概要</block>
  <block id="391458da3f8da76431f5d01ec21de6bb" category="paragraph"><block ref="391458da3f8da76431f5d01ec21de6bb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a322193ac8801771c1db2548d778d786" category="inline-image-macro">SnapMirrorソリューション</block>
  <block id="164fe74cfbca9ef543331e42b891cf2c" category="inline-image-macro">NetApp MetroCluster</block>
  <block id="e0688cb7d6291c05b4b81e03674d396f" category="summary">NetApp AFF 製品ファミリーは、 TDI プロジェクトの SAP HANA との使用が認定されています。このガイドでは、このプラットフォーム上の SAP HANA に関するベスト プラクティスについて説明します。</block>
  <block id="43af0fa315980d56444cafe5aa7da0d8" category="paragraph">NetApp AFF 製品ファミリーは、 TDI プロジェクトの SAP HANA との使用が認定されています。このガイドでは、FCP のこのプラットフォーム上の SAP HANA に関するベスト プラクティスについて説明します。</block>
  <block id="f24901db79bd7adbcfdc97deb6526be7" category="list-text">ASA A250、ASA A400、ASA A800、ASA A900</block>
  <block id="7165d8e624155bf7a4889b98927f605c" category="list-text">ASA C250、ASA C400、ASA C800</block>
  <block id="22b98f7a97d9cee874821e4b572b6c5d" category="inline-link-macro">FCP 搭載の NetApp ASA システム上の SAP HANA</block>
  <block id="8a3ac33050df8d373b59758f241b1e68" category="list-text"><block ref="8a3ac33050df8d373b59758f241b1e68" category="inline-link-macro-rx"></block></block>
  <block id="7f07617f785b58f6b368eb03e7188fdd" category="paragraph"><block ref="7f07617f785b58f6b368eb03e7188fdd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="928f12ce7e1197fe962e09f979b98d0d" category="cell">2025年7月</block>
  <block id="c642e006d9310605e42ff97671a7e3d8" category="paragraph"><block ref="c642e006d9310605e42ff97671a7e3d8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd4edf52138d04dee0b63f481803c909" category="paragraph"><block ref="cd4edf52138d04dee0b63f481803c909" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e86ef10a731bbc034f957525a4267b82" category="paragraph"><block ref="e86ef10a731bbc034f957525a4267b82" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ea917f7bcbac29ff77e06d916b6e4bf" category="summary">NetApp AFFシステム製品ファミリーは、TDI（Tailed Data Center Integration）プロジェクトにおけるSAP HANAとの連携が認定されています。このガイドでは、このプラットフォームにおけるSAP HANAのベストプラクティスを紹介します。</block>
  <block id="33af92fae250bf5ae7bd6f087c68910d" category="paragraph">NetApp AFF AシリーズおよびAFF Cシリーズ製品ファミリーは、Tailored Data Center Integration（TDI；テーラードデータセンター統合）プロジェクトでSAP HANAとの使用が認定されています。このガイドでは、NFS 用のこのプラットフォーム上の SAP HANA のベスト プラクティスについて説明します。</block>
  <block id="8c1992cbbe373136f1e087b51b1fa92a" category="inline-link-macro">FCP 搭載の NetApp AFF システム上の SAP HANA</block>
  <block id="26e279412c39b8d78be1eba7d6340c48" category="list-text"><block ref="26e279412c39b8d78be1eba7d6340c48" category="inline-link-macro-rx"></block></block>
  <block id="c9baa6589eb03e3de8596468ec4d3113" category="inline-image-macro">SAP HANA ストレージのサイズ設定プロセス</block>
  <block id="2ddfcb2a5a5412a4e0f5eadc85819f47" category="paragraph"><block ref="2ddfcb2a5a5412a4e0f5eadc85819f47" category="inline-image-macro-rx" type="image"></block></block>
  <block id="737e551e368764b43e2cb9216f426305" category="list-text"><block ref="737e551e368764b43e2cb9216f426305" category="inline-link-macro-rx"></block></block>
  <block id="4a79fafd45b02abba903b98a8dac97a5" category="paragraph">ASA システム製品ファミリーのさまざまなモデルをストレージレイヤで混在させることができるため、拡張が必要になったり、パフォーマンスや容量のニーズが異なる場合があります。ストレージシステムに接続できる SAP HANA ホストの最大数は、 SAP HANA のパフォーマンス要件と、使用されているネットアップコントローラのモデルによって定義されます。必要なディスクシェルフの数は、 SAP HANA システムの容量とパフォーマンスの要件によってのみ決まります。</block>
  <block id="e6a912f7d0a756fde116c2fa2c2b4c8e" category="paragraph"><block ref="e6a912f7d0a756fde116c2fa2c2b4c8e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d46cb7917620bd108e7b28f11ed4d4a7" category="paragraph"><block ref="d46cb7917620bd108e7b28f11ed4d4a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="135f11695d10f474f334466d82bf5d43" category="paragraph">次の図に示すように、導入した ASA システムとは関係なく、認定済みのストレージコントローラを追加することで、 SAP HANA 環境を拡張して希望するノード密度に合わせることもできます。</block>
  <block id="2b77bb734236e16e11991d74dc875a7c" category="paragraph"><block ref="2b77bb734236e16e11991d74dc875a7c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0a91938cd63345b5071d9fea91497db2" category="inline-image-macro">SnapCenter SAP HANA プラグイン</block>
  <block id="39f433ccfdf249727b50a1da8fd9c73e" category="paragraph"><block ref="39f433ccfdf249727b50a1da8fd9c73e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="017cd0a12b691bbe9bd875947ee832dc" category="paragraph">SAP HANAのバックアップとリカバリのソリューションの詳細については、を参照してください<block ref="737e551e368764b43e2cb9216f426305" category="inline-link-macro-rx"></block>。</block>
  <block id="2df2a2080231646afb90709c6f824b4c" category="admonition">このドキュメントの作成時点では、VMDK をストレージとして使用する VMware ベースの VM のみが SnapCenter for ASA でサポートされています。</block>
  <block id="b2946c1ef91247e37c269977800a38d9" category="paragraph">次の図は、ローカルDRデータセンターへの同期SnapMirror Active Syncと、リモートDRデータセンターへのデータ複製に非同期SnapMirrorを使用する3サイトのディザスタリカバリソリューションを示しています。SnapMirrorActive Syncにより、サイト全体の障害発生時でもビジネスサービスは継続して稼働し、セカンダリコピー（RPO=0、RTO=0）を使用してアプリケーションを透過的にフェイルオーバーできます。SnapMirrorActive Syncでは、フェイルオーバーを開始するために手動による介入やカスタムスクリプトは必要ありません。ONTAP 9.15.1以降では、SnapMirrorアクティブ同期で対称アクティブ/アクティブ機能がサポートされます。対称アクティブ/アクティブ：双方向同期レプリケーションにより、保護されたLUNの両方のコピーからの読み取りおよび書き込みI/O処理を有効にし、両方のLUNコピーがローカルでI/O処理を処理できるようにします。</block>
  <block id="60c1af797b29cffe2713bd3052647093" category="paragraph">詳細は以下をご覧ください。 <block ref="90f942fd5a37ab4e29fced42177889a8" category="inline-link-rx"></block> ..</block>
  <block id="d40d5c484a4f8be630dc46ecba0c44ab" category="paragraph">非同期 SnapMirror レプリケーションの RTO は、主に DR サイトで HANA データベースを起動し、データをメモリにロードするのに必要な時間によって決まります。1000Mbps のスループットでデータが読み取られることを前提とし、 1TB のデータをロードするには約 18 分かかります。</block>
  <block id="526fa8261d07a1e37da2c833c1548c28" category="inline-image-macro">SnapMirrorストレージレプリケーションの概要</block>
  <block id="1aff2799ff1fdbae77bb775ea838e989" category="paragraph"><block ref="1aff2799ff1fdbae77bb775ea838e989" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8058efe3a0acecb73d9d3300df4f28d0" category="list-text">実行<block ref="5927da9399de65ab7428ce807e88771e" prefix=" " category="inline-code"></block>コマンドを実行し、必要なLUNがすべて表示されていることを確認します。次の例は、 <block ref="5927da9399de65ab7428ce807e88771e" prefix=" " category="inline-code"></block> 2つのデータLUNと2つのログLUNを持つ2+1マルチホストHANAシステムのコマンド出力。出力には、LUNと対応するデバイスファイル（LUNなど）が表示されます。 <block ref="0732d94c1b058c8ff29a0e7586908d15" prefix=" " category="inline-code"></block>デバイスファイル<block ref="421d2aadb541bde4541aaac815d59491" prefix=" " category="inline-code"></block>各 LUN には、ホストからストレージ コントローラへの FC パスが 8 つあります。</block>
  <block id="365d17f0b22ee73b21776fe697a07175" category="list-text">実行<block ref="800be20e72a4397d094e0267a68f6475" prefix=" " category="inline-code"></block>そして<block ref="3d80983fc82ff72fd51e5d1f7e90c56d" prefix=" " category="inline-code"></block>デバイス ファイル名のワールドワイド識別子 (WWID) を取得するコマンド。</block>
  <block id="7d6504fee51f49b2d69acda4d2dba3de" category="admonition">この例では、8 つの LUN があります。</block>
  <block id="3f8db3876bc7fd7f5f852d18c8db2713" category="doc">複数ホストの設定</block>
  <block id="eeadcc9db4a97a17457b81251b0f2e49" category="paragraph">この章では、2+1 SAP HANA マルチホストシステムのセットアップを例として説明します。</block>
  <block id="5400b2f51d012ca320c36e8760f285d4" category="paragraph">すべてのデータおよびログ論理ボリュームに XFS ファイル システムを作成します。</block>
  <block id="34564326d40441555169c5b07a5a4c21" category="paragraph">マウントするには<block ref="b61595b5b7b716bd6b8bd21e4fa4a3bf" prefix=" " category="inline-code"></block>システム起動時にファイルシステムを使用する<block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block>設定ファイルに、 <block ref="b61595b5b7b716bd6b8bd21e4fa4a3bf" prefix=" " category="inline-code"></block>ファイルシステムに<block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block>各ホストの構成ファイル。</block>
  <block id="2769a82040d53d42eadf3bec6f97136d" category="doc">単一ホスト設定</block>
  <block id="4d0dd5bf85707730b1a1b706c12b2e73" category="paragraph">この章では、SAP HANA 単一ホストのセットアップについて説明します。</block>
  <block id="94ebdd04c5726b33d92db91c2cfa34f4" category="paragraph">すべてのデータおよびログ論理ボリュームと hana 共有 LUN に XFS ファイル システムを作成します。</block>
  <block id="b68bdc5f6c4af520ce42995c3c60f1d0" category="paragraph">ファイルシステムをマウントするには、 <block ref="86e32ba5e4c9ee3025482cd68628bc59" prefix=" " category="inline-code"></block>ホストでコマンドを実行します。</block>
  <block id="69cf65aac7e60a91062a6b558c083ef3" category="list-text">SID=FC5のHANAシステム</block>
  <block id="20b674149670813ea625bde00479e3f4" category="summary">NetApp ASA 製品ファミリーは、 TDI プロジェクトの SAP HANA との使用が認定されています。このガイドでは、このプラットフォーム上の SAP HANA に関するベスト プラクティスについて説明します。</block>
  <block id="21e0a2aad39a01380645381043e9d955" category="doc">『 SAP HANA on NetApp ASA Systems with Fibre Channel Protocol 』を参照してください</block>
  <block id="5db70de8e74c92af432128801b34bb88" category="paragraph">NetApp ASA AシリーズおよびASA Cシリーズ製品ファミリーは、Tailored Data Center Integration（TDI；テーラードデータセンター統合）プロジェクトでSAP HANAとの使用が認定されています。このガイドでは、次の認定モデルのベスト プラクティスについて説明します。</block>
  <block id="0e6049e57c8d108ffe2b8d32dc32330b" category="list-text">ASA A20、ASA A30、ASA A50、ASA A70、ASA A90、ASA A1K</block>
  <block id="14a1b02d9ac34f22a362671d392a3852" category="list-text">ASA C30</block>
  <block id="fffc4ba9621956156c16359fee348f3a" category="paragraph">本ドキュメントでは、 Fibre Channel Protocol （ FCP ；ファイバチャネルプロトコル）を使用した ASA 構成について説明します。</block>
  <block id="ad796b50ce85b866cef3e07e8a88e7af" category="paragraph">NetApp ASA ストレージ システムは、FC (SAN) プロトコルを使用する SAP HANA TDI プログラムで認定されています。SAP Business Suite on HANA、S/4HANA、BW/4HANA、SAP Business Warehouse on HANA など、現在のどの SAP HANA シナリオにも、単一ホスト構成または複数ホスト構成で導入できます。SAP HANA との使用が認定されているサーバは、ネットアップ認定のストレージソリューションと組み合わせることができます。次の図に、アーキテクチャの概要を示します。</block>
  <block id="4789e4de7518111f70932cfd55538c68" category="paragraph">ストレージを仮想マシン（ VM ）に接続する方法はいくつかあります。Raw デバイス マッピング (RDM)、FCP データストア、または FCP を使用した VVOL データストアがサポートされています。どちらのデータストアオプションも、本番環境で使用するためにデータストアに格納する SAP HANA データボリュームまたはログボリュームは 1 つだけです。</block>
  <block id="d5b3abe34f5928ceb3ac171ab782f00f" category="paragraph"><block ref="d5b3abe34f5928ceb3ac171ab782f00f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2a48b320782f505d499eb2656e4beeb6" category="paragraph">次の例は、 SID が FC5 の 2+1 マルチホストセットアップを示しています。</block>
  <block id="608ffc0c69fcd322ae0112af21ce3c4d" category="paragraph">SAP hdblcm インストール ツールを使用して、ワーカー ホストの 1 つで次のコマンドを実行してインストールを開始します。オプションを使用し<block ref="9676c5ff8ed94e9d3ceba55f16dde62f" prefix=" " category="inline-code"></block>て、2番目のワーカー（sapc-hana-tst-06）とスタンバイホスト（sapc-hana-tst-07）を追加します。</block>
  <block id="26b17225b626fb9238849fd60eabdf60" category="paragraph">+</block>
  <block id="fbb87f9a8e02229a1bda368258b0705e" category="paragraph">特定のLUNの最大スループットとして1000MB/秒を使用することを推奨します。アプリケーションがより多くのスループットを必要とする場合は、LUNストライピングを備えた複数のLUNを使用して、必要な帯域幅を提供する必要があります。このガイドでは、セクションで、Linux LVMをベースとしたSAP HANAの例を紹介します<block ref="60502400ca116a44af7f5b80e6597e3d" category="inline-link-macro-rx"></block>。</block>
  <block id="6184bd9e1a3ce0ee5585d5645a62615e" category="list-text">セクション link:saphana-asa-fc-storage-controller-setup.html#initiator-groups の説明に従って、HANA サーバーのワールドワイド名 (WWN) を持つイニシエーター グループ (igroup) を作成します。 <block ref="a30a5bc4156d5efb64f9f758389889ed" category="inline-xref-macro-rx"></block> 。</block>
  <block id="5b1acf5a0d4700aa212fae66acc8c9da" category="inline-link-macro">SAP HANA 単一ホストシステムの LUN 構成</block>
  <block id="d8e1a4cd040958dd75d0dcc1425db696" category="inline-link-macro">SAP HANA マルチホストシステムの LUN 構成</block>
  <block id="e69ee3aa0eb8b1b2096b2771ea3fc087" category="list-text">LUNを作成し、それをセクションで説明されているサーバーにマッピングします。 <block ref="e3a600614f4b7487cf24a0603e392005" category="inline-link-macro-rx"></block>そして<block ref="4616cfe5481a43cb57e5b708972ea0e6" category="inline-link-macro-rx"></block></block>
  <block id="0ae91f411dd6c860f7014ffaf5042406" category="paragraph">次の図に示すように、NS224 NVMeディスクシェルフは、コントローラごとに2つの100GbEポートで接続されます。ディスクは HA ペアの両方のコントローラに自動的に配布されます。</block>
  <block id="1b33b8e2f9ffbbf84711ff33737c75b0" category="paragraph"><block ref="1b33b8e2f9ffbbf84711ff33737c75b0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2ecd8267df97e61a6026b9d97834abe5" category="admonition">この<block ref="3a8e4afa851609127d534b04e7d29c08" prefix=" " category="inline-code"></block>ツールはNetApp Host Utilitiesに含まれており、各SAP HANAホストにインストールする必要があります。詳細については、セクションを参照してください。<block ref="651d6af67f47799de3de7127400bd073" category="inline-link-macro-rx"></block></block>
  <block id="8db99fa5fe9e83e6fc301d2677a74c9e" category="summary">このセクションでは、複数のホストシステム用のLUNを作成する方法について説明します。</block>
  <block id="d5395e37adfb8bd3cabb8db1bdb0abee" category="paragraph">このセクションでは、SAP HANAマルチホストシステムに固有のNetAppストレージシステムの構成について説明します。</block>
  <block id="b28af8f8515ecce98f0a5be7515b2b61" category="section-title">SAP HANA マルチホストシステムの LUN 構成</block>
  <block id="ca896343d41b326aec5877cfd4d956dd" category="paragraph">Linux LVM は、パフォーマンスを向上し、LUN サイズの制限に対処するために使用されています。</block>
  <block id="5e6b40484940ec07f5b5ecf3e4918dfc" category="cell">論理ボリューム（LV）</block>
  <block id="7cad490ec2fc5e1b8cbade09d487d514" category="cell">lv ： FC5_data_mnt00001 -vol</block>
  <block id="5dac78388ae4efd75ca77c55d1e40f16" category="cell">/hana/data FC5/mnt00001 のように指定します</block>
  <block id="ca786d323f3125e9592380cb2710ae4f" category="cell">lv ： FC5_log_mnt00001 -vol</block>
  <block id="2938b5a8a1427ee847a1ba04d213a8e7" category="cell">/hana/log/FC5/mnt00001</block>
  <block id="8d22231776c0ac72d83e8cf974d77c65" category="cell">lv ： FC5_data_mnt00002 -vol</block>
  <block id="31dad34440bb6733bc03eadd388195f9" category="cell">/hana/data FC5/mnt00002 のように指定します</block>
  <block id="7ee7f8e2c85175d00eefd856f485ae00" category="cell">lv ： FC5_log_mnt00002 -vol</block>
  <block id="6d32edddb8a4b0a8c803f59c2cd3cdf1" category="cell">/hana/log/FC5/mnt00002</block>
  <block id="44cc7dc291b1a462651371e51bb9fa0f" category="cell">外部NFS共有: FC5_shared</block>
  <block id="cef7183e022592f117a580def3299e72" category="admonition">SAP HANAマルチホストシステムでは、 <block ref="b61595b5b7b716bd6b8bd21e4fa4a3bf" prefix=" " category="inline-code"></block>システムのすべてのホストに接続されたファイルシステム。通常、これはNFSサーバーによって提供されるNFS共有です。NetAppFASやAFFシステムなどの高可用性NFSサーバーの使用をお勧めします。また、Linuxホストに内蔵されているNFSサーバーを使用することもできます。</block>
  <block id="5b10d0b1272d218e55f6473abcfbae9d" category="admonition">説明した構成では、 <block ref="ea6f2eb226c57300be10268ea33e50e3" prefix=" " category="inline-code"></block>ユーザーFC5admのデフォルトのホームディレクトリが格納されているディレクトリは、各HANAホストのローカルディスク上にあります。ディスクベースのレプリケーションによる災害復旧設定では、NetAppは4つの追加LUNを使用することを推奨しています。 <block ref="ea6f2eb226c57300be10268ea33e50e3" prefix=" " category="inline-code"></block>各ホストにファイルシステムを配置して、各データベース ホストのすべてのファイルシステムが中央ストレージ上に存在するようにします。</block>
  <block id="d4f54d18b3b1b7422185c0c71038ff15" category="section-title">LUN の作成とイニシエーター グループへの LUN のマッピング</block>
  <block id="b54a0f5023cc826b59cab28cc23f22cc" category="section-title">CLI を使用して LUN を作成し、LUN をイニシエータ グループにマッピングする</block>
  <block id="2d39c77b49ea3785a21a4c7b0c611e44" category="paragraph">このセクションでは、LVM を使用し、LVM ボリューム グループごとに 2 つの LUN を持つ FC5 を備えた 2+1 SAP HANA マルチホスト システムに対して ONTAP 9 のコマンド ラインを使用した構成例を示します。</block>
  <block id="cf92b7cb5d4dd0e7883961b1bc9e7ab9" category="paragraph">このセクションでは、SAP HANAシングルホストシステムに固有のNetAppストレージシステムの構成について説明します。</block>
  <block id="943a742a82131a53ada69df9430a1877" category="paragraph">Linux LVM は、パフォーマンスを向上し、LUN サイズの制限に対処するために使用されています。次の表に示すように、 SAP HANA ホストで、ボリュームグループと論理ボリュームを作成してマウントする必要があります。</block>
  <block id="f8f9e88eaa58d2028a8b1e060e5cf04d" category="cell">lv ： FC5_data_mnt0000 -vol</block>
  <block id="9881d3533ceeed757c8d7282dda6f90b" category="cell">LUN：FC5_shared</block>
  <block id="7a321dbd4f369e8af09025467271d695" category="cell">/hana/shareed/FC5</block>
  <block id="8d6e9cd0b8b6b652aca6bfcc1f176030" category="admonition">説明した構成では、 <block ref="ea6f2eb226c57300be10268ea33e50e3" prefix=" " category="inline-code"></block>ユーザFC5admのデフォルトのホームディレクトリが格納されているディレクトリは、ローカルディスク上にあります。ディスクベースのレプリケーションによる災害復旧設定では、NetAppは、 <block ref="ea6f2eb226c57300be10268ea33e50e3" prefix=" " category="inline-code"></block>すべてのファイルシステムが中央ストレージ上に存在するようにディレクトリを作成します。</block>
  <block id="82b8d9b122c7c89e4f44a1ccd0662a56" category="paragraph">このセクションでは、LVM と LVM ボリューム グループごとに 2 つの LUN を使用する SID FC5 の SAP HANA 単一ホスト システムに対して、ONTAP 9 のコマンド ラインを使用した構成例を示します。</block>
  <block id="e64f10d86a360e0a17a652e58d137379" category="paragraph">1つのNVMe SSD（データ）は、使用する特定のNVMeディスクに応じて、最大2/5のSAP HANAホストをサポートします。</block>
  <block id="01e28818814a69c2a322eff972c6a765" category="paragraph"><block ref="01e28818814a69c2a322eff972c6a765" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c058e31339f9b75b8b08bca2f5112771" category="paragraph"><block ref="c058e31339f9b75b8b08bca2f5112771" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9daa0c645681626b03516579cb284a60" category="summary">NetApp FAS 製品ファミリーは、 TDI プロジェクトの SAP HANA との使用が認定されています。このガイドでは、このプラットフォーム上の SAP HANA に関するベスト プラクティスについて説明します。</block>
  <block id="ad544252784b5c91a46c4e9ab572f876" category="paragraph">NetApp FAS 製品ファミリは、TDI プロジェクトで SAP HANA と併用することが認定されています。このガイドでは、FCP のこのプラットフォームでの SAP HANA のベスト プラクティスについて説明します。</block>
  <block id="31d002cdfe7209df35bb9d65445055a2" category="inline-image-macro">SAP HANA のサイジングプロセス</block>
  <block id="941084cc96165a6251d2d0525380ba09" category="paragraph"><block ref="941084cc96165a6251d2d0525380ba09" category="inline-image-macro-rx" type="image"></block></block>
  <block id="baaf572c05259fefe566c996045c48ad" category="inline-image-macro">ストレージ高可用性 (HA) ペアに接続された 8 台の SAP HANA ホスト</block>
  <block id="3612456b2be01cea02c87ff2743acfd6" category="paragraph"><block ref="3612456b2be01cea02c87ff2743acfd6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="75b367d30b8f115e897a8b5d6cb390cb" category="paragraph"><block ref="75b367d30b8f115e897a8b5d6cb390cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3180bea7d5ead6f8b3034b9fbdc3d7e" category="paragraph"><block ref="b3180bea7d5ead6f8b3034b9fbdc3d7e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e9314f37e8fbf130df8ccdb73ea03122" category="summary">NetApp FAS 製品ファミリーは、 TDI プロジェクトの SAP HANA との使用が認定されています。このガイドでは、このプラットフォーム上の SAP HANA に関するベスト プラクティスについて説明します。</block>
  <block id="ecc900dd19f5c7d49be2feaf09c11e58" category="paragraph">NetApp FAS 製品ファミリーは、 TDI プロジェクトの SAP HANA との使用が認定されています。このガイドでは、NFS を使用したこのプラットフォーム上の SAP HANA のベスト プラクティスについて説明します。</block>
  <block id="00f5bf4413a98fc8af35089eab0ae424" category="paragraph"><block ref="00f5bf4413a98fc8af35089eab0ae424" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9c3e0c17f09b278cc6ad14ea10cda021" category="sidebar">『 SAP HANA on NetApp ASA Systems with FCP Configuration Guide 』</block>
  <block id="ddb55e4334b26446b18503774881a2e5" category="sidebar">単一ホストLUN構成</block>
  <block id="526ffb7b57e2db6ab8a3f13077e8988c" category="sidebar">複数ホストのLUN構成</block>
  <block id="b5c56e3ba8d38f1f3f0a7a5413fdeef2" category="paragraph">HANA のベストプラクティス:</block>
  <block id="c7666fa654de87dc33703084f80aa4be" category="list-text"><block ref="7912a6ea019693a170bbf40a62a72e9f" category="inline-link-rx"></block>です。</block>
  <block id="1902e4ab89c18ee8b918255bd4a42840" category="list-text"><block ref="1902e4ab89c18ee8b918255bd4a42840" category="inline-link-rx"></block></block>
  <block id="686acd2e11e136510ec14f9d97c7ff2b" category="list-text"><block ref="686acd2e11e136510ec14f9d97c7ff2b" category="inline-link-rx"></block></block>
  <block id="766ba9dc44e7046f7c6af47344e24026" category="list-text"><block ref="766ba9dc44e7046f7c6af47344e24026" category="inline-link-rx"></block></block>
  <block id="31d7058304689e06db912e9954e30a03" category="inline-link">SnapCenter&amp; SnapMirror Active Sync と VMware Metro Storage Cluster による SAP HANA のデータ保護と高可用性</block>
  <block id="2d9241a18d70b18a2ee9eb0e84478a18" category="list-text"><block ref="0f7eff3318699c5566509659cc1b2254" category="inline-link-rx"></block></block>
  <block id="fc762ac7f083d9e202e822b1fa322b8c" category="cell">07/2025</block>
  <block id="30d1e657d64ccb4284e298d3b860a87c" category="doc">HANA構成</block>
  <block id="77fe69cec81dd794083875a29062f5a2" category="section-title">SnapCenterデータベースユーザーを構成する</block>
  <block id="4b244bed7a51953fb7d138e5d35e917a" category="paragraph">システムデータベースユーザのユーザストアを作成し、SnapCenterで使用する必要があります。</block>
  <block id="9d1fbfa9e8e32a79e4a23e98af0670b1" category="paragraph"><block ref="9d1fbfa9e8e32a79e4a23e98af0670b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="147cbd5af1df109eb54c4e6242c3837f" category="section-title">HDBユーザーストアキーを設定する</block>
  <block id="1f08611a23de2730d3dcdda198ad89cb" category="paragraph">ユーザーvfsadmのユーザーストアキーを作成する必要があります。ポート通信のために、HANAインスタンス番号を適切に設定する必要があります。セットアップでは、インスタンス番号「45」が使用されます。</block>
  <block id="14127bd47862dbb3e24c3d6ec4c6b9f4" category="paragraph">アクセスを確認するには:</block>
  <block id="3c26608069377933b31d5aa3bb3dd8bc" category="paragraph">この章では、VMFSを使用するVMware環境に固有のSAP HANAシステムのインストールと設定について説明します。その他の一般的なベストプラクティスについては、を参照してください<block ref="5888c0fcaa90f43e1381a41ee8a6b7b6" category="inline-link-rx"></block>。</block>
  <block id="8c3bf5f6d15c03785a898def5178f90a" category="paragraph">SAPが本番環境のHANAシステム向けに定義したストレージパフォーマンスKPIを満たすには、HANAシステムのデータおよびログファイルシステム用に専用のLUNとデータストアを構成する必要があります。データストアは、複数のHANAシステムや他のワークロード間で共有しないでください。</block>
  <block id="bfdedf5ba25d32c4f1b6c9711d39fc97" category="paragraph">HANA システム VFS の 3 つのデータストアをプロビジョニングするために、 ONTAP Tools for VMware (OTV) が使用されています。</block>
  <block id="7a82859cadb1951dd78e138525e0d009" category="list-text">ハナ+___++データ+___++VFS</block>
  <block id="a25af01a1dcd7358a5424304591980c8" category="list-text">hana+___++log++++VFS</block>
  <block id="3e8e1cb260d5311a94efd68c72a13240" category="list-text">hana+___++共有++++VFS</block>
  <block id="f0f3a981290ce91283a62f872992e9db" category="admonition">HANA 共有ファイルシステムのデータストアは、複数の HANA システム間で共有することもできます。</block>
  <block id="f599573530db0752a2e90aced96a81a8" category="paragraph"><block ref="f599573530db0752a2e90aced96a81a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ddd5135c60cd685418c718a339804a1" category="paragraph">ストレージ システムでは、OTV によって 3 つの LUN が作成されています。</block>
  <block id="5f62823eb2a59b219c6cd02f2e6f7c35" category="paragraph"><block ref="5f62823eb2a59b219c6cd02f2e6f7c35" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cee670885c2f7687046ed5e734fbd513" category="paragraph">HANA VMに3つの新しいディスク（VMDK）を追加する必要があります。各ディスクは、下図に示すように、以前に作成されたデータストアのいずれかに格納されます。</block>
  <block id="fa46aa47289006308772c70ed3e38330" category="paragraph"><block ref="fa46aa47289006308772c70ed3e38330" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ef09e08bf1d070593faf7496c31d1ae" category="paragraph"><block ref="6ef09e08bf1d070593faf7496c31d1ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4287b2ca01984430bd31da731e2c3767" category="paragraph"><block ref="4287b2ca01984430bd31da731e2c3767" category="inline-image-macro-rx" type="image"></block></block>
  <block id="baf1444f8a77613237255aa5334aa120" category="paragraph">3 つのディスクが VM に追加されると、OS レベルでリストできるようになります。</block>
  <block id="1c007f49b78d96561f9da05cacd33ec2" category="section-title">VMパラメータdisk.EnableUUID</block>
  <block id="c444cfed3f21d3a305c6639f685138fa" category="paragraph">このパラメータを適切に設定する必要があります。そうしないと、 SnapCenterデータベースの自動検出は失敗します。</block>
  <block id="64ff5b46dd80be4b6f42804e301ef777" category="list-text">VMのシャットダウン</block>
  <block id="f9f9cd478a7953bf030d52c20aafdb8a" category="list-text">新しいパラメータ「disk.EnableUUID」を追加し、「TRUE」に設定します</block>
  <block id="f327c6b8d960a063ccd09da39c3b7b97" category="list-text">Start VM</block>
  <block id="94bff44061f52d768fa37614fee5b89f" category="paragraph"><block ref="94bff44061f52d768fa37614fee5b89f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c1a7ab041084f74b8386c23b9bc74251" category="admonition">上記の設定では、/usr/sap/VFS ディレクトリは OS VMDK 上に配置されます。/usr/sap/VFS を共有 VMDK 上に保存する必要がある場合は、hana 共有ディスクをパーティション分割して、/usr/sap/VFS 用の別のファイルシステムを提供することができます。</block>
  <block id="25db1c184405fa694f255d026a8f6206" category="doc">このドキュメントで使用したラボのセットアップ</block>
  <block id="3b1bf1088e0cce0398f75cfe40404d41" category="paragraph">下の図は、使用したラボのセットアップの概要を示しています。2つの単一ホストHANA MDCシステムを使用して、様々な操作をデモンストレーションしています。HANAシステムVFSはバックアップ、リストア、リカバリ操作の実行用に指定され、HANAシステムQFSはSAPシステムリフレッシュ操作のターゲットシステムとして機能します。VMware向けSnapCenterプラグインは、VMware VMFSで構成されたHANAリソースをSnapCenterで管理するために不可欠です。HANAシステムのストレージユニットのプロビジョニングにはVMware向けONTAPツールを使用しましたが、必須コンポーネントではありません。</block>
  <block id="387f80641bb4b96385f8e14363fb6027" category="paragraph"><block ref="387f80641bb4b96385f8e14363fb6027" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d723e9999868bf9803c0bd4c2b40d03f" category="cell">ASA A70 ONTAP 9.16.1</block>
  <block id="1b4503c04f45d68ae09fb22125331a69" category="cell">6.1.0</block>
  <block id="ed9018b2e8611a3d2c03bb6a205b9715" category="cell">ONTAP tools for VMware vSphere</block>
  <block id="669ce1d03d9fa934e3a84459db318586" category="cell">10.4</block>
  <block id="ab65e67792b36dde8f2a4168eae395f1" category="cell">SLES for SAP 15 SP6</block>
  <block id="8ed383fa971db2bdb3c9dac3b1c99e0e" category="cell">6.1P1</block>
  <block id="4416f771603feaecfeeb5f9c4a27acc6" category="paragraph">VMFS を使用する VMware に固有のものはありません。</block>
  <block id="f054b5b3562f8d94c0d5df072b0931c7" category="paragraph"><block ref="f054b5b3562f8d94c0d5df072b0931c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="47c6f1b4b3a21ae5ef212d1a1b5597d2" category="paragraph"><block ref="47c6f1b4b3a21ae5ef212d1a1b5597d2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ef4b3aa222aed2409197402ed47a9656" category="paragraph">SnapCenterはコンシステンシーグループ（CG）を作成し、ストレージユニットhana+++++data++++++VFSをCGに追加します。スナップショットはCGレベルで作成されます。</block>
  <block id="54f6800487eaeb84fb5d1c2a8cf2117e" category="paragraph"><block ref="54f6800487eaeb84fb5d1c2a8cf2117e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="170a54035d1bf66f503a9b3a5973a85e" category="paragraph"><block ref="170a54035d1bf66f503a9b3a5973a85e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b1956e81ddbd7a2b708c3ce88498b2b9" category="paragraph"><block ref="b1956e81ddbd7a2b708c3ce88498b2b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="714d1c0620034048eb38666e4046bd9c" category="paragraph">VMware VMFS で構成されたリソースは、これらの構成に必要な特定の操作を有効にするために、 SnapCenterによって自動検出される必要があります。</block>
  <block id="5d6c989a1d8c90340545766ce51aaed1" category="paragraph">HANA 非データ ボリュームはSnapCenterで常に手動で構成されるリソースであるため、VMFS を使用したSnapCenterではサポートされません。</block>
  <block id="7f26dcfefc7d3f600d8a342c73efe2fd" category="paragraph">SAP HANAのマルチホストシステムは、中央のHANAプラグインを使用して設定する必要があるため、デフォルトでは手動で設定されます。また、VMware VMFSを使用する場合、このようなシステムはSnapCenterではサポートされません。</block>
  <block id="c0fc630d9e7214b10b62eba4b37eedf2" category="section-title">Storage SVM 管理 IP</block>
  <block id="b474d7d9911854875b1bc5a470a3497a" category="paragraph">LUN をホストするストレージ SVM には管理インターフェイスが設定されている必要があります。そうでないと、「クラスターの追加」オプションを使用してストレージを追加したときに SVM がSnapCenterにリストされず、自動検出操作が失敗します。</block>
  <block id="01c39c445d841c2aba19bb800b5e63d7" category="paragraph"><block ref="01c39c445d841c2aba19bb800b5e63d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ec4b5361dc3f883b22d66e791086743" category="paragraph"><block ref="3ec4b5361dc3f883b22d66e791086743" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e0a0b049a0819a386cca8792b2aeab93" category="section-title">VMディスクパラメータ</block>
  <block id="d1fbdb4b15f40f2c2d44f9aeaf6a5aab" category="inline-link-macro">「VMパラメータdisk.EnableUUID」</block>
  <block id="740ee7f443c20b37d433001428dcd0a3" category="paragraph">パラメータは、章で説明されているように設定する必要があります。 <block ref="8fba2fcc5de70a68790dbaa8aced9fbf" category="inline-link-macro-rx"></block>そうしないと、 SnapCenterデータベースの自動検出は失敗します。</block>
  <block id="6c8dd41925abd42250ae273718901b27" category="paragraph"><block ref="6c8dd41925abd42250ae273718901b27" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12b86f0b8e0c821f5b184bdeda2dc9ca" category="section-title">ストレージ通信にREST APIを使用するようにSnapCenterを構成する</block>
  <block id="bcfe1e13fb9df8a8aea8f708a21473aa" category="paragraph">SnapCenterは、ストレージ通信にREST APIを使用するように設定する必要があります。設定されていない場合、スナップショット作成操作は失敗し、以下のエラーメッセージが表示されます。</block>
  <block id="aad320481cc6b9210747b3a80802cf5d" category="paragraph"><block ref="aad320481cc6b9210747b3a80802cf5d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b7100b9860d7218e48d96aef40a016d5" category="paragraph">構成ファイル + C:++\++Program Files++\++NetApp++\++SMCore++\++SMCoreServiceHost.dll.config 内のパラメーター「IsRestEnabledForStorageConnection」を「true」に設定する必要があります。</block>
  <block id="a0bce53c2c5386f21d4fda016a7b4367" category="paragraph">++&lt;++キー="IsRestEnabledForStorageConnection" 値="true" を追加 /++&gt;++</block>
  <block id="52fa081403e5d450f2d3a0d1eece3b2e" category="paragraph"><block ref="52fa081403e5d450f2d3a0d1eece3b2e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c1a6a0163eba6556b7c26f74286f9fe" category="paragraph">変更を行った後、 SnapCenter SMCore サービスを停止して起動する必要があります。</block>
  <block id="e0aff7174068510019783f890d9128a7" category="paragraph"><block ref="e0aff7174068510019783f890d9128a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="540c7201ad9d8b7af82f2bdee81bd870" category="section-title">SnapCenterにVMwareプラグインを追加する</block>
  <block id="04e7bb0411c1c8f56ca4fc8000c62ad8" category="inline-link">SnapCenter Plug-in for VMware vSphereの導入</block>
  <block id="a1fbd22cbb6d87f7ad326da842e4174a" category="paragraph">ホストをSnapCenterに追加する前に、VMware vSphere用SnapCenterプラグインをVMware環境に導入する必要があります。も参照してください<block ref="6e2495e976c82c15186f3ed1897748e0" category="inline-link-rx"></block>。</block>
  <block id="d428c43984fa552e6d78a83e7ff99080" category="paragraph"><block ref="d428c43984fa552e6d78a83e7ff99080" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d0718cd923bd1c3b14ee1d8817494d18" category="section-title">HANAホストを追加する</block>
  <block id="1429646cb4b420782ce2688c6a69ebdb" category="admonition">具体的な要件はありません。プラグインの導入と自動検出は通常どおり実行されます。</block>
  <block id="a718c910e06a03a6ab11f6b85b57fa66" category="paragraph"><block ref="a718c910e06a03a6ab11f6b85b57fa66" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4050238dd9e8cc9e509a4172992b31d2" category="paragraph">自動検出プロセスにより、 SnapCenter はHANA リソースが VMFS で仮想化されて実行されていることを検出します。</block>
  <block id="6704fa3564e4a839466e839e9556e01e" category="paragraph"><block ref="6704fa3564e4a839466e839e9556e01e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be1ed72dbb871c8f2508a11540f05280" category="section-title">ポリシーとリソース保護の構成</block>
  <block id="759d9708a1ad9a9c0b3937af6e7c43cc" category="paragraph">VMFS/VMDK のSnapCenterに保存された仮想リソースの場合、復元操作は常にクローン、マウント、コピー操作によって実行されます。</block>
  <block id="f9badeec2d4b63a52a6b9f990dad8738" category="list-text">SnapCenterは選択したスナップショットに基づいてストレージクローンを作成します</block>
  <block id="3e068d6a0678f44b0a89c70fc6cef201" category="list-text">SnapCenterはLUNを新しいデータストアとしてESXホストにマウントします。</block>
  <block id="bf399aad6f781f8b0fdd0eef2da23a57" category="list-text">SnapCenterはHANAシステムデータベースのリカバリを実行します</block>
  <block id="e8b7b00c48990267941307ac6c492a32" category="list-text">SnapCenterはHANAテナントデータベースのリカバリを実行します</block>
  <block id="b9a9673e696444188a78cd3551806d04" category="paragraph">リストア操作の全体的な実行時間は、データベースのサイズと、ストレージクラスターとESXホスト間のFC接続のスループットに依存します。当社のラボ環境（初期HANAインストール時）では、実行時間は約12分でした。</block>
  <block id="e3447f36246011818eecb545a5d9709e" category="paragraph"><block ref="e3447f36246011818eecb545a5d9709e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e29553968060b7dec86ab852fb8381e0" category="paragraph"><block ref="e29553968060b7dec86ab852fb8381e0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="44a50b4a6877e72b50641338f74bc067" category="paragraph">復元およびリカバリ操作の実行中に、新しいクローン ストレージ ユニットが表示されます。</block>
  <block id="31d144a19554f94d0409543be9400a57" category="paragraph"><block ref="31d144a19554f94d0409543be9400a57" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b0c4fc6659e17d5972df677ca77bd5c" category="paragraph">クローン作成されたストレージ ユニットに基づく新しい LUN (データストア) が ESX クラスターに接続されます。</block>
  <block id="7887e2cbb99e1ac78448e0dba94e22e6" category="paragraph"><block ref="7887e2cbb99e1ac78448e0dba94e22e6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="51f138e1a6a1a0748940ed618b615e31" category="paragraph">データストア内の VMDK はターゲットの HANA VM にマップされ、HANA システムにマウントされます。</block>
  <block id="d2015fdbff426ff13c6fb5e9b18652d8" category="paragraph"><block ref="d2015fdbff426ff13c6fb5e9b18652d8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="08d7f308077a841a71acbd22a0b41e2b" category="doc">VMware VMFSおよびNetApp ASAシステムを使用したSnapCenterによるSAP HANAデータ保護</block>
  <block id="6e68c6c25e00ca1603267ca3b45d493b" category="paragraph">このドキュメントでは、VMware 上で実行され、VMFS を使用するデータストアとNetApp ASAシステムに保存された LUN を備えた HANA システムに対してSnapCenterを使用したデータ保護のベスト プラクティスについて説明します。</block>
  <block id="1c13795e55120ebebabcc70fc98dfcd9" category="paragraph">これは、環境全体を構成するためのステップバイステップのガイドではありませんが、次のような VMFS 上のSnapCenterおよび HANA に固有の詳細に重点を置いています。</block>
  <block id="2954798e6fde7d59a9eaaff7e6715c0e" category="list-text">VMware VMFS を使用した SAP HANA システムのセットアップ</block>
  <block id="1b310d57c56de7853e5c89945d32e720" category="list-text">VMFS を使用した VMware 上の HANA 向けの特定のSnapCenter構成</block>
  <block id="b8619f403c6d404de51d19667ec612bc" category="list-text">VMFS を使用した VMware 上の HANA のSnapCenterバックアップ、リストア、リカバリ操作</block>
  <block id="0341cb73da00f7d06a746e7f9b8ca253" category="list-text">VMFS を使用した VMware 上の HANA 向けSnapCenter SAP システム更新操作</block>
  <block id="36dce14f0655f4eebcfdc431a87cb912" category="inline-link-macro">"追加情報"</block>
  <block id="3bd68d50e54a537e6e9f2a5e47665875" category="paragraph">詳細情報および詳細な設定手順については、 <block ref="cd186e727cc44e449e0e68e423bc0f88" category="inline-link-macro-rx"></block>章。</block>
  <block id="2df734a60e2afa20a9e729d517b3c655" category="doc">SAP システムリフレッシュ</block>
  <block id="96bc1b4e98932d87170662ccf1b2488a" category="paragraph">SnapCenterを使用したSAPシステムリフレッシュ操作の詳細については、以下を参照してください。 <block ref="6c08dc4f79105734ee7967f4cc273b9b" category="inline-link-rx"></block> 。</block>
  <block id="2079fbb897b42174a19c35aef528f6a2" category="inline-link-macro">「HANAシステムのプロビジョニングとインストール」</block>
  <block id="f0cbbbdbda730c3942ce42c411b9c606" category="paragraph">2番目のHANAシステムのQFSは、第1章で説明したのと同じ方法でプロビジョニングされています。 <block ref="778e00c6cff5f91c98f1fb38e6557c6f" category="inline-link-macro-rx"></block> 。</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">前提条件</block>
  <block id="4757b083ccca46cc946355a7644afb0e" category="paragraph">SnapCenterの現在のバージョン (6.1P1) にはいくつかの制限がありますが、次のリリースで修正される予定です。</block>
  <block id="f08745f6e1ee1df199798c87bc950e1b" category="list-text">各「クローン作成」および「クローン削除」ワークフローの後に、ターゲット HANA ホストでコマンド「systemctl restart spl」を使用して spl プロセスを再起動する必要があります。</block>
  <block id="70b8a6e3e79b34ca80c0ab9072954c11" category="list-text">SAP システム更新操作のソースとターゲットとして使用される HANA VM は、同じ ESX ホスト上で実行する必要があります。</block>
  <block id="a630a4cb0c45889f878567c92eac06e1" category="section-title">ワークフローの概要</block>
  <block id="42804d24402bfee4f0feedc3ce385b5a" category="paragraph">最初の SAP システム更新処理を実行する前に、ターゲット HANA システムをインストールし、ホストを SnapCenter に追加する必要があります。次に、HANA システムをシャットダウンし、HANA データ ディスクをホストからアンマウントする必要があります。</block>
  <block id="5e324fafc49eb9a9b425c8e2c0ea1671" category="section-title">SnapCenter クローン作成ワークフロー</block>
  <block id="6177379ddd923fc006d84a1b4bdfa11e" category="list-text">ストレージクローンを作成</block>
  <block id="6b1ac37402b388342f15af22945494bb" category="list-text">ストレージクローンのホストマッピングを設定します</block>
  <block id="aa503537f9d0230e77615d9edd602f68" category="list-text">ストレージクローン(データストア)をESXホストに接続します</block>
  <block id="9f76fb2991dd9b945451dc4a5b109937" category="list-text">データストアからターゲットHANA VMに新しいディスクを追加する</block>
  <block id="5e7212619c374c1991c574f5315e8bfc" category="list-text">HANA VM OS へのディスクのマウント</block>
  <block id="c05b29ab086c4dc073cf2b7b7ee26b4c" category="list-text">事後スクリプトを使用したHANAシステムの回復</block>
  <block id="76f66fe19fd2cc9f3b115d391205b495" category="paragraph">上映時間:12分</block>
  <block id="57499d66044710f028ac9242a56d0d40" category="admonition">リストア処理と比較すると、クローン処理の実行時間は HANA データベースのサイズに依存しません。ステップ 1 から 5 の実行時間は、非常に大規模なデータベースでも同様です。もちろん、大規模なHANAシステムでは回復に時間がかかります。</block>
  <block id="003bc5ab6365079680b2fbe17888500b" category="section-title">SnapCenter クローン削除ワークフロー</block>
  <block id="3b6518ffeb7de00f217894cdce7c0116" category="list-text">事前スクリプトを使用したHANAシステムのシャットダウン</block>
  <block id="aa33d20356faa28516ac31ce1b081d4a" category="list-text">HANA VM OS からディスクをアンマウントする</block>
  <block id="9df5aa1d28a5f574d579ee864f4f721c" category="list-text">HANA VM からディスクを削除する</block>
  <block id="ac15ee968c0572ecf37de43f64d1bbd8" category="list-text">ESX ホストからデータストアを削除する</block>
  <block id="fa517b0a284c691cebc761ee9d915f27" category="list-text">ストレージクローンの削除</block>
  <block id="3ec48eb55277a65c5a87692a53dbd888" category="paragraph">上映時間:11分</block>
  <block id="5e2536cee7fcd3ed9f17975073a9e76d" category="paragraph">クローン作成ワークフローは、目的のスナップショットを選択し、クローン・ボタンをクリックすると開始されます。</block>
  <block id="800d9d3a02e0c13ca6efbf109775e7c2" category="paragraph"><block ref="800d9d3a02e0c13ca6efbf109775e7c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a7ab974a3c79bafa7490418c833596df" category="paragraph">ターゲット ホストと SID を指定する必要があります。</block>
  <block id="264341d1c8f0d8e679be834c421ee8a2" category="paragraph"><block ref="264341d1c8f0d8e679be834c421ee8a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="07e7d1f9b1ea2251667d5f695d151297" category="paragraph"><block ref="07e7d1f9b1ea2251667d5f695d151297" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ea1d4131618eabe92205d1c5d678c9d6" category="paragraph">この例では、ポストスクリプトを使用して、ターゲットホストでリカバリを実行しています。</block>
  <block id="3d58a75535160119cd18bc66b98dd0f2" category="paragraph"><block ref="3d58a75535160119cd18bc66b98dd0f2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a7e71b24beb99abb07c133f87059da6e" category="paragraph">ワークフローが開始されると、 SnapCenter は選択した Snapshot に基づいてクローニングされたストレージユニットを作成します。</block>
  <block id="1012ce68d24186d682921d9a72fd98e8" category="paragraph"><block ref="1012ce68d24186d682921d9a72fd98e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18f0f15ba5bb77d7dfa37e9a1342b56f" category="paragraph">その後、 SnapCenter は、ターゲット HANA VM が実行されている ESX ホストに LUN (データストア)を接続します。</block>
  <block id="7ce9d385eba95a4277a1ea30ba376217" category="paragraph"><block ref="7ce9d385eba95a4277a1ea30ba376217" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5e20ceef3463e7156806c1f1e2a1315" category="paragraph">その後、新しいデータストア内の VMDK が HANA VM に追加されます。</block>
  <block id="71c304c35522bc0b087c60bf4a5beccc" category="paragraph"><block ref="71c304c35522bc0b087c60bf4a5beccc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3c4937bd2b15ba9b77fd7dfda862b07" category="paragraph">その後、 SnapCenter は新しいディスクを HANA Linux システムに設定してマウントします。</block>
  <block id="8d9a0bb87e2c43cda51aaa99491b263e" category="paragraph">次のスクリーンショットは、 SnapCenter によって実行されるジョブステップを示しています。</block>
  <block id="63ee7aa9d3adc91b53dadd299f2dbf0a" category="paragraph"><block ref="63ee7aa9d3adc91b53dadd299f2dbf0a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a848dfb1809e83afb63e913de43aa4d1" category="paragraph">で説明したように "前提条件" セクションでは、適切なクリーンアップを開始するには、 HANA ホストの SnapCenter spl サービスを「 systemctl restart spl 」コマンドを使用して再起動する必要があります。これは、ジョブが終了したときに行う必要があります。</block>
  <block id="98f4c0e499b34b6355cac72746f32aa4" category="paragraph">クローンワークフローが完了したら、リソース QFS をクリックして自動検出を開始できます。自動検出プロセスが完了すると、新しいストレージフットプリントがリソースの詳細ビューに一覧表示されます。</block>
  <block id="533a233d8148c4d75faa083ebb9d8d43" category="paragraph"><block ref="533a233d8148c4d75faa083ebb9d8d43" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdb03a861de182a381be87799b430837" category="paragraph">クローン削除ワークフローは、ソース HANA リソースでクローンを選択し、削除ボタンをクリックして開始します。</block>
  <block id="050509606ba7c5393e9a9686c3bd00f7" category="paragraph"><block ref="050509606ba7c5393e9a9686c3bd00f7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4ff8629d4d389f9c33ecd582c52c5105" category="paragraph">この例では、事前スクリプトを使用してターゲットHANAデータベースをシャットダウンしています。</block>
  <block id="f5fe6022b269aca8c0fb1781b5876f47" category="paragraph"><block ref="f5fe6022b269aca8c0fb1781b5876f47" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1b32269b7ab0ed1ae55e5e5641fcd17b" category="paragraph"><block ref="1b32269b7ab0ed1ae55e5e5641fcd17b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5335ae75980fe9bd5d8ba6f48cb7f7f" category="paragraph">で説明したように "前提条件" セクションでは、適切なクリーンアップを開始するには、 HANA ホストの SnapCenter spl サービスを「 systemctl restart spl 」コマンドを使用して再起動する必要があります。</block>
  <block id="087870f30d860ffeb01eac4f727d6656" category="section-title">SnapCenter for VMware vSphere プラグイン</block>
  <block id="5e9bba71efcdfbbed1dcf18802f8a227" category="sidebar">SnapCenter のリストア処理とリカバリ処理</block>
  <block id="743ac471396f82caf85eeeeac51160f8" category="sidebar">SAP システムの更新</block>
  <block id="3a499e89a73d22ba78550fb47f2e0c88" category="sidebar">追加情報とバージョン履歴</block>
  <block id="000c450c2b1b3fbe68fc0d1893fb42e7" category="list-text">追加のLUNのマルチパスを設定します。 <block ref="5dbefb7618e64c1782ebe16427fe0a08" category="inline-link-macro-rx"></block> 。</block>
  <block id="6089175223f03bbb436ea3677ff5d54e" category="paragraph"><block ref="6089175223f03bbb436ea3677ff5d54e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3082ebb564b0862e5b62f45e9c7f2918" category="paragraph"><block ref="3082ebb564b0862e5b62f45e9c7f2918" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8f84ce7565f171f38c52c9b754fcb5c9" category="list-text">Linux 論理ボリューム マネージャー (LVM) を使用した SAP HANA の単一ホストと複数ホスト</block>
  <block id="a235fb941d246b5d166648278909aa43" category="paragraph">次の出力は、SID=FC5 の LVM を使用した 2+1 のマルチホスト セットアップの例を示しています。</block>
  <block id="a4505c7307a89303eb52005835050cb8" category="paragraph">特定のLUNの最大スループットとして1000MB/秒を使用することを推奨します。アプリケーションがより多くのスループットを必要とする場合は、LUNストライピングを備えた複数のLUNを使用して、必要な帯域幅を提供する必要があります。このガイドでは、セクションで、Linux LVMをベースとしたSAP HANAの例を紹介します<block ref="5dbefb7618e64c1782ebe16427fe0a08" category="inline-link-macro-rx"></block>。</block>
  <block id="1b5ffe4ee0faee4001d5027bc6594589" category="list-text">セクションの説明に従って、HANAサーバーのワールドワイド名（WWN）を持つイニシエータグループ（igroup）を作成します。 <block ref="a30a5bc4156d5efb64f9f758389889ed" category="inline-xref-macro-rx"></block> 。</block>
  <block id="a955b97b5c01140f8cd767c62ee1a00b" category="inline-link-macro">単一ホスト設定</block>
  <block id="e9c76a6a9dcbd2703cd41df706ca9bad" category="inline-link-macro">複数ホストのセットアップ</block>
  <block id="ea651f4ee236b38f946242f8bfc0ac46" category="list-text">FC5 のシステム ホストに属するすべてのポートのイニシエーター グループを作成します。</block>
  <block id="9c1e9d82d3220658621f72dca978adb0" category="inline-image-macro">NetApp SnapMirror</block>
  <block id="71079bf31f8a65ae836b1f5bc217fd74" category="paragraph"><block ref="71079bf31f8a65ae836b1f5bc217fd74" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26a3afe8370c1799977f1b90c95aa439" category="inline-image-macro">NetAppMetroClusterIP</block>
  <block id="e37aeb2676a6a4bb6829e2a314fefcdf" category="paragraph"><block ref="e37aeb2676a6a4bb6829e2a314fefcdf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18e54879f416d5c92151dba61aa9b093" category="paragraph"><block ref="18e54879f416d5c92151dba61aa9b093" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a46e5bc27436967555509cdbd754e5e7" category="paragraph"><block ref="a46e5bc27436967555509cdbd754e5e7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="469f70c8bf9e7345451574deea79f80b" category="paragraph"><block ref="469f70c8bf9e7345451574deea79f80b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cac1665e63972e4a12b392296c7ff08b" category="sidebar">複数のホスト</block>
  <block id="712c708011e4893134a7a63c8e632e86" category="list-text"><block ref="712c708011e4893134a7a63c8e632e86" category="inline-link-macro-rx"></block></block>
  <block id="9e073a57f7a3e69defc613fe0d2d690f" category="list-text"><block ref="9e073a57f7a3e69defc613fe0d2d690f" category="inline-link-macro-rx"></block></block>
  <block id="0a5fce897a9b356de9fbfc0e516c7392" category="list-text"><block ref="0a5fce897a9b356de9fbfc0e516c7392" category="inline-link-macro-rx"></block></block>
  <block id="a87cc9a0cddc926dc2ba557a1f1d1c5a" category="list-text"><block ref="a87cc9a0cddc926dc2ba557a1f1d1c5a" category="inline-link-macro-rx"></block></block>
  <block id="029173fd9d282281adb302f9da539864" category="paragraph">詳細については、を参照してください<block ref="b2c2dfcc705383497470185015318f31" category="inline-link-rx"></block>。</block>
  <block id="186ddcef8e98235019fb2aee09ca9f46" category="paragraph">必要なマウント ポイント ディレクトリを作成し、すべてのワーカー ホストとスタンバイ ホストの権限を設定します。</block>
  <block id="c146329034b2ebdec62a408ff3f60d2f" category="paragraph">必要なマウント ポイント ディレクトリを作成し、データベース ホストの権限を設定します。</block>
  <block id="fe478a61398a90825d87acd2cd34cdd6" category="paragraph">システム起動中にファイルシステムをマウントするには、 <block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block>設定ファイルに必要なファイルシステムを追加し、 <block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block>設定ファイル:</block>
  <block id="3ad4a334d4711034cac902d4b196cc7e" category="paragraph">ストレージを仮想マシン（ VM ）に接続する方法はいくつかあります。推奨される方法は、ストレージボリュームと NFS をゲストオペレーティングシステムから直接接続することです。このオプションについては、を<block ref="d1b4413cecd0416bbd7ac40af6b252af" category="inline-link-macro-rx"></block>参照してください。</block>
  <block id="060146aab7c07d9cdf422a833f98f9bf" category="list-text">セクションの説明に従って、アグリゲート内にボリュームとLUNを作成して構成します。 <block ref="4b84b52ba19c39eb63ab51ebf1aaa7c3" category="inline-link-macro-rx"></block>単一のホストまたはセクション内<block ref="85d7f2291f94945c987292fb88d1271c" category="inline-link-macro-rx"></block></block>
  <block id="67ef18ec0407e7911a4fd5ea0f9c8292" category="section-title">ディスクシェルフ接続</block>
  <block id="7f35619142e0b236607c3f699395261d" category="section-title">NVMeベースのディスクシェルフ</block>
  <block id="da937f71706b325fe054a66a403e7e70" category="paragraph">次の表にリストされているボリューム オプションは、SAP HANA に使用されるすべてのボリュームで検証および設定する必要があります。</block>
  <block id="3895d8c4d4623881a3a460da07e7b347" category="list-text"><block ref="3895d8c4d4623881a3a460da07e7b347" category="inline-link-macro-rx"></block></block>
  <block id="b46c19227accdcf131acd89ec837d719" category="list-text">の説明に従って、正しいディスク・シェルフ構成を確認します<block ref="03b6386ad6a1dc10d9baa30820f92e6f" category="inline-xref-macro-rx"></block>。</block>
  <block id="5fd1fe4406610035d26bddd7285e2208" category="list-text">セクションの説明に従って、アグリゲート内にボリュームとLUNを作成して構成します。 <block ref="5cdae6b5e4c2b7c1786a252c1b2db361" category="inline-link-macro-rx"></block>単一のホストまたはセクション内<block ref="576df1336ee1cb2a072bb64be834429d" category="inline-link-macro-rx"></block>複数のホストの場合</block>
  <block id="fe19c797763ffd518a9713847adadc9f" category="section-title">NVMeディスクシェルフ</block>
</blocks>